"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const rd=require("path"),pe=require("vscode");function U(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function K(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(t,i);return new o}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var er={},id={get exports(){return er},set exports(e){er=e}},Ss={},Rs={},Ts={},ni={},od={get exports(){return ni},set exports(e){ni=e}},Es={},ks={},Ti={},Ei={},pt={},Ea;function xr(){if(Ea)return pt;Ea=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.stringArray=pt.array=pt.func=pt.error=pt.number=pt.string=pt.boolean=void 0;function e(a){return a===!0||a===!1}pt.boolean=e;function t(a){return typeof a=="string"||a instanceof String}pt.string=t;function n(a){return typeof a=="number"||a instanceof Number}pt.number=n;function r(a){return a instanceof Error}pt.error=r;function i(a){return typeof a=="function"}pt.func=i;function o(a){return Array.isArray(a)}pt.array=o;function s(a){return o(a)&&a.every(u=>t(u))}return pt.stringArray=s,pt}var ka;function Au(){return ka||(ka=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=xr();var n;(function(D){D.ParseError=-32700,D.InvalidRequest=-32600,D.MethodNotFound=-32601,D.InvalidParams=-32602,D.InternalError=-32603,D.jsonrpcReservedErrorRangeStart=-32099,D.serverErrorStart=-32099,D.MessageWriteError=-32099,D.MessageReadError=-32098,D.PendingResponseRejected=-32097,D.ConnectionInactive=-32096,D.ServerNotInitialized=-32002,D.UnknownErrorCode=-32001,D.jsonrpcReservedErrorRangeEnd=-32e3,D.serverErrorEnd=-32e3})(n=e.ErrorCodes||(e.ErrorCodes={}));class r extends Error{constructor(R,B,X){super(B),this.code=t.number(R)?R:n.UnknownErrorCode,this.data=X,Object.setPrototypeOf(this,r.prototype)}toJson(){const R={code:this.code,message:this.message};return this.data!==void 0&&(R.data=this.data),R}}e.ResponseError=r;class i{constructor(R){this.kind=R}static is(R){return R===i.auto||R===i.byName||R===i.byPosition}toString(){return this.kind}}e.ParameterStructures=i,i.auto=new i("auto"),i.byPosition=new i("byPosition"),i.byName=new i("byName");class o{constructor(R,B){this.method=R,this.numberOfParams=B}get parameterStructures(){return i.auto}}e.AbstractMessageSignature=o;class s extends o{constructor(R){super(R,0)}}e.RequestType0=s;class a extends o{constructor(R,B=i.auto){super(R,1),this._parameterStructures=B}get parameterStructures(){return this._parameterStructures}}e.RequestType=a;class u extends o{constructor(R,B=i.auto){super(R,1),this._parameterStructures=B}get parameterStructures(){return this._parameterStructures}}e.RequestType1=u;class c extends o{constructor(R){super(R,2)}}e.RequestType2=c;class f extends o{constructor(R){super(R,3)}}e.RequestType3=f;class g extends o{constructor(R){super(R,4)}}e.RequestType4=g;class d extends o{constructor(R){super(R,5)}}e.RequestType5=d;class h extends o{constructor(R){super(R,6)}}e.RequestType6=h;class m extends o{constructor(R){super(R,7)}}e.RequestType7=m;class S extends o{constructor(R){super(R,8)}}e.RequestType8=S;class I extends o{constructor(R){super(R,9)}}e.RequestType9=I;class W extends o{constructor(R,B=i.auto){super(R,1),this._parameterStructures=B}get parameterStructures(){return this._parameterStructures}}e.NotificationType=W;class z extends o{constructor(R){super(R,0)}}e.NotificationType0=z;class F extends o{constructor(R,B=i.auto){super(R,1),this._parameterStructures=B}get parameterStructures(){return this._parameterStructures}}e.NotificationType1=F;class P extends o{constructor(R){super(R,2)}}e.NotificationType2=P;class L extends o{constructor(R){super(R,3)}}e.NotificationType3=L;class G extends o{constructor(R){super(R,4)}}e.NotificationType4=G;class H extends o{constructor(R){super(R,5)}}e.NotificationType5=H;class Y extends o{constructor(R){super(R,6)}}e.NotificationType6=Y;class Q extends o{constructor(R){super(R,7)}}e.NotificationType7=Q;class ye extends o{constructor(R){super(R,8)}}e.NotificationType8=ye;class E extends o{constructor(R){super(R,9)}}e.NotificationType9=E,function(D){function R(he){const te=he;return te&&t.string(te.method)&&(t.string(te.id)||t.number(te.id))}D.isRequest=R;function B(he){const te=he;return te&&t.string(te.method)&&he.id===void 0}D.isNotification=B;function X(he){const te=he;return te&&(te.result!==void 0||!!te.error)&&(t.string(te.id)||t.number(te.id)||te.id===null)}D.isResponse=X}(e.Message||(e.Message={}))}(Ei)),Ei}var ki={},Pa;function Mu(){return Pa||(Pa=1,function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var n;(function(o){o.None=0,o.First=1,o.AsOld=o.First,o.Last=2,o.AsNew=o.Last})(n=e.Touch||(e.Touch={}));class r{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var s;return(s=this._head)==null?void 0:s.value}get last(){var s;return(s=this._tail)==null?void 0:s.value}has(s){return this._map.has(s)}get(s,a=n.None){const u=this._map.get(s);if(u)return a!==n.None&&this.touch(u,a),u.value}set(s,a,u=n.None){let c=this._map.get(s);if(c)c.value=a,u!==n.None&&this.touch(c,u);else{switch(c={key:s,value:a,next:void 0,previous:void 0},u){case n.None:this.addItemLast(c);break;case n.First:this.addItemFirst(c);break;case n.Last:this.addItemLast(c);break;default:this.addItemLast(c);break}this._map.set(s,c),this._size++}return this}delete(s){return!!this.remove(s)}remove(s){const a=this._map.get(s);if(a)return this._map.delete(s),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const s=this._head;return this._map.delete(s.key),this.removeItem(s),this._size--,s.value}forEach(s,a){const u=this._state;let c=this._head;for(;c;){if(a?s.bind(a)(c.value,c.key,this):s(c.value,c.key,this),this._state!==u)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){const s=this._state;let a=this._head;const u={[Symbol.iterator]:()=>u,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:a.key,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return u}values(){const s=this._state;let a=this._head;const u={[Symbol.iterator]:()=>u,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:a.value,done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return u}entries(){const s=this._state;let a=this._head;const u={[Symbol.iterator]:()=>u,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const c={value:[a.key,a.value],done:!1};return a=a.next,c}else return{value:void 0,done:!0}}};return u}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(s){if(s>=this.size)return;if(s===0){this.clear();return}let a=this._head,u=this.size;for(;a&&u>s;)this._map.delete(a.key),a=a.next,u--;this._head=a,this._size=u,a&&(a.previous=void 0),this._state++}addItemFirst(s){if(!this._head&&!this._tail)this._tail=s;else if(this._head)s.next=this._head,this._head.previous=s;else throw new Error("Invalid list");this._head=s,this._state++}addItemLast(s){if(!this._head&&!this._tail)this._head=s;else if(this._tail)s.previous=this._tail,this._tail.next=s;else throw new Error("Invalid list");this._tail=s,this._state++}removeItem(s){if(s===this._head&&s===this._tail)this._head=void 0,this._tail=void 0;else if(s===this._head){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this._head=s.next}else if(s===this._tail){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this._tail=s.previous}else{const a=s.next,u=s.previous;if(!a||!u)throw new Error("Invalid list");a.previous=u,u.next=a}s.next=void 0,s.previous=void 0,this._state++}touch(s,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==n.First&&a!==n.Last)){if(a===n.First){if(s===this._head)return;const u=s.next,c=s.previous;s===this._tail?(c.next=void 0,this._tail=c):(u.previous=c,c.next=u),s.previous=void 0,s.next=this._head,this._head.previous=s,this._head=s,this._state++}else if(a===n.Last){if(s===this._tail)return;const u=s.next,c=s.previous;s===this._head?(u.previous=void 0,this._head=u):(u.previous=c,c.next=u),s.next=void 0,s.previous=this._tail,this._tail.next=s,this._tail=s,this._state++}}}toJSON(){const s=[];return this.forEach((a,u)=>{s.push([u,a])}),s}fromJSON(s){this.clear();for(const[a,u]of s)this.set(a,u)}}e.LinkedMap=r;class i extends r{constructor(s,a=1){super(),this._limit=s,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(s){this._limit=s,this.checkTrim()}get ratio(){return this._ratio}set ratio(s){this._ratio=Math.min(Math.max(0,s),1),this.checkTrim()}get(s,a=n.AsNew){return super.get(s,a)}peek(s){return super.get(s,n.None)}set(s,a){return super.set(s,a,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=i}(ki)),ki}var Pi={},Oa;function sd(){return Oa||(Oa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,function(t){function n(r){return{dispose:r}}t.create=n}(e.Disposable||(e.Disposable={}))}(Pi)),Pi}var Oi={},Vr={},qa;function pn(){if(qa)return Vr;qa=1,Object.defineProperty(Vr,"__esModule",{value:!0});let e;function t(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}return function(n){function r(i){if(i===void 0)throw new Error("No runtime abstraction layer provided");e=i}n.install=r}(t||(t={})),Vr.default=t,Vr}var $a;function Wr(){return $a||($a=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=pn();(function(i){const o={dispose(){}};i.None=function(){return o}})(e.Event||(e.Event={}));class n{add(o,s=null,a){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(o),this._contexts.push(s),Array.isArray(a)&&a.push({dispose:()=>this.remove(o,s)})}remove(o,s=null){if(!this._callbacks)return;let a=!1;for(let u=0,c=this._callbacks.length;u<c;u++)if(this._callbacks[u]===o)if(this._contexts[u]===s){this._callbacks.splice(u,1),this._contexts.splice(u,1);return}else a=!0;if(a)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...o){if(!this._callbacks)return[];const s=[],a=this._callbacks.slice(0),u=this._contexts.slice(0);for(let c=0,f=a.length;c<f;c++)try{s.push(a[c].apply(u[c],o))}catch(g){(0,t.default)().console.error(g)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(o){this._options=o}get event(){return this._event||(this._event=(o,s,a)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(o,s);const u={dispose:()=>{this._callbacks&&(this._callbacks.remove(o,s),u.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(a)&&a.push(u),u}),this._event}fire(o){this._callbacks&&this._callbacks.invoke.call(this._callbacks,o)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=r,r._noop=function(){}}(Oi)),Oi}var qi={},Aa;function Ps(){return Aa||(Aa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=pn(),n=xr(),r=Wr();var i;(function(u){u.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),u.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function c(f){const g=f;return g&&(g===u.None||g===u.Cancelled||n.boolean(g.isCancellationRequested)&&!!g.onCancellationRequested)}u.is=c})(i=e.CancellationToken||(e.CancellationToken={}));const o=Object.freeze(function(u,c){const f=(0,t.default)().timer.setTimeout(u.bind(c),0);return{dispose(){f.dispose()}}});class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=i.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=i.None}}e.CancellationTokenSource=a}(qi)),qi}var en={},Ma;function ad(){if(Ma)return en;Ma=1,Object.defineProperty(en,"__esModule",{value:!0}),en.SharedArrayReceiverStrategy=en.SharedArraySenderStrategy=void 0;const e=Ps();var t;(function(s){s.Continue=0,s.Cancelled=1})(t||(t={}));class n{constructor(){this.buffers=new Map}enableCancellation(a){if(a.id===null)return;const u=new SharedArrayBuffer(4),c=new Int32Array(u,0,1);c[0]=t.Continue,this.buffers.set(a.id,u),a.$cancellationData=u}async sendCancellation(a,u){const c=this.buffers.get(u);if(c===void 0)return;const f=new Int32Array(c,0,1);Atomics.store(f,0,t.Cancelled)}cleanup(a){this.buffers.delete(a)}dispose(){this.buffers.clear()}}en.SharedArraySenderStrategy=n;class r{constructor(a){this.data=new Int32Array(a,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===t.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class i{constructor(a){this.token=new r(a)}cancel(){}dispose(){}}class o{constructor(){this.kind="request"}createCancellationTokenSource(a){const u=a.$cancellationData;return u===void 0?new e.CancellationTokenSource:new i(u)}}return en.SharedArrayReceiverStrategy=o,en}var $i={},Nn={},Ia;function Iu(){if(Ia)return Nn;Ia=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.Semaphore=void 0;const e=pn();class t{constructor(r=1){if(r<=0)throw new Error("Capacity must be greater than 0");this._capacity=r,this._active=0,this._waiting=[]}lock(r){return new Promise((i,o)=>{this._waiting.push({thunk:r,resolve:i,reject:o}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,e.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const r=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const i=r.thunk();i instanceof Promise?i.then(o=>{this._active--,r.resolve(o),this.runNext()},o=>{this._active--,r.reject(o),this.runNext()}):(this._active--,r.resolve(i),this.runNext())}catch(i){this._active--,r.reject(i),this.runNext()}}}return Nn.Semaphore=t,Nn}var Na;function ud(){return Na||(Na=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=pn(),n=xr(),r=Wr(),i=Iu();(function(u){function c(f){let g=f;return g&&n.func(g.listen)&&n.func(g.dispose)&&n.func(g.onError)&&n.func(g.onClose)&&n.func(g.onPartialMessage)}u.is=c})(e.MessageReader||(e.MessageReader={}));class o{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(c){this.errorEmitter.fire(this.asError(c))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(c){this.partialMessageEmitter.fire(c)}asError(c){return c instanceof Error?c:new Error(`Reader received error. Reason: ${n.string(c.message)?c.message:"unknown"}`)}}e.AbstractMessageReader=o;var s;(function(u){function c(f){let g,d;const h=new Map;let m;const S=new Map;if(f===void 0||typeof f=="string")g=f??"utf-8";else{if(g=f.charset??"utf-8",f.contentDecoder!==void 0&&(d=f.contentDecoder,h.set(d.name,d)),f.contentDecoders!==void 0)for(const I of f.contentDecoders)h.set(I.name,I);if(f.contentTypeDecoder!==void 0&&(m=f.contentTypeDecoder,S.set(m.name,m)),f.contentTypeDecoders!==void 0)for(const I of f.contentTypeDecoders)S.set(I.name,I)}return m===void 0&&(m=(0,t.default)().applicationJson.decoder,S.set(m.name,m)),{charset:g,contentDecoder:d,contentDecoders:h,contentTypeDecoder:m,contentTypeDecoders:S}}u.fromOptions=c})(s||(s={}));class a extends o{constructor(c,f){super(),this.readable=c,this.options=s.fromOptions(f),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new i.Semaphore(1)}set partialMessageTimeout(c){this._partialMessageTimeout=c}get partialMessageTimeout(){return this._partialMessageTimeout}listen(c){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=c;const f=this.readable.onData(g=>{this.onData(g)});return this.readable.onError(g=>this.fireError(g)),this.readable.onClose(()=>this.fireClose()),f}onData(c){for(this.buffer.append(c);;){if(this.nextMessageLength===-1){const g=this.buffer.tryReadHeaders(!0);if(!g)return;const d=g.get("content-length");if(!d){this.fireError(new Error("Header must provide a Content-Length property."));return}const h=parseInt(d);if(isNaN(h)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=h}const f=this.buffer.tryReadBody(this.nextMessageLength);if(f===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const g=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(f):f,d=await this.options.contentTypeDecoder.decode(g,this.options);this.callback(d)}).catch(g=>{this.fireError(g)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((c,f)=>{this.partialMessageTimer=void 0,c===this.messageToken&&(this.firePartialMessage({messageToken:c,waitingTime:f}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}e.ReadableStreamMessageReader=a}($i)),$i}var Ai={},ja;function cd(){return ja||(ja=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=pn(),n=xr(),r=Iu(),i=Wr(),o="Content-Length: ",s=`\r
`;(function(f){function g(d){let h=d;return h&&n.func(h.dispose)&&n.func(h.onClose)&&n.func(h.onError)&&n.func(h.write)}f.is=g})(e.MessageWriter||(e.MessageWriter={}));class a{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(g,d,h){this.errorEmitter.fire([this.asError(g),d,h])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(g){return g instanceof Error?g:new Error(`Writer received error. Reason: ${n.string(g.message)?g.message:"unknown"}`)}}e.AbstractMessageWriter=a;var u;(function(f){function g(d){return d===void 0||typeof d=="string"?{charset:d??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:d.charset??"utf-8",contentEncoder:d.contentEncoder,contentTypeEncoder:d.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}f.fromOptions=g})(u||(u={}));class c extends a{constructor(g,d){super(),this.writable=g,this.options=u.fromOptions(d),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(h=>this.fireError(h)),this.writable.onClose(()=>this.fireClose())}async write(g){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(g,this.options).then(h=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(h):h).then(h=>{const m=[];return m.push(o,h.byteLength.toString(),s),m.push(s),this.doWrite(g,m,h)},h=>{throw this.fireError(h),h}))}async doWrite(g,d,h){try{return await this.writable.write(d.join(""),"ascii"),this.writable.write(h)}catch(m){return this.handleError(m,g),Promise.reject(m)}}handleError(g,d){this.errorCount++,this.fireError(g,d,this.errorCount)}end(){this.writable.end()}}e.WriteableStreamMessageWriter=c}(Ai)),Ai}var jn={},La;function ld(){if(La)return jn;La=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.AbstractMessageBuffer=void 0;const e=13,t=10,n=`\r
`;class r{constructor(o="utf-8"){this._encoding=o,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(o){const s=typeof o=="string"?this.fromString(o,this._encoding):o;this._chunks.push(s),this._totalLength+=s.byteLength}tryReadHeaders(o=!1){if(this._chunks.length===0)return;let s=0,a=0,u=0,c=0;e:for(;a<this._chunks.length;){const h=this._chunks[a];for(u=0;u<h.length;){switch(h[u]){case e:switch(s){case 0:s=1;break;case 2:s=3;break;default:s=0}break;case t:switch(s){case 1:s=2;break;case 3:s=4,u++;break e;default:s=0}break;default:s=0}u++}c+=h.byteLength,a++}if(s!==4)return;const f=this._read(c+u),g=new Map,d=this.toString(f,"ascii").split(n);if(d.length<2)return g;for(let h=0;h<d.length-2;h++){const m=d[h],S=m.indexOf(":");if(S===-1)throw new Error("Message header must separate key and value using :");const I=m.substr(0,S),W=m.substr(S+1).trim();g.set(o?I.toLowerCase():I,W)}return g}tryReadBody(o){if(!(this._totalLength<o))return this._read(o)}get numberOfBytes(){return this._totalLength}_read(o){if(o===0)return this.emptyBuffer();if(o>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===o){const c=this._chunks[0];return this._chunks.shift(),this._totalLength-=o,this.asNative(c)}if(this._chunks[0].byteLength>o){const c=this._chunks[0],f=this.asNative(c,o);return this._chunks[0]=c.slice(o),this._totalLength-=o,f}const s=this.allocNative(o);let a=0,u=0;for(;o>0;){const c=this._chunks[u];if(c.byteLength>o){const f=c.slice(0,o);s.set(f,a),a+=o,this._chunks[u]=c.slice(o),this._totalLength-=o,o-=o}else s.set(c,a),a+=c.byteLength,this._chunks.shift(),this._totalLength-=c.byteLength,o-=c.byteLength}return s}}return jn.AbstractMessageBuffer=r,jn}var Mi={},Ba;function dd(){return Ba||(Ba=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=pn(),n=xr(),r=Au(),i=Mu(),o=Wr(),s=Ps();var a;(function(E){E.type=new r.NotificationType("$/cancelRequest")})(a||(a={}));var u;(function(E){function D(R){return typeof R=="string"||typeof R=="number"}E.is=D})(u=e.ProgressToken||(e.ProgressToken={}));var c;(function(E){E.type=new r.NotificationType("$/progress")})(c||(c={}));class f{constructor(){}}e.ProgressType=f;var g;(function(E){function D(R){return n.func(R)}E.is=D})(g||(g={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var d;(function(E){E[E.Off=0]="Off",E[E.Messages=1]="Messages",E[E.Compact=2]="Compact",E[E.Verbose=3]="Verbose"})(d=e.Trace||(e.Trace={})),function(E){E.Off="off",E.Messages="messages",E.Compact="compact",E.Verbose="verbose"}(e.TraceValues||(e.TraceValues={})),function(E){function D(B){if(!n.string(B))return E.Off;switch(B=B.toLowerCase(),B){case"off":return E.Off;case"messages":return E.Messages;case"compact":return E.Compact;case"verbose":return E.Verbose;default:return E.Off}}E.fromString=D;function R(B){switch(B){case E.Off:return"off";case E.Messages:return"messages";case E.Compact:return"compact";case E.Verbose:return"verbose";default:return"off"}}E.toString=R}(d=e.Trace||(e.Trace={}));var h;(function(E){E.Text="text",E.JSON="json"})(h=e.TraceFormat||(e.TraceFormat={})),function(E){function D(R){return n.string(R)?(R=R.toLowerCase(),R==="json"?E.JSON:E.Text):E.Text}E.fromString=D}(h=e.TraceFormat||(e.TraceFormat={}));var m;(function(E){E.type=new r.NotificationType("$/setTrace")})(m=e.SetTraceNotification||(e.SetTraceNotification={}));var S;(function(E){E.type=new r.NotificationType("$/logTrace")})(S=e.LogTraceNotification||(e.LogTraceNotification={}));var I;(function(E){E[E.Closed=1]="Closed",E[E.Disposed=2]="Disposed",E[E.AlreadyListening=3]="AlreadyListening"})(I=e.ConnectionErrors||(e.ConnectionErrors={}));class W extends Error{constructor(D,R){super(R),this.code=D,Object.setPrototypeOf(this,W.prototype)}}e.ConnectionError=W;var z;(function(E){function D(R){const B=R;return B&&n.func(B.cancelUndispatched)}E.is=D})(z=e.ConnectionStrategy||(e.ConnectionStrategy={}));var F;(function(E){function D(R){const B=R;return B&&(B.kind===void 0||B.kind==="id")&&n.func(B.createCancellationTokenSource)&&(B.dispose===void 0||n.func(B.dispose))}E.is=D})(F=e.IdCancellationReceiverStrategy||(e.IdCancellationReceiverStrategy={}));var P;(function(E){function D(R){const B=R;return B&&B.kind==="request"&&n.func(B.createCancellationTokenSource)&&(B.dispose===void 0||n.func(B.dispose))}E.is=D})(P=e.RequestCancellationReceiverStrategy||(e.RequestCancellationReceiverStrategy={}));var L;(function(E){E.Message=Object.freeze({createCancellationTokenSource(R){return new s.CancellationTokenSource}});function D(R){return F.is(R)||P.is(R)}E.is=D})(L=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={}));var G;(function(E){E.Message=Object.freeze({sendCancellation(R,B){return R.sendNotification(a.type,{id:B})},cleanup(R){}});function D(R){const B=R;return B&&n.func(B.sendCancellation)&&n.func(B.cleanup)}E.is=D})(G=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={}));var H;(function(E){E.Message=Object.freeze({receiver:L.Message,sender:G.Message});function D(R){const B=R;return B&&L.is(B.receiver)&&G.is(B.sender)}E.is=D})(H=e.CancellationStrategy||(e.CancellationStrategy={}));var Y;(function(E){function D(R){const B=R;return B&&n.func(B.handleMessage)}E.is=D})(Y=e.MessageStrategy||(e.MessageStrategy={})),function(E){function D(R){const B=R;return B&&(H.is(B.cancellationStrategy)||z.is(B.connectionStrategy)||Y.is(B.messageStrategy))}E.is=D}(e.ConnectionOptions||(e.ConnectionOptions={}));var Q;(function(E){E[E.New=1]="New",E[E.Listening=2]="Listening",E[E.Closed=3]="Closed",E[E.Disposed=4]="Disposed"})(Q||(Q={}));function ye(E,D,R,B){const X=R!==void 0?R:e.NullLogger;let he=0,te=0,me=0;const ke="2.0";let nt;const Ct=new Map;let x;const De=new Map,be=new Map;let Se,Fe=new i.LinkedMap,Ne=new Map,ge=new Set,Pe=new Map,le=d.Off,Ce=h.Text,Re,M=Q.New;const Oe=new o.Emitter,Ue=new o.Emitter,Ae=new o.Emitter,Ge=new o.Emitter,ae=new o.Emitter,y=B&&B.cancellationStrategy?B.cancellationStrategy:H.Message;function b(v){if(v===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+v.toString()}function _(v){return v===null?"res-unknown-"+(++me).toString():"res-"+v.toString()}function k(){return"not-"+(++te).toString()}function O(v,N){r.Message.isRequest(N)?v.set(b(N.id),N):r.Message.isResponse(N)?v.set(_(N.id),N):v.set(k(),N)}function A(v){}function ve(){return M===Q.Listening}function de(){return M===Q.Closed}function ne(){return M===Q.Disposed}function we(){(M===Q.New||M===Q.Listening)&&(M=Q.Closed,Ue.fire(void 0))}function ce(v){Oe.fire([v,void 0,void 0])}function T(v){Oe.fire(v)}E.onClose(we),E.onError(ce),D.onClose(we),D.onError(T);function j(){Se||Fe.size===0||(Se=(0,t.default)().timer.setImmediate(()=>{Se=void 0,se()}))}function V(v){r.Message.isRequest(v)?Z(v):r.Message.isNotification(v)?Ze(v):r.Message.isResponse(v)?fe(v):gt(v)}function se(){if(Fe.size===0)return;const v=Fe.shift();try{const N=B==null?void 0:B.messageStrategy;Y.is(N)?N.handleMessage(v,V):V(v)}finally{j()}}const ie=v=>{try{if(r.Message.isNotification(v)&&v.method===a.type.method){const N=v.params.id,ee=b(N),ue=Fe.get(ee);if(r.Message.isRequest(ue)){const Ve=B==null?void 0:B.connectionStrategy,Qe=Ve&&Ve.cancelUndispatched?Ve.cancelUndispatched(ue,A):void 0;if(Qe&&(Qe.error!==void 0||Qe.result!==void 0)){Fe.delete(ee),Pe.delete(N),Qe.id=ue.id,je(Qe,v.method,Date.now()),D.write(Qe).catch(()=>X.error("Sending response for canceled message failed."));return}}const Je=Pe.get(N);if(Je!==void 0){Je.cancel(),et(v);return}else ge.add(N)}O(Fe,v)}finally{j()}};function Z(v){if(ne())return;function N(C,$,J){const Ie={jsonrpc:ke,id:v.id};C instanceof r.ResponseError?Ie.error=C.toJson():Ie.result=C===void 0?null:C,je(Ie,$,J),D.write(Ie).catch(()=>X.error("Sending response failed."))}function ee(C,$,J){const Ie={jsonrpc:ke,id:v.id,error:C.toJson()};je(Ie,$,J),D.write(Ie).catch(()=>X.error("Sending response failed."))}function ue(C,$,J){C===void 0&&(C=null);const Ie={jsonrpc:ke,id:v.id,result:C};je(Ie,$,J),D.write(Ie).catch(()=>X.error("Sending response failed."))}He(v);const Je=Ct.get(v.method);let Ve,Qe;Je&&(Ve=Je.type,Qe=Je.handler);const l=Date.now();if(Qe||nt){const C=v.id??String(Date.now()),$=F.is(y.receiver)?y.receiver.createCancellationTokenSource(C):y.receiver.createCancellationTokenSource(v);v.id!==null&&ge.has(v.id)&&$.cancel(),v.id!==null&&Pe.set(C,$);try{let J;if(Qe)if(v.params===void 0){if(Ve!==void 0&&Ve.numberOfParams!==0){ee(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${v.method} defines ${Ve.numberOfParams} params but received none.`),v.method,l);return}J=Qe($.token)}else if(Array.isArray(v.params)){if(Ve!==void 0&&Ve.parameterStructures===r.ParameterStructures.byName){ee(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${v.method} defines parameters by name but received parameters by position`),v.method,l);return}J=Qe(...v.params,$.token)}else{if(Ve!==void 0&&Ve.parameterStructures===r.ParameterStructures.byPosition){ee(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${v.method} defines parameters by position but received parameters by name`),v.method,l);return}J=Qe(v.params,$.token)}else nt&&(J=nt(v.method,v.params,$.token));const Ie=J;J?Ie.then?Ie.then(Le=>{Pe.delete(C),N(Le,v.method,l)},Le=>{Pe.delete(C),Le instanceof r.ResponseError?ee(Le,v.method,l):Le&&n.string(Le.message)?ee(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${v.method} failed with message: ${Le.message}`),v.method,l):ee(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${v.method} failed unexpectedly without providing any details.`),v.method,l)}):(Pe.delete(C),N(J,v.method,l)):(Pe.delete(C),ue(J,v.method,l))}catch(J){Pe.delete(C),J instanceof r.ResponseError?N(J,v.method,l):J&&n.string(J.message)?ee(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${v.method} failed with message: ${J.message}`),v.method,l):ee(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${v.method} failed unexpectedly without providing any details.`),v.method,l)}}else ee(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${v.method}`),v.method,l)}function fe(v){if(!ne())if(v.id===null)v.error?X.error(`Received response message without id: Error is: 
${JSON.stringify(v.error,void 0,4)}`):X.error("Received response message without id. No further error information provided.");else{const N=v.id,ee=Ne.get(N);if(Dt(v,ee),ee!==void 0){Ne.delete(N);try{if(v.error){const ue=v.error;ee.reject(new r.ResponseError(ue.code,ue.message,ue.data))}else if(v.result!==void 0)ee.resolve(v.result);else throw new Error("Should never happen.")}catch(ue){ue.message?X.error(`Response handler '${ee.method}' failed with message: ${ue.message}`):X.error(`Response handler '${ee.method}' failed unexpectedly.`)}}}}function Ze(v){if(ne())return;let N,ee;if(v.method===a.type.method){const ue=v.params.id;ge.delete(ue),et(v);return}else{const ue=De.get(v.method);ue&&(ee=ue.handler,N=ue.type)}if(ee||x)try{if(et(v),ee)if(v.params===void 0)N!==void 0&&N.numberOfParams!==0&&N.parameterStructures!==r.ParameterStructures.byName&&X.error(`Notification ${v.method} defines ${N.numberOfParams} params but received none.`),ee();else if(Array.isArray(v.params)){const ue=v.params;v.method===c.type.method&&ue.length===2&&u.is(ue[0])?ee({token:ue[0],value:ue[1]}):(N!==void 0&&(N.parameterStructures===r.ParameterStructures.byName&&X.error(`Notification ${v.method} defines parameters by name but received parameters by position`),N.numberOfParams!==v.params.length&&X.error(`Notification ${v.method} defines ${N.numberOfParams} params but received ${ue.length} arguments`)),ee(...ue))}else N!==void 0&&N.parameterStructures===r.ParameterStructures.byPosition&&X.error(`Notification ${v.method} defines parameters by position but received parameters by name`),ee(v.params);else x&&x(v.method,v.params)}catch(ue){ue.message?X.error(`Notification handler '${v.method}' failed with message: ${ue.message}`):X.error(`Notification handler '${v.method}' failed unexpectedly.`)}else Ae.fire(v)}function gt(v){if(!v){X.error("Received empty message.");return}X.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(v,null,4)}`);const N=v;if(n.string(N.id)||n.number(N.id)){const ee=N.id,ue=Ne.get(ee);ue&&ue.reject(new Error("The received response has neither a result nor an error property."))}}function p(v){if(v!=null)switch(le){case d.Verbose:return JSON.stringify(v,null,4);case d.Compact:return JSON.stringify(v);default:return}}function q(v){if(!(le===d.Off||!Re))if(Ce===h.Text){let N;(le===d.Verbose||le===d.Compact)&&v.params&&(N=`Params: ${p(v.params)}

`),Re.log(`Sending request '${v.method} - (${v.id})'.`,N)}else ht("send-request",v)}function oe(v){if(!(le===d.Off||!Re))if(Ce===h.Text){let N;(le===d.Verbose||le===d.Compact)&&(v.params?N=`Params: ${p(v.params)}

`:N=`No parameters provided.

`),Re.log(`Sending notification '${v.method}'.`,N)}else ht("send-notification",v)}function je(v,N,ee){if(!(le===d.Off||!Re))if(Ce===h.Text){let ue;(le===d.Verbose||le===d.Compact)&&(v.error&&v.error.data?ue=`Error data: ${p(v.error.data)}

`:v.result?ue=`Result: ${p(v.result)}

`:v.error===void 0&&(ue=`No result returned.

`)),Re.log(`Sending response '${N} - (${v.id})'. Processing request took ${Date.now()-ee}ms`,ue)}else ht("send-response",v)}function He(v){if(!(le===d.Off||!Re))if(Ce===h.Text){let N;(le===d.Verbose||le===d.Compact)&&v.params&&(N=`Params: ${p(v.params)}

`),Re.log(`Received request '${v.method} - (${v.id})'.`,N)}else ht("receive-request",v)}function et(v){if(!(le===d.Off||!Re||v.method===S.type.method))if(Ce===h.Text){let N;(le===d.Verbose||le===d.Compact)&&(v.params?N=`Params: ${p(v.params)}

`:N=`No parameters provided.

`),Re.log(`Received notification '${v.method}'.`,N)}else ht("receive-notification",v)}function Dt(v,N){if(!(le===d.Off||!Re))if(Ce===h.Text){let ee;if((le===d.Verbose||le===d.Compact)&&(v.error&&v.error.data?ee=`Error data: ${p(v.error.data)}

`:v.result?ee=`Result: ${p(v.result)}

`:v.error===void 0&&(ee=`No result returned.

`)),N){const ue=v.error?` Request failed: ${v.error.message} (${v.error.code}).`:"";Re.log(`Received response '${N.method} - (${v.id})' in ${Date.now()-N.timerStart}ms.${ue}`,ee)}else Re.log(`Received response ${v.id} without active response promise.`,ee)}else ht("receive-response",v)}function ht(v,N){if(!Re||le===d.Off)return;const ee={isLSPMessage:!0,type:v,message:N,timestamp:Date.now()};Re.log(ee)}function Qt(){if(de())throw new W(I.Closed,"Connection is closed.");if(ne())throw new W(I.Disposed,"Connection is disposed.")}function mn(){if(ve())throw new W(I.AlreadyListening,"Connection is already listening")}function Si(){if(!ve())throw new Error("Call listen() first.")}function Xt(v){return v===void 0?null:v}function Ur(v){if(v!==null)return v}function An(v){return v!=null&&!Array.isArray(v)&&typeof v=="object"}function Mn(v,N){switch(v){case r.ParameterStructures.auto:return An(N)?Ur(N):[Xt(N)];case r.ParameterStructures.byName:if(!An(N))throw new Error("Received parameters by name but param is not an object literal.");return Ur(N);case r.ParameterStructures.byPosition:return[Xt(N)];default:throw new Error(`Unknown parameter structure ${v.toString()}`)}}function zr(v,N){let ee;const ue=v.numberOfParams;switch(ue){case 0:ee=void 0;break;case 1:ee=Mn(v.parameterStructures,N[0]);break;default:ee=[];for(let Je=0;Je<N.length&&Je<ue;Je++)ee.push(Xt(N[Je]));if(N.length<ue)for(let Je=N.length;Je<ue;Je++)ee.push(null);break}return ee}const xt={sendNotification:(v,...N)=>{Qt();let ee,ue;if(n.string(v)){ee=v;const Ve=N[0];let Qe=0,l=r.ParameterStructures.auto;r.ParameterStructures.is(Ve)&&(Qe=1,l=Ve);let C=N.length;const $=C-Qe;switch($){case 0:ue=void 0;break;case 1:ue=Mn(l,N[Qe]);break;default:if(l===r.ParameterStructures.byName)throw new Error(`Received ${$} parameters for 'by Name' notification parameter structure.`);ue=N.slice(Qe,C).map(J=>Xt(J));break}}else{const Ve=N;ee=v.method,ue=zr(v,Ve)}const Je={jsonrpc:ke,method:ee,params:ue};return oe(Je),D.write(Je).catch(Ve=>{throw X.error("Sending notification failed."),Ve})},onNotification:(v,N)=>{Qt();let ee;return n.func(v)?x=v:N&&(n.string(v)?(ee=v,De.set(v,{type:void 0,handler:N})):(ee=v.method,De.set(v.method,{type:v,handler:N}))),{dispose:()=>{ee!==void 0?De.delete(ee):x=void 0}}},onProgress:(v,N,ee)=>{if(be.has(N))throw new Error(`Progress handler for token ${N} already registered`);return be.set(N,ee),{dispose:()=>{be.delete(N)}}},sendProgress:(v,N,ee)=>xt.sendNotification(c.type,{token:N,value:ee}),onUnhandledProgress:Ge.event,sendRequest:(v,...N)=>{Qt(),Si();let ee,ue,Je;if(n.string(v)){ee=v;const C=N[0],$=N[N.length-1];let J=0,Ie=r.ParameterStructures.auto;r.ParameterStructures.is(C)&&(J=1,Ie=C);let Le=N.length;s.CancellationToken.is($)&&(Le=Le-1,Je=$);const $e=Le-J;switch($e){case 0:ue=void 0;break;case 1:ue=Mn(Ie,N[J]);break;default:if(Ie===r.ParameterStructures.byName)throw new Error(`Received ${$e} parameters for 'by Name' request parameter structure.`);ue=N.slice(J,Le).map(qt=>Xt(qt));break}}else{const C=N;ee=v.method,ue=zr(v,C);const $=v.numberOfParams;Je=s.CancellationToken.is(C[$])?C[$]:void 0}const Ve=he++;let Qe;Je&&(Qe=Je.onCancellationRequested(()=>{const C=y.sender.sendCancellation(xt,Ve);return C===void 0?(X.log(`Received no promise from cancellation strategy when cancelling id ${Ve}`),Promise.resolve()):C.catch(()=>{X.log(`Sending cancellation messages for id ${Ve} failed`)})}));const l={jsonrpc:ke,id:Ve,method:ee,params:ue};return q(l),typeof y.sender.enableCancellation=="function"&&y.sender.enableCancellation(l),new Promise(async(C,$)=>{const J=$e=>{C($e),y.sender.cleanup(Ve),Qe==null||Qe.dispose()},Ie=$e=>{$($e),y.sender.cleanup(Ve),Qe==null||Qe.dispose()},Le={method:ee,timerStart:Date.now(),resolve:J,reject:Ie};try{await D.write(l),Ne.set(Ve,Le)}catch($e){throw X.error("Sending request failed."),Le.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,$e.message?$e.message:"Unknown reason")),$e}})},onRequest:(v,N)=>{Qt();let ee=null;return g.is(v)?(ee=void 0,nt=v):n.string(v)?(ee=null,N!==void 0&&(ee=v,Ct.set(v,{handler:N,type:void 0}))):N!==void 0&&(ee=v.method,Ct.set(v.method,{type:v,handler:N})),{dispose:()=>{ee!==null&&(ee!==void 0?Ct.delete(ee):nt=void 0)}}},hasPendingResponse:()=>Ne.size>0,trace:async(v,N,ee)=>{let ue=!1,Je=h.Text;ee!==void 0&&(n.boolean(ee)?ue=ee:(ue=ee.sendNotification||!1,Je=ee.traceFormat||h.Text)),le=v,Ce=Je,le===d.Off?Re=void 0:Re=N,ue&&!de()&&!ne()&&await xt.sendNotification(m.type,{value:d.toString(v)})},onError:Oe.event,onClose:Ue.event,onUnhandledNotification:Ae.event,onDispose:ae.event,end:()=>{D.end()},dispose:()=>{if(ne())return;M=Q.Disposed,ae.fire(void 0);const v=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const N of Ne.values())N.reject(v);Ne=new Map,Pe=new Map,ge=new Set,Fe=new i.LinkedMap,n.func(D.dispose)&&D.dispose(),n.func(E.dispose)&&E.dispose()},listen:()=>{Qt(),mn(),M=Q.Listening,E.listen(ie)},inspect:()=>{(0,t.default)().console.log("inspect")}};return xt.onNotification(S.type,v=>{if(le===d.Off||!Re)return;const N=le===d.Verbose||le===d.Compact;Re.log(v.message,N?v.verbose:void 0)}),xt.onNotification(c.type,v=>{const N=be.get(v.token);N?N(v.value):Ge.fire(v)}),xt}e.createMessageConnection=ye}(Mi)),Mi}var Ha;function _o(){return Ha||(Ha=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=Au();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=Mu();Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const r=sd();Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const i=Wr();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return i.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return i.Emitter}});const o=Ps();Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return o.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return o.CancellationToken}});const s=ad();Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return s.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return s.SharedArrayReceiverStrategy}});const a=ud();Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const u=cd();Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return u.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return u.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return u.WriteableStreamMessageWriter}});const c=ld();Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return c.AbstractMessageBuffer}});const f=dd();Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return f.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return f.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return f.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return f.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return f.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return f.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return f.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return f.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return f.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return f.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return f.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return f.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return f.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return f.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return f.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return f.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return f.MessageStrategy}});const g=pn();e.RAL=g.default}(Ti)),Ti}Object.defineProperty(ks,"__esModule",{value:!0});const Lt=_o();class Ci extends Lt.AbstractMessageBuffer{constructor(t="utf-8"){super(t),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return Ci.emptyBuffer}fromString(t,n){return new TextEncoder().encode(t)}toString(t,n){return n==="ascii"?this.asciiDecoder.decode(t):new TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t:t.slice(0,n)}allocNative(t){return new Uint8Array(t)}}Ci.emptyBuffer=new Uint8Array(0);class fd{constructor(t){this.socket=t,this._onData=new Lt.Emitter,this._messageListener=n=>{n.data.arrayBuffer().then(i=>{this._onData.fire(new Uint8Array(i))},()=>{(0,Lt.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(t){return this.socket.addEventListener("close",t),Lt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),Lt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),Lt.Disposable.create(()=>this.socket.removeEventListener("end",t))}onData(t){return this._onData.event(t)}}class gd{constructor(t){this.socket=t}onClose(t){return this.socket.addEventListener("close",t),Lt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),Lt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),Lt.Disposable.create(()=>this.socket.removeEventListener("end",t))}write(t,n){if(typeof t=="string"){if(n!==void 0&&n!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${n}`);this.socket.send(t)}else this.socket.send(t);return Promise.resolve()}end(){this.socket.close()}}const hd=new TextEncoder,Nu=Object.freeze({messageBuffer:Object.freeze({create:e=>new Ci(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if(t.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(hd.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new fd(e),asWritableStream:e=>new gd(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function bo(){return Nu}(function(e){function t(){Lt.RAL.install(Nu)}e.install=t})(bo||(bo={}));var Dd=ks.default=bo;const pd=U({__proto__:null,default:Dd},[ks]),md=K(pd);(function(e){var t=dt&&dt.__createBinding||(Object.create?function(u,c,f,g){g===void 0&&(g=f);var d=Object.getOwnPropertyDescriptor(c,f);(!d||("get"in d?!c.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(u,g,d)}:function(u,c,f,g){g===void 0&&(g=f),u[g]=c[f]}),n=dt&&dt.__exportStar||function(u,c){for(var f in u)f!=="default"&&!Object.prototype.hasOwnProperty.call(c,f)&&t(c,u,f)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,md.default.install();const i=_o();n(_o(),e);class o extends i.AbstractMessageReader{constructor(c){super(),this._onData=new i.Emitter,this._messageListener=f=>{this._onData.fire(f.data)},c.addEventListener("error",f=>this.fireError(f)),c.onmessage=this._messageListener}listen(c){return this._onData.event(c)}}e.BrowserMessageReader=o;class s extends i.AbstractMessageWriter{constructor(c){super(),this.port=c,this.errorCount=0,c.addEventListener("error",f=>this.fireError(f))}write(c){try{return this.port.postMessage(c),Promise.resolve()}catch(f){return this.handleError(f,c),Promise.reject(f)}}handleError(c,f){this.errorCount++,this.fireError(c,f,this.errorCount)}end(){}}e.BrowserMessageWriter=s;function a(u,c,f,g){return f===void 0&&(f=i.NullLogger),i.ConnectionStrategy.is(g)&&(g={connectionStrategy:g}),(0,i.createMessageConnection)(u,c,f,g)}e.createMessageConnection=a})(Es);const yd=xe(Es),Cd=U({__proto__:null,default:yd},[Es]),On=K(Cd);(function(e){e.exports=On})(od);const vd=xe(ni),_d=U({__proto__:null,default:vd},[ni]),xa=K(_d);var Os={},Fo;(function(e){function t(n){return typeof n=="string"}e.is=t})(Fo||(Fo={}));var ri;(function(e){function t(n){return typeof n=="string"}e.is=t})(ri||(ri={}));var wo;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(wo||(wo={}));var nr;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(nr||(nr={}));var Mt;(function(e){function t(r,i){return r===Number.MAX_VALUE&&(r=nr.MAX_VALUE),i===Number.MAX_VALUE&&(i=nr.MAX_VALUE),{line:r,character:i}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&w.uinteger(i.line)&&w.uinteger(i.character)}e.is=n})(Mt||(Mt={}));var st;(function(e){function t(r,i,o,s){if(w.uinteger(r)&&w.uinteger(i)&&w.uinteger(o)&&w.uinteger(s))return{start:Mt.create(r,i),end:Mt.create(o,s)};if(Mt.is(r)&&Mt.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(i,", ").concat(o,", ").concat(s,"]"))}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&Mt.is(i.start)&&Mt.is(i.end)}e.is=n})(st||(st={}));var rr;(function(e){function t(r,i){return{uri:r,range:i}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&st.is(i.range)&&(w.string(i.uri)||w.undefined(i.uri))}e.is=n})(rr||(rr={}));var So;(function(e){function t(r,i,o,s){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:s}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&st.is(i.targetRange)&&w.string(i.targetUri)&&st.is(i.targetSelectionRange)&&(st.is(i.originSelectionRange)||w.undefined(i.originSelectionRange))}e.is=n})(So||(So={}));var ii;(function(e){function t(r,i,o,s){return{red:r,green:i,blue:o,alpha:s}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&w.numberRange(i.red,0,1)&&w.numberRange(i.green,0,1)&&w.numberRange(i.blue,0,1)&&w.numberRange(i.alpha,0,1)}e.is=n})(ii||(ii={}));var Ro;(function(e){function t(r,i){return{range:r,color:i}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&st.is(i.range)&&ii.is(i.color)}e.is=n})(Ro||(Ro={}));var To;(function(e){function t(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&w.string(i.label)&&(w.undefined(i.textEdit)||Bt.is(i))&&(w.undefined(i.additionalTextEdits)||w.typedArray(i.additionalTextEdits,Bt.is))}e.is=n})(To||(To={}));var Eo;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(Eo||(Eo={}));var ko;(function(e){function t(r,i,o,s,a,u){var c={startLine:r,endLine:i};return w.defined(o)&&(c.startCharacter=o),w.defined(s)&&(c.endCharacter=s),w.defined(a)&&(c.kind=a),w.defined(u)&&(c.collapsedText=u),c}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&w.uinteger(i.startLine)&&w.uinteger(i.startLine)&&(w.undefined(i.startCharacter)||w.uinteger(i.startCharacter))&&(w.undefined(i.endCharacter)||w.uinteger(i.endCharacter))&&(w.undefined(i.kind)||w.string(i.kind))}e.is=n})(ko||(ko={}));var oi;(function(e){function t(r,i){return{location:r,message:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&rr.is(i.location)&&w.string(i.message)}e.is=n})(oi||(oi={}));var Po;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(Po||(Po={}));var Oo;(function(e){e.Unnecessary=1,e.Deprecated=2})(Oo||(Oo={}));var qo;(function(e){function t(n){var r=n;return w.objectLiteral(r)&&w.string(r.href)}e.is=t})(qo||(qo={}));var ir;(function(e){function t(r,i,o,s,a,u){var c={range:r,message:i};return w.defined(o)&&(c.severity=o),w.defined(s)&&(c.code=s),w.defined(a)&&(c.source=a),w.defined(u)&&(c.relatedInformation=u),c}e.create=t;function n(r){var i,o=r;return w.defined(o)&&st.is(o.range)&&w.string(o.message)&&(w.number(o.severity)||w.undefined(o.severity))&&(w.integer(o.code)||w.string(o.code)||w.undefined(o.code))&&(w.undefined(o.codeDescription)||w.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(w.string(o.source)||w.undefined(o.source))&&(w.undefined(o.relatedInformation)||w.typedArray(o.relatedInformation,oi.is))}e.is=n})(ir||(ir={}));var hn;(function(e){function t(r,i){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:r,command:i};return w.defined(o)&&o.length>0&&(a.arguments=o),a}e.create=t;function n(r){var i=r;return w.defined(i)&&w.string(i.title)&&w.string(i.command)}e.is=n})(hn||(hn={}));var Bt;(function(e){function t(o,s){return{range:o,newText:s}}e.replace=t;function n(o,s){return{range:{start:o,end:o},newText:s}}e.insert=n;function r(o){return{range:o,newText:""}}e.del=r;function i(o){var s=o;return w.objectLiteral(s)&&w.string(s.newText)&&st.is(s.range)}e.is=i})(Bt||(Bt={}));var dn;(function(e){function t(r,i,o){var s={label:r};return i!==void 0&&(s.needsConfirmation=i),o!==void 0&&(s.description=o),s}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&w.string(i.label)&&(w.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(w.string(i.description)||i.description===void 0)}e.is=n})(dn||(dn={}));var yt;(function(e){function t(n){var r=n;return w.string(r)}e.is=t})(yt||(yt={}));var Wt;(function(e){function t(o,s,a){return{range:o,newText:s,annotationId:a}}e.replace=t;function n(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}e.insert=n;function r(o,s){return{range:o,newText:"",annotationId:s}}e.del=r;function i(o){var s=o;return Bt.is(s)&&(dn.is(s.annotationId)||yt.is(s.annotationId))}e.is=i})(Wt||(Wt={}));var or;(function(e){function t(r,i){return{textDocument:r,edits:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&sr.is(i.textDocument)&&Array.isArray(i.edits)}e.is=n})(or||(or={}));var Tn;(function(e){function t(r,i,o){var s={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function n(r){var i=r;return i&&i.kind==="create"&&w.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||w.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||w.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||yt.is(i.annotationId))}e.is=n})(Tn||(Tn={}));var En;(function(e){function t(r,i,o,s){var a={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}e.create=t;function n(r){var i=r;return i&&i.kind==="rename"&&w.string(i.oldUri)&&w.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||w.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||w.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||yt.is(i.annotationId))}e.is=n})(En||(En={}));var kn;(function(e){function t(r,i,o){var s={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(s.options=i),o!==void 0&&(s.annotationId=o),s}e.create=t;function n(r){var i=r;return i&&i.kind==="delete"&&w.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||w.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||w.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||yt.is(i.annotationId))}e.is=n})(kn||(kn={}));var si;(function(e){function t(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return w.string(i.kind)?Tn.is(i)||En.is(i)||kn.is(i):or.is(i)}))}e.is=t})(si||(si={}));var Gr=function(){function e(t,n){this.edits=t,this.changeAnnotations=n}return e.prototype.insert=function(t,n,r){var i,o;if(r===void 0?i=Bt.insert(t,n):yt.is(r)?(o=r,i=Wt.insert(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=Wt.insert(t,n,o)),this.edits.push(i),o!==void 0)return o},e.prototype.replace=function(t,n,r){var i,o;if(r===void 0?i=Bt.replace(t,n):yt.is(r)?(o=r,i=Wt.replace(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=Wt.replace(t,n,o)),this.edits.push(i),o!==void 0)return o},e.prototype.delete=function(t,n){var r,i;if(n===void 0?r=Bt.del(t):yt.is(n)?(i=n,r=Wt.del(t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=Wt.del(t,i)),this.edits.push(r),i!==void 0)return i},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Wa=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,n){var r;if(yt.is(t)?r=t:(r=this.nextId(),n=t),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),bd=function(){function e(t){var n=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new Wa(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(r){if(or.is(r)){var i=new Gr(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):t.changes&&Object.keys(t.changes).forEach(function(r){var i=new Gr(t.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(sr.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:t.uri,version:t.version},r=this._textEditChanges[n.uri];if(!r){var i=[],o={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(o),r=new Gr(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[t];if(!r){var i=[];this._workspaceEdit.changes[t]=i,r=new Gr(i),this._textEditChanges[t]=r}return r}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Wa,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;dn.is(n)||yt.is(n)?i=n:r=n;var o,s;if(i===void 0?o=Tn.create(t,r):(s=yt.is(i)?i:this._changeAnnotations.manage(i),o=Tn.create(t,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e.prototype.renameFile=function(t,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;dn.is(r)||yt.is(r)?o=r:i=r;var s,a;if(o===void 0?s=En.create(t,n,i):(a=yt.is(o)?o:this._changeAnnotations.manage(o),s=En.create(t,n,i,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},e.prototype.deleteFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;dn.is(n)||yt.is(n)?i=n:r=n;var o,s;if(i===void 0?o=kn.create(t,r):(s=yt.is(i)?i:this._changeAnnotations.manage(i),o=kn.create(t,r,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e}(),$o;(function(e){function t(r){return{uri:r}}e.create=t;function n(r){var i=r;return w.defined(i)&&w.string(i.uri)}e.is=n})($o||($o={}));var Ao;(function(e){function t(r,i){return{uri:r,version:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&w.string(i.uri)&&w.integer(i.version)}e.is=n})(Ao||(Ao={}));var sr;(function(e){function t(r,i){return{uri:r,version:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&w.string(i.uri)&&(i.version===null||w.integer(i.version))}e.is=n})(sr||(sr={}));var Mo;(function(e){function t(r,i,o,s){return{uri:r,languageId:i,version:o,text:s}}e.create=t;function n(r){var i=r;return w.defined(i)&&w.string(i.uri)&&w.string(i.languageId)&&w.integer(i.version)&&w.string(i.text)}e.is=n})(Mo||(Mo={}));var ai;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(n){var r=n;return r===e.PlainText||r===e.Markdown}e.is=t})(ai||(ai={}));var Pn;(function(e){function t(n){var r=n;return w.objectLiteral(n)&&ai.is(r.kind)&&w.string(r.value)}e.is=t})(Pn||(Pn={}));var Io;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(Io||(Io={}));var No;(function(e){e.PlainText=1,e.Snippet=2})(No||(No={}));var jo;(function(e){e.Deprecated=1})(jo||(jo={}));var Lo;(function(e){function t(r,i,o){return{newText:r,insert:i,replace:o}}e.create=t;function n(r){var i=r;return i&&w.string(i.newText)&&st.is(i.insert)&&st.is(i.replace)}e.is=n})(Lo||(Lo={}));var Bo;(function(e){e.asIs=1,e.adjustIndentation=2})(Bo||(Bo={}));var Ho;(function(e){function t(n){var r=n;return r&&(w.string(r.detail)||r.detail===void 0)&&(w.string(r.description)||r.description===void 0)}e.is=t})(Ho||(Ho={}));var xo;(function(e){function t(n){return{label:n}}e.create=t})(xo||(xo={}));var Wo;(function(e){function t(n,r){return{items:n||[],isIncomplete:!!r}}e.create=t})(Wo||(Wo={}));var ar;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function n(r){var i=r;return w.string(i)||w.objectLiteral(i)&&w.string(i.language)&&w.string(i.value)}e.is=n})(ar||(ar={}));var Ko;(function(e){function t(n){var r=n;return!!r&&w.objectLiteral(r)&&(Pn.is(r.contents)||ar.is(r.contents)||w.typedArray(r.contents,ar.is))&&(n.range===void 0||st.is(n.range))}e.is=t})(Ko||(Ko={}));var Uo;(function(e){function t(n,r){return r?{label:n,documentation:r}:{label:n}}e.create=t})(Uo||(Uo={}));var zo;(function(e){function t(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s={label:n};return w.defined(r)&&(s.documentation=r),w.defined(i)?s.parameters=i:s.parameters=[],s}e.create=t})(zo||(zo={}));var Vo;(function(e){e.Text=1,e.Read=2,e.Write=3})(Vo||(Vo={}));var Go;(function(e){function t(n,r){var i={range:n};return w.number(r)&&(i.kind=r),i}e.create=t})(Go||(Go={}));var Jo;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Jo||(Jo={}));var Qo;(function(e){e.Deprecated=1})(Qo||(Qo={}));var Xo;(function(e){function t(n,r,i,o,s){var a={name:n,kind:r,location:{uri:o,range:i}};return s&&(a.containerName=s),a}e.create=t})(Xo||(Xo={}));var Yo;(function(e){function t(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}e.create=t})(Yo||(Yo={}));var Zo;(function(e){function t(r,i,o,s,a,u){var c={name:r,detail:i,kind:o,range:s,selectionRange:a};return u!==void 0&&(c.children=u),c}e.create=t;function n(r){var i=r;return i&&w.string(i.name)&&w.number(i.kind)&&st.is(i.range)&&st.is(i.selectionRange)&&(i.detail===void 0||w.string(i.detail))&&(i.deprecated===void 0||w.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}e.is=n})(Zo||(Zo={}));var es;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(es||(es={}));var ur;(function(e){e.Invoked=1,e.Automatic=2})(ur||(ur={}));var ts;(function(e){function t(r,i,o){var s={diagnostics:r};return i!=null&&(s.only=i),o!=null&&(s.triggerKind=o),s}e.create=t;function n(r){var i=r;return w.defined(i)&&w.typedArray(i.diagnostics,ir.is)&&(i.only===void 0||w.typedArray(i.only,w.string))&&(i.triggerKind===void 0||i.triggerKind===ur.Invoked||i.triggerKind===ur.Automatic)}e.is=n})(ts||(ts={}));var ns;(function(e){function t(r,i,o){var s={title:r},a=!0;return typeof i=="string"?(a=!1,s.kind=i):hn.is(i)?s.command=i:s.edit=i,a&&o!==void 0&&(s.kind=o),s}e.create=t;function n(r){var i=r;return i&&w.string(i.title)&&(i.diagnostics===void 0||w.typedArray(i.diagnostics,ir.is))&&(i.kind===void 0||w.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||hn.is(i.command))&&(i.isPreferred===void 0||w.boolean(i.isPreferred))&&(i.edit===void 0||si.is(i.edit))}e.is=n})(ns||(ns={}));var rs;(function(e){function t(r,i){var o={range:r};return w.defined(i)&&(o.data=i),o}e.create=t;function n(r){var i=r;return w.defined(i)&&st.is(i.range)&&(w.undefined(i.command)||hn.is(i.command))}e.is=n})(rs||(rs={}));var is;(function(e){function t(r,i){return{tabSize:r,insertSpaces:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&w.uinteger(i.tabSize)&&w.boolean(i.insertSpaces)}e.is=n})(is||(is={}));var os;(function(e){function t(r,i,o){return{range:r,target:i,data:o}}e.create=t;function n(r){var i=r;return w.defined(i)&&st.is(i.range)&&(w.undefined(i.target)||w.string(i.target))}e.is=n})(os||(os={}));var ss;(function(e){function t(r,i){return{range:r,parent:i}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&st.is(i.range)&&(i.parent===void 0||e.is(i.parent))}e.is=n})(ss||(ss={}));var as;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(as||(as={}));var us;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(us||(us={}));var cs;(function(e){function t(n){var r=n;return w.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(cs||(cs={}));var ls;(function(e){function t(r,i){return{range:r,text:i}}e.create=t;function n(r){var i=r;return i!=null&&st.is(i.range)&&w.string(i.text)}e.is=n})(ls||(ls={}));var ds;(function(e){function t(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}e.create=t;function n(r){var i=r;return i!=null&&st.is(i.range)&&w.boolean(i.caseSensitiveLookup)&&(w.string(i.variableName)||i.variableName===void 0)}e.is=n})(ds||(ds={}));var fs;(function(e){function t(r,i){return{range:r,expression:i}}e.create=t;function n(r){var i=r;return i!=null&&st.is(i.range)&&(w.string(i.expression)||i.expression===void 0)}e.is=n})(fs||(fs={}));var gs;(function(e){function t(r,i){return{frameId:r,stoppedLocation:i}}e.create=t;function n(r){var i=r;return w.defined(i)&&st.is(r.stoppedLocation)}e.is=n})(gs||(gs={}));var ui;(function(e){e.Type=1,e.Parameter=2;function t(n){return n===1||n===2}e.is=t})(ui||(ui={}));var ci;(function(e){function t(r){return{value:r}}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&(i.tooltip===void 0||w.string(i.tooltip)||Pn.is(i.tooltip))&&(i.location===void 0||rr.is(i.location))&&(i.command===void 0||hn.is(i.command))}e.is=n})(ci||(ci={}));var hs;(function(e){function t(r,i,o){var s={position:r,label:i};return o!==void 0&&(s.kind=o),s}e.create=t;function n(r){var i=r;return w.objectLiteral(i)&&Mt.is(i.position)&&(w.string(i.label)||w.typedArray(i.label,ci.is))&&(i.kind===void 0||ui.is(i.kind))&&i.textEdits===void 0||w.typedArray(i.textEdits,Bt.is)&&(i.tooltip===void 0||w.string(i.tooltip)||Pn.is(i.tooltip))&&(i.paddingLeft===void 0||w.boolean(i.paddingLeft))&&(i.paddingRight===void 0||w.boolean(i.paddingRight))}e.is=n})(hs||(hs={}));var Ds;(function(e){function t(n){var r=n;return w.objectLiteral(r)&&ri.is(r.uri)&&w.string(r.name)}e.is=t})(Ds||(Ds={}));var Fd=[`
`,`\r
`,"\r"],ps;(function(e){function t(o,s,a,u){return new wd(o,s,a,u)}e.create=t;function n(o){var s=o;return!!(w.defined(s)&&w.string(s.uri)&&(w.undefined(s.languageId)||w.string(s.languageId))&&w.uinteger(s.lineCount)&&w.func(s.getText)&&w.func(s.positionAt)&&w.func(s.offsetAt))}e.is=n;function r(o,s){for(var a=o.getText(),u=i(s,function(m,S){var I=m.range.start.line-S.range.start.line;return I===0?m.range.start.character-S.range.start.character:I}),c=a.length,f=u.length-1;f>=0;f--){var g=u[f],d=o.offsetAt(g.range.start),h=o.offsetAt(g.range.end);if(h<=c)a=a.substring(0,d)+g.newText+a.substring(h,a.length);else throw new Error("Overlapping edit");c=d}return a}e.applyEdits=r;function i(o,s){if(o.length<=1)return o;var a=o.length/2|0,u=o.slice(0,a),c=o.slice(a);i(u,s),i(c,s);for(var f=0,g=0,d=0;f<u.length&&g<c.length;){var h=s(u[f],c[g]);h<=0?o[d++]=u[f++]:o[d++]=c[g++]}for(;f<u.length;)o[d++]=u[f++];for(;g<c.length;)o[d++]=c[g++];return o}})(ps||(ps={}));var wd=function(){function e(t,n,r,i){this._uri=t,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content},e.prototype.update=function(t,n){this._content=t.text,this._version=n,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(t.push(i),r=!1);var o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&t.push(n.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Mt.create(0,t);for(;r<i;){var o=Math.floor((r+i)/2);n[o]>t?i=o:r=o+1}var s=r-1;return Mt.create(s,t-n[s])},e.prototype.offsetAt=function(t){var n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;var r=n[t.line],i=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),w;(function(e){var t=Object.prototype.toString;function n(h){return typeof h<"u"}e.defined=n;function r(h){return typeof h>"u"}e.undefined=r;function i(h){return h===!0||h===!1}e.boolean=i;function o(h){return t.call(h)==="[object String]"}e.string=o;function s(h){return t.call(h)==="[object Number]"}e.number=s;function a(h,m,S){return t.call(h)==="[object Number]"&&m<=h&&h<=S}e.numberRange=a;function u(h){return t.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}e.integer=u;function c(h){return t.call(h)==="[object Number]"&&0<=h&&h<=2147483647}e.uinteger=c;function f(h){return t.call(h)==="[object Function]"}e.func=f;function g(h){return h!==null&&typeof h=="object"}e.objectLiteral=g;function d(h,m){return Array.isArray(h)&&h.every(m)}e.typedArray=d})(w||(w={}));const Sd=Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Wt},get ChangeAnnotation(){return dn},get ChangeAnnotationIdentifier(){return yt},get CodeAction(){return ns},get CodeActionContext(){return ts},get CodeActionKind(){return es},get CodeActionTriggerKind(){return ur},get CodeDescription(){return qo},get CodeLens(){return rs},get Color(){return ii},get ColorInformation(){return Ro},get ColorPresentation(){return To},get Command(){return hn},get CompletionItem(){return xo},get CompletionItemKind(){return Io},get CompletionItemLabelDetails(){return Ho},get CompletionItemTag(){return jo},get CompletionList(){return Wo},get CreateFile(){return Tn},get DeleteFile(){return kn},get Diagnostic(){return ir},get DiagnosticRelatedInformation(){return oi},get DiagnosticSeverity(){return Po},get DiagnosticTag(){return Oo},get DocumentHighlight(){return Go},get DocumentHighlightKind(){return Vo},get DocumentLink(){return os},get DocumentSymbol(){return Zo},get DocumentUri(){return Fo},EOL:Fd,get FoldingRange(){return ko},get FoldingRangeKind(){return Eo},get FormattingOptions(){return is},get Hover(){return Ko},get InlayHint(){return hs},get InlayHintKind(){return ui},get InlayHintLabelPart(){return ci},get InlineValueContext(){return gs},get InlineValueEvaluatableExpression(){return fs},get InlineValueText(){return ls},get InlineValueVariableLookup(){return ds},get InsertReplaceEdit(){return Lo},get InsertTextFormat(){return No},get InsertTextMode(){return Bo},get Location(){return rr},get LocationLink(){return So},get MarkedString(){return ar},get MarkupContent(){return Pn},get MarkupKind(){return ai},get OptionalVersionedTextDocumentIdentifier(){return sr},get ParameterInformation(){return Uo},get Position(){return Mt},get Range(){return st},get RenameFile(){return En},get SelectionRange(){return ss},get SemanticTokenModifiers(){return us},get SemanticTokenTypes(){return as},get SemanticTokens(){return cs},get SignatureInformation(){return zo},get SymbolInformation(){return Xo},get SymbolKind(){return Jo},get SymbolTag(){return Qo},get TextDocument(){return ps},get TextDocumentEdit(){return or},get TextDocumentIdentifier(){return $o},get TextDocumentItem(){return Mo},get TextEdit(){return Bt},get URI(){return ri},get VersionedTextDocumentIdentifier(){return Ao},WorkspaceChange:bd,get WorkspaceEdit(){return si},get WorkspaceFolder(){return Ds},get WorkspaceSymbol(){return Yo},get integer(){return wo},get uinteger(){return nr}},Symbol.toStringTag,{value:"Module"})),qs=K(Sd);var $s={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=On;(function(a){a.clientToServer="clientToServer",a.serverToClient="serverToClient",a.both="both"})(e.MessageDirection||(e.MessageDirection={}));class n{constructor(u){this.method=u}}e.RegistrationType=n;class r extends t.RequestType0{constructor(u){super(u)}}e.ProtocolRequestType0=r;class i extends t.RequestType{constructor(u){super(u,t.ParameterStructures.byName)}}e.ProtocolRequestType=i;class o extends t.NotificationType0{constructor(u){super(u)}}e.ProtocolNotificationType0=o;class s extends t.NotificationType{constructor(u){super(u,t.ParameterStructures.byName)}}e.ProtocolNotificationType=s})($s);const Rd=xe($s),Td=U({__proto__:null,default:Rd},[$s]),at=K(Td);var As={},ct={};Object.defineProperty(ct,"__esModule",{value:!0});var ju=ct.objectLiteral=Gu=ct.typedArray=Vu=ct.stringArray=zu=ct.array=Ku=ct.func=Wu=ct.error=xu=ct.number=Hu=ct.string=Lu=ct.boolean=void 0;function Ed(e){return e===!0||e===!1}var Lu=ct.boolean=Ed;function Bu(e){return typeof e=="string"||e instanceof String}var Hu=ct.string=Bu;function kd(e){return typeof e=="number"||e instanceof Number}var xu=ct.number=kd;function Pd(e){return e instanceof Error}var Wu=ct.error=Pd;function Od(e){return typeof e=="function"}var Ku=ct.func=Od;function Uu(e){return Array.isArray(e)}var zu=ct.array=Uu;function qd(e){return Uu(e)&&e.every(t=>Bu(t))}var Vu=ct.stringArray=qd;function $d(e,t){return Array.isArray(e)&&e.every(t)}var Gu=ct.typedArray=$d;function Ad(e){return e!==null&&typeof e=="object"}ju=ct.objectLiteral=Ad;const Md=U({__proto__:null,get array(){return zu},get boolean(){return Lu},default:ct,get error(){return Wu},get func(){return Ku},get number(){return xu},get objectLiteral(){return ju},get string(){return Hu},get stringArray(){return Vu},get typedArray(){return Gu}},[ct]),Ms=K(Md);var Is={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=at;(function(n){n.method="textDocument/implementation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.ImplementationRequest||(e.ImplementationRequest={}))})(Is);const Id=xe(Is),Nd=U({__proto__:null,default:Id},[Is]),jd=K(Nd);var Ns={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=at;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeDefinitionRequest||(e.TypeDefinitionRequest={}))})(Ns);const Ld=xe(Ns),Bd=U({__proto__:null,default:Ld},[Ns]),Hd=K(Bd);var js={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=at;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})),function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={}))})(js);const xd=xe(js),Wd=U({__proto__:null,default:xd},[js]),Kd=K(Wd);var Ls={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=at;(function(n){n.method="workspace/configuration",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ConfigurationRequest||(e.ConfigurationRequest={}))})(Ls);const Ud=xe(Ls),zd=U({__proto__:null,default:Ud},[Ls]),Vd=K(zd);var Bs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=at;(function(n){n.method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DocumentColorRequest||(e.DocumentColorRequest={})),function(n){n.method="textDocument/colorPresentation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.ColorPresentationRequest||(e.ColorPresentationRequest={}))})(Bs);const Gd=xe(Bs),Jd=U({__proto__:null,default:Gd},[Bs]),Qd=K(Jd);var Hs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=void 0;const t=at;(function(n){n.method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.FoldingRangeRequest||(e.FoldingRangeRequest={}))})(Hs);const Xd=xe(Hs),Yd=U({__proto__:null,default:Xd},[Hs]),Zd=K(Yd);var xs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=at;(function(n){n.method="textDocument/declaration",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DeclarationRequest||(e.DeclarationRequest={}))})(xs);const ef=xe(xs),tf=U({__proto__:null,default:ef},[xs]),nf=K(tf);var Ws={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=at;(function(n){n.method="textDocument/selectionRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.SelectionRangeRequest||(e.SelectionRangeRequest={}))})(Ws);const rf=xe(Ws),of=U({__proto__:null,default:rf},[Ws]),sf=K(of);var Ks={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=On,n=at;(function(r){r.type=new t.ProgressType;function i(o){return o===r.type}r.is=i})(e.WorkDoneProgress||(e.WorkDoneProgress={})),function(r){r.method="window/workDoneProgress/create",r.messageDirection=n.MessageDirection.serverToClient,r.type=new n.ProtocolRequestType(r.method)}(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})),function(r){r.method="window/workDoneProgress/cancel",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolNotificationType(r.method)}(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={}))})(Ks);const af=xe(Ks),uf=U({__proto__:null,default:af},[Ks]),cf=K(uf);var Us={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=at;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={}))})(Us);const lf=xe(Us),df=U({__proto__:null,default:lf},[Us]),ff=K(df);var zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=at;(function(r){r.Relative="relative"})(e.TokenFormat||(e.TokenFormat={}));var n;(function(r){r.method="textDocument/semanticTokens",r.type=new t.RegistrationType(r.method)})(n=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})),function(r){r.method="textDocument/semanticTokens/full",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(r){r.method="textDocument/semanticTokens/full/delta",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})),function(r){r.method="textDocument/semanticTokens/range",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})),function(r){r.method="workspace/semanticTokens/refresh",r.messageDirection=t.MessageDirection.serverToClient,r.type=new t.ProtocolRequestType0(r.method)}(e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={}))})(zs);const gf=xe(zs),hf=U({__proto__:null,default:gf},[zs]),Df=K(hf);var Vs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=at;(function(n){n.method="window/showDocument",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ShowDocumentRequest||(e.ShowDocumentRequest={}))})(Vs);const pf=xe(Vs),mf=U({__proto__:null,default:pf},[Vs]),yf=K(mf);var Gs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=at;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={}))})(Gs);const Cf=xe(Gs),vf=U({__proto__:null,default:Cf},[Gs]),_f=K(vf);var Js={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=at;(function(n){n.file="file",n.folder="folder"})(e.FileOperationPatternKind||(e.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={}))})(Js);const bf=xe(Js),Ff=U({__proto__:null,default:bf},[Js]),wf=K(Ff);var Qs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=at;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(e.UniquenessLevel||(e.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(e.MonikerKind||(e.MonikerKind={})),function(n){n.method="textDocument/moniker",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.MonikerRequest||(e.MonikerRequest={}))})(Qs);const Sf=xe(Qs),Rf=U({__proto__:null,default:Sf},[Qs]),Tf=K(Rf);var Xs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=at;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeHierarchyPrepareRequest||(e.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySupertypesRequest||(e.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySubtypesRequest||(e.TypeHierarchySubtypesRequest={}))})(Xs);const Ef=xe(Xs),kf=U({__proto__:null,default:Ef},[Xs]),Pf=K(kf);var Ys={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=at;(function(n){n.method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlineValueRequest||(e.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlineValueRefreshRequest||(e.InlineValueRefreshRequest={}))})(Ys);const Of=xe(Ys),qf=U({__proto__:null,default:Of},[Ys]),$f=K(qf);var Zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=at;(function(n){n.method="textDocument/inlayHint",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlayHintRequest||(e.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.InlayHintResolveRequest||(e.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlayHintRefreshRequest||(e.InlayHintRefreshRequest={}))})(Zs);const Af=xe(Zs),Mf=U({__proto__:null,default:Af},[Zs]),If=K(Mf);var ea={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=On,n=Ms,r=at;(function(i){function o(s){const a=s;return a&&n.boolean(a.retriggerRequest)}i.is=o})(e.DiagnosticServerCancellationData||(e.DiagnosticServerCancellationData={})),function(i){i.Full="full",i.Unchanged="unchanged"}(e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={})),function(i){i.method="textDocument/diagnostic",i.messageDirection=r.MessageDirection.clientToServer,i.type=new r.ProtocolRequestType(i.method),i.partialResult=new t.ProgressType}(e.DocumentDiagnosticRequest||(e.DocumentDiagnosticRequest={})),function(i){i.method="workspace/diagnostic",i.messageDirection=r.MessageDirection.clientToServer,i.type=new r.ProtocolRequestType(i.method),i.partialResult=new t.ProgressType}(e.WorkspaceDiagnosticRequest||(e.WorkspaceDiagnosticRequest={})),function(i){i.method="workspace/diagnostic/refresh",i.messageDirection=r.MessageDirection.serverToClient,i.type=new r.ProtocolRequestType0(i.method)}(e.DiagnosticRefreshRequest||(e.DiagnosticRefreshRequest={}))})(ea);const Nf=xe(ea),jf=U({__proto__:null,default:Nf},[ea]),Lf=K(jf);var ta={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=qs,n=Ms,r=at;var i;(function(u){u.Markup=1,u.Code=2;function c(f){return f===1||f===2}u.is=c})(i=e.NotebookCellKind||(e.NotebookCellKind={}));var o;(function(u){function c(d,h){const m={executionOrder:d};return(h===!0||h===!1)&&(m.success=h),m}u.create=c;function f(d){const h=d;return n.objectLiteral(h)&&t.uinteger.is(h.executionOrder)&&(h.success===void 0||n.boolean(h.success))}u.is=f;function g(d,h){return d===h?!0:d==null||h===null||h===void 0?!1:d.executionOrder===h.executionOrder&&d.success===h.success}u.equals=g})(o=e.ExecutionSummary||(e.ExecutionSummary={}));var s;(function(u){function c(h,m){return{kind:h,document:m}}u.create=c;function f(h){const m=h;return n.objectLiteral(m)&&i.is(m.kind)&&t.DocumentUri.is(m.document)&&(m.metadata===void 0||n.objectLiteral(m.metadata))}u.is=f;function g(h,m){const S=new Set;return h.document!==m.document&&S.add("document"),h.kind!==m.kind&&S.add("kind"),h.executionSummary!==m.executionSummary&&S.add("executionSummary"),(h.metadata!==void 0||m.metadata!==void 0)&&!d(h.metadata,m.metadata)&&S.add("metadata"),(h.executionSummary!==void 0||m.executionSummary!==void 0)&&!o.equals(h.executionSummary,m.executionSummary)&&S.add("executionSummary"),S}u.diff=g;function d(h,m){if(h===m)return!0;if(h==null||m===null||m===void 0||typeof h!=typeof m||typeof h!="object")return!1;const S=Array.isArray(h),I=Array.isArray(m);if(S!==I)return!1;if(S&&I){if(h.length!==m.length)return!1;for(let W=0;W<h.length;W++)if(!d(h[W],m[W]))return!1}if(n.objectLiteral(h)&&n.objectLiteral(m)){const W=Object.keys(h),z=Object.keys(m);if(W.length!==z.length||(W.sort(),z.sort(),!d(W,z)))return!1;for(let F=0;F<W.length;F++){const P=W[F];if(!d(h[P],m[P]))return!1}}return!0}})(s=e.NotebookCell||(e.NotebookCell={})),function(u){function c(g,d,h,m){return{uri:g,notebookType:d,version:h,cells:m}}u.create=c;function f(g){const d=g;return n.objectLiteral(d)&&n.string(d.uri)&&t.integer.is(d.version)&&n.typedArray(d.cells,s.is)}u.is=f}(e.NotebookDocument||(e.NotebookDocument={}));var a;(function(u){u.method="notebookDocument/sync",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.RegistrationType(u.method)})(a=e.NotebookDocumentSyncRegistrationType||(e.NotebookDocumentSyncRegistrationType={})),function(u){u.method="notebookDocument/didOpen",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolNotificationType(u.method),u.registrationMethod=a.method}(e.DidOpenNotebookDocumentNotification||(e.DidOpenNotebookDocumentNotification={})),function(u){function c(g){const d=g;return n.objectLiteral(d)&&t.uinteger.is(d.start)&&t.uinteger.is(d.deleteCount)&&(d.cells===void 0||n.typedArray(d.cells,s.is))}u.is=c;function f(g,d,h){const m={start:g,deleteCount:d};return h!==void 0&&(m.cells=h),m}u.create=f}(e.NotebookCellArrayChange||(e.NotebookCellArrayChange={})),function(u){u.method="notebookDocument/didChange",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolNotificationType(u.method),u.registrationMethod=a.method}(e.DidChangeNotebookDocumentNotification||(e.DidChangeNotebookDocumentNotification={})),function(u){u.method="notebookDocument/didSave",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolNotificationType(u.method),u.registrationMethod=a.method}(e.DidSaveNotebookDocumentNotification||(e.DidSaveNotebookDocumentNotification={})),function(u){u.method="notebookDocument/didClose",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolNotificationType(u.method),u.registrationMethod=a.method}(e.DidCloseNotebookDocumentNotification||(e.DidCloseNotebookDocumentNotification={}))})(ta);const Bf=xe(ta),Hf=U({__proto__:null,default:Bf},[ta]),xf=K(Hf);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=void 0;const t=at,n=qs,r=Ms,i=jd;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return i.ImplementationRequest}});const o=Hd;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return o.TypeDefinitionRequest}});const s=Kd;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});const a=Vd;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const u=Qd;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return u.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return u.ColorPresentationRequest}});const c=Zd;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return c.FoldingRangeRequest}});const f=nf;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return f.DeclarationRequest}});const g=sf;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return g.SelectionRangeRequest}});const d=cf;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return d.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return d.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return d.WorkDoneProgressCancelNotification}});const h=ff;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return h.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return h.CallHierarchyPrepareRequest}});const m=Df;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return m.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return m.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return m.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return m.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return m.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return m.SemanticTokensRegistrationType}});const S=yf;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return S.ShowDocumentRequest}});const I=_f;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return I.LinkedEditingRangeRequest}});const W=wf;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return W.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return W.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return W.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return W.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return W.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return W.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return W.WillDeleteFilesRequest}});const z=Tf;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return z.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return z.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return z.MonikerRequest}});const F=Pf;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return F.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return F.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return F.TypeHierarchySupertypesRequest}});const P=$f;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return P.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return P.InlineValueRefreshRequest}});const L=If;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return L.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return L.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return L.InlayHintRefreshRequest}});const G=Lf;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return G.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return G.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return G.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return G.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return G.DiagnosticRefreshRequest}});const H=xf;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return H.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return H.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return H.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return H.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return H.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return H.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return H.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return H.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return H.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return H.DidCloseNotebookDocumentNotification}});var Y;(function(D){function R(B){const X=B;return r.string(X.language)||r.string(X.scheme)||r.string(X.pattern)}D.is=R})(Y=e.TextDocumentFilter||(e.TextDocumentFilter={}));var Q;(function(D){function R(B){const X=B;return r.objectLiteral(X)&&(r.string(X.notebookType)||r.string(X.scheme)||r.string(X.pattern))}D.is=R})(Q=e.NotebookDocumentFilter||(e.NotebookDocumentFilter={}));var ye;(function(D){function R(B){const X=B;return r.objectLiteral(X)&&(r.string(X.notebook)||Q.is(X.notebook))&&(X.language===void 0||r.string(X.language))}D.is=R})(ye=e.NotebookCellTextDocumentFilter||(e.NotebookCellTextDocumentFilter={}));var E;(function(D){function R(B){if(!Array.isArray(B))return!1;for(let X of B)if(!r.string(X)&&!Y.is(X)&&!ye.is(X))return!1;return!0}D.is=R})(E=e.DocumentSelector||(e.DocumentSelector={})),function(D){D.method="client/registerCapability",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolRequestType(D.method)}(e.RegistrationRequest||(e.RegistrationRequest={})),function(D){D.method="client/unregisterCapability",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolRequestType(D.method)}(e.UnregistrationRequest||(e.UnregistrationRequest={})),function(D){D.Create="create",D.Rename="rename",D.Delete="delete"}(e.ResourceOperationKind||(e.ResourceOperationKind={})),function(D){D.Abort="abort",D.Transactional="transactional",D.TextOnlyTransactional="textOnlyTransactional",D.Undo="undo"}(e.FailureHandlingKind||(e.FailureHandlingKind={})),function(D){D.UTF8="utf-8",D.UTF16="utf-16",D.UTF32="utf-32"}(e.PositionEncodingKind||(e.PositionEncodingKind={})),function(D){function R(B){const X=B;return X&&r.string(X.id)&&X.id.length>0}D.hasId=R}(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})),function(D){function R(B){const X=B;return X&&(X.documentSelector===null||E.is(X.documentSelector))}D.is=R}(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})),function(D){function R(X){const he=X;return r.objectLiteral(he)&&(he.workDoneProgress===void 0||r.boolean(he.workDoneProgress))}D.is=R;function B(X){const he=X;return he&&r.boolean(he.workDoneProgress)}D.hasWorkDoneProgress=B}(e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})),function(D){D.method="initialize",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.InitializeRequest||(e.InitializeRequest={})),function(D){D.unknownProtocolVersion=1}(e.InitializeErrorCodes||(e.InitializeErrorCodes={})),function(D){D.method="initialized",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.InitializedNotification||(e.InitializedNotification={})),function(D){D.method="shutdown",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType0(D.method)}(e.ShutdownRequest||(e.ShutdownRequest={})),function(D){D.method="exit",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType0(D.method)}(e.ExitNotification||(e.ExitNotification={})),function(D){D.method="workspace/didChangeConfiguration",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})),function(D){D.Error=1,D.Warning=2,D.Info=3,D.Log=4}(e.MessageType||(e.MessageType={})),function(D){D.method="window/showMessage",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolNotificationType(D.method)}(e.ShowMessageNotification||(e.ShowMessageNotification={})),function(D){D.method="window/showMessageRequest",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolRequestType(D.method)}(e.ShowMessageRequest||(e.ShowMessageRequest={})),function(D){D.method="window/logMessage",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolNotificationType(D.method)}(e.LogMessageNotification||(e.LogMessageNotification={})),function(D){D.method="telemetry/event",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolNotificationType(D.method)}(e.TelemetryEventNotification||(e.TelemetryEventNotification={})),function(D){D.None=0,D.Full=1,D.Incremental=2}(e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})),function(D){D.method="textDocument/didOpen",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})),function(D){function R(X){let he=X;return he!=null&&typeof he.text=="string"&&he.range!==void 0&&(he.rangeLength===void 0||typeof he.rangeLength=="number")}D.isIncremental=R;function B(X){let he=X;return he!=null&&typeof he.text=="string"&&he.range===void 0&&he.rangeLength===void 0}D.isFull=B}(e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})),function(D){D.method="textDocument/didChange",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})),function(D){D.method="textDocument/didClose",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})),function(D){D.method="textDocument/didSave",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})),function(D){D.Manual=1,D.AfterDelay=2,D.FocusOut=3}(e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})),function(D){D.method="textDocument/willSave",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})),function(D){D.method="textDocument/willSaveWaitUntil",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})),function(D){D.method="workspace/didChangeWatchedFiles",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolNotificationType(D.method)}(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})),function(D){D.Created=1,D.Changed=2,D.Deleted=3}(e.FileChangeType||(e.FileChangeType={})),function(D){function R(B){const X=B;return r.objectLiteral(X)&&(n.URI.is(X.baseUri)||n.WorkspaceFolder.is(X.baseUri))&&r.string(X.pattern)}D.is=R}(e.RelativePattern||(e.RelativePattern={})),function(D){D.Create=1,D.Change=2,D.Delete=4}(e.WatchKind||(e.WatchKind={})),function(D){D.method="textDocument/publishDiagnostics",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolNotificationType(D.method)}(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})),function(D){D.Invoked=1,D.TriggerCharacter=2,D.TriggerForIncompleteCompletions=3}(e.CompletionTriggerKind||(e.CompletionTriggerKind={})),function(D){D.method="textDocument/completion",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CompletionRequest||(e.CompletionRequest={})),function(D){D.method="completionItem/resolve",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CompletionResolveRequest||(e.CompletionResolveRequest={})),function(D){D.method="textDocument/hover",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.HoverRequest||(e.HoverRequest={})),function(D){D.Invoked=1,D.TriggerCharacter=2,D.ContentChange=3}(e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})),function(D){D.method="textDocument/signatureHelp",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.SignatureHelpRequest||(e.SignatureHelpRequest={})),function(D){D.method="textDocument/definition",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DefinitionRequest||(e.DefinitionRequest={})),function(D){D.method="textDocument/references",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.ReferencesRequest||(e.ReferencesRequest={})),function(D){D.method="textDocument/documentHighlight",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})),function(D){D.method="textDocument/documentSymbol",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})),function(D){D.method="textDocument/codeAction",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CodeActionRequest||(e.CodeActionRequest={})),function(D){D.method="codeAction/resolve",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})),function(D){D.method="workspace/symbol",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})),function(D){D.method="workspaceSymbol/resolve",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.WorkspaceSymbolResolveRequest||(e.WorkspaceSymbolResolveRequest={})),function(D){D.method="textDocument/codeLens",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CodeLensRequest||(e.CodeLensRequest={})),function(D){D.method="codeLens/resolve",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})),function(D){D.method="workspace/codeLens/refresh",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolRequestType0(D.method)}(e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})),function(D){D.method="textDocument/documentLink",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentLinkRequest||(e.DocumentLinkRequest={})),function(D){D.method="documentLink/resolve",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})),function(D){D.method="textDocument/formatting",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})),function(D){D.method="textDocument/rangeFormatting",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})),function(D){D.method="textDocument/onTypeFormatting",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})),function(D){D.Identifier=1}(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})),function(D){D.method="textDocument/rename",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.RenameRequest||(e.RenameRequest={})),function(D){D.method="textDocument/prepareRename",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.PrepareRenameRequest||(e.PrepareRenameRequest={})),function(D){D.method="workspace/executeCommand",D.messageDirection=t.MessageDirection.clientToServer,D.type=new t.ProtocolRequestType(D.method)}(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})),function(D){D.method="workspace/applyEdit",D.messageDirection=t.MessageDirection.serverToClient,D.type=new t.ProtocolRequestType("workspace/applyEdit")}(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={}))})(As);const Wf=xe(As),Kf=U({__proto__:null,default:Wf},[As]),Uf=K(Kf);var cr={};Object.defineProperty(cr,"__esModule",{value:!0});var Ju=cr.createProtocolConnection=void 0;const Ka=On;function zf(e,t,n,r){return Ka.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Ka.createMessageConnection)(e,t,n,r)}Ju=cr.createProtocolConnection=zf;const Vf=U({__proto__:null,get createProtocolConnection(){return Ju},default:cr},[cr]),Gf=K(Vf);(function(e){var t=dt&&dt.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,a,u)}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),n=dt&&dt.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(On,e),n(qs,e),n(at,e),n(Uf,e);var r=Gf;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}}),function(i){i.lspReservedErrorRangeStart=-32899,i.RequestFailed=-32803,i.ServerCancelled=-32802,i.ContentModified=-32801,i.RequestCancelled=-32800,i.lspReservedErrorRangeEnd=-32800}(e.LSPErrorCodes||(e.LSPErrorCodes={}))})(Os);const Jf=xe(Os),Qf=U({__proto__:null,default:Jf},[Os]),Xf=K(Qf);(function(e){var t=dt&&dt.__createBinding||(Object.create?function(o,s,a,u){u===void 0&&(u=a);var c=Object.getOwnPropertyDescriptor(s,a);(!c||("get"in c?!s.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(o,u,c)}:function(o,s,a,u){u===void 0&&(u=a),o[u]=s[a]}),n=dt&&dt.__exportStar||function(o,s){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,o,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const r=xa;n(xa,e),n(Xf,e);function i(o,s,a,u){return(0,r.createMessageConnection)(o,s,a,u)}e.createProtocolConnection=i})(Ts);const Yf=xe(Ts),Zf=U({__proto__:null,default:Yf},[Ts]),Ee=K(Zf);var na={},it={};Object.defineProperty(it,"__esModule",{value:!0});var Qu=it.asPromise=cc=it.thenable=ac=it.typedArray=sc=it.stringArray=oc=it.array=rc=it.func=tc=it.error=ec=it.number=Zu=it.string=Xu=it.boolean=void 0;function eg(e){return e===!0||e===!1}var Xu=it.boolean=eg;function Yu(e){return typeof e=="string"||e instanceof String}var Zu=it.string=Yu;function tg(e){return typeof e=="number"||e instanceof Number}var ec=it.number=tg;function ng(e){return e instanceof Error}var tc=it.error=ng;function nc(e){return typeof e=="function"}var rc=it.func=nc;function ic(e){return Array.isArray(e)}var oc=it.array=ic;function rg(e){return ic(e)&&e.every(t=>Yu(t))}var sc=it.stringArray=rg;function ig(e,t){return Array.isArray(e)&&e.every(t)}var ac=it.typedArray=ig;function uc(e){return e&&nc(e.then)}var cc=it.thenable=uc;function og(e){return e instanceof Promise?e:uc(e)?new Promise((t,n)=>{e.then(r=>t(r),r=>n(r))}):Promise.resolve(e)}Qu=it.asPromise=og;const sg=U({__proto__:null,get array(){return oc},get asPromise(){return Qu},get boolean(){return Xu},default:it,get error(){return tc},get func(){return rc},get number(){return ec},get string(){return Zu},get stringArray(){return sc},get thenable(){return cc},get typedArray(){return ac}},[it]),Ht=K(sg);var kt={};Object.defineProperty(kt,"__esModule",{value:!0});var lc=kt.generateUuid=pc=kt.parse=Dc=kt.isUUID=gc=kt.v4=dc=kt.empty=void 0;class ra{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}}class Me extends ra{constructor(){super([Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),"-",Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),"-","4",Me._randomHex(),Me._randomHex(),Me._randomHex(),"-",Me._oneOf(Me._timeHighBits),Me._randomHex(),Me._randomHex(),Me._randomHex(),"-",Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex(),Me._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return Me._oneOf(Me._chars)}}Me._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Me._timeHighBits=["8","9","a","b"];var dc=kt.empty=new ra("00000000-0000-0000-0000-000000000000");function fc(){return new Me}var gc=kt.v4=fc;const ag=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function hc(e){return ag.test(e)}var Dc=kt.isUUID=hc;function ug(e){if(!hc(e))throw new Error("invalid uuid");return new ra(e)}var pc=kt.parse=ug;function cg(){return fc().asHex()}lc=kt.generateUuid=cg;const lg=U({__proto__:null,default:kt,get empty(){return dc},get generateUuid(){return lc},get isUUID(){return Dc},get parse(){return pc},get v4(){return gc}},[kt]),ut=K(lg);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceFeature=e.TextDocumentLanguageFeature=e.TextDocumentEventFeature=e.DynamicDocumentFeature=e.DynamicFeature=e.StaticFeature=e.ensure=e.LSPCancellationError=void 0;const t=pe,n=Ee,r=Ht,i=ut;class o extends t.CancellationError{constructor(d){super(),this.data=d}}e.LSPCancellationError=o;function s(g,d){return g[d]===void 0&&(g[d]={}),g[d]}e.ensure=s,function(g){function d(h){const m=h;return m!=null&&r.func(m.fillClientCapabilities)&&r.func(m.initialize)&&r.func(m.getState)&&r.func(m.dispose)&&(m.fillInitializeParams===void 0||r.func(m.fillInitializeParams))}g.is=d}(e.StaticFeature||(e.StaticFeature={})),function(g){function d(h){const m=h;return m!=null&&r.func(m.fillClientCapabilities)&&r.func(m.initialize)&&r.func(m.getState)&&r.func(m.dispose)&&(m.fillInitializeParams===void 0||r.func(m.fillInitializeParams))&&r.func(m.register)&&r.func(m.unregister)&&m.registrationType!==void 0}g.is=d}(e.DynamicFeature||(e.DynamicFeature={}));class a{constructor(d){this._client=d}getState(){const d=this.getDocumentSelectors();let h=0;for(const S of d){h++;for(const I of t.workspace.textDocuments)if(t.languages.match(S,I)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const m=h>0;return{kind:"document",id:this.registrationType.method,registrations:m,matches:!1}}}e.DynamicDocumentFeature=a;class u extends a{constructor(d,h,m,S,I,W,z){super(d),this._event=h,this._type=m,this._middleware=S,this._createParams=I,this._textDocument=W,this._selectorFilter=z,this._selectors=new Map,this._onNotificationSent=new t.EventEmitter}static textDocumentFilter(d,h){for(const m of d)if(t.languages.match(m,h)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(d){d.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(h=>{this.callback(h).catch(m=>{this._client.error(`Sending document notification ${this._type.method} failed.`,m)})})),this._selectors.set(d.id,this._client.protocol2CodeConverter.asDocumentSelector(d.registerOptions.documentSelector)))}async callback(d){const h=async m=>{const S=this._createParams(m);await this._client.sendNotification(this._type,S),this.notificationSent(this.getTextDocument(m),this._type,S)};if(this.matches(d)){const m=this._middleware();return m?m(d,S=>h(S)):h(d)}}matches(d){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(d))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),d)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(d,h,m){this._onNotificationSent.fire({textDocument:d,type:h,params:m})}unregister(d){this._selectors.delete(d),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(d){for(const h of this._selectors.values())if(t.languages.match(h,d)>0)return{send:m=>this.callback(m)}}}e.TextDocumentEventFeature=u;class c extends a{constructor(d,h){super(d),this._registrationType=h,this._registrations=new Map}*getDocumentSelectors(){for(const d of this._registrations.values()){const h=d.data.registerOptions.documentSelector;h!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(h))}}get registrationType(){return this._registrationType}register(d){if(!d.registerOptions.documentSelector)return;let h=this.registerLanguageProvider(d.registerOptions,d.id);this._registrations.set(d.id,{disposable:h[0],data:d,provider:h[1]})}unregister(d){let h=this._registrations.get(d);h!==void 0&&h.disposable.dispose()}dispose(){this._registrations.forEach(d=>{d.disposable.dispose()}),this._registrations.clear()}getRegistration(d,h){if(h){if(n.TextDocumentRegistrationOptions.is(h)){const m=n.StaticRegistrationOptions.hasId(h)?h.id:i.generateUuid(),S=h.documentSelector??d;if(S)return[m,Object.assign({},h,{documentSelector:S})]}else if(r.boolean(h)&&h===!0||n.WorkDoneProgressOptions.is(h)){if(!d)return[void 0,void 0];const m=r.boolean(h)&&h===!0?{documentSelector:d}:Object.assign({},h,{documentSelector:d});return[i.generateUuid(),m]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(d,h){if(!(!d||!h))return r.boolean(h)&&h===!0?{documentSelector:d}:Object.assign({},h,{documentSelector:d})}getProvider(d){for(const h of this._registrations.values()){let m=h.data.registerOptions.documentSelector;if(m!==null&&t.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(m),d)>0)return h.provider}}getAllProviders(){const d=[];for(const h of this._registrations.values())d.push(h.provider);return d}}e.TextDocumentLanguageFeature=c;class f{constructor(d,h){this._client=d,this._registrationType=h,this._registrations=new Map}getState(){const d=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:d}}get registrationType(){return this._registrationType}register(d){const h=this.registerLanguageProvider(d.registerOptions);this._registrations.set(d.id,{disposable:h[0],provider:h[1]})}unregister(d){let h=this._registrations.get(d);h!==void 0&&h.disposable.dispose()}dispose(){this._registrations.forEach(d=>{d.disposable.dispose()}),this._registrations.clear()}getProviders(){const d=[];for(const h of this._registrations.values())d.push(h.provider);return d}}e.WorkspaceFeature=f})(na);const dg=xe(na),fg=U({__proto__:null,default:dg},[na]),We=K(fg);var ia={};const gg=typeof process=="object"&&process&&process.platform==="win32";var Ua=gg?{sep:"\\"}:{sep:"/"};const hg=U({__proto__:null,default:Ua},[Ua]),Dg=K(hg);var za=mc;function mc(e,t,n){e instanceof RegExp&&(e=Va(e,n)),t instanceof RegExp&&(t=Va(t,n));var r=yc(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function Va(e,t){var n=t.match(e);return n?n[0]:null}mc.range=yc;function yc(e,t,n){var r,i,o,s,a,u=n.indexOf(e),c=n.indexOf(t,u+1),f=u;if(u>=0&&c>0){if(e===t)return[u,c];for(r=[],o=n.length;f>=0&&!a;)f==u?(r.push(f),u=n.indexOf(e,f+1)):r.length==1?a=[r.pop(),c]:(i=r.pop(),i<o&&(o=i,s=c),c=n.indexOf(t,f+1)),f=u<c&&u>=0?u:c;r.length&&(a=[o,s])}return a}const pg=U({__proto__:null,default:za},[za]),mg=K(pg);var Cc=mg,Ga=vg,vc="\0SLASH"+Math.random()+"\0",_c="\0OPEN"+Math.random()+"\0",oa="\0CLOSE"+Math.random()+"\0",bc="\0COMMA"+Math.random()+"\0",Fc="\0PERIOD"+Math.random()+"\0";function Ii(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function yg(e){return e.split("\\\\").join(vc).split("\\{").join(_c).split("\\}").join(oa).split("\\,").join(bc).split("\\.").join(Fc)}function Cg(e){return e.split(vc).join("\\").split(_c).join("{").split(oa).join("}").split(bc).join(",").split(Fc).join(".")}function wc(e){if(!e)return[""];var t=[],n=Cc("{","}",e);if(!n)return e.split(",");var r=n.pre,i=n.body,o=n.post,s=r.split(",");s[s.length-1]+="{"+i+"}";var a=wc(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),t.push.apply(t,s),t}function vg(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Qn(yg(e),!0).map(Cg)):[]}function _g(e){return"{"+e+"}"}function bg(e){return/^-?0\d/.test(e)}function Fg(e,t){return e<=t}function wg(e,t){return e>=t}function Qn(e,t){var n=[],r=Cc("{","}",e);if(!r)return[e];var i=r.pre,o=r.post.length?Qn(r.post,!1):[""];if(/\$$/.test(r.pre))for(var s=0;s<o.length;s++){var a=i+"{"+r.body+"}"+o[s];n.push(a)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),f=u||c,g=r.body.indexOf(",")>=0;if(!f&&!g)return r.post.match(/,.*\}/)?(e=r.pre+"{"+r.body+oa+r.post,Qn(e)):[e];var d;if(f)d=r.body.split(/\.\./);else if(d=wc(r.body),d.length===1&&(d=Qn(d[0],!1).map(_g),d.length===1))return o.map(function(ye){return r.pre+d[0]+ye});var h;if(f){var m=Ii(d[0]),S=Ii(d[1]),I=Math.max(d[0].length,d[1].length),W=d.length==3?Math.abs(Ii(d[2])):1,z=Fg,F=S<m;F&&(W*=-1,z=wg);var P=d.some(bg);h=[];for(var L=m;z(L,S);L+=W){var G;if(c)G=String.fromCharCode(L),G==="\\"&&(G="");else if(G=String(L),P){var H=I-G.length;if(H>0){var Y=new Array(H+1).join("0");L<0?G="-"+Y+G.slice(1):G=Y+G}}h.push(G)}}else{h=[];for(var Q=0;Q<d.length;Q++)h.push.apply(h,Qn(d[Q],!1))}for(var Q=0;Q<h.length;Q++)for(var s=0;s<o.length;s++){var a=i+h[Q]+o[s];(!t||f||a)&&n.push(a)}}return n}const Sg=U({__proto__:null,default:Ga},[Ga]),Rg=K(Sg),Ot=sa=(e,t,n={})=>(li(t),!n.nocomment&&t.charAt(0)==="#"?!1:new vi(t,n).match(e));var sa=Ot;const ms=Dg;Ot.sep=ms.sep;const Nt=Symbol("globstar **");Ot.GLOBSTAR=Nt;const Tg=Rg,Ja={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},ys="[^/]",Ni=ys+"*?",Eg="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",kg="(?:(?!(?:\\/|^)\\.).)*?",Sc=e=>e.split("").reduce((t,n)=>(t[n]=!0,t),{}),Qa=Sc("().*{}+?[]^$\\!"),Pg=Sc("[.("),Xa=/\/+/;Ot.filter=(e,t={})=>(n,r,i)=>Ot(n,e,t);const Yt=(e,t={})=>{const n={};return Object.keys(e).forEach(r=>n[r]=e[r]),Object.keys(t).forEach(r=>n[r]=t[r]),n};Ot.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return Ot;const t=Ot,n=(r,i,o)=>t(r,i,Yt(e,o));return n.Minimatch=class extends t.Minimatch{constructor(i,o){super(i,Yt(e,o))}},n.Minimatch.defaults=r=>t.defaults(Yt(e,r)).Minimatch,n.filter=(r,i)=>t.filter(r,Yt(e,i)),n.defaults=r=>t.defaults(Yt(e,r)),n.makeRe=(r,i)=>t.makeRe(r,Yt(e,i)),n.braceExpand=(r,i)=>t.braceExpand(r,Yt(e,i)),n.match=(r,i,o)=>t.match(r,i,Yt(e,o)),n};Ot.braceExpand=(e,t)=>Rc(e,t);const Rc=(e,t={})=>(li(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Tg(e)),Og=1024*64,li=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Og)throw new TypeError("pattern is too long")},ji=Symbol("subparse");Ot.makeRe=(e,t)=>new vi(e,t||{}).makeRe();Ot.match=(e,t,n={})=>{const r=new vi(t,n);return e=e.filter(i=>r.match(i)),r.options.nonull&&!e.length&&e.push(t),e};const qg=e=>e.replace(/\\(.)/g,"$1"),$g=e=>e.replace(/\\([^-\]])/g,"$1"),Ag=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Mg=e=>e.replace(/[[\]\\]/g,"\\$&");class vi{constructor(t,n){li(t),n||(n={}),this.options=n,this.set=[],this.pattern=t,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){const t=this.pattern,n=this.options;if(!n.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();let r=this.globSet=this.braceExpand();n.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,r),r=this.globParts=r.map(i=>i.split(Xa)),this.debug(this.pattern,r),r=r.map((i,o,s)=>i.map(this.parse,this)),this.debug(this.pattern,r),r=r.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;const t=this.pattern;let n=!1,r=0;for(let i=0;i<t.length&&t.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=t.slice(r)),this.negate=n}matchOne(t,n,r){var i=this.options;this.debug("matchOne",{this:this,file:t,pattern:n}),this.debug("matchOne",t.length,n.length);for(var o=0,s=0,a=t.length,u=n.length;o<a&&s<u;o++,s++){this.debug("matchOne loop");var c=n[s],f=t[o];if(this.debug(n,c,f),c===!1)return!1;if(c===Nt){this.debug("GLOBSTAR",[n,c,f]);var g=o,d=s+1;if(d===u){for(this.debug("** at the end");o<a;o++)if(t[o]==="."||t[o]===".."||!i.dot&&t[o].charAt(0)===".")return!1;return!0}for(;g<a;){var h=t[g];if(this.debug(`
globstar while`,t,g,n,d,h),this.matchOne(t.slice(g),n.slice(d),r))return this.debug("globstar found match!",g,a,h),!0;if(h==="."||h===".."||!i.dot&&h.charAt(0)==="."){this.debug("dot detected!",t,g,n,d);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(r&&(this.debug(`
>>> no match, partial?`,t,g,n,d),g===a))}var m;if(typeof c=="string"?(m=f===c,this.debug("string match",c,f,m)):(m=f.match(c),this.debug("pattern match",c,f,m)),!m)return!1}if(o===a&&s===u)return!0;if(o===a)return r;if(s===u)return o===a-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Rc(this.pattern,this.options)}parse(t,n){li(t);const r=this.options;if(t==="**")if(r.noglobstar)t="*";else return Nt;if(t==="")return"";let i="",o=!1,s=!1;const a=[],u=[];let c,f=!1,g=-1,d=-1,h,m,S,I=t.charAt(0)===".",W=r.dot||I;const z=()=>I?"":W?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",F=H=>H.charAt(0)==="."?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",P=()=>{if(c){switch(c){case"*":i+=Ni,o=!0;break;case"?":i+=ys,o=!0;break;default:i+="\\"+c;break}this.debug("clearStateChar %j %j",c,i),c=!1}};for(let H=0,Y;H<t.length&&(Y=t.charAt(H));H++){if(this.debug("%s	%s %s %j",t,H,i,Y),s){if(Y==="/")return!1;Qa[Y]&&(i+="\\"),i+=Y,s=!1;continue}switch(Y){case"/":return!1;case"\\":if(f&&t.charAt(H+1)==="-"){i+=Y;continue}P(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,H,i,Y),f){this.debug("  in class"),Y==="!"&&H===d+1&&(Y="^"),i+=Y;continue}this.debug("call clearStateChar %j",c),P(),c=Y,r.noext&&P();continue;case"(":{if(f){i+="(";continue}if(!c){i+="\\(";continue}const Q={type:c,start:H-1,reStart:i.length,open:Ja[c].open,close:Ja[c].close};this.debug(this.pattern,"	",Q),a.push(Q),i+=Q.open,Q.start===0&&Q.type!=="!"&&(I=!0,i+=F(t.slice(H+1))),this.debug("plType %j %j",c,i),c=!1;continue}case")":{const Q=a[a.length-1];if(f||!Q){i+="\\)";continue}a.pop(),P(),o=!0,m=Q,i+=m.close,m.type==="!"&&u.push(Object.assign(m,{reEnd:i.length}));continue}case"|":{const Q=a[a.length-1];if(f||!Q){i+="\\|";continue}P(),i+="|",Q.start===0&&Q.type!=="!"&&(I=!0,i+=F(t.slice(H+1)));continue}case"[":if(P(),f){i+="\\"+Y;continue}f=!0,d=H,g=i.length,i+=Y;continue;case"]":if(H===d+1||!f){i+="\\"+Y;continue}h=t.substring(d+1,H);try{RegExp("["+Mg($g(h))+"]"),i+=Y}catch{i=i.substring(0,g)+"(?:$.)"}o=!0,f=!1;continue;default:P(),Qa[Y]&&!(Y==="^"&&f)&&(i+="\\"),i+=Y;break}}for(f&&(h=t.slice(d+1),S=this.parse(h,ji),i=i.substring(0,g)+"\\["+S[0],o=o||S[1]),m=a.pop();m;m=a.pop()){let H;H=i.slice(m.reStart+m.open.length),this.debug("setting tail",i,m),H=H.replace(/((?:\\{2}){0,64})(\\?)\|/g,(Q,ye,E)=>(E||(E="\\"),ye+ye+E+"|")),this.debug(`tail=%j
   %s`,H,H,m,i);const Y=m.type==="*"?Ni:m.type==="?"?ys:"\\"+m.type;o=!0,i=i.slice(0,m.reStart)+Y+"\\("+H}P(),s&&(i+="\\\\");const L=Pg[i.charAt(0)];for(let H=u.length-1;H>-1;H--){const Y=u[H],Q=i.slice(0,Y.reStart),ye=i.slice(Y.reStart,Y.reEnd-8);let E=i.slice(Y.reEnd);const D=i.slice(Y.reEnd-8,Y.reEnd)+E,R=Q.split(")").length,B=Q.split("(").length-R;let X=E;for(let te=0;te<B;te++)X=X.replace(/\)[+*?]?/,"");E=X;const he=E===""&&n!==ji?"(?:$|\\/)":"";i=Q+ye+E+he+D}if(i!==""&&o&&(i="(?=.)"+i),L&&(i=z()+i),n===ji)return[i,o];if(r.nocase&&!o&&(o=t.toUpperCase()!==t.toLowerCase()),!o)return qg(t);const G=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",G),{_glob:t,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const n=this.options,r=n.noglobstar?Ni:n.dot?Eg:kg,i=n.nocase?"i":"";let o=t.map(s=>(s=s.map(a=>typeof a=="string"?Ag(a):a===Nt?Nt:a._src).reduce((a,u)=>(a[a.length-1]===Nt&&u===Nt||a.push(u),a),[]),s.forEach((a,u)=>{a!==Nt||s[u-1]===Nt||(u===0?s.length>1?s[u+1]="(?:\\/|"+r+"\\/)?"+s[u+1]:s[u]=r:u===s.length-1?s[u-1]+="(?:\\/|"+r+")?":(s[u-1]+="(?:\\/|\\/"+r+"\\/)"+s[u+1],s[u+1]=Nt))}),s.filter(a=>a!==Nt).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(t,n=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;const r=this.options;ms.sep!=="/"&&(t=t.split(ms.sep).join("/")),t=t.split(Xa),this.debug(this.pattern,"split",t);const i=this.set;this.debug(this.pattern,"set",i);let o;for(let s=t.length-1;s>=0&&(o=t[s],!o);s--);for(let s=0;s<i.length;s++){const a=i[s];let u=t;if(r.matchBase&&a.length===1&&(u=[o]),this.matchOne(u,a,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(t){return Ot.defaults(t).Minimatch}}Ot.Minimatch=vi;const Ig=sa,Ng=U({__proto__:null,default:Ig},[sa]),aa=K(Ng);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticFeature=e.DiagnosticPullMode=e.vsdiag=void 0;const t=aa,n=pe,r=Ee,i=ut,o=We;function s(z,F){return z[F]===void 0&&(z[F]={}),z[F]}var a;(function(z){(function(F){F.full="full",F.unChanged="unChanged"})(z.DocumentDiagnosticReportKind||(z.DocumentDiagnosticReportKind={}))})(a=e.vsdiag||(e.vsdiag={}));var u;(function(z){z.onType="onType",z.onSave="onSave"})(u=e.DiagnosticPullMode||(e.DiagnosticPullMode={}));var c;(function(z){z.active="open",z.reschedule="reschedule",z.outDated="drop"})(c||(c={}));class f{constructor(){this.open=new Set,this._onOpen=new n.EventEmitter,this._onClose=new n.EventEmitter,f.fillTabResources(this.open);const F=P=>{if(P.closed.length===0&&P.opened.length===0)return;const L=this.open,G=new Set;f.fillTabResources(G);const H=new Set,Y=new Set(G);for(const Q of L.values())G.has(Q)?Y.delete(Q):H.add(Q);if(this.open=G,H.size>0){const Q=new Set;for(const ye of H)Q.add(n.Uri.parse(ye));this._onClose.fire(Q)}if(Y.size>0){const Q=new Set;for(const ye of Y)Q.add(n.Uri.parse(ye));this._onOpen.fire(Q)}};n.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=n.window.tabGroups.onDidChangeTabs(F):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(F){var P,L;return F instanceof n.Uri?((P=n.window.activeTextEditor)==null?void 0:P.document.uri)===F:((L=n.window.activeTextEditor)==null?void 0:L.document)===F}isVisible(F){const P=F instanceof n.Uri?F:F.uri;return this.open.has(P.toString())}getTabResources(){const F=new Set;return f.fillTabResources(new Set,F),F}static fillTabResources(F,P){const L=F??new Set;for(const G of n.window.tabGroups.all)for(const H of G.tabs){const Y=H.input;let Q;Y instanceof n.TabInputText?Q=Y.uri:Y instanceof n.TabInputTextDiff&&(Q=Y.modified),Q!==void 0&&!L.has(Q.toString())&&(L.add(Q.toString()),P!==void 0&&P.add(Q))}}}var g;(function(z){z[z.document=1]="document",z[z.workspace=2]="workspace"})(g||(g={}));var d;(function(z){function F(P){return P instanceof n.Uri?P.toString():P.uri.toString()}z.asKey=F})(d||(d={}));class h{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(F,P,L){const G=F===g.document?this.documentPullStates:this.workspacePullStates,[H,Y,Q]=P instanceof n.Uri?[P.toString(),P,L]:[P.uri.toString(),P.uri,P.version];let ye=G.get(H);return ye===void 0&&(ye={document:Y,pulledVersion:Q,resultId:void 0},G.set(H,ye)),ye}update(F,P,L,G){const H=F===g.document?this.documentPullStates:this.workspacePullStates,[Y,Q,ye,E]=P instanceof n.Uri?[P.toString(),P,L,G]:[P.uri.toString(),P.uri,P.version,L];let D=H.get(Y);D===void 0?(D={document:Q,pulledVersion:ye,resultId:E},H.set(Y,D)):(D.pulledVersion=ye,D.resultId=E)}unTrack(F,P){const L=d.asKey(P);(F===g.document?this.documentPullStates:this.workspacePullStates).delete(L)}tracks(F,P){const L=d.asKey(P);return(F===g.document?this.documentPullStates:this.workspacePullStates).has(L)}getResultId(F,P){var H;const L=d.asKey(P);return(H=(F===g.document?this.documentPullStates:this.workspacePullStates).get(L))==null?void 0:H.resultId}getAllResultIds(){const F=[];for(let[P,L]of this.workspacePullStates)this.documentPullStates.has(P)&&(L=this.documentPullStates.get(P)),L.resultId!==void 0&&F.push({uri:P,value:L.resultId});return F}}class m{constructor(F,P,L){this.client=F,this.tabs=P,this.options=L,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new n.EventEmitter,this.provider=this.createProvider(),this.diagnostics=n.languages.createDiagnosticCollection(L.identifier),this.openRequests=new Map,this.documentStates=new h,this.workspaceErrorCounter=0}knows(F,P){const L=P instanceof n.Uri?P:P.uri;return this.documentStates.tracks(F,P)||this.openRequests.has(L.toString())}forget(F,P){this.documentStates.unTrack(F,P)}pull(F,P){if(this.isDisposed)return;const L=F instanceof n.Uri?F:F.uri;this.pullAsync(F).then(()=>{P&&P()},G=>{this.client.error(`Document pull failed for text document ${L.toString()}`,G,!1)})}async pullAsync(F,P){if(this.isDisposed)return;const L=F instanceof n.Uri,G=L?F:F.uri,H=G.toString();P=L?P:F.version;const Y=this.openRequests.get(H),Q=L?this.documentStates.track(g.document,F,P):this.documentStates.track(g.document,F);if(Y===void 0){const ye=new n.CancellationTokenSource;this.openRequests.set(H,{state:c.active,document:F,version:P,tokenSource:ye});let E,D;try{E=await this.provider.provideDiagnostics(F,Q.resultId,ye.token)??{kind:a.DocumentDiagnosticReportKind.full,items:[]}}catch(R){if(R instanceof o.LSPCancellationError&&r.DiagnosticServerCancellationData.is(R.data)&&R.data.retriggerRequest===!1&&(D={state:c.outDated,document:F}),D===void 0&&R instanceof n.CancellationError)D={state:c.reschedule,document:F};else throw R}if(D=D??this.openRequests.get(H),D===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${H}`),this.diagnostics.delete(G);return}if(this.openRequests.delete(H),!this.tabs.isVisible(F)){this.documentStates.unTrack(g.document,F);return}if(D.state===c.outDated)return;E!==void 0&&(E.kind===a.DocumentDiagnosticReportKind.full&&this.diagnostics.set(G,E.items),Q.pulledVersion=P,Q.resultId=E.resultId),D.state===c.reschedule&&this.pull(F)}else Y.state===c.active?(Y.tokenSource.cancel(),this.openRequests.set(H,{state:c.reschedule,document:Y.document})):Y.state===c.outDated&&this.openRequests.set(H,{state:c.reschedule,document:Y.document})}forgetDocument(F){const P=F instanceof n.Uri?F:F.uri,L=P.toString(),G=this.openRequests.get(L);this.options.workspaceDiagnostics?G!==void 0?this.openRequests.set(L,{state:c.reschedule,document:F}):this.pull(F,()=>{this.forget(g.document,F)}):(G!==void 0&&(G.state===c.active&&G.tokenSource.cancel(),this.openRequests.set(L,{state:c.outDated,document:F})),this.diagnostics.delete(P),this.forget(g.document,F))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,r.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},F=>{!(F instanceof o.LSPCancellationError)&&!r.DiagnosticServerCancellationData.is(F.data)&&(this.client.error("Workspace diagnostic pull failed.",F,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,r.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new n.CancellationTokenSource;const F=this.documentStates.getAllResultIds().map(P=>({uri:this.client.protocol2CodeConverter.asUri(P.uri),value:P.value}));await this.provider.provideWorkspaceDiagnostics(F,this.workspaceCancellation.token,P=>{if(!(!P||this.isDisposed))for(const L of P.items)L.kind===a.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(g.document,L.uri)||this.diagnostics.set(L.uri,L.items)),this.documentStates.update(g.workspace,L.uri,L.version??void 0,L.resultId)})}createProvider(){const F={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(P,L,G)=>{const H=(Q,ye,E)=>{const D={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(Q instanceof n.Uri?Q:Q.uri)},previousResultId:ye};return this.isDisposed===!0||!this.client.isRunning()?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(r.DocumentDiagnosticRequest.type,D,E).then(async R=>R==null||this.isDisposed||E.isCancellationRequested?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:R.kind===r.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,resultId:R.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(R.items,E)}:{kind:a.DocumentDiagnosticReportKind.unChanged,resultId:R.resultId},R=>this.client.handleFailedRequest(r.DocumentDiagnosticRequest.type,E,R,{kind:a.DocumentDiagnosticReportKind.full,items:[]}))},Y=this.client.middleware;return Y.provideDiagnostics?Y.provideDiagnostics(P,L,G,H):H(P,L,G)}};return this.options.workspaceDiagnostics&&(F.provideWorkspaceDiagnostics=(P,L,G)=>{const H=async E=>E.kind===r.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(E.uri),resultId:E.resultId,version:E.version,items:await this.client.protocol2CodeConverter.asDiagnostics(E.items,L)}:{kind:a.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(E.uri),resultId:E.resultId,version:E.version},Y=E=>{const D=[];for(const R of E)D.push({uri:this.client.code2ProtocolConverter.asUri(R.uri),value:R.value});return D},Q=(E,D)=>{const R=(0,i.generateUuid)(),B=this.client.onProgress(r.WorkspaceDiagnosticRequest.partialResult,R,async he=>{if(he==null){G(null);return}const te={items:[]};for(const me of he.items)try{te.items.push(await H(me))}catch(ke){this.client.error("Converting workspace diagnostics failed.",ke)}G(te)}),X={identifier:this.options.identifier,previousResultIds:Y(E),partialResultToken:R};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(r.WorkspaceDiagnosticRequest.type,X,D).then(async he=>{if(D.isCancellationRequested)return{items:[]};const te={items:[]};for(const me of he.items)te.items.push(await H(me));return B.dispose(),G(te),{items:[]}},he=>(B.dispose(),this.client.handleFailedRequest(r.DocumentDiagnosticRequest.type,D,he,{items:[]})))},ye=this.client.middleware;return ye.provideWorkspaceDiagnostics?ye.provideWorkspaceDiagnostics(P,L,G,Q):Q(P,L)}),F}dispose(){var F,P;this.isDisposed=!0,(F=this.workspaceCancellation)==null||F.cancel(),(P=this.workspaceTimeout)==null||P.dispose();for(const[L,G]of this.openRequests)G.state===c.active&&G.tokenSource.cancel(),this.openRequests.set(L,{state:c.outDated,document:G.document});this.diagnostics.dispose()}}class S{constructor(F){this.diagnosticRequestor=F,this.documents=new r.LinkedMap,this.isDisposed=!1}add(F){if(this.isDisposed===!0)return;const P=d.asKey(F);this.documents.has(P)||(this.documents.set(P,F,r.Touch.Last),this.trigger())}remove(F){const P=d.asKey(F);this.documents.delete(P),this.documents.size===0?this.stop():P===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,r.RAL)().timer.setInterval(()=>{const F=this.documents.first;if(F!==void 0){const P=d.asKey(F);this.diagnosticRequestor.pull(F),this.documents.set(P,F,r.Touch.Last),P===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){var F;(F=this.intervalHandle)==null||F.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?d.asKey(this.endDocument):void 0}}class I{constructor(F,P,L){var he;const G=F.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},H=F.protocol2CodeConverter.asDocumentSelector(L.documentSelector),Y=[],Q=te=>{const me=L.documentSelector;if(G.match!==void 0)return G.match(me,te);for(const ke of me)if(r.TextDocumentFilter.is(ke)){if(typeof ke=="string"||ke.language!==void 0&&ke.language!=="*"||ke.scheme!==void 0&&ke.scheme!=="*"&&ke.scheme!==te.scheme)return!1;if(ke.pattern!==void 0){const nt=new t.Minimatch(ke.pattern,{noext:!0});if(!nt.makeRe()||!nt.match(te.fsPath))return!1}}return!0},ye=te=>te instanceof n.Uri?Q(te):n.languages.match(H,te)>0&&P.isVisible(te),E=te=>{var me;return te instanceof n.Uri?((me=this.activeTextDocument)==null?void 0:me.uri.toString())===te.toString():this.activeTextDocument===te};this.diagnosticRequestor=new m(F,P,L),this.backgroundScheduler=new S(this.diagnosticRequestor);const D=te=>{!ye(te)||!L.interFileDependencies||E(te)||this.backgroundScheduler.add(te)};this.activeTextDocument=(he=n.window.activeTextEditor)==null?void 0:he.document,n.window.onDidChangeActiveTextEditor(te=>{const me=this.activeTextDocument;this.activeTextDocument=te==null?void 0:te.document,me!==void 0&&D(me),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});const R=F.getFeature(r.DidOpenTextDocumentNotification.method);Y.push(R.onNotificationSent(te=>{const me=te.textDocument;this.diagnosticRequestor.knows(g.document,me)||ye(me)&&this.diagnosticRequestor.pull(me,()=>{D(me)})})),P.onOpen(te=>{for(const me of te){if(this.diagnosticRequestor.knows(g.document,me))continue;const ke=me.toString();let nt;for(const Ct of n.workspace.textDocuments)if(ke===Ct.uri.toString()){nt=Ct;break}nt!==void 0&&ye(nt)?this.diagnosticRequestor.pull(nt,()=>{D(nt)}):ye(me)&&this.diagnosticRequestor.pull(me,()=>{D(me)})}});const B=new Set;for(const te of n.workspace.textDocuments)ye(te)&&(this.diagnosticRequestor.pull(te,()=>{D(te)}),B.add(te.uri.toString()));if(G.onTabs===!0)for(const te of P.getTabResources())!B.has(te.toString())&&ye(te)&&this.diagnosticRequestor.pull(te,()=>{D(te)});if(G.onChange===!0){const te=F.getFeature(r.DidChangeTextDocumentNotification.method);Y.push(te.onNotificationSent(async me=>{const ke=me.textDocument;(G.filter===void 0||!G.filter(ke,u.onType))&&this.diagnosticRequestor.knows(g.document,ke)&&this.diagnosticRequestor.pull(ke,()=>{this.backgroundScheduler.trigger()})}))}if(G.onSave===!0){const te=F.getFeature(r.DidSaveTextDocumentNotification.method);Y.push(te.onNotificationSent(me=>{const ke=me.textDocument;(G.filter===void 0||!G.filter(ke,u.onSave))&&this.diagnosticRequestor.knows(g.document,ke)&&this.diagnosticRequestor.pull(me.textDocument,()=>{this.backgroundScheduler.trigger()})}))}const X=F.getFeature(r.DidCloseTextDocumentNotification.method);Y.push(X.onNotificationSent(te=>{this.cleanUpDocument(te.textDocument)})),P.onClose(te=>{for(const me of te)this.cleanUpDocument(me)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(const te of n.workspace.textDocuments)ye(te)&&this.diagnosticRequestor.pull(te)}),L.workspaceDiagnostics===!0&&L.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=n.Disposable.from(...Y,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(F){this.diagnosticRequestor.knows(g.document,F)&&(this.diagnosticRequestor.forgetDocument(F),this.backgroundScheduler.remove(F))}}class W extends o.TextDocumentLanguageFeature{constructor(F){super(F,r.DocumentDiagnosticRequest.type)}fillClientCapabilities(F){let P=s(s(F,"textDocument"),"diagnostic");P.dynamicRegistration=!0,P.relatedDocumentSupport=!1,s(s(F,"workspace"),"diagnostics").refreshSupport=!0}initialize(F,P){this._client.onRequest(r.DiagnosticRefreshRequest.type,async()=>{for(const Y of this.getAllProviders())Y.onDidChangeDiagnosticsEmitter.fire()});let[G,H]=this.getRegistration(P,F.diagnosticProvider);!G||!H||this.register({id:G,registerOptions:H})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(F){this.tabs===void 0&&(this.tabs=new f);const P=new I(this._client,this.tabs,F);return[P.disposable,P]}}e.DiagnosticFeature=W})(ia);const jg=xe(ia),Lg=U({__proto__:null,default:jg},[ia]),Tc=K(Lg);var ua={},lr={},mt={};Object.defineProperty(mt,"__esModule",{value:!0});var Ec=mt.forEach=Ac=mt.mapAsync=$c=mt.map=qc=mt.clearTestMode=Oc=mt.setTestMode=Pc=mt.Semaphore=kc=mt.Delayer=void 0;const Kr=Ee;class Bg{constructor(t){this.defaultDelay=t,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(t,n=this.defaultDelay){return this.task=t,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=>{this.onSuccess=r}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,Kr.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let t=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,t}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}}var kc=mt.Delayer=Bg;class Hg{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Kr.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}}var Pc=mt.Semaphore=Hg;let ca=!1;function xg(){ca=!0}var Oc=mt.setTestMode=xg;function Wg(){ca=!1}var qc=mt.clearTestMode=Wg;const Ya=15;class la{constructor(t=Ya){this.yieldAfter=ca===!0?Math.max(t,2):Math.max(t,Ya),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const t=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-t);if(this.total+=this.counter,this.counter=0,t>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(t){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function Kg(e,t,n,r){if(e.length===0)return[];const i=new Array(e.length),o=new la(r==null?void 0:r.yieldAfter);function s(u){o.start();for(let c=u;c<e.length;c++)if(i[c]=t(e[c]),o.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),c+1;return-1}let a=s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,Kr.RAL)().timer.setImmediate(()=>{u(s(a))})});return i}var $c=mt.map=Kg;async function Ug(e,t,n,r){if(e.length===0)return[];const i=new Array(e.length),o=new la(r==null?void 0:r.yieldAfter);async function s(u){o.start();for(let c=u;c<e.length;c++)if(i[c]=await t(e[c],n),o.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),c+1;return-1}let a=await s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(u=>{(0,Kr.RAL)().timer.setImmediate(()=>{u(s(a))})});return i}var Ac=mt.mapAsync=Ug;async function zg(e,t,n,r){if(e.length===0)return;const i=new la(r==null?void 0:r.yieldAfter);function o(a){i.start();for(let u=a;u<e.length;u++)if(t(e[u]),i.shouldYield())return r!=null&&r.yieldCallback&&r.yieldCallback(),u+1;return-1}let s=o(0);for(;s!==-1&&!(n!==void 0&&n.isCancellationRequested);)s=await new Promise(a=>{(0,Kr.RAL)().timer.setImmediate(()=>{a(o(s))})})}Ec=mt.forEach=zg;const Vg=U({__proto__:null,get Delayer(){return kc},get Semaphore(){return Pc},get clearTestMode(){return qc},default:mt,get forEach(){return Ec},get map(){return $c},get mapAsync(){return Ac},get setTestMode(){return Oc}},[mt]),da=K(Vg);var fa={};Object.defineProperty(fa,"__esModule",{value:!0});const Gg=pe;class Jg extends Gg.CompletionItem{constructor(t){super(t)}}var Qg=fa.default=Jg;const Xg=U({__proto__:null,default:Qg},[fa]),Mc=K(Xg);var ga={};Object.defineProperty(ga,"__esModule",{value:!0});const Yg=pe;class Zg extends Yg.CodeLens{constructor(t){super(t)}}var eh=ga.default=Zg;const th=U({__proto__:null,default:eh},[ga]),Ic=K(th);var ha={};Object.defineProperty(ha,"__esModule",{value:!0});const nh=pe;class rh extends nh.DocumentLink{constructor(t,n){super(t,n)}}var ih=ha.default=rh;const oh=U({__proto__:null,default:ih},[ha]),Nc=K(oh);var Da={};Object.defineProperty(Da,"__esModule",{value:!0});const sh=pe;class ah extends sh.CodeAction{constructor(t,n){super(t),this.data=n}}var uh=Da.default=ah;const ch=U({__proto__:null,default:uh},[Da]),jc=K(ch);var pa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolDiagnostic=e.DiagnosticCode=void 0;const t=pe,n=Ht;(function(i){function o(s){const a=s;return a!=null&&(n.number(a.value)||n.string(a.value))&&n.string(a.target)}i.is=o})(e.DiagnosticCode||(e.DiagnosticCode={}));class r extends t.Diagnostic{constructor(o,s,a,u){super(o,s,a),this.data=u,this.hasDiagnosticCode=!1}}e.ProtocolDiagnostic=r})(pa);const lh=xe(pa),dh=U({__proto__:null,default:lh},[pa]),Lc=K(dh);var ma={};Object.defineProperty(ma,"__esModule",{value:!0});const fh=pe;class gh extends fh.CallHierarchyItem{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o,s),a!==void 0&&(this.data=a)}}var hh=ma.default=gh;const Dh=U({__proto__:null,default:hh},[ma]),Bc=K(Dh);var ya={};Object.defineProperty(ya,"__esModule",{value:!0});const ph=pe;class mh extends ph.TypeHierarchyItem{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o,s),a!==void 0&&(this.data=a)}}var yh=ya.default=mh;const Ch=U({__proto__:null,default:yh},[ya]),Hc=K(Ch);var Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});const Jr=pe;class vh extends Jr.SymbolInformation{constructor(t,n,r,i,o){const s=!(i instanceof Jr.Uri);super(t,n,r,s?i:new Jr.Location(i,new Jr.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}}var _h=Ca.default=vh;const bh=U({__proto__:null,default:_h},[Ca]),xc=K(bh);var va={};Object.defineProperty(va,"__esModule",{value:!0});const Fh=pe;class wh extends Fh.InlayHint{constructor(t,n,r){super(t,n,r)}}var Sh=va.default=wh;const Rh=U({__proto__:null,default:Sh},[va]),Wc=K(Rh);Object.defineProperty(lr,"__esModule",{value:!0});var Kc=lr.createConverter=void 0;const lt=pe,qe=Ee,yn=Ht,Za=da,Th=Mc,Eh=Ic,kh=Nc,Ph=jc,eu=Lc,Oh=Bc,qh=Hc,$h=xc,Ah=Wc;var Cs;(function(e){function t(n){const r=n;return r&&!!r.inserting&&!!r.replacing}e.is=t})(Cs||(Cs={}));function Mh(e){const n=e||(p=>p.toString());function r(p){return n(p)}function i(p){return{uri:n(p.uri)}}function o(p){return{uri:n(p.uri),languageId:p.languageId,version:p.version,text:p.getText()}}function s(p){return{uri:n(p.uri),version:p.version}}function a(p){return{textDocument:o(p)}}function u(p){const q=p;return!!q.document&&!!q.contentChanges}function c(p){const q=p;return!!q.uri&&!!q.version}function f(p,q,oe){if(c(p))return{textDocument:{uri:n(p.uri),version:p.version},contentChanges:[{text:p.getText()}]};if(u(p)){const je=q,He=oe;return{textDocument:{uri:n(je),version:He},contentChanges:p.contentChanges.map(Dt=>{const ht=Dt.range;return{range:{start:{line:ht.start.line,character:ht.start.character},end:{line:ht.end.line,character:ht.end.character}},rangeLength:Dt.rangeLength,text:Dt.text}})}}else throw Error("Unsupported text document change parameter")}function g(p){return{textDocument:i(p)}}function d(p,q=!1){let oe={textDocument:i(p)};return q&&(oe.text=p.getText()),oe}function h(p){switch(p){case lt.TextDocumentSaveReason.Manual:return qe.TextDocumentSaveReason.Manual;case lt.TextDocumentSaveReason.AfterDelay:return qe.TextDocumentSaveReason.AfterDelay;case lt.TextDocumentSaveReason.FocusOut:return qe.TextDocumentSaveReason.FocusOut}return qe.TextDocumentSaveReason.Manual}function m(p){return{textDocument:i(p.document),reason:h(p.reason)}}function S(p){return{files:p.files.map(q=>({uri:n(q)}))}}function I(p){return{files:p.files.map(q=>({oldUri:n(q.oldUri),newUri:n(q.newUri)}))}}function W(p){return{files:p.files.map(q=>({uri:n(q)}))}}function z(p){return{files:p.files.map(q=>({uri:n(q)}))}}function F(p){return{files:p.files.map(q=>({oldUri:n(q.oldUri),newUri:n(q.newUri)}))}}function P(p){return{files:p.files.map(q=>({uri:n(q)}))}}function L(p,q){return{textDocument:i(p),position:X(q)}}function G(p){switch(p){case lt.CompletionTriggerKind.TriggerCharacter:return qe.CompletionTriggerKind.TriggerCharacter;case lt.CompletionTriggerKind.TriggerForIncompleteCompletions:return qe.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return qe.CompletionTriggerKind.Invoked}}function H(p,q,oe){return{textDocument:i(p),position:X(q),context:{triggerKind:G(oe.triggerKind),triggerCharacter:oe.triggerCharacter}}}function Y(p){switch(p){case lt.SignatureHelpTriggerKind.Invoke:return qe.SignatureHelpTriggerKind.Invoked;case lt.SignatureHelpTriggerKind.TriggerCharacter:return qe.SignatureHelpTriggerKind.TriggerCharacter;case lt.SignatureHelpTriggerKind.ContentChange:return qe.SignatureHelpTriggerKind.ContentChange}}function Q(p){return{label:p.label}}function ye(p){return p.map(Q)}function E(p){return{label:p.label,parameters:ye(p.parameters)}}function D(p){return p.map(E)}function R(p){return p===void 0?p:{signatures:D(p.signatures),activeSignature:p.activeSignature,activeParameter:p.activeParameter}}function B(p,q,oe){return{textDocument:i(p),position:X(q),context:{isRetrigger:oe.isRetrigger,triggerCharacter:oe.triggerCharacter,triggerKind:Y(oe.triggerKind),activeSignatureHelp:R(oe.activeSignatureHelp)}}}function X(p){return{line:p.line,character:p.character}}function he(p){return p==null?p:{line:p.line>qe.uinteger.MAX_VALUE?qe.uinteger.MAX_VALUE:p.line,character:p.character>qe.uinteger.MAX_VALUE?qe.uinteger.MAX_VALUE:p.character}}function te(p,q){return Za.map(p,he,q)}function me(p){return p==null?p:{start:he(p.start),end:he(p.end)}}function ke(p){return p==null?p:qe.Location.create(r(p.uri),me(p.range))}function nt(p){switch(p){case lt.DiagnosticSeverity.Error:return qe.DiagnosticSeverity.Error;case lt.DiagnosticSeverity.Warning:return qe.DiagnosticSeverity.Warning;case lt.DiagnosticSeverity.Information:return qe.DiagnosticSeverity.Information;case lt.DiagnosticSeverity.Hint:return qe.DiagnosticSeverity.Hint}}function Ct(p){if(!p)return;let q=[];for(let oe of p){let je=x(oe);je!==void 0&&q.push(je)}return q.length>0?q:void 0}function x(p){switch(p){case lt.DiagnosticTag.Unnecessary:return qe.DiagnosticTag.Unnecessary;case lt.DiagnosticTag.Deprecated:return qe.DiagnosticTag.Deprecated;default:return}}function De(p){return{message:p.message,location:ke(p.location)}}function be(p){return p.map(De)}function Se(p){if(p!=null)return yn.number(p)||yn.string(p)?p:{value:p.value,target:r(p.target)}}function Fe(p){const q=qe.Diagnostic.create(me(p.range),p.message),oe=p instanceof eu.ProtocolDiagnostic?p:void 0;oe!==void 0&&oe.data!==void 0&&(q.data=oe.data);const je=Se(p.code);return eu.DiagnosticCode.is(je)?oe!==void 0&&oe.hasDiagnosticCode?q.code=je:(q.code=je.value,q.codeDescription={href:je.target}):q.code=je,yn.number(p.severity)&&(q.severity=nt(p.severity)),Array.isArray(p.tags)&&(q.tags=Ct(p.tags)),p.relatedInformation&&(q.relatedInformation=be(p.relatedInformation)),p.source&&(q.source=p.source),q}function Ne(p,q){return p==null?p:Za.map(p,Fe,q)}function ge(p,q){switch(p){case"$string":return q;case qe.MarkupKind.PlainText:return{kind:p,value:q};case qe.MarkupKind.Markdown:return{kind:p,value:q.value};default:return`Unsupported Markup content received. Kind is: ${p}`}}function Pe(p){switch(p){case lt.CompletionItemTag.Deprecated:return qe.CompletionItemTag.Deprecated}}function le(p){if(p===void 0)return p;const q=[];for(let oe of p){const je=Pe(oe);je!==void 0&&q.push(je)}return q}function Ce(p,q){return q!==void 0?q:p+1}function Re(p,q=!1){let oe,je;yn.string(p.label)?oe=p.label:(oe=p.label.label,q&&(p.label.detail!==void 0||p.label.description!==void 0)&&(je={detail:p.label.detail,description:p.label.description}));let He={label:oe};je!==void 0&&(He.labelDetails=je);let et=p instanceof Th.default?p:void 0;p.detail&&(He.detail=p.detail),p.documentation&&(!et||et.documentationFormat==="$string"?He.documentation=p.documentation:He.documentation=ge(et.documentationFormat,p.documentation)),p.filterText&&(He.filterText=p.filterText),M(He,p),yn.number(p.kind)&&(He.kind=Ce(p.kind,et&&et.originalItemKind)),p.sortText&&(He.sortText=p.sortText),p.additionalTextEdits&&(He.additionalTextEdits=Ae(p.additionalTextEdits)),p.commitCharacters&&(He.commitCharacters=p.commitCharacters.slice()),p.command&&(He.command=de(p.command)),(p.preselect===!0||p.preselect===!1)&&(He.preselect=p.preselect);const Dt=le(p.tags);if(et){if(et.data!==void 0&&(He.data=et.data),et.deprecated===!0||et.deprecated===!1){if(et.deprecated===!0&&Dt!==void 0&&Dt.length>0){const ht=Dt.indexOf(lt.CompletionItemTag.Deprecated);ht!==-1&&Dt.splice(ht,1)}He.deprecated=et.deprecated}et.insertTextMode!==void 0&&(He.insertTextMode=et.insertTextMode)}return Dt!==void 0&&Dt.length>0&&(He.tags=Dt),He.insertTextMode===void 0&&p.keepWhitespace===!0&&(He.insertTextMode=qe.InsertTextMode.adjustIndentation),He}function M(p,q){let oe=qe.InsertTextFormat.PlainText,je,He;q.textEdit?(je=q.textEdit.newText,He=q.textEdit.range):q.insertText instanceof lt.SnippetString?(oe=qe.InsertTextFormat.Snippet,je=q.insertText.value):je=q.insertText,q.range&&(He=q.range),p.insertTextFormat=oe,q.fromEdit&&je!==void 0&&He!==void 0?p.textEdit=Oe(je,He):p.insertText=je}function Oe(p,q){return Cs.is(q)?qe.InsertReplaceEdit.create(p,me(q.inserting),me(q.replacing)):{newText:p,range:me(q)}}function Ue(p){return{range:me(p.range),newText:p.newText}}function Ae(p){return p==null?p:p.map(Ue)}function Ge(p){return p<=lt.SymbolKind.TypeParameter?p+1:qe.SymbolKind.Property}function ae(p){return p}function y(p){return p.map(ae)}function b(p,q,oe){return{textDocument:i(p),position:X(q),context:{includeDeclaration:oe.includeDeclaration}}}async function _(p,q){let oe=qe.CodeAction.create(p.title);if(p instanceof Ph.default&&p.data!==void 0&&(oe.data=p.data),p.kind!==void 0&&(oe.kind=A(p.kind)),p.diagnostics!==void 0&&(oe.diagnostics=await Ne(p.diagnostics,q)),p.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return p.command!==void 0&&(oe.command=de(p.command)),p.isPreferred!==void 0&&(oe.isPreferred=p.isPreferred),p.disabled!==void 0&&(oe.disabled={reason:p.disabled.reason}),oe}async function k(p,q){if(p==null)return p;let oe;return p.only&&yn.string(p.only.value)&&(oe=[p.only.value]),qe.CodeActionContext.create(await Ne(p.diagnostics,q),oe,O(p.triggerKind))}function O(p){switch(p){case lt.CodeActionTriggerKind.Invoke:return qe.CodeActionTriggerKind.Invoked;case lt.CodeActionTriggerKind.Automatic:return qe.CodeActionTriggerKind.Automatic;default:return}}function A(p){if(p!=null)return p.value}function ve(p){return p==null?p:qe.InlineValueContext.create(p.frameId,me(p.stoppedLocation))}function de(p){let q=qe.Command.create(p.title,p.command);return p.arguments&&(q.arguments=p.arguments),q}function ne(p){let q=qe.CodeLens.create(me(p.range));return p.command&&(q.command=de(p.command)),p instanceof Eh.default&&p.data&&(q.data=p.data),q}function we(p,q){const oe={tabSize:p.tabSize,insertSpaces:p.insertSpaces};return q.trimTrailingWhitespace&&(oe.trimTrailingWhitespace=!0),q.trimFinalNewlines&&(oe.trimFinalNewlines=!0),q.insertFinalNewline&&(oe.insertFinalNewline=!0),oe}function ce(p){return{textDocument:i(p)}}function T(p){return{textDocument:i(p)}}function j(p){let q=qe.DocumentLink.create(me(p.range));p.target&&(q.target=r(p.target)),p.tooltip!==void 0&&(q.tooltip=p.tooltip);let oe=p instanceof kh.default?p:void 0;return oe&&oe.data&&(q.data=oe.data),q}function V(p){return{textDocument:i(p)}}function se(p){const q={name:p.name,kind:Ge(p.kind),uri:r(p.uri),range:me(p.range),selectionRange:me(p.selectionRange)};return p.detail!==void 0&&p.detail.length>0&&(q.detail=p.detail),p.tags!==void 0&&(q.tags=y(p.tags)),p instanceof Oh.default&&p.data!==void 0&&(q.data=p.data),q}function ie(p){const q={name:p.name,kind:Ge(p.kind),uri:r(p.uri),range:me(p.range),selectionRange:me(p.selectionRange)};return p.detail!==void 0&&p.detail.length>0&&(q.detail=p.detail),p.tags!==void 0&&(q.tags=y(p.tags)),p instanceof qh.default&&p.data!==void 0&&(q.data=p.data),q}function Z(p){const q=p instanceof $h.default?{name:p.name,kind:Ge(p.kind),location:p.hasRange?ke(p.location):{uri:n(p.location.uri)},data:p.data}:{name:p.name,kind:Ge(p.kind),location:ke(p.location)};return p.tags!==void 0&&(q.tags=y(p.tags)),p.containerName!==""&&(q.containerName=p.containerName),q}function fe(p){const q=typeof p.label=="string"?p.label:p.label.map(Ze),oe=qe.InlayHint.create(he(p.position),q);return p.kind!==void 0&&(oe.kind=p.kind),p.textEdits!==void 0&&(oe.textEdits=Ae(p.textEdits)),p.tooltip!==void 0&&(oe.tooltip=gt(p.tooltip)),p.paddingLeft!==void 0&&(oe.paddingLeft=p.paddingLeft),p.paddingRight!==void 0&&(oe.paddingRight=p.paddingRight),p instanceof Ah.default&&p.data!==void 0&&(oe.data=p.data),oe}function Ze(p){const q=qe.InlayHintLabelPart.create(p.value);return p.location!==void 0&&(q.location=ke(p.location)),p.command!==void 0&&(q.command=de(p.command)),p.tooltip!==void 0&&(q.tooltip=gt(p.tooltip)),q}function gt(p){return typeof p=="string"?p:{kind:qe.MarkupKind.Markdown,value:p.value}}return{asUri:r,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:f,asCloseTextDocumentParams:g,asSaveTextDocumentParams:d,asWillSaveTextDocumentParams:m,asDidCreateFilesParams:S,asDidRenameFilesParams:I,asDidDeleteFilesParams:W,asWillCreateFilesParams:z,asWillRenameFilesParams:F,asWillDeleteFilesParams:P,asTextDocumentPositionParams:L,asCompletionParams:H,asSignatureHelpParams:B,asWorkerPosition:X,asRange:me,asPosition:he,asPositions:te,asLocation:ke,asDiagnosticSeverity:nt,asDiagnosticTag:x,asDiagnostic:Fe,asDiagnostics:Ne,asCompletionItem:Re,asTextEdit:Ue,asSymbolKind:Ge,asSymbolTag:ae,asSymbolTags:y,asReferenceParams:b,asCodeAction:_,asCodeActionContext:k,asInlineValueContext:ve,asCommand:de,asCodeLens:ne,asFormattingOptions:we,asDocumentSymbolParams:ce,asCodeLensParams:T,asDocumentLink:j,asDocumentLinkParams:V,asCallHierarchyItem:se,asTypeHierarchyItem:ie,asInlayHint:fe,asWorkspaceSymbol:Z}}Kc=lr.createConverter=Mh;const Ih=U({__proto__:null,get createConverter(){return Kc},default:lr},[lr]),Nh=K(Ih);var dr={};Object.defineProperty(dr,"__esModule",{value:!0});var Uc=dr.createConverter=void 0;const re=pe,_e=Ee,$t=Ht,Ke=da,jh=Mc,Lh=Ic,Bh=Nc,Hh=jc,tu=Lc,xh=Bc,Wh=Hc,Kh=xc,Uh=Wc,nu=Ee;var di;(function(e){function t(n){let r=n;return r&&$t.string(r.language)&&$t.string(r.value)}e.is=t})(di||(di={}));function zh(e,t,n){const i=e||(l=>re.Uri.parse(l));function o(l){return i(l)}function s(l){const C=[];for(const $ of l)if(typeof $=="string")C.push($);else if(nu.NotebookCellTextDocumentFilter.is($))if(typeof $.notebook=="string")C.push({notebookType:$.notebook,language:$.language});else{const J=$.notebook.notebookType??"*";C.push({notebookType:J,scheme:$.notebook.scheme,pattern:$.notebook.pattern,language:$.language})}else nu.TextDocumentFilter.is($)&&C.push({language:$.language,scheme:$.scheme,pattern:$.pattern});return C}async function a(l,C){return Ke.map(l,c,C)}function u(l){const C=new Array(l.length);for(let $=0;$<l.length;$++)C[$]=c(l[$]);return C}function c(l){let C=new tu.ProtocolDiagnostic(m(l.range),l.message,I(l.severity),l.data);if(l.code!==void 0){if(typeof l.code=="string"||typeof l.code=="number")_e.CodeDescription.is(l.codeDescription)?C.code={value:l.code,target:o(l.codeDescription.href)}:C.code=l.code;else if(tu.DiagnosticCode.is(l.code)){C.hasDiagnosticCode=!0;const $=l.code;C.code={value:$.value,target:o($.target)}}}return l.source&&(C.source=l.source),l.relatedInformation&&(C.relatedInformation=f(l.relatedInformation)),Array.isArray(l.tags)&&(C.tags=g(l.tags)),C}function f(l){const C=new Array(l.length);for(let $=0;$<l.length;$++){const J=l[$];C[$]=new re.DiagnosticRelatedInformation(x(J.location),J.message)}return C}function g(l){if(!l)return;let C=[];for(let $ of l){let J=d($);J!==void 0&&C.push(J)}return C.length>0?C:void 0}function d(l){switch(l){case _e.DiagnosticTag.Unnecessary:return re.DiagnosticTag.Unnecessary;case _e.DiagnosticTag.Deprecated:return re.DiagnosticTag.Deprecated;default:return}}function h(l){return l?new re.Position(l.line,l.character):void 0}function m(l){return l?new re.Range(l.start.line,l.start.character,l.end.line,l.end.character):void 0}async function S(l,C){return Ke.map(l,$=>new re.Range($.start.line,$.start.character,$.end.line,$.end.character),C)}function I(l){if(l==null)return re.DiagnosticSeverity.Error;switch(l){case _e.DiagnosticSeverity.Error:return re.DiagnosticSeverity.Error;case _e.DiagnosticSeverity.Warning:return re.DiagnosticSeverity.Warning;case _e.DiagnosticSeverity.Information:return re.DiagnosticSeverity.Information;case _e.DiagnosticSeverity.Hint:return re.DiagnosticSeverity.Hint}return re.DiagnosticSeverity.Error}function W(l){if($t.string(l))return F(l);if(di.is(l))return F().appendCodeblock(l.value,l.language);if(Array.isArray(l)){let C=[];for(let $ of l){let J=F();di.is($)?J.appendCodeblock($.value,$.language):J.appendMarkdown($),C.push(J)}return C}else return F(l)}function z(l){if($t.string(l))return l;switch(l.kind){case _e.MarkupKind.Markdown:return F(l.value);case _e.MarkupKind.PlainText:return l.value;default:return`Unsupported Markup content received. Kind is: ${l.kind}`}}function F(l){let C;if(l===void 0||typeof l=="string")C=new re.MarkdownString(l);else switch(l.kind){case _e.MarkupKind.Markdown:C=new re.MarkdownString(l.value);break;case _e.MarkupKind.PlainText:C=new re.MarkdownString,C.appendText(l.value);break;default:C=new re.MarkdownString,C.appendText(`Unsupported Markup content received. Kind is: ${l.kind}`);break}return C.isTrusted=t,C.supportHtml=n,C}function P(l){if(l)return new re.Hover(W(l.contents),m(l.range))}async function L(l,C,$){if(!l)return;if(Array.isArray(l))return Ke.map(l,qt=>ye(qt,C),$);const J=l,{defaultRange:Ie,commitCharacters:Le}=G(J,C),$e=await Ke.map(J.items,qt=>{var ze,Zt,In;return ye(qt,Le,Ie,(ze=J.itemDefaults)==null?void 0:ze.insertTextMode,(Zt=J.itemDefaults)==null?void 0:Zt.insertTextFormat,(In=J.itemDefaults)==null?void 0:In.data)},$);return new re.CompletionList($e,J.isIncomplete)}function G(l,C){var Ie,Le;const $=(Ie=l.itemDefaults)==null?void 0:Ie.editRange,J=((Le=l.itemDefaults)==null?void 0:Le.commitCharacters)??C;return _e.Range.is($)?{defaultRange:m($),commitCharacters:J}:$!==void 0?{defaultRange:{inserting:m($.insert),replacing:m($.replace)},commitCharacters:J}:{defaultRange:void 0,commitCharacters:J}}function H(l){return _e.CompletionItemKind.Text<=l&&l<=_e.CompletionItemKind.TypeParameter?[l-1,void 0]:[re.CompletionItemKind.Text,l]}function Y(l){switch(l){case _e.CompletionItemTag.Deprecated:return re.CompletionItemTag.Deprecated}}function Q(l){if(l==null)return[];const C=[];for(const $ of l){const J=Y($);J!==void 0&&C.push(J)}return C}function ye(l,C,$,J,Ie,Le){const $e=Q(l.tags),qt=E(l),ze=new jh.default(qt);l.detail&&(ze.detail=l.detail),l.documentation&&(ze.documentation=z(l.documentation),ze.documentationFormat=$t.string(l.documentation)?"$string":l.documentation.kind),l.filterText&&(ze.filterText=l.filterText);const Zt=D(l,$,Ie);if(Zt&&(ze.insertText=Zt.text,ze.range=Zt.range,ze.fromEdit=Zt.fromEdit),$t.number(l.kind)){let[nd,Ta]=H(l.kind);ze.kind=nd,Ta&&(ze.originalItemKind=Ta)}l.sortText&&(ze.sortText=l.sortText),l.additionalTextEdits&&(ze.additionalTextEdits=he(l.additionalTextEdits));const In=l.commitCharacters!==void 0?$t.stringArray(l.commitCharacters)?l.commitCharacters:void 0:C;In&&(ze.commitCharacters=In.slice()),l.command&&(ze.command=y(l.command)),(l.deprecated===!0||l.deprecated===!1)&&(ze.deprecated=l.deprecated,l.deprecated===!0&&$e.push(re.CompletionItemTag.Deprecated)),(l.preselect===!0||l.preselect===!1)&&(ze.preselect=l.preselect);const Ra=l.data??Le;Ra!==void 0&&(ze.data=Ra),$e.length>0&&(ze.tags=$e);const Ri=l.insertTextMode??J;return Ri!==void 0&&(ze.insertTextMode=Ri,Ri===_e.InsertTextMode.asIs&&(ze.keepWhitespace=!0)),ze}function E(l){return _e.CompletionItemLabelDetails.is(l.labelDetails)?{label:l.label,detail:l.labelDetails.detail,description:l.labelDetails.description}:l.label}function D(l,C,$){const J=l.insertTextFormat??$;if(l.textEdit!==void 0||C!==void 0){const[Ie,Le]=l.textEdit!==void 0?R(l.textEdit):[C,l.textEditText??l.label];return J===_e.InsertTextFormat.Snippet?{text:new re.SnippetString(Le),range:Ie,fromEdit:!0}:{text:Le,range:Ie,fromEdit:!0}}else return l.insertText?J===_e.InsertTextFormat.Snippet?{text:new re.SnippetString(l.insertText),fromEdit:!1}:{text:l.insertText,fromEdit:!1}:void 0}function R(l){return _e.InsertReplaceEdit.is(l)?[{inserting:m(l.insert),replacing:m(l.replace)},l.newText]:[m(l.range),l.newText]}function B(l){if(l)return new re.TextEdit(m(l.range),l.newText)}async function X(l,C){if(l)return Ke.map(l,B,C)}function he(l){if(!l)return;const C=new Array(l.length);for(let $=0;$<l.length;$++)C[$]=B(l[$]);return C}async function te(l,C){if(!l)return;let $=new re.SignatureHelp;return $t.number(l.activeSignature)?$.activeSignature=l.activeSignature:$.activeSignature=0,$t.number(l.activeParameter)?$.activeParameter=l.activeParameter:$.activeParameter=0,l.signatures&&($.signatures=await me(l.signatures,C)),$}async function me(l,C){return Ke.mapAsync(l,ke,C)}async function ke(l,C){let $=new re.SignatureInformation(l.label);return l.documentation!==void 0&&($.documentation=z(l.documentation)),l.parameters!==void 0&&($.parameters=await nt(l.parameters,C)),l.activeParameter!==void 0&&($.activeParameter=l.activeParameter),$}function nt(l,C){return Ke.map(l,Ct,C)}function Ct(l){let C=new re.ParameterInformation(l.label);return l.documentation&&(C.documentation=z(l.documentation)),C}function x(l){return l?new re.Location(i(l.uri),m(l.range)):void 0}async function De(l,C){if(l)return Fe(l,C)}async function be(l,C){if(l)return Fe(l,C)}function Se(l){if(!l)return;let C={targetUri:i(l.targetUri),targetRange:m(l.targetRange),originSelectionRange:m(l.originSelectionRange),targetSelectionRange:m(l.targetSelectionRange)};if(!C.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return C}async function Fe(l,C){if(l)if($t.array(l)){if(l.length===0)return[];if(_e.LocationLink.is(l[0])){const $=l;return Ke.map($,Se,C)}else{const $=l;return Ke.map($,x,C)}}else return _e.LocationLink.is(l)?[Se(l)]:x(l)}async function Ne(l,C){if(l)return Ke.map(l,x,C)}async function ge(l,C){if(l)return Ke.map(l,Pe,C)}function Pe(l){let C=new re.DocumentHighlight(m(l.range));return $t.number(l.kind)&&(C.kind=le(l.kind)),C}function le(l){switch(l){case _e.DocumentHighlightKind.Text:return re.DocumentHighlightKind.Text;case _e.DocumentHighlightKind.Read:return re.DocumentHighlightKind.Read;case _e.DocumentHighlightKind.Write:return re.DocumentHighlightKind.Write}return re.DocumentHighlightKind.Text}async function Ce(l,C){if(l)return Ke.map(l,Ue,C)}function Re(l){return l<=_e.SymbolKind.TypeParameter?l-1:re.SymbolKind.Property}function M(l){switch(l){case _e.SymbolTag.Deprecated:return re.SymbolTag.Deprecated;default:return}}function Oe(l){if(l==null)return;const C=[];for(const $ of l){const J=M($);J!==void 0&&C.push(J)}return C.length===0?void 0:C}function Ue(l){const C=l.data,$=l.location,J=$.range===void 0||C!==void 0?new Kh.default(l.name,Re(l.kind),l.containerName??"",$.range===void 0?i($.uri):new re.Location(i(l.location.uri),m($.range)),C):new re.SymbolInformation(l.name,Re(l.kind),l.containerName??"",new re.Location(i(l.location.uri),m($.range)));return ae(J,l),J}async function Ae(l,C){if(l!=null)return Ke.map(l,Ge,C)}function Ge(l){let C=new re.DocumentSymbol(l.name,l.detail||"",Re(l.kind),m(l.range),m(l.selectionRange));if(ae(C,l),l.children!==void 0&&l.children.length>0){let $=[];for(let J of l.children)$.push(Ge(J));C.children=$}return C}function ae(l,C){l.tags=Oe(C.tags),C.deprecated&&(l.tags?l.tags.includes(re.SymbolTag.Deprecated)||(l.tags=l.tags.concat(re.SymbolTag.Deprecated)):l.tags=[re.SymbolTag.Deprecated])}function y(l){let C={title:l.title,command:l.command};return l.arguments&&(C.arguments=l.arguments),C}async function b(l,C){if(l)return Ke.map(l,y,C)}const _=new Map;_.set(_e.CodeActionKind.Empty,re.CodeActionKind.Empty),_.set(_e.CodeActionKind.QuickFix,re.CodeActionKind.QuickFix),_.set(_e.CodeActionKind.Refactor,re.CodeActionKind.Refactor),_.set(_e.CodeActionKind.RefactorExtract,re.CodeActionKind.RefactorExtract),_.set(_e.CodeActionKind.RefactorInline,re.CodeActionKind.RefactorInline),_.set(_e.CodeActionKind.RefactorRewrite,re.CodeActionKind.RefactorRewrite),_.set(_e.CodeActionKind.Source,re.CodeActionKind.Source),_.set(_e.CodeActionKind.SourceOrganizeImports,re.CodeActionKind.SourceOrganizeImports);function k(l){if(l==null)return;let C=_.get(l);if(C)return C;let $=l.split(".");C=re.CodeActionKind.Empty;for(let J of $)C=C.append(J);return C}function O(l){if(l!=null)return l.map(C=>k(C))}async function A(l,C){if(l==null)return;let $=new Hh.default(l.title,l.data);return l.kind!==void 0&&($.kind=k(l.kind)),l.diagnostics!==void 0&&($.diagnostics=u(l.diagnostics)),l.edit!==void 0&&($.edit=await we(l.edit,C)),l.command!==void 0&&($.command=y(l.command)),l.isPreferred!==void 0&&($.isPreferred=l.isPreferred),l.disabled!==void 0&&($.disabled={reason:l.disabled.reason}),$}function ve(l,C){return Ke.mapAsync(l,async $=>_e.Command.is($)?y($):A($,C),C)}function de(l){if(!l)return;let C=new Lh.default(m(l.range));return l.command&&(C.command=y(l.command)),l.data!==void 0&&l.data!==null&&(C.data=l.data),C}async function ne(l,C){if(l)return Ke.map(l,de,C)}async function we(l,C){if(!l)return;const $=new Map;if(l.changeAnnotations!==void 0){const Le=l.changeAnnotations;await Ke.forEach(Object.keys(Le),$e=>{const qt=ce(Le[$e]);$.set($e,qt)},C)}const J=Le=>{if(Le!==void 0)return $.get(Le)},Ie=new re.WorkspaceEdit;if(l.documentChanges){const Le=l.documentChanges;await Ke.forEach(Le,$e=>{if(_e.CreateFile.is($e))Ie.createFile(i($e.uri),$e.options,J($e.annotationId));else if(_e.RenameFile.is($e))Ie.renameFile(i($e.oldUri),i($e.newUri),$e.options,J($e.annotationId));else if(_e.DeleteFile.is($e))Ie.deleteFile(i($e.uri),$e.options,J($e.annotationId));else if(_e.TextDocumentEdit.is($e)){const qt=i($e.textDocument.uri);for(const ze of $e.edits)_e.AnnotatedTextEdit.is(ze)?Ie.replace(qt,m(ze.range),ze.newText,J(ze.annotationId)):Ie.replace(qt,m(ze.range),ze.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify($e,void 0,4)}`)},C)}else if(l.changes){const Le=l.changes;await Ke.forEach(Object.keys(Le),$e=>{Ie.set(i($e),he(Le[$e]))},C)}return Ie}function ce(l){if(l!==void 0)return{label:l.label,needsConfirmation:!!l.needsConfirmation,description:l.description}}function T(l){let C=m(l.range),$=l.target?o(l.target):void 0,J=new Bh.default(C,$);return l.tooltip!==void 0&&(J.tooltip=l.tooltip),l.data!==void 0&&l.data!==null&&(J.data=l.data),J}async function j(l,C){if(l)return Ke.map(l,T,C)}function V(l){return new re.Color(l.red,l.green,l.blue,l.alpha)}function se(l){return new re.ColorInformation(m(l.range),V(l.color))}async function ie(l,C){if(l)return Ke.map(l,se,C)}function Z(l){let C=new re.ColorPresentation(l.label);return C.additionalTextEdits=he(l.additionalTextEdits),l.textEdit&&(C.textEdit=B(l.textEdit)),C}async function fe(l,C){if(l)return Ke.map(l,Z,C)}function Ze(l){if(l)switch(l){case _e.FoldingRangeKind.Comment:return re.FoldingRangeKind.Comment;case _e.FoldingRangeKind.Imports:return re.FoldingRangeKind.Imports;case _e.FoldingRangeKind.Region:return re.FoldingRangeKind.Region}}function gt(l){return new re.FoldingRange(l.startLine,l.endLine,Ze(l.kind))}async function p(l,C){if(l)return Ke.map(l,gt,C)}function q(l){return new re.SelectionRange(m(l.range),l.parent?q(l.parent):void 0)}async function oe(l,C){return Array.isArray(l)?Ke.map(l,q,C):[]}function je(l){return _e.InlineValueText.is(l)?new re.InlineValueText(m(l.range),l.text):_e.InlineValueVariableLookup.is(l)?new re.InlineValueVariableLookup(m(l.range),l.variableName,l.caseSensitiveLookup):new re.InlineValueEvaluatableExpression(m(l.range),l.expression)}async function He(l,C){return Array.isArray(l)?Ke.map(l,je,C):[]}async function et(l,C){const $=typeof l.label=="string"?l.label:await Ke.map(l.label,Dt,C),J=new Uh.default(h(l.position),$);return l.kind!==void 0&&(J.kind=l.kind),l.textEdits!==void 0&&(J.textEdits=await X(l.textEdits,C)),l.tooltip!==void 0&&(J.tooltip=ht(l.tooltip)),l.paddingLeft!==void 0&&(J.paddingLeft=l.paddingLeft),l.paddingRight!==void 0&&(J.paddingRight=l.paddingRight),l.data!==void 0&&(J.data=l.data),J}function Dt(l){const C=new re.InlayHintLabelPart(l.value);return l.location!==void 0&&(C.location=x(l.location)),l.tooltip!==void 0&&(C.tooltip=ht(l.tooltip)),l.command!==void 0&&(C.command=y(l.command)),C}function ht(l){return typeof l=="string"?l:F(l)}async function Qt(l,C){if(Array.isArray(l))return Ke.mapAsync(l,et,C)}function mn(l){if(l===null)return;const C=new xh.default(Re(l.kind),l.name,l.detail||"",o(l.uri),m(l.range),m(l.selectionRange),l.data);return l.tags!==void 0&&(C.tags=Oe(l.tags)),C}async function Si(l,C){if(l!==null)return Ke.map(l,mn,C)}async function Xt(l,C){return new re.CallHierarchyIncomingCall(mn(l.from),await S(l.fromRanges,C))}async function Ur(l,C){if(l!==null)return Ke.mapAsync(l,Xt,C)}async function An(l,C){return new re.CallHierarchyOutgoingCall(mn(l.to),await S(l.fromRanges,C))}async function Mn(l,C){if(l!==null)return Ke.mapAsync(l,An,C)}async function zr(l,C){if(l!=null)return new re.SemanticTokens(new Uint32Array(l.data),l.resultId)}function xt(l){return new re.SemanticTokensEdit(l.start,l.deleteCount,l.data!==void 0?new Uint32Array(l.data):void 0)}async function v(l,C){if(l!=null)return new re.SemanticTokensEdits(l.edits.map(xt),l.resultId)}function N(l){return l}async function ee(l,C){if(l!=null)return new re.LinkedEditingRanges(await S(l.ranges,C),ue(l.wordPattern))}function ue(l){if(l!=null)return new RegExp(l)}function Je(l){if(l===null)return;let C=new Wh.default(Re(l.kind),l.name,l.detail||"",o(l.uri),m(l.range),m(l.selectionRange),l.data);return l.tags!==void 0&&(C.tags=Oe(l.tags)),C}async function Ve(l,C){if(l!==null)return Ke.map(l,Je,C)}function Qe(l){if($t.string(l))return l;if(_e.RelativePattern.is(l)){if(_e.URI.is(l.baseUri))return new re.RelativePattern(o(l.baseUri),l.pattern);if(_e.WorkspaceFolder.is(l.baseUri)){const C=re.workspace.getWorkspaceFolder(o(l.baseUri.uri));return C!==void 0?new re.RelativePattern(C,l.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:c,asRange:m,asRanges:S,asPosition:h,asDiagnosticSeverity:I,asDiagnosticTag:d,asHover:P,asCompletionResult:L,asCompletionItem:ye,asTextEdit:B,asTextEdits:X,asSignatureHelp:te,asSignatureInformations:me,asSignatureInformation:ke,asParameterInformations:nt,asParameterInformation:Ct,asDeclarationResult:De,asDefinitionResult:be,asLocation:x,asReferences:Ne,asDocumentHighlights:ge,asDocumentHighlight:Pe,asDocumentHighlightKind:le,asSymbolKind:Re,asSymbolTag:M,asSymbolTags:Oe,asSymbolInformations:Ce,asSymbolInformation:Ue,asDocumentSymbols:Ae,asDocumentSymbol:Ge,asCommand:y,asCommands:b,asCodeAction:A,asCodeActionKind:k,asCodeActionKinds:O,asCodeActionResult:ve,asCodeLens:de,asCodeLenses:ne,asWorkspaceEdit:we,asDocumentLink:T,asDocumentLinks:j,asFoldingRangeKind:Ze,asFoldingRange:gt,asFoldingRanges:p,asColor:V,asColorInformation:se,asColorInformations:ie,asColorPresentation:Z,asColorPresentations:fe,asSelectionRange:q,asSelectionRanges:oe,asInlineValue:je,asInlineValues:He,asInlayHint:et,asInlayHints:Qt,asSemanticTokensLegend:N,asSemanticTokens:zr,asSemanticTokensEdit:xt,asSemanticTokensEdits:v,asCallHierarchyItem:mn,asCallHierarchyItems:Si,asCallHierarchyIncomingCall:Xt,asCallHierarchyIncomingCalls:Ur,asCallHierarchyOutgoingCall:An,asCallHierarchyOutgoingCalls:Mn,asLinkedEditingRanges:ee,asTypeHierarchyItem:Je,asTypeHierarchyItems:Ve,asGlobPattern:Qe}}Uc=dr.createConverter=zh;const Vh=U({__proto__:null,get createConverter(){return Uc},default:dr},[dr]),Gh=K(Vh);var fr={};Object.defineProperty(fr,"__esModule",{value:!0});var zc=fr.ProgressPart=void 0;const ru=pe,iu=Ee,ou=Ht;class Jh{constructor(t,n,r){this._client=t,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(iu.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),r&&r(this);break}})}begin(t){this._infinite=t.percentage===void 0,this._lspProgressDisposable!==void 0&&ru.window.withProgress({location:ru.ProgressLocation.Window,cancellable:t.cancellable,title:t.title},async(n,r)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(iu.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(t),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(t){if(this._infinite&&ou.string(t.message))this._progress!==void 0&&this._progress.report({message:t.message});else if(ou.number(t.percentage)){const n=Math.max(0,Math.min(t.percentage,100)),r=Math.max(0,n-this._reported);this._reported+=r,this._progress!==void 0&&this._progress.report({message:t.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}zc=fr.ProgressPart=Jh;const Qh=U({__proto__:null,get ProgressPart(){return zc},default:fr},[fr]),Vc=K(Qh);var gr={};Object.defineProperty(gr,"__esModule",{value:!0});var Gc=gr.NotebookDocumentSyncFeature=void 0;const vt=pe,Xh=aa,Kt=Ee,Yh=ut,su=Ht;function au(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var Sn;(function(e){(function(t){function n(g,d){return{version:g.version,uri:d.asUri(g.uri)}}t.asVersionedNotebookDocumentIdentifier=n;function r(g,d,h){const m=Kt.NotebookDocument.create(h.asUri(g.uri),g.notebookType,g.version,i(d,h));return Object.keys(g.metadata).length>0&&(m.metadata=o(g.metadata)),m}t.asNotebookDocument=r;function i(g,d){return g.map(h=>s(h,d))}t.asNotebookCells=i;function o(g){return u(new Set,g)}t.asMetadata=o;function s(g,d){const h=Kt.NotebookCell.create(a(g.kind),d.asUri(g.document.uri));return Object.keys(g.metadata).length>0&&(h.metadata=o(g.metadata)),g.executionSummary!==void 0&&su.number(g.executionSummary.executionOrder)&&su.boolean(g.executionSummary.success)&&(h.executionSummary={executionOrder:g.executionSummary.executionOrder,success:g.executionSummary.success}),h}t.asNotebookCell=s;function a(g){switch(g){case vt.NotebookCellKind.Markup:return Kt.NotebookCellKind.Markup;case vt.NotebookCellKind.Code:return Kt.NotebookCellKind.Code}}function u(g,d){if(g.has(d))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(d)){const h=[];for(const m of d)if(m!==null&&typeof m=="object"||Array.isArray(m))h.push(u(g,m));else{if(m instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");h.push(m)}return h}else{const h=Object.keys(d),m=Object.create(null);for(const S of h){const I=d[S];if(I!==null&&typeof I=="object"||Array.isArray(I))m[S]=u(g,I);else{if(I instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");m[S]=I}}return m}}function c(g,d){const h=d.asChangeTextDocumentParams(g,g.document.uri,g.document.version);return{document:h.textDocument,changes:h.contentChanges}}t.asTextContentChange=c;function f(g,d){const h=Object.create(null);if(g.metadata&&(h.metadata=e.c2p.asMetadata(g.metadata)),g.cells!==void 0){const m=Object.create(null),S=g.cells;S.structure&&(m.structure={array:{start:S.structure.array.start,deleteCount:S.structure.array.deleteCount,cells:S.structure.array.cells!==void 0?S.structure.array.cells.map(I=>e.c2p.asNotebookCell(I,d)):void 0},didOpen:S.structure.didOpen!==void 0?S.structure.didOpen.map(I=>d.asOpenTextDocumentParams(I.document).textDocument):void 0,didClose:S.structure.didClose!==void 0?S.structure.didClose.map(I=>d.asCloseTextDocumentParams(I.document).textDocument):void 0}),S.data!==void 0&&(m.data=S.data.map(I=>e.c2p.asNotebookCell(I,d))),S.textContent!==void 0&&(m.textContent=S.textContent.map(I=>e.c2p.asTextContentChange(I,d))),Object.keys(m).length>0&&(h.cells=m)}return h}t.asNotebookDocumentChangeEvent=f})(e.c2p||(e.c2p={}))})(Sn||(Sn={}));var vs;(function(e){function t(a,u,c){const f=a.length,g=u.length;let d=0;for(;d<g&&d<f&&n(a[d],u[d],c);)d++;if(d<g&&d<f){let h=f-1,m=g-1;for(;h>=0&&m>=0&&n(a[h],u[m],c);)h--,m--;const S=h+1-d,I=d===m+1?void 0:u.slice(d,m+1);return I!==void 0?{start:d,deleteCount:S,cells:I}:{start:d,deleteCount:S}}else return d<g?{start:d,deleteCount:0,cells:u.slice(d)}:d<f?{start:d,deleteCount:f-d}:void 0}e.computeDiff=t;function n(a,u,c=!0){return a.kind!==u.kind||a.document.uri.toString()!==u.document.uri.toString()||a.document.languageId!==u.document.languageId||!r(a.executionSummary,u.executionSummary)?!1:!c||c&&o(a.metadata,u.metadata)}function r(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.executionOrder===u.executionOrder&&a.success===u.success&&i(a.timing,u.timing)}function i(a,u){return a===u?!0:a===void 0||u===void 0?!1:a.startTime===u.startTime&&a.endTime===u.endTime}function o(a,u){if(a===u)return!0;if(a==null||u===null||u===void 0||typeof a!=typeof u||typeof a!="object")return!1;const c=Array.isArray(a),f=Array.isArray(u);if(c!==f)return!1;if(c&&f){if(a.length!==u.length)return!1;for(let g=0;g<a.length;g++)if(!o(a[g],u[g]))return!1}if(s(a)&&s(u)){const g=Object.keys(a),d=Object.keys(u);if(g.length!==d.length||(g.sort(),d.sort(),!o(g,d)))return!1;for(let h=0;h<g.length;h++){const m=g[h];if(!o(a[m],u[m]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}e.isObjectLiteral=s})(vs||(vs={}));var _s;(function(e){function t(n,r){if(typeof n=="string")return n==="*"||r.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&r.notebookType!==n.notebookType)return!1;const i=r.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&i.scheme!==n.scheme)return!1;if(n.pattern!==void 0){const o=new Xh.Minimatch(n.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}e.matchNotebook=t})(_s||(_s={}));var fi;(function(e){function t(r){var s,a,u;const i=r.notebookSelector,o=[];for(const c of i){const f=(typeof c.notebook=="string"?c.notebook:(s=c.notebook)==null?void 0:s.notebookType)??"*",g=typeof c.notebook=="string"||(a=c.notebook)==null?void 0:a.scheme,d=typeof c.notebook=="string"||(u=c.notebook)==null?void 0:u.pattern;if(c.cells!==void 0)for(const h of c.cells)o.push(n(f,g,d,h.language));else o.push(n(f,g,d,void 0))}return o}e.asDocumentSelector=t;function n(r,i,o,s){return i===void 0&&o===void 0?{notebook:r,language:s}:{notebook:{notebookType:r,scheme:i,pattern:o},language:s}}})(fi||(fi={}));var gi;(function(e){function t(n){return{cells:n,uris:new Set(n.map(r=>r.document.uri.toString()))}}e.create=t})(gi||(gi={}));class Qr{constructor(t,n){this.client=t,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=t.protocol2CodeConverter.asDocumentSelector(fi.asDocumentSelector(n)),vt.workspace.onDidOpenNotebookDocument(r=>{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(const r of vt.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);vt.workspace.onDidChangeNotebookDocument(r=>this.didChangeNotebookDocument(r),void 0,this.disposables),this.options.save===!0&&vt.workspace.onDidSaveNotebookDocument(r=>this.didSave(r),void 0,this.disposables),vt.workspace.onDidCloseNotebookDocument(r=>{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}getState(){for(const t of vt.workspace.notebookDocuments)if(this.getMatchingCells(t)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(t){return vt.languages.match(this.selector,t)>0}didOpenNotebookCellTextDocument(t,n){if(vt.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(t.uri.toString()))return;const r=this.notebookSyncInfo.get(t.uri.toString()),i=this.cellMatches(t,n);if(r!==void 0){const o=r.uris.has(n.document.uri.toString());if(i&&o||!i&&!o)return;if(i){const s=this.getMatchingCells(t);if(s!==void 0){const a=this.asNotebookDocumentChangeEvent(t,void 0,r,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else i&&this.doSendOpen(t,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(t,n){vt.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:t,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(t,n){const r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;const i=n.document.uri,o=r.cells.findIndex(s=>s.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&r.cells.length===1)this.doSendClose(t,r.cells).catch(()=>{});else{const s=r.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:t,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(const t of this.disposables)t.dispose()}didOpen(t,n=this.getMatchingCells(t),r=this.notebookSyncInfo.get(t.uri.toString())){if(r!==void 0)if(n!==void 0){const i=this.asNotebookDocumentChangeEvent(t,void 0,r,n);i!==void 0&&this.doSendChange(i,n).catch(()=>{})}else this.doSendClose(t,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(t,n).catch(()=>{})}}didChangeNotebookDocument(t){const n=t.notebook,r=this.notebookSyncInfo.get(n.uri.toString());if(r===void 0){if(t.contentChanges.length===0)return;const i=this.getMatchingCells(n);if(i===void 0)return;this.didOpen(n,i,r)}else{const i=this.getMatchingCells(n);if(i===void 0){this.didClose(n,r);return}const o=this.asNotebookDocumentChangeEvent(t.notebook,t,r,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(t){this.notebookSyncInfo.get(t.uri.toString())!==void 0&&this.doSendSave(t).catch(()=>{})}didClose(t,n=this.notebookSyncInfo.get(t.uri.toString())){if(n===void 0)return;const r=t.getCells().filter(i=>n.uris.has(i.document.uri.toString()));this.doSendClose(t,r).catch(()=>{})}async sendDidOpenNotebookDocument(t){const n=this.getMatchingCells(t);if(n!==void 0)return this.doSendOpen(t,n)}async doSendOpen(t,n){var o;const r=async(s,a)=>{const u=Sn.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),c=a.map(f=>this.client.code2ProtocolConverter.asTextDocumentItem(f.document));try{await this.client.sendNotification(Kt.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:c})}catch(f){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",f),f}},i=(o=this.client.middleware)==null?void 0:o.notebooks;return this.notebookSyncInfo.set(t.uri.toString(),gi.create(n)),(i==null?void 0:i.didOpen)!==void 0?i.didOpen(t,n,r):r(t,n)}async sendDidChangeNotebookDocument(t){return this.doSendChange(t,void 0)}async doSendChange(t,n=this.getMatchingCells(t.notebook)){var o,s;const r=async a=>{try{await this.client.sendNotification(Kt.DidChangeNotebookDocumentNotification.type,{notebookDocument:Sn.c2p.asVersionedNotebookDocumentIdentifier(a.notebook,this.client.code2ProtocolConverter),change:Sn.c2p.asNotebookDocumentChangeEvent(a,this.client.code2ProtocolConverter)})}catch(u){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",u),u}},i=(o=this.client.middleware)==null?void 0:o.notebooks;return((s=t.cells)==null?void 0:s.structure)!==void 0&&this.notebookSyncInfo.set(t.notebook.uri.toString(),gi.create(n??[])),(i==null?void 0:i.didChange)!==void 0?i==null?void 0:i.didChange(t,r):r(t)}async sendDidSaveNotebookDocument(t){return this.doSendSave(t)}async doSendSave(t){var i;const n=async o=>{try{await this.client.sendNotification(Kt.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)}})}catch(s){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",s),s}},r=(i=this.client.middleware)==null?void 0:i.notebooks;return(r==null?void 0:r.didSave)!==void 0?r.didSave(t,n):n(t)}async sendDidCloseNotebookDocument(t){return this.doSendClose(t,this.getMatchingCells(t)??[])}async doSendClose(t,n){var o;const r=async(s,a)=>{try{await this.client.sendNotification(Kt.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},cellTextDocuments:a.map(u=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(u.document))})}catch(u){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",u),u}},i=(o=this.client.middleware)==null?void 0:o.notebooks;return this.notebookSyncInfo.delete(t.uri.toString()),(i==null?void 0:i.didClose)!==void 0?i.didClose(t,n,r):r(t,n)}asNotebookDocumentChangeEvent(t,n,r,i){if(n!==void 0&&n.notebook!==t)throw new Error("Notebook must be identical");const o={notebook:t};(n==null?void 0:n.metadata)!==void 0&&(o.metadata=Sn.c2p.asMetadata(n.metadata));let s;if((n==null?void 0:n.cellChanges)!==void 0&&n.cellChanges.length>0){const a=[];s=new Set(i.map(u=>u.document.uri.toString()));for(const u of n.cellChanges)s.has(u.cell.document.uri.toString())&&(u.executionSummary!==void 0||u.metadata!==void 0)&&a.push(u.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if(((n==null?void 0:n.contentChanges)!==void 0&&n.contentChanges.length>0||n===void 0)&&r!==void 0&&i!==void 0){const a=r.cells,u=i,c=vs.computeDiff(a,u,!1);let f,g;if(c!==void 0){f=c.cells===void 0?new Map:new Map(c.cells.map(m=>[m.document.uri.toString(),m])),g=c.deleteCount===0?new Map:new Map(a.slice(c.start,c.start+c.deleteCount).map(m=>[m.document.uri.toString(),m]));for(const m of Array.from(g.keys()))f.has(m)&&(g.delete(m),f.delete(m));o.cells=o.cells??{};const d=[],h=[];if(f.size>0||g.size>0){for(const m of f.values())d.push(m);for(const m of g.values())h.push(m)}o.cells.structure={array:c,didOpen:d,didClose:h}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(t,n=t.getCells()){if(this.options.notebookSelector!==void 0){for(const r of this.options.notebookSelector)if(r.notebook===void 0||_s.matchNotebook(r.notebook,t)){const i=this.filterCells(t,n,r.cells);return i.length===0?void 0:i}}}cellMatches(t,n){const r=this.getMatchingCells(t,[n]);return r!==void 0&&r[0]===n}filterCells(t,n,r){var o;const i=r!==void 0?n.filter(s=>{const a=s.document.languageId;return r.some(u=>u.language==="*"||a===u.language)}):n;return typeof((o=this.client.clientOptions.notebookDocumentOptions)==null?void 0:o.filterCells)=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(t,i):i}}class cn{constructor(t){this.client=t,this.registrations=new Map,this.registrationType=Kt.NotebookDocumentSyncRegistrationType.type,vt.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==cn.CellScheme)return;const[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(const o of this.registrations.values())o instanceof Qr&&o.didOpenNotebookCellTextDocument(r,i)}),vt.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;const r=n.document;if(r.uri.scheme!==cn.CellScheme)return;const[i]=this.findNotebookDocumentAndCell(r);if(i!==void 0)for(const o of this.registrations.values())o instanceof Qr&&o.didChangeNotebookCellTextDocument(i,n)}),vt.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==cn.CellScheme)return;const[r,i]=this.findNotebookDocumentAndCell(n);if(!(r===void 0||i===void 0))for(const o of this.registrations.values())o instanceof Qr&&o.didCloseNotebookCellTextDocument(r,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const t of this.registrations.values()){const n=t.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(t){const n=au(au(t,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(t){const n=t.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(fi.asDocumentSelector(n)))}initialize(t){const n=t.notebookDocumentSync;if(n===void 0)return;const r=n.id??Yh.generateUuid();this.register({id:r,registerOptions:n})}register(t){const n=new Qr(this.client,t.registerOptions);this.registrations.set(t.id,n)}unregister(t){const n=this.registrations.get(t);n&&n.dispose()}dispose(){for(const t of this.registrations.values())t.dispose();this.registrations.clear()}handles(t){if(t.uri.scheme!==cn.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&vt.languages.match(this.dedicatedChannel,t)>0)return!0;for(const n of this.registrations.values())if(n.handles(t))return!0;return!1}getProvider(t){for(const n of this.registrations.values())if(n.handles(t.document))return n}findNotebookDocumentAndCell(t){const n=t.uri.toString();for(const r of vt.workspace.notebookDocuments)for(const i of r.getCells())if(i.document.uri.toString()===n)return[r,i];return[void 0,void 0]}}Gc=gr.NotebookDocumentSyncFeature=cn;cn.CellScheme="vscode-notebook-cell";const Zh=U({__proto__:null,get NotebookDocumentSyncFeature(){return Gc},default:gr},[gr]),eD=K(Zh);var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});var Jc=Ut.SyncConfigurationFeature=Xc=Ut.toJSONObject=Qc=Ut.ConfigurationFeature=void 0;const Rn=pe,Xn=Ee,tD=Ht,nD=ut,uu=We;class rD{constructor(t){this._client=t}getState(){return{kind:"static"}}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.configuration=!0}initialize(){let t=this._client;t.onRequest(Xn.ConfigurationRequest.type,(n,r)=>{let i=s=>{let a=[];for(let u of s.items){let c=u.scopeUri!==void 0&&u.scopeUri!==null?this._client.protocol2CodeConverter.asUri(u.scopeUri):void 0;a.push(this.getConfiguration(c,u.section!==null?u.section:void 0))}return a},o=t.middleware.workspace;return o&&o.configuration?o.configuration(n,r,i):i(n)})}getConfiguration(t,n){let r=null;if(n){let i=n.lastIndexOf(".");if(i===-1)r=fn(Rn.workspace.getConfiguration(void 0,t).get(n));else{let o=Rn.workspace.getConfiguration(n.substr(0,i),t);o&&(r=fn(o.get(n.substr(i+1))))}}else{let i=Rn.workspace.getConfiguration(void 0,t);r={};for(let o of Object.keys(i))i.has(o)&&(r[o]=fn(i.get(o)))}return r===void 0&&(r=null),r}dispose(){}}var Qc=Ut.ConfigurationFeature=rD;function fn(e){if(e){if(Array.isArray(e))return e.map(fn);if(typeof e=="object"){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=fn(e[n]));return t}}return e}var Xc=Ut.toJSONObject=fn;class iD{constructor(t){this._client=t,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Xn.DidChangeConfigurationNotification.type}fillClientCapabilities(t){(0,uu.ensure)((0,uu.ensure)(t,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){var n;let t=(n=this._client.clientOptions.synchronize)==null?void 0:n.configurationSection;t!==void 0&&this.register({id:nD.generateUuid(),registerOptions:{section:t}})}register(t){let n=Rn.workspace.onDidChangeConfiguration(r=>{this.onDidChangeConfiguration(t.registerOptions.section,r)});this._listeners.set(t.id,n),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(t){let n=this._listeners.get(t);n&&(this._listeners.delete(t),n.dispose())}dispose(){for(const t of this._listeners.values())t.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(t,n){var s;if(this.isDisposed)return;let r;if(tD.string(t)?r=[t]:r=t,r!==void 0&&n!==void 0&&!r.some(u=>n.affectsConfiguration(u)))return;const i=async a=>a===void 0?this._client.sendNotification(Xn.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(Xn.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)});let o=(s=this._client.middleware.workspace)==null?void 0:s.didChangeConfiguration;(o?o(r,i):i(r)).catch(a=>{this._client.error(`Sending notification ${Xn.DidChangeConfigurationNotification.type.method} failed`,a)})}extractSettingsInformation(t){function n(o,s){let a=o;for(let u=0;u<s.length-1;u++){let c=a[s[u]];c||(c=Object.create(null),a[s[u]]=c),a=c}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<t.length;o++){let s=t[o],a=s.indexOf("."),u=null;if(a>=0?u=Rn.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):u=Rn.workspace.getConfiguration(void 0,r).get(s),u){let c=t[o].split(".");n(i,c)[c[c.length-1]]=fn(u)}}return i}}Jc=Ut.SyncConfigurationFeature=iD;const oD=U({__proto__:null,get ConfigurationFeature(){return Qc},get SyncConfigurationFeature(){return Jc},default:Ut,get toJSONObject(){return Xc}},[Ut]),sD=K(oD);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});var Yc=Ft.DidSaveTextDocumentFeature=rl=Ft.WillSaveWaitUntilFeature=nl=Ft.WillSaveFeature=tl=Ft.DidChangeTextDocumentFeature=el=Ft.DidCloseTextDocumentFeature=Zc=Ft.DidOpenTextDocumentFeature=void 0;const Pt=pe,Ye=Ee,ot=We,qn=ut;class aD extends ot.TextDocumentEventFeature{constructor(t,n){super(t,Pt.workspace.onDidOpenTextDocument,Ye.DidOpenTextDocumentNotification.type,()=>t.middleware.didOpen,r=>t.code2ProtocolConverter.asOpenTextDocumentParams(r),r=>r,ot.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(t){(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){const r=t.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:qn.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return Ye.DidOpenTextDocumentNotification.type}register(t){if(super.register(t),!t.registerOptions.documentSelector)return;const n=this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector);Pt.workspace.textDocuments.forEach(r=>{const i=r.uri.toString();if(!this._syncedDocuments.has(i)&&Pt.languages.match(n,r)>0&&!this._client.hasDedicatedTextSynchronizationFeature(r)){const o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}getTextDocument(t){return t}notificationSent(t,n,r){this._syncedDocuments.set(t.uri.toString(),t),super.notificationSent(t,n,r)}}var Zc=Ft.DidOpenTextDocumentFeature=aD;class uD extends ot.TextDocumentEventFeature{constructor(t,n,r){super(t,Pt.workspace.onDidCloseTextDocument,Ye.DidCloseTextDocumentNotification.type,()=>t.middleware.didClose,i=>t.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,ot.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n,this._pendingTextDocumentChanges=r}get registrationType(){return Ye.DidCloseTextDocumentNotification.type}fillClientCapabilities(t){(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){let r=t.resolvedTextDocumentSync;n&&r&&r.openClose&&this.register({id:qn.generateUuid(),registerOptions:{documentSelector:n}})}async callback(t){await super.callback(t),this._pendingTextDocumentChanges.delete(t.uri.toString())}getTextDocument(t){return t}notificationSent(t,n,r){this._syncedDocuments.delete(t.uri.toString()),super.notificationSent(t,n,r)}unregister(t){const n=this._selectors.get(t);super.unregister(t);const r=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Pt.languages.match(n,i)>0&&!this._selectorFilter(r,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}}var el=Ft.DidCloseTextDocumentFeature=uD;class cD extends ot.DynamicDocumentFeature{constructor(t,n){super(t),this._changeData=new Map,this._onNotificationSent=new Pt.EventEmitter,this._onPendingChangeAdded=new Pt.EventEmitter,this._pendingTextDocumentChanges=n,this._syncKind=Ye.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Ye.DidChangeTextDocumentNotification.type}fillClientCapabilities(t){(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){let r=t.resolvedTextDocumentSync;n&&r&&r.change!==void 0&&r.change!==Ye.TextDocumentSyncKind.None&&this.register({id:qn.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:r.change})})}register(t){t.registerOptions.documentSelector&&(this._listener||(this._listener=Pt.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{syncKind:t.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector)}),this.updateSyncKind(t.registerOptions.syncKind))}*getDocumentSelectors(){for(const t of this._changeData.values())yield t.documentSelector}async callback(t){if(t.contentChanges.length===0)return;const n=t.document.uri,r=t.document.version,i=[];for(const o of this._changeData.values())if(Pt.languages.match(o.documentSelector,t.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(t.document)){const s=this._client.middleware;if(o.syncKind===Ye.TextDocumentSyncKind.Incremental){const a=async u=>{const c=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u,n,r);await this._client.sendNotification(Ye.DidChangeTextDocumentNotification.type,c),this.notificationSent(u.document,Ye.DidChangeTextDocumentNotification.type,c)};i.push(s.didChange?s.didChange(t,u=>a(u)):a(t))}else if(o.syncKind===Ye.TextDocumentSyncKind.Full){const a=async u=>{const c=u.document.uri.toString();this._pendingTextDocumentChanges.set(c,u.document),this._onPendingChangeAdded.fire()};i.push(s.didChange?s.didChange(t,u=>a(u)):a(t))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${Ye.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(t,n,r){this._onNotificationSent.fire({textDocument:t,type:n,params:r})}unregister(t){if(this._changeData.delete(t),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Ye.TextDocumentSyncKind.None;else{this._syncKind=Ye.TextDocumentSyncKind.None;for(const n of this._changeData.values())if(this.updateSyncKind(n.syncKind),this._syncKind===Ye.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Ye.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(t){if(this._pendingTextDocumentChanges.size===0)return[];let n;if(t.size===0)n=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{n=[];for(const r of this._pendingTextDocumentChanges)t.has(r[0])||(n.push(r[1]),this._pendingTextDocumentChanges.delete(r[0]))}return n}getProvider(t){for(const n of this._changeData.values())if(Pt.languages.match(n.documentSelector,t)>0)return{send:r=>this.callback(r)}}updateSyncKind(t){if(this._syncKind!==Ye.TextDocumentSyncKind.Full)switch(t){case Ye.TextDocumentSyncKind.Full:this._syncKind=t;break;case Ye.TextDocumentSyncKind.Incremental:this._syncKind===Ye.TextDocumentSyncKind.None&&(this._syncKind=Ye.TextDocumentSyncKind.Incremental);break}}}var tl=Ft.DidChangeTextDocumentFeature=cD;class lD extends ot.TextDocumentEventFeature{constructor(t){super(t,Pt.workspace.onWillSaveTextDocument,Ye.WillSaveTextDocumentNotification.type,()=>t.middleware.willSave,n=>t.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,r)=>ot.TextDocumentEventFeature.textDocumentFilter(n,r.document))}get registrationType(){return Ye.WillSaveTextDocumentNotification.type}fillClientCapabilities(t){let n=(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization");n.willSave=!0}initialize(t,n){let r=t.resolvedTextDocumentSync;n&&r&&r.willSave&&this.register({id:qn.generateUuid(),registerOptions:{documentSelector:n}})}getTextDocument(t){return t.document}}var nl=Ft.WillSaveFeature=lD;class dD extends ot.DynamicDocumentFeature{constructor(t){super(t),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Ye.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(t){let n=(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(t,n){let r=t.resolvedTextDocumentSync;n&&r&&r.willSaveWaitUntil&&this.register({id:qn.generateUuid(),registerOptions:{documentSelector:n}})}register(t){t.registerOptions.documentSelector&&(this._listener||(this._listener=Pt.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector)))}callback(t){if(ot.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),t.document)&&!this._client.hasDedicatedTextSynchronizationFeature(t.document)){let n=this._client.middleware,r=i=>this._client.sendRequest(Ye.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});t.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(t,r):r(t))}}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}var rl=Ft.WillSaveWaitUntilFeature=dD;class fD extends ot.TextDocumentEventFeature{constructor(t){super(t,Pt.workspace.onDidSaveTextDocument,Ye.DidSaveTextDocumentNotification.type,()=>t.middleware.didSave,n=>t.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,ot.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Ye.DidSaveTextDocumentNotification.type}fillClientCapabilities(t){(0,ot.ensure)((0,ot.ensure)(t,"textDocument"),"synchronization").didSave=!0}initialize(t,n){const r=t.resolvedTextDocumentSync;if(n&&r&&r.save){const i=typeof r.save=="boolean"?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:qn.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},i)})}}register(t){this._includeText=!!t.registerOptions.includeText,super.register(t)}getTextDocument(t){return t}}Yc=Ft.DidSaveTextDocumentFeature=fD;const gD=U({__proto__:null,get DidChangeTextDocumentFeature(){return tl},get DidCloseTextDocumentFeature(){return el},get DidOpenTextDocumentFeature(){return Zc},get DidSaveTextDocumentFeature(){return Yc},get WillSaveFeature(){return nl},get WillSaveWaitUntilFeature(){return rl},default:Ft},[Ft]),hD=K(gD);var hr={};Object.defineProperty(hr,"__esModule",{value:!0});var il=hr.CompletionItemFeature=void 0;const DD=pe,Be=Ee,Li=We,pD=ut,mD=[Be.CompletionItemKind.Text,Be.CompletionItemKind.Method,Be.CompletionItemKind.Function,Be.CompletionItemKind.Constructor,Be.CompletionItemKind.Field,Be.CompletionItemKind.Variable,Be.CompletionItemKind.Class,Be.CompletionItemKind.Interface,Be.CompletionItemKind.Module,Be.CompletionItemKind.Property,Be.CompletionItemKind.Unit,Be.CompletionItemKind.Value,Be.CompletionItemKind.Enum,Be.CompletionItemKind.Keyword,Be.CompletionItemKind.Snippet,Be.CompletionItemKind.Color,Be.CompletionItemKind.File,Be.CompletionItemKind.Reference,Be.CompletionItemKind.Folder,Be.CompletionItemKind.EnumMember,Be.CompletionItemKind.Constant,Be.CompletionItemKind.Struct,Be.CompletionItemKind.Event,Be.CompletionItemKind.Operator,Be.CompletionItemKind.TypeParameter];class yD extends Li.TextDocumentLanguageFeature{constructor(t){super(t,Be.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(t){let n=(0,Li.ensure)((0,Li.ensure)(t,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[Be.MarkupKind.Markdown,Be.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[Be.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[Be.InsertTextMode.asIs,Be.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=Be.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:mD},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(t,n){const r=this.getRegistrationOptions(n,t.completionProvider);r&&this.register({id:pD.generateUuid(),registerOptions:r})}registerLanguageProvider(t,n){var a;this.labelDetailsSupport.set(n,!!((a=t.completionItem)!=null&&a.labelDetailsSupport));const r=t.triggerCharacters??[],i=t.allCommitCharacters,o=t.documentSelector,s={provideCompletionItems:(u,c,f,g)=>{const d=this._client,h=this._client.middleware,m=(S,I,W,z)=>d.sendRequest(Be.CompletionRequest.type,d.code2ProtocolConverter.asCompletionParams(S,I,W),z).then(F=>z.isCancellationRequested?null:d.protocol2CodeConverter.asCompletionResult(F,i,z),F=>d.handleFailedRequest(Be.CompletionRequest.type,z,F,null));return h.provideCompletionItem?h.provideCompletionItem(u,c,g,f,m):m(u,c,g,f)},resolveCompletionItem:t.resolveProvider?(u,c)=>{const f=this._client,g=this._client.middleware,d=(h,m)=>f.sendRequest(Be.CompletionResolveRequest.type,f.code2ProtocolConverter.asCompletionItem(h,!!this.labelDetailsSupport.get(n)),m).then(S=>m.isCancellationRequested?null:f.protocol2CodeConverter.asCompletionItem(S),S=>f.handleFailedRequest(Be.CompletionResolveRequest.type,m,S,h));return g.resolveCompletionItem?g.resolveCompletionItem(u,c,d):d(u,c)}:void 0};return[DD.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...r),s]}}il=hr.CompletionItemFeature=yD;const CD=U({__proto__:null,get CompletionItemFeature(){return il},default:hr},[hr]),vD=K(CD);var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});var ol=Dr.HoverFeature=void 0;const _D=pe,Ln=Ee,Bi=We,bD=ut;class FD extends Bi.TextDocumentLanguageFeature{constructor(t){super(t,Ln.HoverRequest.type)}fillClientCapabilities(t){const n=(0,Bi.ensure)((0,Bi.ensure)(t,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[Ln.MarkupKind.Markdown,Ln.MarkupKind.PlainText]}initialize(t,n){const r=this.getRegistrationOptions(n,t.hoverProvider);r&&this.register({id:bD.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideHover:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(Ln.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asHover(h),h=>a.handleFailedRequest(Ln.HoverRequest.type,d,h,null)),c=a.middleware;return c.provideHover?c.provideHover(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return _D.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}ol=Dr.HoverFeature=FD;const wD=U({__proto__:null,get HoverFeature(){return ol},default:Dr},[Dr]),SD=K(wD);var pr={};Object.defineProperty(pr,"__esModule",{value:!0});var sl=pr.DefinitionFeature=void 0;const RD=pe,Hi=Ee,xi=We,TD=ut;class ED extends xi.TextDocumentLanguageFeature{constructor(t){super(t,Hi.DefinitionRequest.type)}fillClientCapabilities(t){let n=(0,xi.ensure)((0,xi.ensure)(t,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.definitionProvider);r&&this.register({id:TD.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDefinition:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(Hi.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,d),h=>a.handleFailedRequest(Hi.DefinitionRequest.type,d,h,null)),c=a.middleware;return c.provideDefinition?c.provideDefinition(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return RD.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}sl=pr.DefinitionFeature=ED;const kD=U({__proto__:null,get DefinitionFeature(){return sl},default:pr},[pr]),PD=K(kD);var mr={};Object.defineProperty(mr,"__esModule",{value:!0});var al=mr.SignatureHelpFeature=void 0;const cu=pe,Bn=Ee,Wi=We,OD=ut;class qD extends Wi.TextDocumentLanguageFeature{constructor(t){super(t,Bn.SignatureHelpRequest.type)}fillClientCapabilities(t){let n=(0,Wi.ensure)((0,Wi.ensure)(t,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Bn.MarkupKind.Markdown,Bn.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.signatureHelpProvider);r&&this.register({id:OD.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n={provideSignatureHelp:(r,i,o,s)=>{const a=this._client,u=(f,g,d,h)=>a.sendRequest(Bn.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(f,g,d),h).then(m=>h.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(m,h),m=>a.handleFailedRequest(Bn.SignatureHelpRequest.type,h,m,null)),c=a.middleware;return c.provideSignatureHelp?c.provideSignatureHelp(r,i,s,o,u):u(r,i,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(t,n){const r=this._client.protocol2CodeConverter.asDocumentSelector(t.documentSelector);if(t.retriggerCharacters===void 0){const i=t.triggerCharacters||[];return cu.languages.registerSignatureHelpProvider(r,n,...i)}else{const i={triggerCharacters:t.triggerCharacters||[],retriggerCharacters:t.retriggerCharacters||[]};return cu.languages.registerSignatureHelpProvider(r,n,i)}}}al=mr.SignatureHelpFeature=qD;const $D=U({__proto__:null,get SignatureHelpFeature(){return al},default:mr},[mr]),AD=K($D);var yr={};Object.defineProperty(yr,"__esModule",{value:!0});var ul=yr.DocumentHighlightFeature=void 0;const MD=pe,Ki=Ee,Ui=We,ID=ut;class ND extends Ui.TextDocumentLanguageFeature{constructor(t){super(t,Ki.DocumentHighlightRequest.type)}fillClientCapabilities(t){(0,Ui.ensure)((0,Ui.ensure)(t,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.documentHighlightProvider);r&&this.register({id:ID.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDocumentHighlights:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(Ki.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(h,d),h=>a.handleFailedRequest(Ki.DocumentHighlightRequest.type,d,h,null)),c=a.middleware;return c.provideDocumentHighlights?c.provideDocumentHighlights(i,o,s,u):u(i,o,s)}};return[MD.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}ul=yr.DocumentHighlightFeature=ND;const jD=U({__proto__:null,get DocumentHighlightFeature(){return ul},default:yr},[yr]),LD=K(jD);var _a={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentSymbolFeature=e.SupportedSymbolTags=e.SupportedSymbolKinds=void 0;const t=pe,n=Ee,r=We,i=ut;e.SupportedSymbolKinds=[n.SymbolKind.File,n.SymbolKind.Module,n.SymbolKind.Namespace,n.SymbolKind.Package,n.SymbolKind.Class,n.SymbolKind.Method,n.SymbolKind.Property,n.SymbolKind.Field,n.SymbolKind.Constructor,n.SymbolKind.Enum,n.SymbolKind.Interface,n.SymbolKind.Function,n.SymbolKind.Variable,n.SymbolKind.Constant,n.SymbolKind.String,n.SymbolKind.Number,n.SymbolKind.Boolean,n.SymbolKind.Array,n.SymbolKind.Object,n.SymbolKind.Key,n.SymbolKind.Null,n.SymbolKind.EnumMember,n.SymbolKind.Struct,n.SymbolKind.Event,n.SymbolKind.Operator,n.SymbolKind.TypeParameter],e.SupportedSymbolTags=[n.SymbolTag.Deprecated];class o extends r.TextDocumentLanguageFeature{constructor(a){super(a,n.DocumentSymbolRequest.type)}fillClientCapabilities(a){let u=(0,r.ensure)((0,r.ensure)(a,"textDocument"),"documentSymbol");u.dynamicRegistration=!0,u.symbolKind={valueSet:e.SupportedSymbolKinds},u.hierarchicalDocumentSymbolSupport=!0,u.tagSupport={valueSet:e.SupportedSymbolTags},u.labelSupport=!0}initialize(a,u){const c=this.getRegistrationOptions(u,a.documentSymbolProvider);c&&this.register({id:i.generateUuid(),registerOptions:c})}registerLanguageProvider(a){const u=a.documentSelector,c={provideDocumentSymbols:(g,d)=>{const h=this._client,m=async(I,W)=>{try{const z=await h.sendRequest(n.DocumentSymbolRequest.type,h.code2ProtocolConverter.asDocumentSymbolParams(I),W);if(W.isCancellationRequested||z===void 0||z===null)return null;if(z.length===0)return[];{const F=z[0];return n.DocumentSymbol.is(F)?await h.protocol2CodeConverter.asDocumentSymbols(z,W):await h.protocol2CodeConverter.asSymbolInformations(z,W)}}catch(z){return h.handleFailedRequest(n.DocumentSymbolRequest.type,W,z,null)}},S=h.middleware;return S.provideDocumentSymbols?S.provideDocumentSymbols(g,d,m):m(g,d)}},f=a.label!==void 0?{label:a.label}:void 0;return[t.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(u),c,f),c]}}e.DocumentSymbolFeature=o})(_a);const BD=xe(_a),HD=U({__proto__:null,default:BD},[_a]),cl=K(HD);var Cr={};Object.defineProperty(Cr,"__esModule",{value:!0});var ll=Cr.WorkspaceSymbolFeature=void 0;const xD=pe,Hn=Ee,zi=We,lu=cl,WD=ut;class KD extends zi.WorkspaceFeature{constructor(t){super(t,Hn.WorkspaceSymbolRequest.type)}fillClientCapabilities(t){let n=(0,zi.ensure)((0,zi.ensure)(t,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:lu.SupportedSymbolKinds},n.tagSupport={valueSet:lu.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(t){t.workspaceSymbolProvider&&this.register({id:WD.generateUuid(),registerOptions:t.workspaceSymbolProvider===!0?{workDoneProgress:!1}:t.workspaceSymbolProvider})}registerLanguageProvider(t){const n={provideWorkspaceSymbols:(r,i)=>{const o=this._client,s=(u,c)=>o.sendRequest(Hn.WorkspaceSymbolRequest.type,{query:u},c).then(f=>c.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(f,c),f=>o.handleFailedRequest(Hn.WorkspaceSymbolRequest.type,c,f,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:t.resolveProvider===!0?(r,i)=>{const o=this._client,s=(u,c)=>o.sendRequest(Hn.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(u),c).then(f=>c.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(f),f=>o.handleFailedRequest(Hn.WorkspaceSymbolResolveRequest.type,c,f,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[xD.languages.registerWorkspaceSymbolProvider(n),n]}}ll=Cr.WorkspaceSymbolFeature=KD;const UD=U({__proto__:null,get WorkspaceSymbolFeature(){return ll},default:Cr},[Cr]),zD=K(UD);var vr={};Object.defineProperty(vr,"__esModule",{value:!0});var dl=vr.ReferencesFeature=void 0;const VD=pe,Vi=Ee,Gi=We,GD=ut;class JD extends Gi.TextDocumentLanguageFeature{constructor(t){super(t,Vi.ReferencesRequest.type)}fillClientCapabilities(t){(0,Gi.ensure)((0,Gi.ensure)(t,"textDocument"),"references").dynamicRegistration=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.referencesProvider);r&&this.register({id:GD.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideReferences:(i,o,s,a)=>{const u=this._client,c=(g,d,h,m)=>u.sendRequest(Vi.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(g,d,h),m).then(S=>m.isCancellationRequested?null:u.protocol2CodeConverter.asReferences(S,m),S=>u.handleFailedRequest(Vi.ReferencesRequest.type,m,S,null)),f=u.middleware;return f.provideReferences?f.provideReferences(i,o,s,a,c):c(i,o,s,a)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return VD.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}dl=vr.ReferencesFeature=JD;const QD=U({__proto__:null,get ReferencesFeature(){return dl},default:vr},[vr]),XD=K(QD);var _r={};Object.defineProperty(_r,"__esModule",{value:!0});var fl=_r.CodeActionFeature=void 0;const YD=pe,Et=Ee,ZD=ut,Ji=We;class ep extends Ji.TextDocumentLanguageFeature{constructor(t){super(t,Et.CodeActionRequest.type)}fillClientCapabilities(t){const n=(0,Ji.ensure)((0,Ji.ensure)(t,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[Et.CodeActionKind.Empty,Et.CodeActionKind.QuickFix,Et.CodeActionKind.Refactor,Et.CodeActionKind.RefactorExtract,Et.CodeActionKind.RefactorInline,Et.CodeActionKind.RefactorRewrite,Et.CodeActionKind.Source,Et.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(t,n){const r=this.getRegistrationOptions(n,t.codeActionProvider);r&&this.register({id:ZD.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideCodeActions:(i,o,s,a)=>{const u=this._client,c=async(g,d,h,m)=>{const S={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(d),context:await u.code2ProtocolConverter.asCodeActionContext(h,m)};return u.sendRequest(Et.CodeActionRequest.type,S,m).then(I=>m.isCancellationRequested||I===null||I===void 0?null:u.protocol2CodeConverter.asCodeActionResult(I,m),I=>u.handleFailedRequest(Et.CodeActionRequest.type,m,I,null))},f=u.middleware;return f.provideCodeActions?f.provideCodeActions(i,o,s,a,c):c(i,o,s,a)},resolveCodeAction:t.resolveProvider?(i,o)=>{const s=this._client,a=this._client.middleware,u=async(c,f)=>s.sendRequest(Et.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(c,f),f).then(g=>f.isCancellationRequested?c:s.protocol2CodeConverter.asCodeAction(g,f),g=>s.handleFailedRequest(Et.CodeActionResolveRequest.type,f,g,c));return a.resolveCodeAction?a.resolveCodeAction(i,o,u):u(i,o)}:void 0};return[YD.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,t.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(t.codeActionKinds)}:void 0),r]}}fl=_r.CodeActionFeature=ep;const tp=U({__proto__:null,get CodeActionFeature(){return fl},default:_r},[_r]),np=K(tp);var br={};Object.defineProperty(br,"__esModule",{value:!0});var gl=br.CodeLensFeature=void 0;const du=pe,Cn=Ee,rp=ut,xn=We;class ip extends xn.TextDocumentLanguageFeature{constructor(t){super(t,Cn.CodeLensRequest.type)}fillClientCapabilities(t){(0,xn.ensure)((0,xn.ensure)(t,"textDocument"),"codeLens").dynamicRegistration=!0,(0,xn.ensure)((0,xn.ensure)(t,"workspace"),"codeLens").refreshSupport=!0}initialize(t,n){this._client.onRequest(Cn.CodeLensRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});const i=this.getRegistrationOptions(n,t.codeLensProvider);i&&this.register({id:rp.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r=new du.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=>{const a=this._client,u=(f,g)=>a.sendRequest(Cn.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(f),g).then(d=>g.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(d,g),d=>a.handleFailedRequest(Cn.CodeLensRequest.type,g,d,null)),c=a.middleware;return c.provideCodeLenses?c.provideCodeLenses(o,s,u):u(o,s)},resolveCodeLens:t.resolveProvider?(o,s)=>{const a=this._client,u=(f,g)=>a.sendRequest(Cn.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(f),g).then(d=>g.isCancellationRequested?f:a.protocol2CodeConverter.asCodeLens(d),d=>a.handleFailedRequest(Cn.CodeLensResolveRequest.type,g,d,f)),c=a.middleware;return c.resolveCodeLens?c.resolveCodeLens(o,s,u):u(o,s)}:void 0};return[du.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),{provider:i,onDidChangeCodeLensEmitter:r}]}}gl=br.CodeLensFeature=ip;const op=U({__proto__:null,get CodeLensFeature(){return gl},default:br},[br]),sp=K(op);var zt={};Object.defineProperty(zt,"__esModule",{value:!0});var hl=zt.DocumentOnTypeFormattingFeature=pl=zt.DocumentRangeFormattingFeature=Dl=zt.DocumentFormattingFeature=void 0;const _i=pe,Vt=Ee,ba=ut,Gt=We;var Fr;(function(e){function t(n){const r=_i.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:r.get("trimTrailingWhitespace"),trimFinalNewlines:r.get("trimFinalNewlines"),insertFinalNewline:r.get("insertFinalNewline")}}e.fromConfiguration=t})(Fr||(Fr={}));class ap extends Gt.TextDocumentLanguageFeature{constructor(t){super(t,Vt.DocumentFormattingRequest.type)}fillClientCapabilities(t){(0,Gt.ensure)((0,Gt.ensure)(t,"textDocument"),"formatting").dynamicRegistration=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.documentFormattingProvider);r&&this.register({id:ba.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=>{const a=this._client,u=(f,g,d)=>{const h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),options:a.code2ProtocolConverter.asFormattingOptions(g,Fr.fromConfiguration(f))};return a.sendRequest(Vt.DocumentFormattingRequest.type,h,d).then(m=>d.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(m,d),m=>a.handleFailedRequest(Vt.DocumentFormattingRequest.type,d,m,null))},c=a.middleware;return c.provideDocumentFormattingEdits?c.provideDocumentFormattingEdits(i,o,s,u):u(i,o,s)}};return[_i.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}var Dl=zt.DocumentFormattingFeature=ap;class up extends Gt.TextDocumentLanguageFeature{constructor(t){super(t,Vt.DocumentRangeFormattingRequest.type)}fillClientCapabilities(t){(0,Gt.ensure)((0,Gt.ensure)(t,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.documentRangeFormattingProvider);r&&this.register({id:ba.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=>{const u=this._client,c=(g,d,h,m)=>{const S={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(d),options:u.code2ProtocolConverter.asFormattingOptions(h,Fr.fromConfiguration(g))};return u.sendRequest(Vt.DocumentRangeFormattingRequest.type,S,m).then(I=>m.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(I,m),I=>u.handleFailedRequest(Vt.DocumentRangeFormattingRequest.type,m,I,null))},f=u.middleware;return f.provideDocumentRangeFormattingEdits?f.provideDocumentRangeFormattingEdits(i,o,s,a,c):c(i,o,s,a)}};return[_i.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}var pl=zt.DocumentRangeFormattingFeature=up;class cp extends Gt.TextDocumentLanguageFeature{constructor(t){super(t,Vt.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(t){(0,Gt.ensure)((0,Gt.ensure)(t,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.documentOnTypeFormattingProvider);r&&this.register({id:ba.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,u,c)=>{const f=this._client,g=(h,m,S,I,W)=>{let z={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(h),position:f.code2ProtocolConverter.asPosition(m),ch:S,options:f.code2ProtocolConverter.asFormattingOptions(I,Fr.fromConfiguration(h))};return f.sendRequest(Vt.DocumentOnTypeFormattingRequest.type,z,W).then(F=>W.isCancellationRequested?null:f.protocol2CodeConverter.asTextEdits(F,W),F=>f.handleFailedRequest(Vt.DocumentOnTypeFormattingRequest.type,W,F,null))},d=f.middleware;return d.provideOnTypeFormattingEdits?d.provideOnTypeFormattingEdits(o,s,a,u,c,g):g(o,s,a,u,c)}},i=t.moreTriggerCharacter||[];return[_i.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r,t.firstTriggerCharacter,...i),r]}}hl=zt.DocumentOnTypeFormattingFeature=cp;const lp=U({__proto__:null,get DocumentFormattingFeature(){return Dl},get DocumentOnTypeFormattingFeature(){return hl},get DocumentRangeFormattingFeature(){return pl},default:zt},[zt]),dp=K(lp);var wr={};Object.defineProperty(wr,"__esModule",{value:!0});var ml=wr.RenameFeature=void 0;const fp=pe,tn=Ee,gp=ut,fu=Ht,Qi=We;class hp extends Qi.TextDocumentLanguageFeature{constructor(t){super(t,tn.RenameRequest.type)}fillClientCapabilities(t){let n=(0,Qi.ensure)((0,Qi.ensure)(t,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=tn.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.renameProvider);r&&(fu.boolean(t.renameProvider)&&(r.prepareProvider=!1),this.register({id:gp.generateUuid(),registerOptions:r}))}registerLanguageProvider(t){const n=t.documentSelector,r={provideRenameEdits:(i,o,s,a)=>{const u=this._client,c=(g,d,h,m)=>{let S={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),position:u.code2ProtocolConverter.asPosition(d),newName:h};return u.sendRequest(tn.RenameRequest.type,S,m).then(I=>m.isCancellationRequested?null:u.protocol2CodeConverter.asWorkspaceEdit(I,m),I=>u.handleFailedRequest(tn.RenameRequest.type,m,I,null,!1))},f=u.middleware;return f.provideRenameEdits?f.provideRenameEdits(i,o,s,a,c):c(i,o,s,a)},prepareRename:t.prepareProvider?(i,o,s)=>{const a=this._client,u=(f,g,d)=>{let h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),position:a.code2ProtocolConverter.asPosition(g)};return a.sendRequest(tn.PrepareRenameRequest.type,h,d).then(m=>d.isCancellationRequested?null:tn.Range.is(m)?a.protocol2CodeConverter.asRange(m):this.isDefaultBehavior(m)?m.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):m&&tn.Range.is(m.range)?{range:a.protocol2CodeConverter.asRange(m.range),placeholder:m.placeholder}:Promise.reject(new Error("The element can't be renamed.")),m=>{throw typeof m.message=="string"?new Error(m.message):new Error("The element can't be renamed.")})},c=a.middleware;return c.prepareRename?c.prepareRename(i,o,s,u):u(i,o,s)}:void 0};return[this.registerProvider(n,r),r]}registerProvider(t,n){return fp.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}isDefaultBehavior(t){const n=t;return n&&fu.boolean(n.defaultBehavior)}}ml=wr.RenameFeature=hp;const Dp=U({__proto__:null,get RenameFeature(){return ml},default:wr},[wr]),pp=K(Dp);var Sr={};Object.defineProperty(Sr,"__esModule",{value:!0});var yl=Sr.DocumentLinkFeature=void 0;const mp=pe,Wn=Ee,Xi=We,yp=ut;class Cp extends Xi.TextDocumentLanguageFeature{constructor(t){super(t,Wn.DocumentLinkRequest.type)}fillClientCapabilities(t){const n=(0,Xi.ensure)((0,Xi.ensure)(t,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(t,n){const r=this.getRegistrationOptions(n,t.documentLinkProvider);r&&this.register({id:yp.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDocumentLinks:(i,o)=>{const s=this._client,a=(c,f)=>s.sendRequest(Wn.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(c),f).then(g=>f.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(g,f),g=>s.handleFailedRequest(Wn.DocumentLinkRequest.type,f,g,null)),u=s.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:t.resolveProvider?(i,o)=>{const s=this._client;let a=(c,f)=>s.sendRequest(Wn.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(c),f).then(g=>f.isCancellationRequested?c:s.protocol2CodeConverter.asDocumentLink(g),g=>s.handleFailedRequest(Wn.DocumentLinkResolveRequest.type,f,g,c));const u=s.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[mp.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}yl=Sr.DocumentLinkFeature=Cp;const vp=U({__proto__:null,get DocumentLinkFeature(){return yl},default:Sr},[Sr]),_p=K(vp);var Rr={};Object.defineProperty(Rr,"__esModule",{value:!0});var Cl=Rr.ExecuteCommandFeature=void 0;const bp=pe,Yi=Ee,Fp=ut,gu=We;class wp{constructor(t){this._client=t,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Yi.ExecuteCommandRequest.type}fillClientCapabilities(t){(0,gu.ensure)((0,gu.ensure)(t,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(t){t.executeCommandProvider&&this.register({id:Fp.generateUuid(),registerOptions:Object.assign({},t.executeCommandProvider)})}register(t){const n=this._client,r=n.middleware,i=(o,s)=>{let a={command:o,arguments:s};return n.sendRequest(Yi.ExecuteCommandRequest.type,a).then(void 0,u=>n.handleFailedRequest(Yi.ExecuteCommandRequest.type,void 0,u,void 0))};if(t.registerOptions.commands){const o=[];for(const s of t.registerOptions.commands)o.push(bp.commands.registerCommand(s,(...a)=>r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(t.id,o)}}unregister(t){let n=this._commands.get(t);n&&n.forEach(r=>r.dispose())}dispose(){this._commands.forEach(t=>{t.forEach(n=>n.dispose())}),this._commands.clear()}}Cl=Rr.ExecuteCommandFeature=wp;const Sp=U({__proto__:null,get ExecuteCommandFeature(){return Cl},default:Rr},[Rr]),Rp=K(Sp);var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0});var vl=Tr.FileSystemWatcherFeature=void 0;const Tp=pe,nn=Ee,Xr=We;class Ep{constructor(t,n){this._client=t,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return nn.DidChangeWatchedFilesNotification.type}fillClientCapabilities(t){(0,Xr.ensure)((0,Xr.ensure)(t,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Xr.ensure)((0,Xr.ensure)(t,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(t,n){}register(t){if(!Array.isArray(t.registerOptions.watchers))return;const n=[];for(const r of t.registerOptions.watchers){const i=this._client.protocol2CodeConverter.asGlobPattern(r.globPattern);if(i===void 0)continue;let o=!0,s=!0,a=!0;r.kind!==void 0&&r.kind!==null&&(o=(r.kind&nn.WatchKind.Create)!==0,s=(r.kind&nn.WatchKind.Change)!==0,a=(r.kind&nn.WatchKind.Delete)!==0);const u=Tp.workspace.createFileSystemWatcher(i,!o,!s,!a);this.hookListeners(u,o,s,a,n),n.push(u)}this._watchers.set(t.id,n)}registerRaw(t,n){let r=[];for(let i of n)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(t,r)}hookListeners(t,n,r,i,o){n&&t.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:nn.FileChangeType.Created}),null,o),r&&t.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:nn.FileChangeType.Changed}),null,o),i&&t.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:nn.FileChangeType.Deleted}),null,o)}unregister(t){let n=this._watchers.get(t);if(n)for(let r of n)r.dispose()}dispose(){this._watchers.forEach(t=>{for(let n of t)n.dispose()}),this._watchers.clear()}}vl=Tr.FileSystemWatcherFeature=Ep;const kp=U({__proto__:null,get FileSystemWatcherFeature(){return vl},default:Tr},[Tr]),Pp=K(kp);var Er={};Object.defineProperty(Er,"__esModule",{value:!0});var _l=Er.ColorProviderFeature=void 0;const Op=pe,Kn=Ee,Zi=We;class qp extends Zi.TextDocumentLanguageFeature{constructor(t){super(t,Kn.DocumentColorRequest.type)}fillClientCapabilities(t){(0,Zi.ensure)((0,Zi.ensure)(t,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(t,n){let[r,i]=this.getRegistration(n,t.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideColorPresentations:(i,o,s)=>{const a=this._client,u=(f,g,d)=>{const h={color:f,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g.document),range:a.code2ProtocolConverter.asRange(g.range)};return a.sendRequest(Kn.ColorPresentationRequest.type,h,d).then(m=>d.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(m,d),m=>a.handleFailedRequest(Kn.ColorPresentationRequest.type,d,m,null))},c=a.middleware;return c.provideColorPresentations?c.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=>{const s=this._client,a=(c,f)=>{const g={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(c)};return s.sendRequest(Kn.DocumentColorRequest.type,g,f).then(d=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(d,f),d=>s.handleFailedRequest(Kn.DocumentColorRequest.type,f,d,null))},u=s.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[Op.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}_l=Er.ColorProviderFeature=qp;const $p=U({__proto__:null,get ColorProviderFeature(){return _l},default:Er},[Er]),Ap=K($p);var kr={};Object.defineProperty(kr,"__esModule",{value:!0});var bl=kr.ImplementationFeature=void 0;const Mp=pe,eo=Ee,to=We;class Ip extends to.TextDocumentLanguageFeature{constructor(t){super(t,eo.ImplementationRequest.type)}fillClientCapabilities(t){let n=(0,to.ensure)((0,to.ensure)(t,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){let[r,i]=this.getRegistration(n,t.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideImplementation:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(eo.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,d),h=>a.handleFailedRequest(eo.ImplementationRequest.type,d,h,null)),c=a.middleware;return c.provideImplementation?c.provideImplementation(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return Mp.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}bl=kr.ImplementationFeature=Ip;const Np=U({__proto__:null,get ImplementationFeature(){return bl},default:kr},[kr]),jp=K(Np);var Pr={};Object.defineProperty(Pr,"__esModule",{value:!0});var Fl=Pr.TypeDefinitionFeature=void 0;const Lp=pe,no=Ee,Un=We;class Bp extends Un.TextDocumentLanguageFeature{constructor(t){super(t,no.TypeDefinitionRequest.type)}fillClientCapabilities(t){(0,Un.ensure)((0,Un.ensure)(t,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,Un.ensure)((0,Un.ensure)(t,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){let[r,i]=this.getRegistration(n,t.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideTypeDefinition:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(no.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(h,d),h=>a.handleFailedRequest(no.TypeDefinitionRequest.type,d,h,null)),c=a.middleware;return c.provideTypeDefinition?c.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return Lp.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Fl=Pr.TypeDefinitionFeature=Bp;const Hp=U({__proto__:null,get TypeDefinitionFeature(){return Fl},default:Pr},[Pr]),xp=K(Hp);var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var wl=Dn.WorkspaceFoldersFeature=Sl=Dn.arrayDiff=void 0;const Wp=ut,Yr=pe,zn=Ee;function ro(e,t){if(e!=null)return e[t]}function bs(e,t){return e.filter(n=>t.indexOf(n)<0)}var Sl=Dn.arrayDiff=bs;class Kp{constructor(t){this._client=t,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return zn.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(t){const n=Yr.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?t.workspaceFolders=null:t.workspaceFolders=n.map(r=>this.asProtocol(r))}initializeWithFolders(t){this._initialFolders=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.workspaceFolders=!0}initialize(t){const n=this._client;n.onRequest(zn.WorkspaceFoldersRequest.type,o=>{const s=()=>{const u=Yr.workspace.workspaceFolders;return u===void 0?null:u.map(f=>this.asProtocol(f))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s()});const r=ro(ro(ro(t,"workspace"),"workspaceFolders"),"changeNotifications");let i;typeof r=="string"?i=r:r===!0&&(i=Wp.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(t){let n;if(this._initialFolders&&t){const r=bs(this._initialFolders,t),i=bs(t,this._initialFolders);(i.length>0||r.length>0)&&(n=this.doSendEvent(i,r))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):t&&(n=this.doSendEvent(t,[]));n!==void 0&&n.catch(r=>{this._client.error(`Sending notification ${zn.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(t,n){let r={event:{added:t.map(i=>this.asProtocol(i)),removed:n.map(i=>this.asProtocol(i))}};return this._client.sendNotification(zn.DidChangeWorkspaceFoldersNotification.type,r)}register(t){let n=t.id,r=this._client,i=Yr.workspace.onDidChangeWorkspaceFolders(o=>{let s=c=>this.doSendEvent(c.added,c.removed),a=r.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(c=>{this._client.error(`Sending notification ${zn.DidChangeWorkspaceFoldersNotification.type.method} failed`,c)})});this._listeners.set(n,i),this.sendInitialEvent(Yr.workspace.workspaceFolders)}unregister(t){let n=this._listeners.get(t);n!==void 0&&(this._listeners.delete(t),n.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}asProtocol(t){return t===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(t.uri),name:t.name}}}wl=Dn.WorkspaceFoldersFeature=Kp;const Up=U({__proto__:null,get WorkspaceFoldersFeature(){return wl},get arrayDiff(){return Sl},default:Dn},[Dn]),zp=K(Up);var Or={};Object.defineProperty(Or,"__esModule",{value:!0});var Rl=Or.FoldingRangeFeature=void 0;const Vp=pe,vn=Ee,io=We;class Gp extends io.TextDocumentLanguageFeature{constructor(t){super(t,vn.FoldingRangeRequest.type)}fillClientCapabilities(t){let n=(0,io.ensure)((0,io.ensure)(t,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[vn.FoldingRangeKind.Comment,vn.FoldingRangeKind.Imports,vn.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(t,n){let[r,i]=this.getRegistration(n,t.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideFoldingRanges:(i,o,s)=>{const a=this._client,u=(f,g,d)=>{const h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f)};return a.sendRequest(vn.FoldingRangeRequest.type,h,d).then(m=>d.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(m,d),m=>a.handleFailedRequest(vn.FoldingRangeRequest.type,d,m,null))},c=a.middleware;return c.provideFoldingRanges?c.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[Vp.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),r]}}Rl=Or.FoldingRangeFeature=Gp;const Jp=U({__proto__:null,get FoldingRangeFeature(){return Rl},default:Or},[Or]),Qp=K(Jp);var qr={};Object.defineProperty(qr,"__esModule",{value:!0});var Tl=qr.DeclarationFeature=void 0;const Xp=pe,oo=Ee,so=We;class Yp extends so.TextDocumentLanguageFeature{constructor(t){super(t,oo.DeclarationRequest.type)}fillClientCapabilities(t){const n=(0,so.ensure)((0,so.ensure)(t,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){const[r,i]=this.getRegistration(n,t.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideDeclaration:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(oo.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(h,d),h=>a.handleFailedRequest(oo.DeclarationRequest.type,d,h,null)),c=a.middleware;return c.provideDeclaration?c.provideDeclaration(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return Xp.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Tl=qr.DeclarationFeature=Yp;const Zp=U({__proto__:null,get DeclarationFeature(){return Tl},default:qr},[qr]),em=K(Zp);var $r={};Object.defineProperty($r,"__esModule",{value:!0});var El=$r.SelectionRangeFeature=void 0;const tm=pe,ao=Ee,uo=We;class nm extends uo.TextDocumentLanguageFeature{constructor(t){super(t,ao.SelectionRangeRequest.type)}fillClientCapabilities(t){const n=(0,uo.ensure)((0,uo.ensure)(t,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(t,n){const[r,i]=this.getRegistration(n,t.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideSelectionRanges:(i,o,s)=>{const a=this._client,u=async(f,g,d)=>{const h={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(f),positions:await a.code2ProtocolConverter.asPositions(g,d)};return a.sendRequest(ao.SelectionRangeRequest.type,h,d).then(m=>d.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(m,d),m=>a.handleFailedRequest(ao.SelectionRangeRequest.type,d,m,null))},c=a.middleware;return c.provideSelectionRanges?c.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return tm.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}El=$r.SelectionRangeFeature=nm;const rm=U({__proto__:null,get SelectionRangeFeature(){return El},default:$r},[$r]),im=K(rm);var Ar={};Object.defineProperty(Ar,"__esModule",{value:!0});var kl=Ar.ProgressFeature=void 0;const hu=Ee,om=Vc;function sm(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}class am{constructor(t){this._client=t,this.activeParts=new Set}getState(){return{kind:"window",id:hu.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(t){sm(t,"window").workDoneProgress=!0}initialize(){const t=this._client,n=i=>{this.activeParts.delete(i)},r=i=>{this.activeParts.add(new om.ProgressPart(this._client,i.token,n))};t.onRequest(hu.WorkDoneProgressCreateRequest.type,r)}dispose(){for(const t of this.activeParts)t.done();this.activeParts.clear()}}kl=Ar.ProgressFeature=am;const um=U({__proto__:null,get ProgressFeature(){return kl},default:Ar},[Ar]),cm=K(um);var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});var Pl=Mr.CallHierarchyFeature=void 0;const lm=pe,sn=Ee,co=We;class dm{constructor(t){this.client=t,this.middleware=t.middleware}prepareCallHierarchy(t,n,r){const i=this.client,o=this.middleware,s=(a,u,c)=>{const f=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(sn.CallHierarchyPrepareRequest.type,f,c).then(g=>c.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(g,c),g=>i.handleFailedRequest(sn.CallHierarchyPrepareRequest.type,c,g,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(t,n,r,s):s(t,n,r)}provideCallHierarchyIncomingCalls(t,n){const r=this.client,i=this.middleware,o=(s,a)=>{const u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(sn.CallHierarchyIncomingCallsRequest.type,u,a).then(c=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyIncomingCalls(c,a),c=>r.handleFailedRequest(sn.CallHierarchyIncomingCallsRequest.type,a,c,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(t,n,o):o(t,n)}provideCallHierarchyOutgoingCalls(t,n){const r=this.client,i=this.middleware,o=(s,a)=>{const u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(sn.CallHierarchyOutgoingCallsRequest.type,u,a).then(c=>a.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(c,a),c=>r.handleFailedRequest(sn.CallHierarchyOutgoingCallsRequest.type,a,c,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(t,n,o):o(t,n)}}class fm extends co.TextDocumentLanguageFeature{constructor(t){super(t,sn.CallHierarchyPrepareRequest.type)}fillClientCapabilities(t){const n=t,r=(0,co.ensure)((0,co.ensure)(n,"textDocument"),"callHierarchy");r.dynamicRegistration=!0}initialize(t,n){const[r,i]=this.getRegistration(n,t.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=this._client,r=new dm(n);return[lm.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(t.documentSelector),r),r]}}Pl=Mr.CallHierarchyFeature=fm;const gm=U({__proto__:null,get CallHierarchyFeature(){return Pl},default:Mr},[Mr]),hm=K(gm);var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});var Ol=Ir.SemanticTokensFeature=void 0;const Zr=pe,Te=Ee,Vn=We,Dm=Ht;class pm extends Vn.TextDocumentLanguageFeature{constructor(t){super(t,Te.SemanticTokensRegistrationType.type)}fillClientCapabilities(t){const n=(0,Vn.ensure)((0,Vn.ensure)(t,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[Te.SemanticTokenTypes.namespace,Te.SemanticTokenTypes.type,Te.SemanticTokenTypes.class,Te.SemanticTokenTypes.enum,Te.SemanticTokenTypes.interface,Te.SemanticTokenTypes.struct,Te.SemanticTokenTypes.typeParameter,Te.SemanticTokenTypes.parameter,Te.SemanticTokenTypes.variable,Te.SemanticTokenTypes.property,Te.SemanticTokenTypes.enumMember,Te.SemanticTokenTypes.event,Te.SemanticTokenTypes.function,Te.SemanticTokenTypes.method,Te.SemanticTokenTypes.macro,Te.SemanticTokenTypes.keyword,Te.SemanticTokenTypes.modifier,Te.SemanticTokenTypes.comment,Te.SemanticTokenTypes.string,Te.SemanticTokenTypes.number,Te.SemanticTokenTypes.regexp,Te.SemanticTokenTypes.operator,Te.SemanticTokenTypes.decorator],n.tokenModifiers=[Te.SemanticTokenModifiers.declaration,Te.SemanticTokenModifiers.definition,Te.SemanticTokenModifiers.readonly,Te.SemanticTokenModifiers.static,Te.SemanticTokenModifiers.deprecated,Te.SemanticTokenModifiers.abstract,Te.SemanticTokenModifiers.async,Te.SemanticTokenModifiers.modification,Te.SemanticTokenModifiers.documentation,Te.SemanticTokenModifiers.defaultLibrary],n.formats=[Te.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Vn.ensure)((0,Vn.ensure)(t,"workspace"),"semanticTokens").refreshSupport=!0}initialize(t,n){this._client.onRequest(Te.SemanticTokensRefreshRequest.type,async()=>{for(const s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});const[i,o]=this.getRegistration(n,t.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(t){const n=t.documentSelector,r=Dm.boolean(t.full)?t.full:t.full!==void 0,i=t.full!==void 0&&typeof t.full!="boolean"&&t.full.delta===!0,o=new Zr.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(h,m)=>{const S=this._client,I=S.middleware,W=(z,F)=>{const P={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(z)};return S.sendRequest(Te.SemanticTokensRequest.type,P,F).then(L=>F.isCancellationRequested?null:S.protocol2CodeConverter.asSemanticTokens(L,F),L=>S.handleFailedRequest(Te.SemanticTokensRequest.type,F,L,null))};return I.provideDocumentSemanticTokens?I.provideDocumentSemanticTokens(h,m,W):W(h,m)},provideDocumentSemanticTokensEdits:i?(h,m,S)=>{const I=this._client,W=I.middleware,z=(F,P,L)=>{const G={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(F),previousResultId:P};return I.sendRequest(Te.SemanticTokensDeltaRequest.type,G,L).then(async H=>L.isCancellationRequested?null:Te.SemanticTokens.is(H)?await I.protocol2CodeConverter.asSemanticTokens(H,L):await I.protocol2CodeConverter.asSemanticTokensEdits(H,L),H=>I.handleFailedRequest(Te.SemanticTokensDeltaRequest.type,L,H,null))};return W.provideDocumentSemanticTokensEdits?W.provideDocumentSemanticTokensEdits(h,m,S,z):z(h,m,S)}:void 0}:void 0,u=t.range===!0?{provideDocumentRangeSemanticTokens:(h,m,S)=>{const I=this._client,W=I.middleware,z=(F,P,L)=>{const G={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(F),range:I.code2ProtocolConverter.asRange(P)};return I.sendRequest(Te.SemanticTokensRangeRequest.type,G,L).then(H=>L.isCancellationRequested?null:I.protocol2CodeConverter.asSemanticTokens(H,L),H=>I.handleFailedRequest(Te.SemanticTokensRangeRequest.type,L,H,null))};return W.provideDocumentRangeSemanticTokens?W.provideDocumentRangeSemanticTokens(h,m,S,z):z(h,m,S)}}:void 0,c=[],f=this._client,g=f.protocol2CodeConverter.asSemanticTokensLegend(t.legend),d=f.protocol2CodeConverter.asDocumentSelector(n);return s!==void 0&&c.push(Zr.languages.registerDocumentSemanticTokensProvider(d,s,g)),u!==void 0&&c.push(Zr.languages.registerDocumentRangeSemanticTokensProvider(d,u,g)),[new Zr.Disposable(()=>c.forEach(h=>h.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}}Ol=Ir.SemanticTokensFeature=pm;const mm=U({__proto__:null,get SemanticTokensFeature(){return Ol},default:Ir},[Ir]),ym=K(mm);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});var ql=wt.WillDeleteFilesFeature=Ll=wt.WillRenameFilesFeature=jl=wt.WillCreateFilesFeature=Nl=wt.DidDeleteFilesFeature=Il=wt.DidRenameFilesFeature=Ml=wt.DidCreateFilesFeature=void 0;const It=pe,Cm=aa,Jt=Ee,vm=ut;function Du(e,t){return e[t]===void 0&&(e[t]={}),e[t]}function _m(e,t){return e[t]}function pu(e,t,n){e[t]=n}class gn{constructor(t,n,r,i,o){this._client=t,this._event=n,this._registrationType=r,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(t){const n=Du(Du(t,"workspace"),"fileOperations");pu(n,"dynamicRegistration",!0),pu(n,this._clientCapability,!0)}initialize(t){var i;const n=(i=t.workspace)==null?void 0:i.fileOperations,r=n!==void 0?_m(n,this._serverCapability):void 0;if((r==null?void 0:r.filters)!==void 0)try{this.register({id:vm.generateUuid(),registerOptions:{filters:r.filters}})}catch(o){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${o}`)}}register(t){this._listener||(this._listener=this._event(this.send,this));const n=t.registerOptions.filters.map(r=>{const i=new Cm.Minimatch(r.pattern.glob,gn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(t.id,n)}unregister(t){this._filters.delete(t),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(t){return gn.getFileType(t)}async filter(t,n){const r=await Promise.all(t.files.map(async o=>{const s=n(o),a=s.fsPath.replace(/\\/g,"/");for(const u of this._filters.values())for(const c of u)if(!(c.scheme!==void 0&&c.scheme!==s.scheme)){if(c.matcher.match(a)){if(c.kind===void 0)return!0;const f=await this.getFileType(s);if(f===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(f===It.FileType.File&&c.kind===Jt.FileOperationPatternKind.file||f===It.FileType.Directory&&c.kind===Jt.FileOperationPatternKind.folder)return!0}else if(c.kind===Jt.FileOperationPatternKind.folder&&await gn.getFileType(s)===It.FileType.Directory&&c.matcher.match(`${a}/`))return!0}return!1})),i=t.files.filter((o,s)=>r[s]);return{...t,files:i}}static async getFileType(t){try{return(await It.workspace.fs.stat(t)).type}catch{return}}static asMinimatchOptions(t){if(t!==void 0&&t.ignoreCase===!0)return{nocase:!0}}}class $l extends gn{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(t){const n=await this.filter(t,this._accessUri);if(n.files.length){const r=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(n,r)}}}class Al extends $l{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(t){const n=t.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);const r=await gn.getFileType(t);return r&&this._fsPathFileTypes.set(n,r),r}async cacheFileTypes(t,n){await this.filter(t,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(t){super.unregister(t),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}class bm extends $l{constructor(t){super(t,It.workspace.onDidCreateFiles,Jt.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,t.code2ProtocolConverter.asDidCreateFilesParams)}doSend(t,n){const r=this._client.middleware.workspace;return r!=null&&r.didCreateFiles?r.didCreateFiles(t,n):n(t)}}var Ml=wt.DidCreateFilesFeature=bm;class Fm extends Al{constructor(t){super(t,It.workspace.onDidRenameFiles,Jt.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,t.code2ProtocolConverter.asDidRenameFilesParams)}register(t){this._willListener||(this._willListener=It.workspace.onWillRenameFiles(this.willRename,this)),super.register(t)}willRename(t){t.waitUntil(this.cacheFileTypes(t,n=>n.oldUri))}doSend(t,n){this.clearFileTypeCache();const r=this._client.middleware.workspace;return r!=null&&r.didRenameFiles?r.didRenameFiles(t,n):n(t)}}var Il=wt.DidRenameFilesFeature=Fm;class wm extends Al{constructor(t){super(t,It.workspace.onDidDeleteFiles,Jt.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,t.code2ProtocolConverter.asDidDeleteFilesParams)}register(t){this._willListener||(this._willListener=It.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(t)}willDelete(t){t.waitUntil(this.cacheFileTypes(t,n=>n))}doSend(t,n){this.clearFileTypeCache();const r=this._client.middleware.workspace;return r!=null&&r.didDeleteFiles?r.didDeleteFiles(t,n):n(t)}}var Nl=wt.DidDeleteFilesFeature=wm;class Fa extends gn{constructor(t,n,r,i,o,s,a){super(t,n,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(t){const n=this.waitUntil(t);t.waitUntil(n)}async waitUntil(t){const n=await this.filter(t,this._accessUri);if(n.files.length){const r=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,r)}else return}}class Sm extends Fa{constructor(t){super(t,It.workspace.onWillCreateFiles,Jt.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,t.code2ProtocolConverter.asWillCreateFilesParams)}doSend(t,n){const r=this._client.middleware.workspace;return r!=null&&r.willCreateFiles?r.willCreateFiles(t,n):n(t)}}var jl=wt.WillCreateFilesFeature=Sm;class Rm extends Fa{constructor(t){super(t,It.workspace.onWillRenameFiles,Jt.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,t.code2ProtocolConverter.asWillRenameFilesParams)}doSend(t,n){const r=this._client.middleware.workspace;return r!=null&&r.willRenameFiles?r.willRenameFiles(t,n):n(t)}}var Ll=wt.WillRenameFilesFeature=Rm;class Tm extends Fa{constructor(t){super(t,It.workspace.onWillDeleteFiles,Jt.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,t.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(t,n){const r=this._client.middleware.workspace;return r!=null&&r.willDeleteFiles?r.willDeleteFiles(t,n):n(t)}}ql=wt.WillDeleteFilesFeature=Tm;const Em=U({__proto__:null,get DidCreateFilesFeature(){return Ml},get DidDeleteFilesFeature(){return Nl},get DidRenameFilesFeature(){return Il},get WillCreateFilesFeature(){return jl},get WillDeleteFilesFeature(){return ql},get WillRenameFilesFeature(){return Ll},default:wt},[wt]),km=K(Em);var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});var Bl=Nr.LinkedEditingFeature=void 0;const Pm=pe,lo=Ee,fo=We;class Om extends fo.TextDocumentLanguageFeature{constructor(t){super(t,lo.LinkedEditingRangeRequest.type)}fillClientCapabilities(t){const n=(0,fo.ensure)((0,fo.ensure)(t,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(t,n){let[r,i]=this.getRegistration(n,t.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=>{const a=this._client,u=(f,g,d)=>a.sendRequest(lo.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(f,g),d).then(h=>d.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(h,d),h=>a.handleFailedRequest(lo.LinkedEditingRangeRequest.type,d,h,null)),c=a.middleware;return c.provideLinkedEditingRange?c.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[this.registerProvider(n,r),r]}registerProvider(t,n){return Pm.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Bl=Nr.LinkedEditingFeature=Om;const qm=U({__proto__:null,get LinkedEditingFeature(){return Bl},default:Nr},[Nr]),$m=K(qm);var jr={};Object.defineProperty(jr,"__esModule",{value:!0});var Hl=jr.TypeHierarchyFeature=void 0;const Am=pe,an=Ee,go=We;class Mm{constructor(t){this.client=t,this.middleware=t.middleware}prepareTypeHierarchy(t,n,r){const i=this.client,o=this.middleware,s=(a,u,c)=>{const f=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(an.TypeHierarchyPrepareRequest.type,f,c).then(g=>c.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(g,c),g=>i.handleFailedRequest(an.TypeHierarchyPrepareRequest.type,c,g,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(t,n,r,s):s(t,n,r)}provideTypeHierarchySupertypes(t,n){const r=this.client,i=this.middleware,o=(s,a)=>{const u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(an.TypeHierarchySupertypesRequest.type,u,a).then(c=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>r.handleFailedRequest(an.TypeHierarchySupertypesRequest.type,a,c,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(t,n,o):o(t,n)}provideTypeHierarchySubtypes(t,n){const r=this.client,i=this.middleware,o=(s,a)=>{const u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(an.TypeHierarchySubtypesRequest.type,u,a).then(c=>a.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(c,a),c=>r.handleFailedRequest(an.TypeHierarchySubtypesRequest.type,a,c,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(t,n,o):o(t,n)}}class Im extends go.TextDocumentLanguageFeature{constructor(t){super(t,an.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(t){const n=(0,go.ensure)((0,go.ensure)(t,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(t,n){const[r,i]=this.getRegistration(n,t.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=this._client,r=new Mm(n);return[Am.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(t.documentSelector),r),r]}}Hl=jr.TypeHierarchyFeature=Im;const Nm=U({__proto__:null,get TypeHierarchyFeature(){return Hl},default:jr},[jr]),jm=K(Nm);var Lr={};Object.defineProperty(Lr,"__esModule",{value:!0});var xl=Lr.InlineValueFeature=void 0;const mu=pe,ei=Ee,Gn=We;class Lm extends Gn.TextDocumentLanguageFeature{constructor(t){super(t,ei.InlineValueRequest.type)}fillClientCapabilities(t){(0,Gn.ensure)((0,Gn.ensure)(t,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Gn.ensure)((0,Gn.ensure)(t,"workspace"),"inlineValue").refreshSupport=!0}initialize(t,n){this._client.onRequest(ei.InlineValueRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeInlineValues.fire()});const[r,i]=this.getRegistration(n,t.inlineValueProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r=new mu.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=>{const c=this._client,f=(d,h,m,S)=>{const I={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(d),range:c.code2ProtocolConverter.asRange(h),context:c.code2ProtocolConverter.asInlineValueContext(m)};return c.sendRequest(ei.InlineValueRequest.type,I,S).then(W=>S.isCancellationRequested?null:c.protocol2CodeConverter.asInlineValues(W,S),W=>c.handleFailedRequest(ei.InlineValueRequest.type,S,W,null))},g=c.middleware;return g.provideInlineValues?g.provideInlineValues(o,s,a,u,f):f(o,s,a,u)}};return[this.registerProvider(n,i),{provider:i,onDidChangeInlineValues:r}]}registerProvider(t,n){return mu.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}xl=Lr.InlineValueFeature=Lm;const Bm=U({__proto__:null,get InlineValueFeature(){return xl},default:Lr},[Lr]),Hm=K(Bm);var Br={};Object.defineProperty(Br,"__esModule",{value:!0});var Wl=Br.InlayHintsFeature=void 0;const yu=pe,_n=Ee,Jn=We;class xm extends Jn.TextDocumentLanguageFeature{constructor(t){super(t,_n.InlayHintRequest.type)}fillClientCapabilities(t){const n=(0,Jn.ensure)((0,Jn.ensure)(t,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,Jn.ensure)((0,Jn.ensure)(t,"workspace"),"inlayHint").refreshSupport=!0}initialize(t,n){this._client.onRequest(_n.InlayHintRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeInlayHints.fire()});const[r,i]=this.getRegistration(n,t.inlayHintProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,r=new yu.EventEmitter,i={onDidChangeInlayHints:r.event,provideInlayHints:(o,s,a)=>{const u=this._client,c=async(g,d,h)=>{const m={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(g),range:u.code2ProtocolConverter.asRange(d)};try{const S=await u.sendRequest(_n.InlayHintRequest.type,m,h);return h.isCancellationRequested?null:u.protocol2CodeConverter.asInlayHints(S,h)}catch(S){return u.handleFailedRequest(_n.InlayHintRequest.type,h,S,null)}},f=u.middleware;return f.provideInlayHints?f.provideInlayHints(o,s,a,c):c(o,s,a)}};return i.resolveInlayHint=t.resolveProvider===!0?(o,s)=>{const a=this._client,u=async(f,g)=>{try{const d=await a.sendRequest(_n.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(f),g);if(g.isCancellationRequested)return null;const h=a.protocol2CodeConverter.asInlayHint(d,g);return g.isCancellationRequested?null:h}catch(d){return a.handleFailedRequest(_n.InlayHintResolveRequest.type,g,d,null)}},c=a.middleware;return c.resolveInlayHint?c.resolveInlayHint(o,s,u):u(o,s)}:void 0,[this.registerProvider(n,i),{provider:i,onDidChangeInlayHints:r}]}registerProvider(t,n){return yu.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Wl=Br.InlayHintsFeature=xm;const Wm=U({__proto__:null,get InlayHintsFeature(){return Wl},default:Br},[Br]),Km=K(Wm);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.BaseLanguageClient=e.MessageTransports=e.SuspendMode=e.State=e.CloseAction=e.ErrorAction=e.RevealOutputChannelOn=void 0;const t=pe,n=Ee,r=Nh,i=Gh,o=Ht,s=da,a=ut,u=Vc,c=We,f=Tc,g=eD,d=sD,h=hD,m=vD,S=SD,I=PD,W=AD,z=LD,F=cl,P=zD,L=XD,G=np,H=sp,Y=dp,Q=pp,ye=_p,E=Rp,D=Pp,R=Ap,B=jp,X=xp,he=zp,te=Qp,me=em,ke=im,nt=cm,Ct=hm,x=ym,De=km,be=$m,Se=jm,Fe=Hm,Ne=Km;var ge;(function(ae){ae[ae.Info=1]="Info",ae[ae.Warn=2]="Warn",ae[ae.Error=3]="Error",ae[ae.Never=4]="Never"})(ge=e.RevealOutputChannelOn||(e.RevealOutputChannelOn={}));var Pe;(function(ae){ae[ae.Continue=1]="Continue",ae[ae.Shutdown=2]="Shutdown"})(Pe=e.ErrorAction||(e.ErrorAction={}));var le;(function(ae){ae[ae.DoNotRestart=1]="DoNotRestart",ae[ae.Restart=2]="Restart"})(le=e.CloseAction||(e.CloseAction={}));var Ce;(function(ae){ae[ae.Stopped=1]="Stopped",ae[ae.Starting=3]="Starting",ae[ae.Running=2]="Running"})(Ce=e.State||(e.State={})),function(ae){ae.off="off",ae.on="on"}(e.SuspendMode||(e.SuspendMode={}));class Re{constructor(y,b){this.client=y,this.maxRestartCount=b,this.restarts=[]}error(y,b,_){return _&&_<=3?{action:Pe.Continue}:{action:Pe.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:le.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:le.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:le.Restart})}}var M;(function(ae){ae.Initial="initial",ae.Starting="starting",ae.StartFailed="startFailed",ae.Running="running",ae.Stopping="stopping",ae.Stopped="stopped"})(M||(M={})),function(ae){function y(b){return b&&n.MessageReader.is(b.reader)&&n.MessageWriter.is(b.writer)}ae.is=y}(e.MessageTransports||(e.MessageTransports={}));class Oe{constructor(y,b,_){var O;this._traceFormat=n.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new s.Semaphore(1),this._id=y,this._name=b,_=_||{};const k={isTrusted:!1,supportHtml:!1};_.markdown!==void 0&&(k.isTrusted=_.markdown.isTrusted===!0,k.supportHtml=_.markdown.supportHtml===!0),this._clientOptions={documentSelector:_.documentSelector??[],synchronize:_.synchronize??{},diagnosticCollectionName:_.diagnosticCollectionName,outputChannelName:_.outputChannelName??this._name,revealOutputChannelOn:_.revealOutputChannelOn??ge.Error,stdioEncoding:_.stdioEncoding??"utf8",initializationOptions:_.initializationOptions,initializationFailedHandler:_.initializationFailedHandler,progressOnInitialization:!!_.progressOnInitialization,errorHandler:_.errorHandler??this.createDefaultErrorHandler((O=_.connectionOptions)==null?void 0:O.maxRestartCount),middleware:_.middleware??{},uriConverters:_.uriConverters,workspaceFolder:_.workspaceFolder,connectionOptions:_.connectionOptions,markdown:k,diagnosticPullOptions:_.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:_.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=M.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,_.outputChannel?(this._outputChannel=_.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=_.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new s.Semaphore(1),this._pendingChangeDelayer=new s.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new s.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new n.Emitter,this._stateChangeEmitter=new n.Emitter,this._trace=n.Trace.Off,this._tracer={log:(A,ve)=>{o.string(A)?this.logTrace(A,ve):this.logObjectTrace(A)}},this._c2p=r.createConverter(_.uriConverters?_.uriConverters.code2Protocol:void 0),this._p2c=i.createConverter(_.uriConverters?_.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=t.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(y){let b=this.getPublicState();this._state=y;let _=this.getPublicState();_!==b&&this._stateChangeEmitter.fire({oldState:b,newState:_})}getPublicState(){switch(this.$state){case M.Starting:return Ce.Starting;case M.Running:return Ce.Running;default:return Ce.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(y,...b){if(this.$state===M.StartFailed||this.$state===M.Stopping||this.$state===M.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));const _=await this.$start();return this._didChangeTextDocumentFeature.syncKind===n.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(_),_.sendRequest(y,...b)}onRequest(y,b){const _=typeof y=="string"?y:y.method;this._requestHandlers.set(_,b);const k=this.activeConnection();let O;return k!==void 0?(this._requestDisposables.set(_,k.onRequest(y,b)),O={dispose:()=>{const A=this._requestDisposables.get(_);A!==void 0&&(A.dispose(),this._requestDisposables.delete(_))}}):(this._pendingRequestHandlers.set(_,b),O={dispose:()=>{this._pendingRequestHandlers.delete(_);const A=this._requestDisposables.get(_);A!==void 0&&(A.dispose(),this._requestDisposables.delete(_))}}),{dispose:()=>{this._requestHandlers.delete(_),O.dispose()}}}async sendNotification(y,b){if(this.$state===M.StartFailed||this.$state===M.Stopping||this.$state===M.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));const _=this._didChangeTextDocumentFeature.syncKind===n.TextDocumentSyncKind.Full;let k;_&&typeof y!="string"&&y.method===n.DidOpenTextDocumentNotification.method&&(k=b==null?void 0:b.textDocument.uri,this._pendingOpenNotifications.add(k));const O=await this.$start();return _&&await this.sendPendingFullTextDocumentChanges(O),k!==void 0&&this._pendingOpenNotifications.delete(k),O.sendNotification(y,b)}onNotification(y,b){const _=typeof y=="string"?y:y.method;this._notificationHandlers.set(_,b);const k=this.activeConnection();let O;return k!==void 0?(this._notificationDisposables.set(_,k.onNotification(y,b)),O={dispose:()=>{const A=this._notificationDisposables.get(_);A!==void 0&&(A.dispose(),this._notificationDisposables.delete(_))}}):(this._pendingNotificationHandlers.set(_,b),O={dispose:()=>{this._pendingNotificationHandlers.delete(_);const A=this._notificationDisposables.get(_);A!==void 0&&(A.dispose(),this._notificationDisposables.delete(_))}}),{dispose:()=>{this._notificationHandlers.delete(_),O.dispose()}}}async sendProgress(y,b,_){if(this.$state===M.StartFailed||this.$state===M.Stopping||this.$state===M.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(y,b,_)}catch(k){throw this.error(`Sending progress for token ${b} failed.`,k),k}}onProgress(y,b,_){var de;this._progressHandlers.set(b,{type:y,handler:_});const k=this.activeConnection();let O;const A=(de=this._clientOptions.middleware)==null?void 0:de.handleWorkDoneProgress,ve=n.WorkDoneProgress.is(y)&&A!==void 0?ne=>{A(b,ne,()=>_(ne))}:_;return k!==void 0?(this._progressDisposables.set(b,k.onProgress(y,b,ve)),O={dispose:()=>{const ne=this._progressDisposables.get(b);ne!==void 0&&(ne.dispose(),this._progressDisposables.delete(b))}}):(this._pendingProgressHandlers.set(b,{type:y,handler:_}),O={dispose:()=>{this._pendingProgressHandlers.delete(b);const ne=this._progressDisposables.get(b);ne!==void 0&&(ne.dispose(),this._progressDisposables.delete(b))}}),{dispose:()=>{this._progressHandlers.delete(b),O.dispose()}}}createDefaultErrorHandler(y){if(y!==void 0&&y<0)throw new Error(`Invalid maxRestartCount: ${y}`);return new Re(this,y??4)}async setTrace(y){this._trace=y;const b=this.activeConnection();b!==void 0&&await b.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(y){if(y instanceof n.ResponseError){const b=y;return`  Message: ${b.message}
  Code: ${b.code} ${b.data?`
`+b.data.toString():""}`}return y instanceof Error?o.string(y.stack)?y.stack:y.message:o.string(y)?y:y.toString()}info(y,b,_=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${y}`),b!=null&&this.outputChannel.appendLine(this.data2String(b)),_&&this._clientOptions.revealOutputChannelOn<=ge.Info&&this.showNotificationMessage(n.MessageType.Info,y)}warn(y,b,_=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${y}`),b!=null&&this.outputChannel.appendLine(this.data2String(b)),_&&this._clientOptions.revealOutputChannelOn<=ge.Warn&&this.showNotificationMessage(n.MessageType.Warning,y)}error(y,b,_=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${y}`),b!=null&&this.outputChannel.appendLine(this.data2String(b)),(_==="force"||_&&this._clientOptions.revealOutputChannelOn<=ge.Error)&&this.showNotificationMessage(n.MessageType.Error,y)}showNotificationMessage(y,b){b=b??"A request has failed. See the output for more information.",(y===n.MessageType.Error?t.window.showErrorMessage:y===n.MessageType.Warning?t.window.showWarningMessage:t.window.showInformationMessage)(b,"Go to output").then(k=>{k!==void 0&&this.outputChannel.show(!0)})}logTrace(y,b){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${y}`),b&&this.traceOutputChannel.appendLine(this.data2String(b))}logObjectTrace(y){y.isLSPMessage&&y.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),y&&this.traceOutputChannel.appendLine(`${JSON.stringify(y)}`)}needsStart(){return this.$state===M.Initial||this.$state===M.Stopping||this.$state===M.Stopped}needsStop(){return this.$state===M.Starting||this.$state===M.Running}activeConnection(){return this.$state===M.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===M.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===M.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;const[y,b,_]=this.createOnStartPromise();this._onStart=y,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?t.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):t.languages.createDiagnosticCollection());for(const[k,O]of this._notificationHandlers)this._pendingNotificationHandlers.has(k)||this._pendingNotificationHandlers.set(k,O);for(const[k,O]of this._requestHandlers)this._pendingRequestHandlers.has(k)||this._pendingRequestHandlers.set(k,O);for(const[k,O]of this._progressHandlers)this._pendingProgressHandlers.has(k)||this._pendingProgressHandlers.set(k,O);this.$state=M.Starting;try{const k=await this.createConnection();k.onNotification(n.LogMessageNotification.type,O=>{switch(O.type){case n.MessageType.Error:this.error(O.message,void 0,!1);break;case n.MessageType.Warning:this.warn(O.message,void 0,!1);break;case n.MessageType.Info:this.info(O.message,void 0,!1);break;default:this.outputChannel.appendLine(O.message)}}),k.onNotification(n.ShowMessageNotification.type,O=>{switch(O.type){case n.MessageType.Error:t.window.showErrorMessage(O.message);break;case n.MessageType.Warning:t.window.showWarningMessage(O.message);break;case n.MessageType.Info:t.window.showInformationMessage(O.message);break;default:t.window.showInformationMessage(O.message)}}),k.onRequest(n.ShowMessageRequest.type,O=>{let A;switch(O.type){case n.MessageType.Error:A=t.window.showErrorMessage;break;case n.MessageType.Warning:A=t.window.showWarningMessage;break;case n.MessageType.Info:A=t.window.showInformationMessage;break;default:A=t.window.showInformationMessage}let ve=O.actions||[];return A(O.message,...ve)}),k.onNotification(n.TelemetryEventNotification.type,O=>{this._telemetryEmitter.fire(O)}),k.onRequest(n.ShowDocumentRequest.type,async O=>{var de;const A=async ne=>{const we=this.protocol2CodeConverter.asUri(ne.uri);try{if(ne.external===!0)return{success:await t.env.openExternal(we)};{const ce={};return ne.selection!==void 0&&(ce.selection=this.protocol2CodeConverter.asRange(ne.selection)),ne.takeFocus===void 0||ne.takeFocus===!1?ce.preserveFocus=!0:ne.takeFocus===!0&&(ce.preserveFocus=!1),await t.window.showTextDocument(we,ce),{success:!0}}}catch{return{success:!1}}},ve=(de=this._clientOptions.middleware.window)==null?void 0:de.showDocument;return ve!==void 0?ve(O,A):A(O)}),k.listen(),await this.initialize(k),b()}catch(k){this.$state=M.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,k,"force"),_(k)}return this._onStart}createOnStartPromise(){let y,b;return[new Promise((k,O)=>{y=k,b=O}),y,b]}async initialize(y){this.refreshTrace(y,!1);const b=this._clientOptions.initializationOptions,[_,k]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],O={processId:null,clientInfo:{name:t.env.appName,version:t.version},locale:this.getLocale(),rootPath:_||null,rootUri:_?this._c2p.asUri(t.Uri.file(_)):null,capabilities:this.computeClientCapabilities(),initializationOptions:o.func(b)?b():b,trace:n.Trace.toString(this._trace),workspaceFolders:k};if(this.fillInitializeParams(O),this._clientOptions.progressOnInitialization){const A=a.generateUuid(),ve=new u.ProgressPart(y,A);O.workDoneToken=A;try{const de=await this.doInitialize(y,O);return ve.done(),de}catch(de){throw ve.cancel(),de}}else return this.doInitialize(y,O)}async doInitialize(y,b){try{const _=await y.initialize(b);if(_.capabilities.positionEncoding!==void 0&&_.capabilities.positionEncoding!==n.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${_.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=_,this.$state=M.Running;let k;o.number(_.capabilities.textDocumentSync)?_.capabilities.textDocumentSync===n.TextDocumentSyncKind.None?k={openClose:!1,change:n.TextDocumentSyncKind.None,save:void 0}:k={openClose:!0,change:_.capabilities.textDocumentSync,save:{includeText:!1}}:_.capabilities.textDocumentSync!==void 0&&_.capabilities.textDocumentSync!==null&&(k=_.capabilities.textDocumentSync),this._capabilities=Object.assign({},_.capabilities,{resolvedTextDocumentSync:k}),y.onNotification(n.PublishDiagnosticsNotification.type,O=>this.handleDiagnostics(O)),y.onRequest(n.RegistrationRequest.type,O=>this.handleRegistrationRequest(O)),y.onRequest("client/registerFeature",O=>this.handleRegistrationRequest(O)),y.onRequest(n.UnregistrationRequest.type,O=>this.handleUnregistrationRequest(O)),y.onRequest("client/unregisterFeature",O=>this.handleUnregistrationRequest(O)),y.onRequest(n.ApplyWorkspaceEditRequest.type,O=>this.handleApplyWorkspaceEdit(O));for(const[O,A]of this._pendingNotificationHandlers)this._notificationDisposables.set(O,y.onNotification(O,A));this._pendingNotificationHandlers.clear();for(const[O,A]of this._pendingRequestHandlers)this._requestDisposables.set(O,y.onRequest(O,A));this._pendingRequestHandlers.clear();for(const[O,A]of this._pendingProgressHandlers)this._progressDisposables.set(O,y.onProgress(A.type,O,A.handler));return this._pendingProgressHandlers.clear(),await y.sendNotification(n.InitializedNotification.type,{}),this.hookFileEvents(y),this.hookConfigurationChanged(y),this.initializeFeatures(y),_}catch(_){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(_)?this.initialize(y):this.stop():_ instanceof n.ResponseError&&_.data&&_.data.retry?t.window.showErrorMessage(_.message,{title:"Retry",id:"retry"}).then(k=>{k&&k.id==="retry"?this.initialize(y):this.stop()}):(_&&_.message&&t.window.showErrorMessage(_.message),this.error("Server initialization failed.",_),this.stop()),_}}_clientGetRootPath(){let y=t.workspace.workspaceFolders;if(!y||y.length===0)return;let b=y[0];if(b.uri.scheme==="file")return b.uri.fsPath}stop(y=2e3){return this.shutdown("stop",y)}dispose(y=2e3){try{return this._disposed="disposing",this.stop(y)}finally{this._disposed="disposed"}}async shutdown(y,b){if(this.$state===M.Stopped||this.$state===M.Initial)return;if(this.$state===M.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const _=this.activeConnection();if(_===void 0||this.$state!==M.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=M.Stopping,this.cleanUp(y);const k=new Promise(A=>{(0,n.RAL)().timer.setTimeout(A,b)}),O=(async A=>(await A.shutdown(),await A.exit(),A))(_);return this._onStop=Promise.race([k,O]).then(A=>{if(A!==void 0)A.end(),A.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},A=>{throw this.error("Stopping server failed",A,!1),A}).finally(()=>{this.$state=M.Stopped,y==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(y){this._fileEvents=[],this._fileEventDelayer.cancel();const b=this._listeners.splice(0,this._listeners.length);for(const _ of b)_.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const _ of Array.from(this._features.entries()).map(k=>k[1]).reverse())_.dispose();y==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(y){var O;const b=this;async function _(A){return b._fileEvents.push(A),b._fileEventDelayer.trigger(async()=>{await b.sendNotification(n.DidChangeWatchedFilesNotification.type,{changes:b._fileEvents}),b._fileEvents=[]})}const k=(O=this.clientOptions.middleware)==null?void 0:O.workspace;(k!=null&&k.didChangeWatchedFile?k.didChangeWatchedFile(y,_):_(y)).catch(A=>{b.error("Notify file events failed.",A)})}async sendPendingFullTextDocumentChanges(y){return this._pendingChangeSemaphore.lock(async()=>{try{const b=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(b.length===0)return;for(const _ of b){const k=this.code2ProtocolConverter.asChangeTextDocumentParams(_);await y.sendNotification(n.DidChangeTextDocumentNotification.type,k),this._didChangeTextDocumentFeature.notificationSent(_,n.DidChangeTextDocumentNotification.type,k)}}catch(b){throw this.error("Sending pending changes failed",b,!1),b}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{const y=this.activeConnection();if(y===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(y)}).catch(y=>this.error("Delivering pending changes failed",y,!1))}handleDiagnostics(y){if(!this._diagnostics)return;const b=y.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===b&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(y.uri,y.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,n.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;const y=this._diagnosticQueue.entries().next();if(y.done===!0)return;const[b,_]=y.value;this._diagnosticQueue.delete(b);const k=new t.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:b,tokenSource:k},this._p2c.asDiagnostics(_,k.token).then(O=>{if(!k.token.isCancellationRequested){const A=this._p2c.asUri(b),ve=this.clientOptions.middleware;ve.handleDiagnostics?ve.handleDiagnostics(A,O,(de,ne)=>this.setDiagnostics(de,ne)):this.setDiagnostics(A,O)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(y,b){this._diagnostics&&this._diagnostics.set(y,b)}getLocale(){return t.env.language}async $start(){if(this.$state===M.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const y=this.activeConnection();if(y===void 0)throw new Error("Starting server failed");return y}async createConnection(){let y=(k,O,A)=>{this.handleConnectionError(k,O,A).catch(ve=>this.error("Handling connection error failed",ve))},b=()=>{this.handleConnectionClosed().catch(k=>this.error("Handling connection close failed",k))};const _=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=Ae(_.reader,_.writer,y,b,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===M.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let y={action:le.DoNotRestart};if(this.$state!==M.Stopping)try{y=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,y.action===le.DoNotRestart?(this.error(y.message??"Connection to server got closed. Server will not be restarted.",void 0,y.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===M.Starting?this.$state=M.StartFailed:this.$state=M.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):y.action===le.Restart&&(this.info(y.message??"Connection to server got closed. Server will restart.",!y.handled),this.cleanUp("restart"),this.$state=M.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(b=>this.error("Restarting server failed",b,"force")))}async handleConnectionError(y,b,_){const k=await this._clientOptions.errorHandler.error(y,b,_);k.action===Pe.Shutdown&&(this.error(k.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,k.handled===!0?!1:"force"),this.stop().catch(O=>{this.error("Stopping server failed",O,!1)}))}hookConfigurationChanged(y){this._listeners.push(t.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(y,!0)}))}refreshTrace(y,b=!1){const _=t.workspace.getConfiguration(this._id);let k=n.Trace.Off,O=n.TraceFormat.Text;if(_){const A=_.get("trace.server","off");typeof A=="string"?k=n.Trace.fromString(A):(k=n.Trace.fromString(_.get("trace.server.verbosity","off")),O=n.TraceFormat.fromString(_.get("trace.server.format","text")))}this._trace=k,this._traceFormat=O,y.trace(this._trace,this._tracer,{sendNotification:b,traceFormat:this._traceFormat}).catch(A=>{this.error("Updating trace failed with error",A,!1)})}hookFileEvents(y){let b=this._clientOptions.synchronize.fileEvents;if(!b)return;let _;o.array(b)?_=b:_=[b],_&&this._dynamicFeatures.get(n.DidChangeWatchedFilesNotification.type.method).registerRaw(a.generateUuid(),_)}registerFeatures(y){for(let b of y)this.registerFeature(b)}registerFeature(y){if(this._features.push(y),c.DynamicFeature.is(y)){const b=y.registrationType;this._dynamicFeatures.set(b.method,y)}}getFeature(y){return this._dynamicFeatures.get(y)}hasDedicatedTextSynchronizationFeature(y){const b=this.getFeature(n.NotebookDocumentSyncRegistrationType.method);return b===void 0||!(b instanceof g.NotebookDocumentSyncFeature)?!1:b.handles(y)}registerBuiltinFeatures(){const y=new Map;this.registerFeature(new d.ConfigurationFeature(this)),this.registerFeature(new h.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new h.DidChangeTextDocumentFeature(this,y),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new h.WillSaveFeature(this)),this.registerFeature(new h.WillSaveWaitUntilFeature(this)),this.registerFeature(new h.DidSaveTextDocumentFeature(this)),this.registerFeature(new h.DidCloseTextDocumentFeature(this,this._syncedDocuments,y)),this.registerFeature(new D.FileSystemWatcherFeature(this,b=>this.notifyFileEvent(b))),this.registerFeature(new m.CompletionItemFeature(this)),this.registerFeature(new S.HoverFeature(this)),this.registerFeature(new W.SignatureHelpFeature(this)),this.registerFeature(new I.DefinitionFeature(this)),this.registerFeature(new L.ReferencesFeature(this)),this.registerFeature(new z.DocumentHighlightFeature(this)),this.registerFeature(new F.DocumentSymbolFeature(this)),this.registerFeature(new P.WorkspaceSymbolFeature(this)),this.registerFeature(new G.CodeActionFeature(this)),this.registerFeature(new H.CodeLensFeature(this)),this.registerFeature(new Y.DocumentFormattingFeature(this)),this.registerFeature(new Y.DocumentRangeFormattingFeature(this)),this.registerFeature(new Y.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new Q.RenameFeature(this)),this.registerFeature(new ye.DocumentLinkFeature(this)),this.registerFeature(new E.ExecuteCommandFeature(this)),this.registerFeature(new d.SyncConfigurationFeature(this)),this.registerFeature(new X.TypeDefinitionFeature(this)),this.registerFeature(new B.ImplementationFeature(this)),this.registerFeature(new R.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new he.WorkspaceFoldersFeature(this)),this.registerFeature(new te.FoldingRangeFeature(this)),this.registerFeature(new me.DeclarationFeature(this)),this.registerFeature(new ke.SelectionRangeFeature(this)),this.registerFeature(new nt.ProgressFeature(this)),this.registerFeature(new Ct.CallHierarchyFeature(this)),this.registerFeature(new x.SemanticTokensFeature(this)),this.registerFeature(new be.LinkedEditingFeature(this)),this.registerFeature(new De.DidCreateFilesFeature(this)),this.registerFeature(new De.DidRenameFilesFeature(this)),this.registerFeature(new De.DidDeleteFilesFeature(this)),this.registerFeature(new De.WillCreateFilesFeature(this)),this.registerFeature(new De.WillRenameFilesFeature(this)),this.registerFeature(new De.WillDeleteFilesFeature(this)),this.registerFeature(new Se.TypeHierarchyFeature(this)),this.registerFeature(new Fe.InlineValueFeature(this)),this.registerFeature(new Ne.InlayHintsFeature(this)),this.registerFeature(new f.DiagnosticFeature(this)),this.registerFeature(new g.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Ge.createAll(this))}fillInitializeParams(y){for(let b of this._features)o.func(b.fillInitializeParams)&&b.fillInitializeParams(y)}computeClientCapabilities(){const y={};(0,c.ensure)(y,"workspace").applyEdit=!0;const b=(0,c.ensure)((0,c.ensure)(y,"workspace"),"workspaceEdit");b.documentChanges=!0,b.resourceOperations=[n.ResourceOperationKind.Create,n.ResourceOperationKind.Rename,n.ResourceOperationKind.Delete],b.failureHandling=n.FailureHandlingKind.TextOnlyTransactional,b.normalizesLineEndings=!0,b.changeAnnotationSupport={groupsOnLabel:!0};const _=(0,c.ensure)((0,c.ensure)(y,"textDocument"),"publishDiagnostics");_.relatedInformation=!0,_.versionSupport=!1,_.tagSupport={valueSet:[n.DiagnosticTag.Unnecessary,n.DiagnosticTag.Deprecated]},_.codeDescriptionSupport=!0,_.dataSupport=!0;const k=(0,c.ensure)(y,"window"),O=(0,c.ensure)(k,"showMessage");O.messageActionItem={additionalPropertiesSupport:!0};const A=(0,c.ensure)(k,"showDocument");A.support=!0;const ve=(0,c.ensure)(y,"general");ve.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Oe.RequestsToCancelOnContentModified)},ve.regularExpressions={engine:"ECMAScript",version:"ES2020"},ve.markdown={parser:"marked",version:"1.1.0"},ve.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(ve.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let de of this._features)de.fillClientCapabilities(y);return y}initializeFeatures(y){const b=this._clientOptions.documentSelector;for(const _ of this._features)o.func(_.preInitialize)&&_.preInitialize(this._capabilities,b);for(const _ of this._features)_.initialize(this._capabilities,b)}async handleRegistrationRequest(y){if(!this.isRunning()){for(const b of y.registrations)this._ignoredRegistrations.add(b.id);return}for(const b of y.registrations){const _=this._dynamicFeatures.get(b.method);if(_===void 0)return Promise.reject(new Error(`No feature implementation for ${b.method} found. Registration failed.`));const k=b.registerOptions??{};k.documentSelector=k.documentSelector??this._clientOptions.documentSelector;const O={id:b.id,registerOptions:k};try{_.register(O)}catch(A){return Promise.reject(A)}}}async handleUnregistrationRequest(y){for(let b of y.unregisterations){if(this._ignoredRegistrations.has(b.id))continue;const _=this._dynamicFeatures.get(b.method);if(!_)return Promise.reject(new Error(`No feature implementation for ${b.method} found. Unregistration failed.`));_.unregister(b.id)}}async handleApplyWorkspaceEdit(y){const b=y.edit,_=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(b)),k=new Map;t.workspace.textDocuments.forEach(A=>k.set(A.uri.toString(),A));let O=!1;if(b.documentChanges){for(const A of b.documentChanges)if(n.TextDocumentEdit.is(A)&&A.textDocument.version&&A.textDocument.version>=0){const ve=this._p2c.asUri(A.textDocument.uri).toString(),de=k.get(ve);if(de&&de.version!==A.textDocument.version){O=!0;break}}}return O?Promise.resolve({applied:!1}):o.asPromise(t.workspace.applyEdit(_).then(A=>({applied:A})))}handleFailedRequest(y,b,_,k,O=!0){if(_ instanceof n.ResponseError){if(_.code===n.ErrorCodes.PendingResponseRejected||_.code===n.ErrorCodes.ConnectionInactive)return k;if(_.code===n.LSPErrorCodes.RequestCancelled||_.code===n.LSPErrorCodes.ServerCancelled){if(b!==void 0&&b.isCancellationRequested)return k;throw _.data!==void 0?new c.LSPCancellationError(_.data):new t.CancellationError}else if(_.code===n.LSPErrorCodes.ContentModified){if(Oe.RequestsToCancelOnContentModified.has(y.method)||Oe.CancellableResolveCalls.has(y.method))throw new t.CancellationError;return k}}throw this.error(`Request ${y.method} failed.`,_,O),_}}e.BaseLanguageClient=Oe,Oe.RequestsToCancelOnContentModified=new Set([n.SemanticTokensRequest.method,n.SemanticTokensRangeRequest.method,n.SemanticTokensDeltaRequest.method]),Oe.CancellableResolveCalls=new Set([n.CompletionResolveRequest.method,n.CodeLensResolveRequest.method,n.CodeActionResolveRequest.method,n.InlayHintResolveRequest.method,n.DocumentLinkResolveRequest.method,n.WorkspaceSymbolResolveRequest.method]);class Ue{error(y){(0,n.RAL)().console.error(y)}warn(y){(0,n.RAL)().console.warn(y)}info(y){(0,n.RAL)().console.info(y)}log(y){(0,n.RAL)().console.log(y)}}function Ae(ae,y,b,_,k){const O=new Ue,A=(0,n.createProtocolConnection)(ae,y,O,k);return A.onError(de=>{b(de[0],de[1],de[2])}),A.onClose(_),{listen:()=>A.listen(),sendRequest:A.sendRequest,onRequest:A.onRequest,hasPendingResponse:A.hasPendingResponse,sendNotification:A.sendNotification,onNotification:A.onNotification,onProgress:A.onProgress,sendProgress:A.sendProgress,trace:(de,ne,we)=>{const ce={sendNotification:!1,traceFormat:n.TraceFormat.Text};return we===void 0?A.trace(de,ne,ce):(o.boolean(we),A.trace(de,ne,we))},initialize:de=>A.sendRequest(n.InitializeRequest.type,de),shutdown:()=>A.sendRequest(n.ShutdownRequest.type,void 0),exit:()=>A.sendNotification(n.ExitNotification.type),end:()=>A.end(),dispose:()=>A.dispose()}}var Ge;(function(ae){function y(b){return[]}ae.createAll=y})(Ge=e.ProposedFeatures||(e.ProposedFeatures={}))})(ua);const Um=xe(ua),zm=U({__proto__:null,default:Um},[ua]),Vm=K(zm);(function(e){var t=dt&&dt.__createBinding||(Object.create?function(i,o,s,a){a===void 0&&(a=s);var u=Object.getOwnPropertyDescriptor(o,s);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,a,u)}:function(i,o,s,a){a===void 0&&(a=s),i[a]=o[s]}),n=dt&&dt.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticPullMode=e.vsdiag=void 0,n(Ee,e),n(We,e);var r=Tc;Object.defineProperty(e,"vsdiag",{enumerable:!0,get:function(){return r.vsdiag}}),Object.defineProperty(e,"DiagnosticPullMode",{enumerable:!0,get:function(){return r.DiagnosticPullMode}}),n(Vm,e)})(Rs);const Gm=xe(Rs),Jm=U({__proto__:null,default:Gm},[Rs]),Cu=K(Jm);var hi={},Qm={get exports(){return hi},set exports(e){hi=e}};(function(e){e.exports=Ee})(Qm);const Xm=xe(hi),Ym=U({__proto__:null,default:Xm},[hi]),vu=K(Ym);(function(e){var t=dt&&dt.__createBinding||(Object.create?function(s,a,u,c){c===void 0&&(c=u);var f=Object.getOwnPropertyDescriptor(a,u);(!f||("get"in f?!a.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return a[u]}}),Object.defineProperty(s,c,f)}:function(s,a,u,c){c===void 0&&(c=u),s[c]=a[u]}),n=dt&&dt.__exportStar||function(s,a){for(var u in s)u!=="default"&&!Object.prototype.hasOwnProperty.call(a,u)&&t(a,s,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageClient=void 0;const r=Cu,i=vu;n(vu,e),n(Cu,e);class o extends r.BaseLanguageClient{constructor(a,u,c,f){super(a,u,c),this.worker=f}createMessageTransports(a){const u=new i.BrowserMessageReader(this.worker),c=new i.BrowserMessageWriter(this.worker);return Promise.resolve({reader:u,writer:c})}}e.LanguageClient=o})(Ss);const Zm=xe(Ss),ey=U({__proto__:null,default:Zm},[Ss]),ty=K(ey);(function(e){e.exports=ty})(id);var Di={},ny={get exports(){return Di},set exports(e){Di=e}},ho,_u;function ry(){return _u||(_u=1,ho={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),ho}var Do,bu;function Kl(){if(bu)return Do;bu=1;const e=ry(),t={};for(const i of Object.keys(e))t[e[i]]=i;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Do=n;for(const i of Object.keys(n)){if(!("channels"in n[i]))throw new Error("missing channels property: "+i);if(!("labels"in n[i]))throw new Error("missing channel labels property: "+i);if(n[i].labels.length!==n[i].channels)throw new Error("channel and label counts mismatch: "+i);const{channels:o,labels:s}=n[i];delete n[i].channels,delete n[i].labels,Object.defineProperty(n[i],"channels",{value:o}),Object.defineProperty(n[i],"labels",{value:s})}n.rgb.hsl=function(i){const o=i[0]/255,s=i[1]/255,a=i[2]/255,u=Math.min(o,s,a),c=Math.max(o,s,a),f=c-u;let g,d;c===u?g=0:o===c?g=(s-a)/f:s===c?g=2+(a-o)/f:a===c&&(g=4+(o-s)/f),g=Math.min(g*60,360),g<0&&(g+=360);const h=(u+c)/2;return c===u?d=0:h<=.5?d=f/(c+u):d=f/(2-c-u),[g,d*100,h*100]},n.rgb.hsv=function(i){let o,s,a,u,c;const f=i[0]/255,g=i[1]/255,d=i[2]/255,h=Math.max(f,g,d),m=h-Math.min(f,g,d),S=function(I){return(h-I)/6/m+1/2};return m===0?(u=0,c=0):(c=m/h,o=S(f),s=S(g),a=S(d),f===h?u=a-s:g===h?u=1/3+o-a:d===h&&(u=2/3+s-o),u<0?u+=1:u>1&&(u-=1)),[u*360,c*100,h*100]},n.rgb.hwb=function(i){const o=i[0],s=i[1];let a=i[2];const u=n.rgb.hsl(i)[0],c=1/255*Math.min(o,Math.min(s,a));return a=1-1/255*Math.max(o,Math.max(s,a)),[u,c*100,a*100]},n.rgb.cmyk=function(i){const o=i[0]/255,s=i[1]/255,a=i[2]/255,u=Math.min(1-o,1-s,1-a),c=(1-o-u)/(1-u)||0,f=(1-s-u)/(1-u)||0,g=(1-a-u)/(1-u)||0;return[c*100,f*100,g*100,u*100]};function r(i,o){return(i[0]-o[0])**2+(i[1]-o[1])**2+(i[2]-o[2])**2}return n.rgb.keyword=function(i){const o=t[i];if(o)return o;let s=1/0,a;for(const u of Object.keys(e)){const c=e[u],f=r(i,c);f<s&&(s=f,a=u)}return a},n.keyword.rgb=function(i){return e[i]},n.rgb.xyz=function(i){let o=i[0]/255,s=i[1]/255,a=i[2]/255;o=o>.04045?((o+.055)/1.055)**2.4:o/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,a=a>.04045?((a+.055)/1.055)**2.4:a/12.92;const u=o*.4124+s*.3576+a*.1805,c=o*.2126+s*.7152+a*.0722,f=o*.0193+s*.1192+a*.9505;return[u*100,c*100,f*100]},n.rgb.lab=function(i){const o=n.rgb.xyz(i);let s=o[0],a=o[1],u=o[2];s/=95.047,a/=100,u/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116,u=u>.008856?u**(1/3):7.787*u+16/116;const c=116*a-16,f=500*(s-a),g=200*(a-u);return[c,f,g]},n.hsl.rgb=function(i){const o=i[0]/360,s=i[1]/100,a=i[2]/100;let u,c,f;if(s===0)return f=a*255,[f,f,f];a<.5?u=a*(1+s):u=a+s-a*s;const g=2*a-u,d=[0,0,0];for(let h=0;h<3;h++)c=o+1/3*-(h-1),c<0&&c++,c>1&&c--,6*c<1?f=g+(u-g)*6*c:2*c<1?f=u:3*c<2?f=g+(u-g)*(2/3-c)*6:f=g,d[h]=f*255;return d},n.hsl.hsv=function(i){const o=i[0];let s=i[1]/100,a=i[2]/100,u=s;const c=Math.max(a,.01);a*=2,s*=a<=1?a:2-a,u*=c<=1?c:2-c;const f=(a+s)/2,g=a===0?2*u/(c+u):2*s/(a+s);return[o,g*100,f*100]},n.hsv.rgb=function(i){const o=i[0]/60,s=i[1]/100;let a=i[2]/100;const u=Math.floor(o)%6,c=o-Math.floor(o),f=255*a*(1-s),g=255*a*(1-s*c),d=255*a*(1-s*(1-c));switch(a*=255,u){case 0:return[a,d,f];case 1:return[g,a,f];case 2:return[f,a,d];case 3:return[f,g,a];case 4:return[d,f,a];case 5:return[a,f,g]}},n.hsv.hsl=function(i){const o=i[0],s=i[1]/100,a=i[2]/100,u=Math.max(a,.01);let c,f;f=(2-s)*a;const g=(2-s)*u;return c=s*u,c/=g<=1?g:2-g,c=c||0,f/=2,[o,c*100,f*100]},n.hwb.rgb=function(i){const o=i[0]/360;let s=i[1]/100,a=i[2]/100;const u=s+a;let c;u>1&&(s/=u,a/=u);const f=Math.floor(6*o),g=1-a;c=6*o-f,f&1&&(c=1-c);const d=s+c*(g-s);let h,m,S;switch(f){default:case 6:case 0:h=g,m=d,S=s;break;case 1:h=d,m=g,S=s;break;case 2:h=s,m=g,S=d;break;case 3:h=s,m=d,S=g;break;case 4:h=d,m=s,S=g;break;case 5:h=g,m=s,S=d;break}return[h*255,m*255,S*255]},n.cmyk.rgb=function(i){const o=i[0]/100,s=i[1]/100,a=i[2]/100,u=i[3]/100,c=1-Math.min(1,o*(1-u)+u),f=1-Math.min(1,s*(1-u)+u),g=1-Math.min(1,a*(1-u)+u);return[c*255,f*255,g*255]},n.xyz.rgb=function(i){const o=i[0]/100,s=i[1]/100,a=i[2]/100;let u,c,f;return u=o*3.2406+s*-1.5372+a*-.4986,c=o*-.9689+s*1.8758+a*.0415,f=o*.0557+s*-.204+a*1.057,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,c=c>.0031308?1.055*c**(1/2.4)-.055:c*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,u=Math.min(Math.max(0,u),1),c=Math.min(Math.max(0,c),1),f=Math.min(Math.max(0,f),1),[u*255,c*255,f*255]},n.xyz.lab=function(i){let o=i[0],s=i[1],a=i[2];o/=95.047,s/=100,a/=108.883,o=o>.008856?o**(1/3):7.787*o+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,a=a>.008856?a**(1/3):7.787*a+16/116;const u=116*s-16,c=500*(o-s),f=200*(s-a);return[u,c,f]},n.lab.xyz=function(i){const o=i[0],s=i[1],a=i[2];let u,c,f;c=(o+16)/116,u=s/500+c,f=c-a/200;const g=c**3,d=u**3,h=f**3;return c=g>.008856?g:(c-16/116)/7.787,u=d>.008856?d:(u-16/116)/7.787,f=h>.008856?h:(f-16/116)/7.787,u*=95.047,c*=100,f*=108.883,[u,c,f]},n.lab.lch=function(i){const o=i[0],s=i[1],a=i[2];let u;u=Math.atan2(a,s)*360/2/Math.PI,u<0&&(u+=360);const f=Math.sqrt(s*s+a*a);return[o,f,u]},n.lch.lab=function(i){const o=i[0],s=i[1],u=i[2]/360*2*Math.PI,c=s*Math.cos(u),f=s*Math.sin(u);return[o,c,f]},n.rgb.ansi16=function(i,o=null){const[s,a,u]=i;let c=o===null?n.rgb.hsv(i)[2]:o;if(c=Math.round(c/50),c===0)return 30;let f=30+(Math.round(u/255)<<2|Math.round(a/255)<<1|Math.round(s/255));return c===2&&(f+=60),f},n.hsv.ansi16=function(i){return n.rgb.ansi16(n.hsv.rgb(i),i[2])},n.rgb.ansi256=function(i){const o=i[0],s=i[1],a=i[2];return o===s&&s===a?o<8?16:o>248?231:Math.round((o-8)/247*24)+232:16+36*Math.round(o/255*5)+6*Math.round(s/255*5)+Math.round(a/255*5)},n.ansi16.rgb=function(i){let o=i%10;if(o===0||o===7)return i>50&&(o+=3.5),o=o/10.5*255,[o,o,o];const s=(~~(i>50)+1)*.5,a=(o&1)*s*255,u=(o>>1&1)*s*255,c=(o>>2&1)*s*255;return[a,u,c]},n.ansi256.rgb=function(i){if(i>=232){const c=(i-232)*10+8;return[c,c,c]}i-=16;let o;const s=Math.floor(i/36)/5*255,a=Math.floor((o=i%36)/6)/5*255,u=o%6/5*255;return[s,a,u]},n.rgb.hex=function(i){const s=(((Math.round(i[0])&255)<<16)+((Math.round(i[1])&255)<<8)+(Math.round(i[2])&255)).toString(16).toUpperCase();return"000000".substring(s.length)+s},n.hex.rgb=function(i){const o=i.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!o)return[0,0,0];let s=o[0];o[0].length===3&&(s=s.split("").map(g=>g+g).join(""));const a=parseInt(s,16),u=a>>16&255,c=a>>8&255,f=a&255;return[u,c,f]},n.rgb.hcg=function(i){const o=i[0]/255,s=i[1]/255,a=i[2]/255,u=Math.max(Math.max(o,s),a),c=Math.min(Math.min(o,s),a),f=u-c;let g,d;return f<1?g=c/(1-f):g=0,f<=0?d=0:u===o?d=(s-a)/f%6:u===s?d=2+(a-o)/f:d=4+(o-s)/f,d/=6,d%=1,[d*360,f*100,g*100]},n.hsl.hcg=function(i){const o=i[1]/100,s=i[2]/100,a=s<.5?2*o*s:2*o*(1-s);let u=0;return a<1&&(u=(s-.5*a)/(1-a)),[i[0],a*100,u*100]},n.hsv.hcg=function(i){const o=i[1]/100,s=i[2]/100,a=o*s;let u=0;return a<1&&(u=(s-a)/(1-a)),[i[0],a*100,u*100]},n.hcg.rgb=function(i){const o=i[0]/360,s=i[1]/100,a=i[2]/100;if(s===0)return[a*255,a*255,a*255];const u=[0,0,0],c=o%1*6,f=c%1,g=1-f;let d=0;switch(Math.floor(c)){case 0:u[0]=1,u[1]=f,u[2]=0;break;case 1:u[0]=g,u[1]=1,u[2]=0;break;case 2:u[0]=0,u[1]=1,u[2]=f;break;case 3:u[0]=0,u[1]=g,u[2]=1;break;case 4:u[0]=f,u[1]=0,u[2]=1;break;default:u[0]=1,u[1]=0,u[2]=g}return d=(1-s)*a,[(s*u[0]+d)*255,(s*u[1]+d)*255,(s*u[2]+d)*255]},n.hcg.hsv=function(i){const o=i[1]/100,s=i[2]/100,a=o+s*(1-o);let u=0;return a>0&&(u=o/a),[i[0],u*100,a*100]},n.hcg.hsl=function(i){const o=i[1]/100,a=i[2]/100*(1-o)+.5*o;let u=0;return a>0&&a<.5?u=o/(2*a):a>=.5&&a<1&&(u=o/(2*(1-a))),[i[0],u*100,a*100]},n.hcg.hwb=function(i){const o=i[1]/100,s=i[2]/100,a=o+s*(1-o);return[i[0],(a-o)*100,(1-a)*100]},n.hwb.hcg=function(i){const o=i[1]/100,a=1-i[2]/100,u=a-o;let c=0;return u<1&&(c=(a-u)/(1-u)),[i[0],u*100,c*100]},n.apple.rgb=function(i){return[i[0]/65535*255,i[1]/65535*255,i[2]/65535*255]},n.rgb.apple=function(i){return[i[0]/255*65535,i[1]/255*65535,i[2]/255*65535]},n.gray.rgb=function(i){return[i[0]/100*255,i[0]/100*255,i[0]/100*255]},n.gray.hsl=function(i){return[0,0,i[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(i){return[0,100,i[0]]},n.gray.cmyk=function(i){return[0,0,0,i[0]]},n.gray.lab=function(i){return[i[0],0,0]},n.gray.hex=function(i){const o=Math.round(i[0]/100*255)&255,a=((o<<16)+(o<<8)+o).toString(16).toUpperCase();return"000000".substring(a.length)+a},n.rgb.gray=function(i){return[(i[0]+i[1]+i[2])/3/255*100]},Do}var po,Fu;function iy(){if(Fu)return po;Fu=1;const e=Kl();function t(){const o={},s=Object.keys(e);for(let a=s.length,u=0;u<a;u++)o[s[u]]={distance:-1,parent:null};return o}function n(o){const s=t(),a=[o];for(s[o].distance=0;a.length;){const u=a.pop(),c=Object.keys(e[u]);for(let f=c.length,g=0;g<f;g++){const d=c[g],h=s[d];h.distance===-1&&(h.distance=s[u].distance+1,h.parent=u,a.unshift(d))}}return s}function r(o,s){return function(a){return s(o(a))}}function i(o,s){const a=[s[o].parent,o];let u=e[s[o].parent][o],c=s[o].parent;for(;s[c].parent;)a.unshift(s[c].parent),u=r(e[s[c].parent][c],u),c=s[c].parent;return u.conversion=a,u}return po=function(o){const s=n(o),a={},u=Object.keys(s);for(let c=u.length,f=0;f<c;f++){const g=u[f];s[g].parent!==null&&(a[g]=i(g,s))}return a},po}var mo,wu;function oy(){if(wu)return mo;wu=1;const e=Kl(),t=iy(),n={},r=Object.keys(e);function i(s){const a=function(...u){const c=u[0];return c==null?c:(c.length>1&&(u=c),s(u))};return"conversion"in s&&(a.conversion=s.conversion),a}function o(s){const a=function(...u){const c=u[0];if(c==null)return c;c.length>1&&(u=c);const f=s(u);if(typeof f=="object")for(let g=f.length,d=0;d<g;d++)f[d]=Math.round(f[d]);return f};return"conversion"in s&&(a.conversion=s.conversion),a}return r.forEach(s=>{n[s]={},Object.defineProperty(n[s],"channels",{value:e[s].channels}),Object.defineProperty(n[s],"labels",{value:e[s].labels});const a=t(s);Object.keys(a).forEach(c=>{const f=a[c];n[s][c]=o(f),n[s][c].raw=i(f)})}),mo=n,mo}(function(e){const t=(f,g)=>(...d)=>`\x1B[${f(...d)+g}m`,n=(f,g)=>(...d)=>{const h=f(...d);return`\x1B[${38+g};5;${h}m`},r=(f,g)=>(...d)=>{const h=f(...d);return`\x1B[${38+g};2;${h[0]};${h[1]};${h[2]}m`},i=f=>f,o=(f,g,d)=>[f,g,d],s=(f,g,d)=>{Object.defineProperty(f,g,{get:()=>{const h=d();return Object.defineProperty(f,g,{value:h,enumerable:!0,configurable:!0}),h},enumerable:!0,configurable:!0})};let a;const u=(f,g,d,h)=>{a===void 0&&(a=oy());const m=h?10:0,S={};for(const[I,W]of Object.entries(a)){const z=I==="ansi16"?"ansi":I;I===g?S[z]=f(d,m):typeof W=="object"&&(S[z]=f(W[g],m))}return S};function c(){const f=new Map,g={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};g.color.gray=g.color.blackBright,g.bgColor.bgGray=g.bgColor.bgBlackBright,g.color.grey=g.color.blackBright,g.bgColor.bgGrey=g.bgColor.bgBlackBright;for(const[d,h]of Object.entries(g)){for(const[m,S]of Object.entries(h))g[m]={open:`\x1B[${S[0]}m`,close:`\x1B[${S[1]}m`},h[m]=g[m],f.set(S[0],S[1]);Object.defineProperty(g,d,{value:h,enumerable:!1})}return Object.defineProperty(g,"codes",{value:f,enumerable:!1}),g.color.close="\x1B[39m",g.bgColor.close="\x1B[49m",s(g.color,"ansi",()=>u(t,"ansi16",i,!1)),s(g.color,"ansi256",()=>u(n,"ansi256",i,!1)),s(g.color,"ansi16m",()=>u(r,"rgb",o,!1)),s(g.bgColor,"ansi",()=>u(t,"ansi16",i,!0)),s(g.bgColor,"ansi256",()=>u(n,"ansi256",i,!0)),s(g.bgColor,"ansi16m",()=>u(r,"rgb",o,!0)),g}Object.defineProperty(e,"exports",{enumerable:!0,get:c})})(ny);const sy=Di,ay=U({__proto__:null,default:sy},[Di]),uy=K(ay);var Su={stdout:!1,stderr:!1};const cy=U({__proto__:null,default:Su},[Su]),ly=K(cy),dy=(e,t,n)=>{let r=e.indexOf(t);if(r===-1)return e;const i=t.length;let o=0,s="";do s+=e.substr(o,r-o)+t+n,o=r+i,r=e.indexOf(t,o);while(r!==-1);return s+=e.substr(o),s},fy=(e,t,n,r)=>{let i=0,o="";do{const s=e[r-1]==="\r";o+=e.substr(i,(s?r-1:r)-i)+t+(s?`\r
`:`
`)+n,i=r+1,r=e.indexOf(`
`,i)}while(r!==-1);return o+=e.substr(i),o};var Ru={stringReplaceAll:dy,stringEncaseCRLFWithFirstIndex:fy};const gy=U({__proto__:null,default:Ru},[Ru]),hy=K(gy);var yo,Tu;function Dy(){if(Tu)return yo;Tu=1;const e=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,t=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,n=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,r=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,i=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function o(c){const f=c[0]==="u",g=c[1]==="{";return f&&!g&&c.length===5||c[0]==="x"&&c.length===3?String.fromCharCode(parseInt(c.slice(1),16)):f&&g?String.fromCodePoint(parseInt(c.slice(2,-1),16)):i.get(c)||c}function s(c,f){const g=[],d=f.trim().split(/\s*,\s*/g);let h;for(const m of d){const S=Number(m);if(!Number.isNaN(S))g.push(S);else if(h=m.match(n))g.push(h[2].replace(r,(I,W,z)=>W?o(W):z));else throw new Error(`Invalid Chalk template style argument: ${m} (in style '${c}')`)}return g}function a(c){t.lastIndex=0;const f=[];let g;for(;(g=t.exec(c))!==null;){const d=g[1];if(g[2]){const h=s(d,g[2]);f.push([d].concat(h))}else f.push([d])}return f}function u(c,f){const g={};for(const h of f)for(const m of h.styles)g[m[0]]=h.inverse?null:m.slice(1);let d=c;for(const[h,m]of Object.entries(g))if(Array.isArray(m)){if(!(h in d))throw new Error(`Unknown Chalk style: ${h}`);d=m.length>0?d[h](...m):d[h]}return d}return yo=(c,f)=>{const g=[],d=[];let h=[];if(f.replace(e,(m,S,I,W,z,F)=>{if(S)h.push(o(S));else if(W){const P=h.join("");h=[],d.push(g.length===0?P:u(c,g)(P)),g.push({inverse:I,styles:a(W)})}else if(z){if(g.length===0)throw new Error("Found extraneous } in Chalk template literal");d.push(u(c,g)(h.join(""))),h=[],g.pop()}else h.push(F)}),d.push(h.join("")),g.length>0){const m=`Chalk template literal is missing ${g.length} closing bracket${g.length===1?"":"s"} (\`}\`)`;throw new Error(m)}return d.join("")},yo}const Hr=uy,{stdout:Fs,stderr:ws}=ly,{stringReplaceAll:py,stringEncaseCRLFWithFirstIndex:my}=hy,{isArray:pi}=Array,Ul=["ansi","ansi","ansi256","ansi16m"],$n=Object.create(null),yy=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=Fs?Fs.level:0;e.level=t.level===void 0?n:t.level};class Cy{constructor(t){return zl(t)}}const zl=e=>{const t={};return yy(t,e),t.template=(...n)=>Gl(t.template,...n),Object.setPrototypeOf(t,bi.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=Cy,t.template};function bi(e){return zl(e)}for(const[e,t]of Object.entries(Hr))$n[e]={get(){const n=Fi(this,wa(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};$n.visible={get(){const e=Fi(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const Vl=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of Vl)$n[e]={get(){const{level:t}=this;return function(...n){const r=wa(Hr.color[Ul[t]][e](...n),Hr.color.close,this._styler);return Fi(this,r,this._isEmpty)}}};for(const e of Vl){const t="bg"+e[0].toUpperCase()+e.slice(1);$n[t]={get(){const{level:n}=this;return function(...r){const i=wa(Hr.bgColor[Ul[n]][e](...r),Hr.bgColor.close,this._styler);return Fi(this,i,this._isEmpty)}}}}const vy=Object.defineProperties(()=>{},{...$n,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),wa=(e,t,n)=>{let r,i;return n===void 0?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},Fi=(e,t,n)=>{const r=(...i)=>pi(i[0])&&pi(i[0].raw)?Eu(r,Gl(r,...i)):Eu(r,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(r,vy),r._generator=e,r._styler=t,r._isEmpty=n,r},Eu=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(n===void 0)return t;const{openAll:r,closeAll:i}=n;if(t.indexOf("\x1B")!==-1)for(;n!==void 0;)t=py(t,n.close,n.open),n=n.parent;const o=t.indexOf(`
`);return o!==-1&&(t=my(t,i,r,o)),r+t+i};let Co;const Gl=(e,...t)=>{const[n]=t;if(!pi(n)||!pi(n.raw))return t.join(" ");const r=t.slice(1),i=[n.raw[0]];for(let o=1;o<n.length;o++)i.push(String(r[o-1]).replace(/[{}\\]/g,"\\$&"),String(n.raw[o]));return Co===void 0&&(Co=Dy()),Co(e,i.join(""))};Object.defineProperties(bi.prototype,$n);const wi=bi();wi.supportsColor=Fs;wi.stderr=bi({level:ws?ws.level:0});wi.stderr.supportsColor=ws;var St=wi,_y=Object.defineProperty,by=(e,t,n)=>t in e?_y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ku=(e,t,n)=>(by(e,typeof t!="symbol"?t+"":t,n),n),ft={},Fy={get exports(){return ft},set exports(e){ft=e}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Object.getOwnPropertyNames,r=(o,s)=>function(){return s||(0,o[n(o)[0]])((s={exports:{}}).exports,s),s.exports},i=r({"dist/_doc.js.umd.js"(o,s){var a=Object.create,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,g=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,h=(x,De)=>function(){return x&&(De=(0,x[f(x)[0]])(x=0)),De},m=(x,De)=>function(){return De||(0,x[f(x)[0]])((De={exports:{}}).exports,De),De.exports},S=(x,De)=>{for(var be in De)u(x,be,{get:De[be],enumerable:!0})},I=(x,De,be,Se)=>{if(De&&typeof De=="object"||typeof De=="function")for(let Fe of f(De))!d.call(x,Fe)&&Fe!==be&&u(x,Fe,{get:()=>De[Fe],enumerable:!(Se=c(De,Fe))||Se.enumerable});return x},W=(x,De,be)=>(be=x!=null?a(g(x)):{},I(De||!x||!x.__esModule?u(be,"default",{value:x,enumerable:!0}):be,x)),z=x=>I(u({},"__esModule",{value:!0}),x),F=h({"<define:process>"(){}}),P=m({"src/document/doc-builders.js"(x,De){F();function be(ce){return{type:"concat",parts:ce}}function Se(ce){return{type:"indent",contents:ce}}function Fe(ce,T){return{type:"align",contents:T,n:ce}}function Ne(ce){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:T.id,contents:ce,break:Boolean(T.shouldBreak),expandedStates:T.expandedStates}}function ge(ce){return Fe(Number.NEGATIVE_INFINITY,ce)}function Pe(ce){return Fe({type:"root"},ce)}function le(ce){return Fe(-1,ce)}function Ce(ce,T){return Ne(ce[0],Object.assign(Object.assign({},T),{},{expandedStates:ce}))}function Re(ce){return{type:"fill",parts:ce}}function M(ce,T){let j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:ce,flatContents:T,groupId:j.groupId}}function Oe(ce,T){return{type:"indent-if-break",contents:ce,groupId:T.groupId,negate:T.negate}}function Ue(ce){return{type:"line-suffix",contents:ce}}var Ae={type:"line-suffix-boundary"},Ge={type:"break-parent"},ae={type:"trim"},y={type:"line",hard:!0},b={type:"line",hard:!0,literal:!0},_={type:"line"},k={type:"line",soft:!0},O=be([y,Ge]),A=be([b,Ge]),ve={type:"cursor",placeholder:Symbol("cursor")};function de(ce,T){const j=[];for(let V=0;V<T.length;V++)V!==0&&j.push(ce),j.push(T[V]);return be(j)}function ne(ce,T,j){let V=ce;if(T>0){for(let se=0;se<Math.floor(T/j);++se)V=Se(V);V=Fe(T%j,V),V=Fe(Number.NEGATIVE_INFINITY,V)}return V}function we(ce,T){return{type:"label",label:ce,contents:T}}De.exports={concat:be,join:de,line:_,softline:k,hardline:O,literalline:A,group:Ne,conditionalGroup:Ce,fill:Re,lineSuffix:Ue,lineSuffixBoundary:Ae,cursor:ve,breakParent:Ge,ifBreak:M,trim:ae,indent:Se,indentIfBreak:Oe,align:Fe,addAlignmentToDoc:ne,markAsRoot:Pe,dedentToRoot:ge,dedent:le,hardlineWithoutBreakParent:y,literallineWithoutBreakParent:b,label:we}}}),L=m({"src/common/end-of-line.js"(x,De){F();function be(ge){const Pe=ge.indexOf("\r");return Pe>=0?ge.charAt(Pe+1)===`
`?"crlf":"cr":"lf"}function Se(ge){switch(ge){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function Fe(ge,Pe){let le;switch(Pe){case`
`:le=/\n/g;break;case"\r":le=/\r/g;break;case`\r
`:le=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(Pe)}.`)}const Ce=ge.match(le);return Ce?Ce.length:0}function Ne(ge){return ge.replace(/\r\n?/g,`
`)}De.exports={guessEndOfLine:be,convertEndOfLineToChars:Se,countEndOfLineChars:Fe,normalizeEndOfLine:Ne}}}),G=m({"src/utils/get-last.js"(x,De){F();var be=Se=>Se[Se.length-1];De.exports=be}});function H(){let{onlyFirst:x=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const De=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(De,x?void 0:"g")}var Y=h({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){F()}});function Q(x){if(typeof x!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof x}\``);return x.replace(H(),"")}var ye=h({"node_modules/strip-ansi/index.js"(){F(),Y()}});function E(x){return Number.isInteger(x)?x>=4352&&(x<=4447||x===9001||x===9002||11904<=x&&x<=12871&&x!==12351||12880<=x&&x<=19903||19968<=x&&x<=42182||43360<=x&&x<=43388||44032<=x&&x<=55203||63744<=x&&x<=64255||65040<=x&&x<=65049||65072<=x&&x<=65131||65281<=x&&x<=65376||65504<=x&&x<=65510||110592<=x&&x<=110593||127488<=x&&x<=127569||131072<=x&&x<=262141):!1}var D=h({"node_modules/is-fullwidth-code-point/index.js"(){F()}}),R=m({"node_modules/emoji-regex/index.js"(x,De){F(),De.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),B={};S(B,{default:()=>X});function X(x){if(typeof x!="string"||x.length===0||(x=Q(x),x.length===0))return 0;x=x.replace((0,he.default)(),"  ");let De=0;for(let be=0;be<x.length;be++){const Se=x.codePointAt(be);Se<=31||Se>=127&&Se<=159||Se>=768&&Se<=879||(Se>65535&&be++,De+=E(Se)?2:1)}return De}var he,te=h({"node_modules/string-width/index.js"(){F(),ye(),D(),he=W(R())}}),me=m({"src/utils/get-string-width.js"(x,De){F();var be=(te(),z(B)).default,Se=/[^\x20-\x7F]/;function Fe(Ne){return Ne?Se.test(Ne)?be(Ne):Ne.length:0}De.exports=Fe}}),ke=m({"src/document/doc-utils.js"(x,De){F();var be=G(),{literalline:Se,join:Fe}=P(),Ne=T=>Array.isArray(T)||T&&T.type==="concat",ge=T=>{if(Array.isArray(T))return T;if(T.type!=="concat"&&T.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return T.parts},Pe={};function le(T,j,V,se){const ie=[T];for(;ie.length>0;){const Z=ie.pop();if(Z===Pe){V(ie.pop());continue}if(V&&ie.push(Z,Pe),!j||j(Z)!==!1)if(Ne(Z)||Z.type==="fill"){const fe=ge(Z);for(let Ze=fe.length,gt=Ze-1;gt>=0;--gt)ie.push(fe[gt])}else if(Z.type==="if-break")Z.flatContents&&ie.push(Z.flatContents),Z.breakContents&&ie.push(Z.breakContents);else if(Z.type==="group"&&Z.expandedStates)if(se)for(let fe=Z.expandedStates.length,Ze=fe-1;Ze>=0;--Ze)ie.push(Z.expandedStates[Ze]);else ie.push(Z.contents);else Z.contents&&ie.push(Z.contents)}}function Ce(T,j){const V=new Map;return se(T);function se(Z){if(V.has(Z))return V.get(Z);const fe=ie(Z);return V.set(Z,fe),fe}function ie(Z){if(Array.isArray(Z))return j(Z.map(se));if(Z.type==="concat"||Z.type==="fill"){const fe=Z.parts.map(se);return j(Object.assign(Object.assign({},Z),{},{parts:fe}))}if(Z.type==="if-break"){const fe=Z.breakContents&&se(Z.breakContents),Ze=Z.flatContents&&se(Z.flatContents);return j(Object.assign(Object.assign({},Z),{},{breakContents:fe,flatContents:Ze}))}if(Z.type==="group"&&Z.expandedStates){const fe=Z.expandedStates.map(se),Ze=fe[0];return j(Object.assign(Object.assign({},Z),{},{contents:Ze,expandedStates:fe}))}if(Z.contents){const fe=se(Z.contents);return j(Object.assign(Object.assign({},Z),{},{contents:fe}))}return j(Z)}}function Re(T,j,V){let se=V,ie=!1;function Z(fe){const Ze=j(fe);if(Ze!==void 0&&(ie=!0,se=Ze),ie)return!1}return le(T,Z),se}function M(T){if(T.type==="group"&&T.break||T.type==="line"&&T.hard||T.type==="break-parent")return!0}function Oe(T){return Re(T,M,!1)}function Ue(T){if(T.length>0){const j=be(T);!j.expandedStates&&!j.break&&(j.break="propagated")}return null}function Ae(T){const j=new Set,V=[];function se(Z){if(Z.type==="break-parent"&&Ue(V),Z.type==="group"){if(V.push(Z),j.has(Z))return!1;j.add(Z)}}function ie(Z){Z.type==="group"&&V.pop().break&&Ue(V)}le(T,se,ie,!0)}function Ge(T){return T.type==="line"&&!T.hard?T.soft?"":" ":T.type==="if-break"?T.flatContents||"":T}function ae(T){return Ce(T,Ge)}var y=(T,j)=>T&&T.type==="line"&&T.hard&&j&&j.type==="break-parent";function b(T){if(!T)return T;if(Ne(T)||T.type==="fill"){const j=ge(T);for(;j.length>1&&y(...j.slice(-2));)j.length-=2;if(j.length>0){const V=b(be(j));j[j.length-1]=V}return Array.isArray(T)?j:Object.assign(Object.assign({},T),{},{parts:j})}switch(T.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const j=b(T.contents);return Object.assign(Object.assign({},T),{},{contents:j})}case"if-break":{const j=b(T.breakContents),V=b(T.flatContents);return Object.assign(Object.assign({},T),{},{breakContents:j,flatContents:V})}}return T}function _(T){return b(O(T))}function k(T){switch(T.type){case"fill":if(T.parts.every(V=>V===""))return"";break;case"group":if(!T.contents&&!T.id&&!T.break&&!T.expandedStates)return"";if(T.contents.type==="group"&&T.contents.id===T.id&&T.contents.break===T.break&&T.contents.expandedStates===T.expandedStates)return T.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!T.contents)return"";break;case"if-break":if(!T.flatContents&&!T.breakContents)return"";break}if(!Ne(T))return T;const j=[];for(const V of ge(T)){if(!V)continue;const[se,...ie]=Ne(V)?ge(V):[V];typeof se=="string"&&typeof be(j)=="string"?j[j.length-1]+=se:j.push(se),j.push(...ie)}return j.length===0?"":j.length===1?j[0]:Array.isArray(T)?j:Object.assign(Object.assign({},T),{},{parts:j})}function O(T){return Ce(T,j=>k(j))}function A(T){const j=[],V=T.filter(Boolean);for(;V.length>0;){const se=V.shift();if(se){if(Ne(se)){V.unshift(...ge(se));continue}if(j.length>0&&typeof be(j)=="string"&&typeof se=="string"){j[j.length-1]+=se;continue}j.push(se)}}return j}function ve(T){return Ce(T,j=>Array.isArray(j)?A(j):j.parts?Object.assign(Object.assign({},j),{},{parts:A(j.parts)}):j)}function de(T){return Ce(T,j=>typeof j=="string"&&j.includes(`
`)?ne(j):j)}function ne(T){let j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Se;return Fe(j,T.split(`
`)).parts}function we(T){if(T.type==="line")return!0}function ce(T){return Re(T,we,!1)}De.exports={isConcat:Ne,getDocParts:ge,willBreak:Oe,traverseDoc:le,findInDoc:Re,mapDoc:Ce,propagateBreaks:Ae,removeLines:ae,stripTrailingHardline:_,normalizeParts:A,normalizeDoc:ve,cleanDoc:O,replaceTextEndOfLine:ne,replaceEndOfLine:de,canBreak:ce}}}),nt=m({"src/document/doc-printer.js"(x,De){F();var{convertEndOfLineToChars:be}=L(),Se=G(),Fe=me(),{fill:Ne,cursor:ge,indent:Pe}=P(),{isConcat:le,getDocParts:Ce}=ke(),Re,M=1,Oe=2;function Ue(){return{value:"",length:0,queue:[]}}function Ae(k,O){return ae(k,{type:"indent"},O)}function Ge(k,O,A){return O===Number.NEGATIVE_INFINITY?k.root||Ue():O<0?ae(k,{type:"dedent"},A):O?O.type==="root"?Object.assign(Object.assign({},k),{},{root:k}):ae(k,{type:typeof O=="string"?"stringAlign":"numberAlign",n:O},A):k}function ae(k,O,A){const ve=O.type==="dedent"?k.queue.slice(0,-1):[...k.queue,O];let de="",ne=0,we=0,ce=0;for(const fe of ve)switch(fe.type){case"indent":V(),A.useTabs?T(1):j(A.tabWidth);break;case"stringAlign":V(),de+=fe.n,ne+=fe.n.length;break;case"numberAlign":we+=1,ce+=fe.n;break;default:throw new Error(`Unexpected type '${fe.type}'`)}return ie(),Object.assign(Object.assign({},k),{},{value:de,length:ne,queue:ve});function T(fe){de+="	".repeat(fe),ne+=A.tabWidth*fe}function j(fe){de+=" ".repeat(fe),ne+=fe}function V(){A.useTabs?se():ie()}function se(){we>0&&T(we),Z()}function ie(){ce>0&&j(ce),Z()}function Z(){we=0,ce=0}}function y(k){if(k.length===0)return 0;let O=0;for(;k.length>0&&typeof Se(k)=="string"&&/^[\t ]*$/.test(Se(k));)O+=k.pop().length;if(k.length>0&&typeof Se(k)=="string"){const A=Se(k).replace(/[\t ]*$/,"");O+=Se(k).length-A.length,k[k.length-1]=A}return O}function b(k,O,A,ve,de){let ne=O.length;const we=[k],ce=[];for(;A>=0;){if(we.length===0){if(ne===0)return!0;we.push(O[--ne]);continue}const{mode:T,doc:j}=we.pop();if(typeof j=="string")ce.push(j),A-=Fe(j);else if(le(j)||j.type==="fill"){const V=Ce(j);for(let se=V.length-1;se>=0;se--)we.push({mode:T,doc:V[se]})}else switch(j.type){case"indent":case"align":case"indent-if-break":case"label":we.push({mode:T,doc:j.contents});break;case"trim":A+=y(ce);break;case"group":{if(de&&j.break)return!1;const V=j.break?M:T,se=j.expandedStates&&V===M?Se(j.expandedStates):j.contents;we.push({mode:V,doc:se});break}case"if-break":{const se=(j.groupId?Re[j.groupId]||Oe:T)===M?j.breakContents:j.flatContents;se&&we.push({mode:T,doc:se});break}case"line":if(T===M||j.hard)return!0;j.soft||(ce.push(" "),A--);break;case"line-suffix":ve=!0;break;case"line-suffix-boundary":if(ve)return!1;break}}return!1}function _(k,O){Re={};const A=O.printWidth,ve=be(O.endOfLine);let de=0;const ne=[{ind:Ue(),mode:M,doc:k}],we=[];let ce=!1;const T=[];for(;ne.length>0;){const{ind:V,mode:se,doc:ie}=ne.pop();if(typeof ie=="string"){const Z=ve!==`
`?ie.replace(/\n/g,ve):ie;we.push(Z),de+=Fe(Z)}else if(le(ie)){const Z=Ce(ie);for(let fe=Z.length-1;fe>=0;fe--)ne.push({ind:V,mode:se,doc:Z[fe]})}else switch(ie.type){case"cursor":we.push(ge.placeholder);break;case"indent":ne.push({ind:Ae(V,O),mode:se,doc:ie.contents});break;case"align":ne.push({ind:Ge(V,ie.n,O),mode:se,doc:ie.contents});break;case"trim":de-=y(we);break;case"group":switch(se){case Oe:if(!ce){ne.push({ind:V,mode:ie.break?M:Oe,doc:ie.contents});break}case M:{ce=!1;const Z={ind:V,mode:Oe,doc:ie.contents},fe=A-de,Ze=T.length>0;if(!ie.break&&b(Z,ne,fe,Ze))ne.push(Z);else if(ie.expandedStates){const gt=Se(ie.expandedStates);if(ie.break){ne.push({ind:V,mode:M,doc:gt});break}else for(let p=1;p<ie.expandedStates.length+1;p++)if(p>=ie.expandedStates.length){ne.push({ind:V,mode:M,doc:gt});break}else{const q=ie.expandedStates[p],oe={ind:V,mode:Oe,doc:q};if(b(oe,ne,fe,Ze)){ne.push(oe);break}}}else ne.push({ind:V,mode:M,doc:ie.contents});break}}ie.id&&(Re[ie.id]=Se(ne).mode);break;case"fill":{const Z=A-de,{parts:fe}=ie;if(fe.length===0)break;const[Ze,gt]=fe,p={ind:V,mode:Oe,doc:Ze},q={ind:V,mode:M,doc:Ze},oe=b(p,[],Z,T.length>0,!0);if(fe.length===1){oe?ne.push(p):ne.push(q);break}const je={ind:V,mode:Oe,doc:gt},He={ind:V,mode:M,doc:gt};if(fe.length===2){oe?ne.push(je,p):ne.push(He,q);break}fe.splice(0,2);const et={ind:V,mode:se,doc:Ne(fe)},Dt=fe[0];b({ind:V,mode:Oe,doc:[Ze,gt,Dt]},[],Z,T.length>0,!0)?ne.push(et,je,p):oe?ne.push(et,He,p):ne.push(et,He,q);break}case"if-break":case"indent-if-break":{const Z=ie.groupId?Re[ie.groupId]:se;if(Z===M){const fe=ie.type==="if-break"?ie.breakContents:ie.negate?ie.contents:Pe(ie.contents);fe&&ne.push({ind:V,mode:se,doc:fe})}if(Z===Oe){const fe=ie.type==="if-break"?ie.flatContents:ie.negate?Pe(ie.contents):ie.contents;fe&&ne.push({ind:V,mode:se,doc:fe})}break}case"line-suffix":T.push({ind:V,mode:se,doc:ie.contents});break;case"line-suffix-boundary":T.length>0&&ne.push({ind:V,mode:se,doc:{type:"line",hard:!0}});break;case"line":switch(se){case Oe:if(ie.hard)ce=!0;else{ie.soft||(we.push(" "),de+=1);break}case M:if(T.length>0){ne.push({ind:V,mode:se,doc:ie},...T.reverse()),T.length=0;break}ie.literal?V.root?(we.push(ve,V.root.value),de=V.root.length):(we.push(ve),de=0):(de-=y(we),we.push(ve+V.value),de=V.length);break}break;case"label":ne.push({ind:V,mode:se,doc:ie.contents});break}ne.length===0&&T.length>0&&(ne.push(...T.reverse()),T.length=0)}const j=we.indexOf(ge.placeholder);if(j!==-1){const V=we.indexOf(ge.placeholder,j+1),se=we.slice(0,j).join(""),ie=we.slice(j+1,V).join(""),Z=we.slice(V+1).join("");return{formatted:se+ie+Z,cursorNodeStart:se.length,cursorNodeText:ie}}return{formatted:we.join("")}}De.exports={printDocToString:_}}}),Ct=m({"src/document/doc-debug.js"(x,De){F();var{isConcat:be,getDocParts:Se}=ke();function Fe(ge){if(!ge)return"";if(be(ge)){const Pe=[];for(const le of Se(ge))if(be(le))Pe.push(...Fe(le).parts);else{const Ce=Fe(le);Ce!==""&&Pe.push(Ce)}return{type:"concat",parts:Pe}}return ge.type==="if-break"?Object.assign(Object.assign({},ge),{},{breakContents:Fe(ge.breakContents),flatContents:Fe(ge.flatContents)}):ge.type==="group"?Object.assign(Object.assign({},ge),{},{contents:Fe(ge.contents),expandedStates:ge.expandedStates&&ge.expandedStates.map(Fe)}):ge.type==="fill"?{type:"fill",parts:ge.parts.map(Fe)}:ge.contents?Object.assign(Object.assign({},ge),{},{contents:Fe(ge.contents)}):ge}function Ne(ge){const Pe=Object.create(null),le=new Set;return Ce(Fe(ge));function Ce(M,Oe,Ue){if(typeof M=="string")return JSON.stringify(M);if(be(M)){const Ae=Se(M).map(Ce).filter(Boolean);return Ae.length===1?Ae[0]:`[${Ae.join(", ")}]`}if(M.type==="line"){const Ae=Array.isArray(Ue)&&Ue[Oe+1]&&Ue[Oe+1].type==="break-parent";return M.literal?Ae?"literalline":"literallineWithoutBreakParent":M.hard?Ae?"hardline":"hardlineWithoutBreakParent":M.soft?"softline":"line"}if(M.type==="break-parent")return Array.isArray(Ue)&&Ue[Oe-1]&&Ue[Oe-1].type==="line"&&Ue[Oe-1].hard?void 0:"breakParent";if(M.type==="trim")return"trim";if(M.type==="indent")return"indent("+Ce(M.contents)+")";if(M.type==="align")return M.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+Ce(M.contents)+")":M.n<0?"dedent("+Ce(M.contents)+")":M.n.type==="root"?"markAsRoot("+Ce(M.contents)+")":"align("+JSON.stringify(M.n)+", "+Ce(M.contents)+")";if(M.type==="if-break")return"ifBreak("+Ce(M.breakContents)+(M.flatContents?", "+Ce(M.flatContents):"")+(M.groupId?(M.flatContents?"":', ""')+`, { groupId: ${Re(M.groupId)} }`:"")+")";if(M.type==="indent-if-break"){const Ae=[];M.negate&&Ae.push("negate: true"),M.groupId&&Ae.push(`groupId: ${Re(M.groupId)}`);const Ge=Ae.length>0?`, { ${Ae.join(", ")} }`:"";return`indentIfBreak(${Ce(M.contents)}${Ge})`}if(M.type==="group"){const Ae=[];M.break&&M.break!=="propagated"&&Ae.push("shouldBreak: true"),M.id&&Ae.push(`id: ${Re(M.id)}`);const Ge=Ae.length>0?`, { ${Ae.join(", ")} }`:"";return M.expandedStates?`conditionalGroup([${M.expandedStates.map(ae=>Ce(ae)).join(",")}]${Ge})`:`group(${Ce(M.contents)}${Ge})`}if(M.type==="fill")return`fill([${M.parts.map(Ae=>Ce(Ae)).join(", ")}])`;if(M.type==="line-suffix")return"lineSuffix("+Ce(M.contents)+")";if(M.type==="line-suffix-boundary")return"lineSuffixBoundary";if(M.type==="label")return`label(${JSON.stringify(M.label)}, ${Ce(M.contents)})`;throw new Error("Unknown doc type "+M.type)}function Re(M){if(typeof M!="symbol")return JSON.stringify(String(M));if(M in Pe)return Pe[M];const Oe=String(M).slice(7,-1)||"symbol";for(let Ue=0;;Ue++){const Ae=Oe+(Ue>0?` #${Ue}`:"");if(!le.has(Ae))return le.add(Ae),Pe[M]=`Symbol.for(${JSON.stringify(Ae)})`}}}De.exports={printDocToDebug:Ne}}});F(),s.exports={builders:P(),printer:nt(),utils:ke(),debug:Ct()}}});return i()})})(Fy);const Pu=4,Jl={printWidth:30,tabWidth:4,useTabs:!1};function Ql(e){return ft.printer.printDocToString(e,Jl).formatted}function Ou(e,t="^",n=!1){const r=(n?St.red:St.green).bold,i=e.src.split(`
`),o=Math.min(i.length-1,e.getLineNumber()),s=Math.max(o-Pu,0),a=Math.min(o+Pu+1,i.length),u=i.slice(s,a);if(t){const f=" ".repeat(e.getColumnNumber())+r(t);u.splice(o-s+1,0,f)}return u.map((f,g)=>{const d=s+g+1;let h=r.reset.black(String(d));return f=d===o+1?r(f):f,`      ${h}| ${f}`}).join(`
`)}const At=(e,t={})=>ft.builders.group(e,{...Jl,...t}),bn=e=>St.gray(e),rn=new Map;function Xl(e){if(rn.has(e.id))return rn.get(e.id);const t=(i,o)=>{if(rn.has(i.id))return rn.get(i.id);const{name:s,args:a,parser:u}=i.context,c=u!=null?t(u,o):St.red.bold("unknown");let f=(()=>{switch(s){case"string":return St.yellow(`"${a[0]}"`);case"regex":case"regexConcat":case"regexWrap":return St.redBright(`${a[0]}`);case"wrap":case"trim":{const[I,W]=a;return At([t(I,o),ft.builders.indent([ft.builders.softline,c]),ft.builders.softline,t(W,o)])}case"trimWhitespace":return At([c,bn("?w")]);case"not":return At(["!",c]);case"opt":return At([c,bn("?")]);case"next":const[g]=a;return At([c,bn(" >> "),t(g,o)]);case"skip":const[d]=a;return At([c,bn(" << "),t(d,o)]);case"map":return c;case"all":case"then":{const I=bn(", ");return At(["[",ft.builders.indent([ft.builders.softline,ft.builders.join([I,ft.builders.softline],a.map(W=>t(W,o)))]),ft.builders.softline,"]"])}case"any":case"or":{const I=bn("| ");return At([[ft.builders.join([ft.builders.softline,ft.builders.ifBreak(I," "+I)],a.map(W=>t(W,o)))]])}case"many":const[h,m]=a;let S=m===1/0?`${h},`:`${h},${m}`;return S=St.bold.gray(` {${S}}`),At([c,S]);case"sepBy":return At([c,ft.builders.indent([" sepBy ",t(a[0],o)])]);case"lazy":{const[I]=a,W=Sa(I);if(o)return St.bold.blue(s);{const z=t(W,W.id);return rn.set(W.id,z),z}}case"debug":return c}})();return f??(f=St.red.bold(s)),o&&rn.set(i.id,f),f},n=t(e),r=Ql(n);return rn.set(e.id,r),r}function Yl(e,t="",n=""){const r=e.isError?St.bgRed:St.bgGreen,i=e.isError?St.red:St.green,o=e.offset>=e.src.length,s=e.isError?"":o?"":"",u=" "+(e.isError?"Err":o?"Done":"Ok")+" "+s+" ",c=At([r.bold(u),i(`	${t}	${e.offset}`),ft.builders.softline,"	"+St.yellow(n)]),f=(()=>e.offset>=e.src.length?St.bold.greenBright(Ou(e,"",e.isError)):Ou(e,"^",e.isError))(),g=At([c,ft.builders.hardline,ft.builders.indent([f])]);return Ql(g)}function wy(e,t="",n=!1,r=console.log){const i=o=>{const s=e.parser(o),a=n?Xl(e):e.context.name,u=Yl(s,t,a);return r(u),s};return new rt(i,tt("debug",e,r))}class mi{constructor(t,n=void 0,r=0,i=!1,o=0){this.src=t,this.value=n,this.offset=r,this.isError=i,this.furthest=o}ok(t,n=0){return n+=this.offset,new mi(this.src,t,n,!1)}err(t,n=0){const r=this.ok(t,n);return r.isError=!0,r}from(t,n=0){return n+=this.offset,new mi(this.src,t,n,this.isError)}getColumnNumber(){const t=this.offset,n=this.src.lastIndexOf(`
`,t),r=n===-1?t:t-(n+1);return Math.max(0,r)}getLineNumber(){const t=this.src.lastIndexOf(`
`,this.offset);return t>=0?this.src.slice(0,t).split(`
`).length:0}toString(){return Yl(this)}}function tt(e,t,...n){return{name:e,parser:t,args:n}}let Sy=0;const on=new Map,ti=new Map;let Fn;function bt(e){return(!Fn||Fn&&e.offset>Fn.offset)&&(Fn=e),Fn}function Sa(e){return e.parser?e.parser:e.parser=e()}class rt{constructor(t,n={}){ku(this,"id",Sy++),ku(this,"state"),this.parser=t,this.context=n}reset(){Fn=void 0,on.clear(),ti.clear()}parse(t){this.reset();const n=this.parser(new mi(t));return this.state=bt(n),this.state.isError=n.isError,this.state.isError&&console.log(this.state.toString()),n.value}getCijKey(t){return`${this.id}${t.offset}`}atLeftRecursionLimit(t){return(ti.get(this.getCijKey(t))??0)>t.src.length-t.offset}memoize(){const t=n=>{const r=this.getCijKey(n),i=ti.get(r)??0;let o=on.get(this.id);if(o&&o.offset>=n.offset)return o;if(this.atLeftRecursionLimit(n))return n.err(void 0);ti.set(r,i+1);const s=this.parser(n);return o=on.get(this.id),o&&o.offset>s.offset?s.offset=o.offset:o||on.set(this.id,s),s};return new rt(t,tt("memoize",this))}mergeMemos(){const t=n=>{let r=on.get(this.id);if(r)return r;if(this.atLeftRecursionLimit(n))return n.err(void 0);const i=this.parser(n);return r=on.get(this.id),r||on.set(this.id,i),i};return new rt(t,tt("mergeMemo",this))}then(t){if(Yn(this,t))return tr([this,t],"",r=>[r==null?void 0:r[0],r==null?void 0:r[1]]);const n=r=>{const i=this.parser(r);if(!i.isError){const o=t.parser(i);if(!o.isError)return o.ok([i.value,o.value])}return bt(r),r.err(void 0)};return new rt(n,tt("then",this,this,t))}or(t){if(Yn(this,t))return tr([this,t],"|");const n=r=>{const i=this.parser(r);return i.isError?t.parser(r):i};return new rt(n,tt("or",this,this,t))}chain(t,n=!1){const r=i=>{const o=this.parser(i);return o.isError?o:o.value||n?t(o.value).parser(o):i};return new rt(r,tt("chain",this,t))}map(t,n=!1){const r=i=>{const o=this.parser(i);return!o.isError||n?o.ok(t(o.value)):o};return new rt(r,tt("map",this))}mapState(t){const n=r=>{const i=this.parser(r);return t(i)};return new rt(n,tt("mapState",this))}skip(t){const n=r=>{const i=this.parser(r);if(!i.isError){const o=t.parser(i);if(!o.isError)return o.ok(i.value)}return bt(r),r.err(void 0)};return new rt(n,tt("skip",this,t))}next(t){const n=this.then(t).map(([,r])=>r);return n.context=tt("next",this,t),n}opt(){const t=n=>{const r=this.parser(n);return r.isError?(bt(n),n.ok(void 0)):r};return new rt(t,tt("opt",this))}not(t){const n=i=>this.parser(i).isError?(bt(i),i.ok(i.value)):i.err(void 0),r=i=>{const o=this.parser(i);return o.isError?(bt(i),o):t.parser(i).isError?o:(bt(i),i.err(void 0))};return new rt(t?r:n,tt("not",this,t))}wrap(t,n,r=!0){if(!r)return ln(t,this,n);if(Yn(t,this,n))return Ty(t,this,n);const i=t.next(this).skip(n);return i.context=tt("wrap",this,t,n),i}trim(t=ed,n=!0){var r;if(!n)return ln(t,this,t);if(((r=t.context)==null?void 0:r.name)==="whitespace"){if(Yn(this,t))return tr([t,this,t],"",o=>o==null?void 0:o[2]);const i=o=>{const s=$u(o),a=this.parser(s);return a.isError?(bt(o),o.err(void 0)):$u(a)};return new rt(i,tt("trimWhitespace",this))}return this.wrap(t,t)}many(t=0,n=1/0){const r=i=>{const o=[];let s=i;for(let a=0;a<n;a+=1){const u=this.parser(s);if(u.isError)break;o.push(u.value),s=u}return o.length>=t?s.ok(o):(bt(i),i.err([]))};return new rt(r,tt("many",this,t,n))}sepBy(t,n=0,r=1/0){const i=o=>{const s=[];let a=o;for(let u=0;u<r;u+=1){const c=this.parser(a);if(c.isError)break;a=c,s.push(a.value);const f=t.parser(a);if(f.isError)break;a=f}return s.length>n?a.ok(s):(bt(o),o.err([]))};return new rt(i,tt("sepBy",this,t))}eof(){const t=this.skip(Zl());return t.context=tt("eof",this),t}debug(t="",n=!1,r=console.log){return wy(this,t,n,r)}toString(){return Xl(this)}static lazy(t){const n=r=>Sa(t).parser(r);return new rt(n,tt("lazy",void 0,t))}}function Yn(...e){return e.every(t=>{var n,r,i,o;return(((n=t.context)==null?void 0:n.name)==="string"||((r=t.context)==null?void 0:r.name)==="regex"||((i=t.context)==null?void 0:i.name)==="whitespace")&&((o=t.context)==null?void 0:o.args)})}function Ry(e){var t,n,r,i,o;if(((t=e.context)==null?void 0:t.name)==="string")return(n=e.context)==null?void 0:n.args[0].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if(((r=e.context)==null?void 0:r.name)==="regex"||((i=e.context)==null?void 0:i.name)==="whitespace")return(o=e.context)==null?void 0:o.args[0].source}function tr(e,t="",n){const r=e.map(s=>`(${Ry(s)})`).join(t),i=new RegExp(r),o=jt(i,n);return t!=="|"&&(o.context=tt("regexConcat",this,i)),o}function Ty(e,t,n){const r=tr([e,t,n],"",i=>i==null?void 0:i[2]);return r.context.name="regexWrap",r}function Zl(){const e=t=>t.offset>=t.src.length?t.ok(void 0):(bt(t),t.err());return new rt(e,tt("eof",void 0))}function Rt(e,t,n){const r=n.value.bind(e);n.value=function(){const i=o=>Sa(r).parser(o);return new rt(i,tt("lazy",void 0,r))}}function un(...e){if(Yn(...e))return tr(e,"|");const t=n=>{for(const r of e){const i=r.parser(n);if(!i.isError)return i}return bt(n),n.err(void 0)};return new rt(e.length===1?e[0].parser:t,tt("any",void 0,...e))}function ln(...e){const t=n=>{const r=[];for(const i of e){const o=i.parser(n);if(o.isError)return o;o.value!==void 0&&r.push(o.value),n=o}return bt(n),n.ok(r)};return new rt(e.length===1?e[0].parser:t,tt("all",void 0,...e))}function Xe(e){const t=n=>{if(n.offset>=n.src.length)return n.err(void 0);const r=n.src.slice(n.offset,n.offset+e.length);return r===e?n.ok(r,r.length):(bt(n),n.err(void 0))};return new rt(t,tt("string",void 0,e))}function jt(e,t=n=>n==null?void 0:n[0]){const n=e.flags.replace(/y/g,""),r=new RegExp(e,n+"y"),i=o=>{if(o.offset>=o.src.length)return o.err(void 0);r.lastIndex=o.offset;const s=t(o.src.match(r));return s?o.ok(s,r.lastIndex-o.offset):s===""?o.ok(void 0):(bt(o),o.err(void 0))};return new rt(i,tt("regex",void 0,e))}const qu=/\s*/y,$u=e=>{var t;if(e.offset>=e.src.length)return e;qu.lastIndex=e.offset;const n=((t=e.src.match(qu))==null?void 0:t[0])??"";return e.ok(e.value,n.length)},ed=jt(/\s*/);ed.context.name="whitespace";var Ey=Object.defineProperty,ky=(e,t,n)=>t in e?Ey(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Py=(e,t,n)=>(ky(e,typeof t!="symbol"?t+"":t,n),n),Oy=Object.defineProperty,qy=Object.getOwnPropertyDescriptor,Tt=(e,t,n,r)=>{for(var i=r>1?void 0:r?qy(t,n):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(r?s(t,n,i):s(i))||i);return r&&i&&Oy(t,n,i),i};const td={"|":"alternation",",":"concatenation","-":"minus","<<":"skip",">>":"next","*":"many","+":"many1","?":"optional","?w":"optionalWhitespace"},$y=([e,t])=>t.length===0?e:t.reduce((n,[r,i])=>({type:td[r],value:[n,i]}),e),Ay=([e,t])=>t===void 0?e:{type:td[t],value:e};function My(e){return e.mapState(t=>(t.value&&(t.value.column=t.getColumnNumber(),t.value.line=t.getLineNumber(),t.value.offset=t.offset),t))}const Iy={debug:!1,comments:!0};class _t{constructor(t){Py(this,"options"),this.options={...Iy,...t??{}}}identifier(){return jt(/[_a-zA-Z][_a-zA-Z0-9]*/).trim()}literal(){return this.trimBigComment(un(jt(/[^"]+/).wrap(Xe('"'),Xe('"')),jt(/[^']+/).wrap(Xe("'"),Xe("'"))).map(t=>({type:"literal",value:t})))}epsilon(){return un(Xe("epsilon"),Xe("")).trim().map(()=>({type:"epsilon",value:void 0}))}nonterminal(){return this.identifier().map(t=>({type:"nonterminal",value:t}))}bigComment(){return jt(/\/\*[^\*]*\*\//).trim()}comment(){return jt(/\/\/.*/).or(this.bigComment()).trim()}trimBigComment(t){return t.trim(this.bigComment().many(),!1).map(([n,r,i])=>(r.comment={left:n,right:i},r))}group(){return this.rhs().trim().wrap(Xe("("),Xe(")")).map(t=>({type:"group",value:t}))}regex(){return jt(/[^\/]*/).wrap(Xe("/"),Xe("/")).then(jt(/[gimuy]*/).opt()).map(([t,n])=>({type:"regex",value:new RegExp(t,n)}))}optionalGroup(){return this.rhs().trim().wrap(Xe("["),Xe("]")).map(t=>({type:"optional",value:{type:"group",value:t}}))}manyGroup(){return this.rhs().trim().wrap(Xe("{"),Xe("}")).map(t=>({type:"many",value:{type:"group",value:t}}))}lhs(){return this.identifier()}term(){return My(un(this.epsilon(),this.group(),this.optionalGroup(),this.manyGroup(),this.nonterminal(),this.literal(),this.regex()))}factor(){return this.trimBigComment(ln(this.term(),un(Xe("?w").trim(),Xe("?").trim(),Xe("*").trim(),Xe("+").trim()).opt()).map(Ay))}binaryFactor(){return ln(this.factor(),ln(un(Xe("<<").trim(),Xe(">>").trim(),Xe("-").trim()),this.factor()).many()).map($y)}concatenation(){return this.binaryFactor().sepBy(Xe(",").trim()).map(t=>t.length===1?t[0]:{type:"concatenation",value:t})}alternation(){return this.concatenation().sepBy(Xe("|").trim()).map(t=>t.length===1?t[0]:{type:"alternation",value:t})}rhs(){return this.alternation()}productionRule(){return ln(this.lhs(),Xe("=").trim(),this.rhs(),un(Xe(";"),Xe(".")).trim()).map(([t,,n])=>({name:t,expression:n}))}grammar(){return this.productionRule().trim(this.comment().many(),!1).map(([t,n,r])=>(n.comment={above:t,below:r},n)).many(1)}}Tt([Rt],_t.prototype,"bigComment",1);Tt([Rt],_t.prototype,"comment",1);Tt([Rt],_t.prototype,"group",1);Tt([Rt],_t.prototype,"regex",1);Tt([Rt],_t.prototype,"optionalGroup",1);Tt([Rt],_t.prototype,"manyGroup",1);Tt([Rt],_t.prototype,"lhs",1);Tt([Rt],_t.prototype,"term",1);Tt([Rt],_t.prototype,"factor",1);Tt([Rt],_t.prototype,"binaryFactor",1);Tt([Rt],_t.prototype,"concatenation",1);Tt([Rt],_t.prototype,"alternation",1);Tt([Rt],_t.prototype,"rhs",1);Tt([Rt],_t.prototype,"productionRule",1);Tt([Rt],_t.prototype,"grammar",1);function Ny(e){const t=new Set,n=[];function r(o,s){if(s.has(o)||t.has(o))return;s.add(o);const a=e.get(o);if(!a)return;const u=a.expression;if(u.type==="nonterminal")r(u.value,s);else if(u.value instanceof Array)for(const c of u.value)c.type==="nonterminal"&&r(c.value,s);t.add(o),s.delete(o),n.unshift(e.get(o))}for(const[o]of e)r(o,new Set);const i=new Map;for(const o of n)i.set(o.name,o);return i}const Zn=(e,t)=>{if(!(!(e!=null&&e.type)||!(t!=null&&t.type)||e.type!==t.type))switch(e.type){case"literal":case"nonterminal":return e.value!==t.value?void 0:[e,{type:"epsilon"},{type:"epsilon"}];case"group":case"optional":case"optionalWhitespace":case"many":case"many1":{const n=Zn(e.value,t.value);return n?[{type:e.type,value:n[0]},{type:e.type,value:n[1]},{type:e.type,value:n[2]}]:void 0}case"concatenation":{const n=e.value.map((u,c)=>Zn(e.value[c],t.value[c]));if(n.some(u=>u===void 0))return;const r=n.map(u=>u[0]),i=n.map(u=>u[1]),o=n.map(u=>u[2]),s=r.lastIndexOf(null);return s===r.length-1?void 0:[{type:"concatenation",value:r.slice(s+1)},{type:"concatenation",value:i},{type:"concatenation",value:o}]}case"alternation":for(const n of e.value){const r=Zn(n,t);if(r)return r}for(const n of t.value){const r=Zn(e,n);if(r)return r}return}},wn=(e,t)=>{if(e.type!==t.type)return!1;switch(e.type){case"literal":case"nonterminal":return e.value===t.value;case"group":case"optional":case"many":case"many1":return wn(e.value,t.value);case"minus":case"skip":case"next":return wn(e.value[0],t.value[0])&&wn(e.value[1],t.value[1]);case"concatenation":return e.value.every((n,r)=>wn(n,t.value[r]));case"alternation":return e.value.some((n,r)=>wn(n,t.value[r]));case"epsilon":return!0}};function jy(e,t){const n=new Map;let r=null;for(let i=0;i<t.value.length-1;i++){const o=t.value[i],s=t.value[i+1],a=Zn(o,s);if(a){const[u,c,f]=a;r!==null&&wn(u,r)?n.get(r).push(f):(n.set(u,[c,f]),r=u),i===t.value.length-2&&t.value.shift(),t.value.shift(),i-=1}}for(const[i,o]of n){const a={type:"concatenation",value:[{type:"group",value:{type:"alternation",value:o}},{type:"group",value:i}]};t.value.push(a)}}const Ly=(e,t,n)=>{const r=[],i=[],o={type:"nonterminal",value:n};for(let s=0;s<t.value.length;s++){const a=t.value[s];a.type==="concatenation"&&a.value[0].value===e?i.push({type:"concatenation",value:[...a.value.slice(1),o]}):r.push({type:"concatenation",value:[a,o]})}return i.length===0?[void 0,void 0]:(i.push({type:"epsilon"}),[{type:"alternation",value:r},{type:"alternation",value:i}])};function By(e){const t=new Map;let n=0;for(const[r,i]of e){const{expression:o}=i;if(o.type==="alternation"){const s=`${r}_${n++}`,[a,u]=Ly(r,o,s);a&&(t.set(s,{name:s,expression:u}),t.set(r,{name:r,expression:a,comment:i.comment}))}}if(t.size===0)return e;for(const[r,i]of t)e.set(r,i);for(const[r,i]of e){const{expression:o}=i;o.type==="alternation"&&jy(r,o)}}function Hy(e){const t=Ny(e);return By(t),t}function xy(e){const t=new _t().grammar().eof(),n=t.parse(e);if(!n)return[t];const r=n.reduce((i,o,s)=>i.set(o.name,o),new Map);return[t,r]}function Wy(e){function t(r,i){var o,s;switch(i.type){case"literal":return Xe(i.value);case"nonterminal":const a=rt.lazy(()=>n[i.value]);return a.context.name=i.value,a;case"epsilon":return Zl().opt();case"group":return t(r,i.value);case"regex":return jt(i.value);case"optionalWhitespace":return t(r,i.value).trim();case"optional":return t(r,i.value).opt();case"many":return t(r,i.value).many();case"many1":return t(r,i.value).many(1);case"skip":return t(r,i.value[0]).skip(t(r,i.value[1]));case"next":return t(r,i.value[0]).next(t(r,i.value[1]));case"minus":return t(r,i.value[0]).not(t(r,i.value[1]));case"concatenation":{const u=i.value.map(c=>t(r,c));return((s=(o=u.at(-1))==null?void 0:o.context)==null?void 0:s.name)==="eof"&&u.pop(),ln(...u)}case"alternation":return un(...i.value.map(u=>t(r,u)))}}const n={};for(const[r,i]of e.entries())n[r]=t(r,i.expression);return n}function Ky(e,t=!1){let[n,r]=xy(e);return t&&(r=Hy(r)),[Wy(r),r]}const Uy={language:"bbnf",scheme:"file"};let yi;const vo=new Map,zy=pe.commands.registerCommand("extension.testGrammar",async()=>{const e=pe.window.activeTextEditor;if(!e)return;const t=e.document,n=t.getText();if(n.length===0)return;let r,i;try{[r,i]=Ky(n)}catch{return}const o=t.uri.toString();vo.has(o)||vo.set(o,{nonterminal:"",testString:""});const s=vo.get(o),a=await pe.window.showInputBox({prompt:"Enter a nonterminal to test",placeHolder:"Type here...",value:s.nonterminal});if(!a||!r[a]){pe.window.showErrorMessage(`Nonterminal ${a} not found`);return}s.nonterminal=a;const u=await pe.window.showInputBox({prompt:"Enter your test string",placeHolder:"Type here...",value:s.testString});if(!u){pe.window.showErrorMessage("No test string provided");return}s.testString=u;const f=r[a].parse(u);f?pe.window.showInformationMessage(`Matched : ${f}`):pe.window.showInformationMessage("No match X")});function Vy(e){const t=e.asAbsolutePath(rd.join("server","out","server.js")),n={run:{module:t,transport:er.TransportKind.ipc},debug:{module:t,transport:er.TransportKind.ipc}},r={documentSelector:[Uy],synchronize:{fileEvents:pe.workspace.createFileSystemWatcher("**/.clientrc")}};yi=new er.LanguageClient("languageServerExample","Language Server Example",n,r),yi.start(),e.subscriptions.push(zy)}function Gy(){if(yi)return yi.stop()}exports.activate=Vy;exports.deactivate=Gy;
//# sourceMappingURL=extension.js.map
