"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const yt=require("vscode-languageserver/node"),Ao=require("vscode-languageserver-textdocument"),Ke=require("chalk"),Po=require("prettier");function ne(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in e)){const i=Object.getOwnPropertyDescriptor(r,u);i&&Object.defineProperty(e,u,i.get?i:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var qo=Object.defineProperty,Oo=(e,t,n)=>t in e?qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ou=(e,t,n)=>(Oo(e,typeof t!="symbol"?t+"":t,n),n),Ie={},No={get exports(){return Ie},set exports(e){Ie=e}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Object.getOwnPropertyNames,r=(i,o)=>function(){return o||(0,i[n(i)[0]])((o={exports:{}}).exports,o),o.exports},u=r({"dist/_doc.js.umd.js"(i,o){var a=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,S=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,y=(F,I)=>function(){return F&&(I=(0,F[C(F)[0]])(F=0)),I},j=(F,I)=>function(){return I||(0,F[C(F)[0]])((I={exports:{}}).exports,I),I.exports},ue=(F,I)=>{for(var W in I)c(F,W,{get:I[W],enumerable:!0})},ie=(F,I,W,z)=>{if(I&&typeof I=="object"||typeof I=="function")for(let U of C(I))!B.call(F,U)&&U!==W&&c(F,U,{get:()=>I[U],enumerable:!(z=l(I,U))||z.enumerable});return F},X=(F,I,W)=>(W=F!=null?a(S(F)):{},ie(I||!F||!F.__esModule?c(W,"default",{value:F,enumerable:!0}):W,F)),le=F=>ie(c({},"__esModule",{value:!0}),F),K=y({"<define:process>"(){}}),ye=j({"src/document/doc-builders.js"(F,I){K();function W(M){return{type:"concat",parts:M}}function z(M){return{type:"indent",contents:M}}function U(M,D){return{type:"align",contents:D,n:M}}function ee(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:D.id,contents:M,break:Boolean(D.shouldBreak),expandedStates:D.expandedStates}}function w(M){return U(Number.NEGATIVE_INFINITY,M)}function h(M){return U({type:"root"},M)}function E(M){return U(-1,M)}function P(M,D){return ee(M[0],Object.assign(Object.assign({},D),{},{expandedStates:M}))}function b(M){return{type:"fill",parts:M}}function p(M,D){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:M,flatContents:D,groupId:f.groupId}}function Y(M,D){return{type:"indent-if-break",contents:M,groupId:D.groupId,negate:D.negate}}function re(M){return{type:"line-suffix",contents:M}}var G={type:"line-suffix-boundary"},ge={type:"break-parent"},_e={type:"trim"},pe={type:"line",hard:!0},fe={type:"line",hard:!0,literal:!0},Ze={type:"line"},V={type:"line",soft:!0},Z=W([pe,ge]),x=W([fe,ge]),oe={type:"cursor",placeholder:Symbol("cursor")};function v(M,D){const f=[];for(let m=0;m<D.length;m++)m!==0&&f.push(M),f.push(D[m]);return W(f)}function g(M,D,f){let m=M;if(D>0){for(let q=0;q<Math.floor(D/f);++q)m=z(m);m=U(D%f,m),m=U(Number.NEGATIVE_INFINITY,m)}return m}function T(M,D){return{type:"label",label:M,contents:D}}I.exports={concat:W,join:v,line:Ze,softline:V,hardline:Z,literalline:x,group:ee,conditionalGroup:P,fill:b,lineSuffix:re,lineSuffixBoundary:G,cursor:oe,breakParent:ge,ifBreak:p,trim:_e,indent:z,indentIfBreak:Y,align:U,addAlignmentToDoc:g,markAsRoot:h,dedentToRoot:w,dedent:E,hardlineWithoutBreakParent:pe,literallineWithoutBreakParent:fe,label:T}}}),He=j({"src/common/end-of-line.js"(F,I){K();function W(w){const h=w.indexOf("\r");return h>=0?w.charAt(h+1)===`
`?"crlf":"cr":"lf"}function z(w){switch(w){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function U(w,h){let E;switch(h){case`
`:E=/\n/g;break;case"\r":E=/\r/g;break;case`\r
`:E=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(h)}.`)}const P=w.match(E);return P?P.length:0}function ee(w){return w.replace(/\r\n?/g,`
`)}I.exports={guessEndOfLine:W,convertEndOfLineToChars:z,countEndOfLineChars:U,normalizeEndOfLine:ee}}}),Me=j({"src/utils/get-last.js"(F,I){K();var W=z=>z[z.length-1];I.exports=W}});function Re(){let{onlyFirst:F=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(I,F?void 0:"g")}var Ve=y({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){K()}});function we(F){if(typeof F!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof F}\``);return F.replace(Re(),"")}var ut=y({"node_modules/strip-ansi/index.js"(){K(),Ve()}});function $(F){return Number.isInteger(F)?F>=4352&&(F<=4447||F===9001||F===9002||11904<=F&&F<=12871&&F!==12351||12880<=F&&F<=19903||19968<=F&&F<=42182||43360<=F&&F<=43388||44032<=F&&F<=55203||63744<=F&&F<=64255||65040<=F&&F<=65049||65072<=F&&F<=65131||65281<=F&&F<=65376||65504<=F&&F<=65510||110592<=F&&F<=110593||127488<=F&&F<=127569||131072<=F&&F<=262141):!1}var s=y({"node_modules/is-fullwidth-code-point/index.js"(){K()}}),A=j({"node_modules/emoji-regex/index.js"(F,I){K(),I.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),L={};ue(L,{default:()=>J});function J(F){if(typeof F!="string"||F.length===0||(F=we(F),F.length===0))return 0;F=F.replace((0,ce.default)(),"  ");let I=0;for(let W=0;W<F.length;W++){const z=F.codePointAt(W);z<=31||z>=127&&z<=159||z>=768&&z<=879||(z>65535&&W++,I+=$(z)?2:1)}return I}var ce,Be=y({"node_modules/string-width/index.js"(){K(),ut(),s(),ce=X(A())}}),Et=j({"src/utils/get-string-width.js"(F,I){K();var W=(Be(),le(L)).default,z=/[^\x20-\x7F]/;function U(ee){return ee?z.test(ee)?W(ee):ee.length:0}I.exports=U}}),Je=j({"src/document/doc-utils.js"(F,I){K();var W=Me(),{literalline:z,join:U}=ye(),ee=D=>Array.isArray(D)||D&&D.type==="concat",w=D=>{if(Array.isArray(D))return D;if(D.type!=="concat"&&D.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return D.parts},h={};function E(D,f,m,q){const R=[D];for(;R.length>0;){const k=R.pop();if(k===h){m(R.pop());continue}if(m&&R.push(k,h),!f||f(k)!==!1)if(ee(k)||k.type==="fill"){const N=w(k);for(let se=N.length,Te=se-1;Te>=0;--Te)R.push(N[Te])}else if(k.type==="if-break")k.flatContents&&R.push(k.flatContents),k.breakContents&&R.push(k.breakContents);else if(k.type==="group"&&k.expandedStates)if(q)for(let N=k.expandedStates.length,se=N-1;se>=0;--se)R.push(k.expandedStates[se]);else R.push(k.contents);else k.contents&&R.push(k.contents)}}function P(D,f){const m=new Map;return q(D);function q(k){if(m.has(k))return m.get(k);const N=R(k);return m.set(k,N),N}function R(k){if(Array.isArray(k))return f(k.map(q));if(k.type==="concat"||k.type==="fill"){const N=k.parts.map(q);return f(Object.assign(Object.assign({},k),{},{parts:N}))}if(k.type==="if-break"){const N=k.breakContents&&q(k.breakContents),se=k.flatContents&&q(k.flatContents);return f(Object.assign(Object.assign({},k),{},{breakContents:N,flatContents:se}))}if(k.type==="group"&&k.expandedStates){const N=k.expandedStates.map(q),se=N[0];return f(Object.assign(Object.assign({},k),{},{contents:se,expandedStates:N}))}if(k.contents){const N=q(k.contents);return f(Object.assign(Object.assign({},k),{},{contents:N}))}return f(k)}}function b(D,f,m){let q=m,R=!1;function k(N){const se=f(N);if(se!==void 0&&(R=!0,q=se),R)return!1}return E(D,k),q}function p(D){if(D.type==="group"&&D.break||D.type==="line"&&D.hard||D.type==="break-parent")return!0}function Y(D){return b(D,p,!1)}function re(D){if(D.length>0){const f=W(D);!f.expandedStates&&!f.break&&(f.break="propagated")}return null}function G(D){const f=new Set,m=[];function q(k){if(k.type==="break-parent"&&re(m),k.type==="group"){if(m.push(k),f.has(k))return!1;f.add(k)}}function R(k){k.type==="group"&&m.pop().break&&re(m)}E(D,q,R,!0)}function ge(D){return D.type==="line"&&!D.hard?D.soft?"":" ":D.type==="if-break"?D.flatContents||"":D}function _e(D){return P(D,ge)}var pe=(D,f)=>D&&D.type==="line"&&D.hard&&f&&f.type==="break-parent";function fe(D){if(!D)return D;if(ee(D)||D.type==="fill"){const f=w(D);for(;f.length>1&&pe(...f.slice(-2));)f.length-=2;if(f.length>0){const m=fe(W(f));f[f.length-1]=m}return Array.isArray(D)?f:Object.assign(Object.assign({},D),{},{parts:f})}switch(D.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const f=fe(D.contents);return Object.assign(Object.assign({},D),{},{contents:f})}case"if-break":{const f=fe(D.breakContents),m=fe(D.flatContents);return Object.assign(Object.assign({},D),{},{breakContents:f,flatContents:m})}}return D}function Ze(D){return fe(Z(D))}function V(D){switch(D.type){case"fill":if(D.parts.every(m=>m===""))return"";break;case"group":if(!D.contents&&!D.id&&!D.break&&!D.expandedStates)return"";if(D.contents.type==="group"&&D.contents.id===D.id&&D.contents.break===D.break&&D.contents.expandedStates===D.expandedStates)return D.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!D.contents)return"";break;case"if-break":if(!D.flatContents&&!D.breakContents)return"";break}if(!ee(D))return D;const f=[];for(const m of w(D)){if(!m)continue;const[q,...R]=ee(m)?w(m):[m];typeof q=="string"&&typeof W(f)=="string"?f[f.length-1]+=q:f.push(q),f.push(...R)}return f.length===0?"":f.length===1?f[0]:Array.isArray(D)?f:Object.assign(Object.assign({},D),{},{parts:f})}function Z(D){return P(D,f=>V(f))}function x(D){const f=[],m=D.filter(Boolean);for(;m.length>0;){const q=m.shift();if(q){if(ee(q)){m.unshift(...w(q));continue}if(f.length>0&&typeof W(f)=="string"&&typeof q=="string"){f[f.length-1]+=q;continue}f.push(q)}}return f}function oe(D){return P(D,f=>Array.isArray(f)?x(f):f.parts?Object.assign(Object.assign({},f),{},{parts:x(f.parts)}):f)}function v(D){return P(D,f=>typeof f=="string"&&f.includes(`
`)?g(f):f)}function g(D){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;return U(f,D.split(`
`)).parts}function T(D){if(D.type==="line")return!0}function M(D){return b(D,T,!1)}I.exports={isConcat:ee,getDocParts:w,willBreak:Y,traverseDoc:E,findInDoc:b,mapDoc:P,propagateBreaks:G,removeLines:_e,stripTrailingHardline:Ze,normalizeParts:x,normalizeDoc:oe,cleanDoc:Z,replaceTextEndOfLine:g,replaceEndOfLine:v,canBreak:M}}}),it=j({"src/document/doc-printer.js"(F,I){K();var{convertEndOfLineToChars:W}=He(),z=Me(),U=Et(),{fill:ee,cursor:w,indent:h}=ye(),{isConcat:E,getDocParts:P}=Je(),b,p=1,Y=2;function re(){return{value:"",length:0,queue:[]}}function G(V,Z){return _e(V,{type:"indent"},Z)}function ge(V,Z,x){return Z===Number.NEGATIVE_INFINITY?V.root||re():Z<0?_e(V,{type:"dedent"},x):Z?Z.type==="root"?Object.assign(Object.assign({},V),{},{root:V}):_e(V,{type:typeof Z=="string"?"stringAlign":"numberAlign",n:Z},x):V}function _e(V,Z,x){const oe=Z.type==="dedent"?V.queue.slice(0,-1):[...V.queue,Z];let v="",g=0,T=0,M=0;for(const N of oe)switch(N.type){case"indent":m(),x.useTabs?D(1):f(x.tabWidth);break;case"stringAlign":m(),v+=N.n,g+=N.n.length;break;case"numberAlign":T+=1,M+=N.n;break;default:throw new Error(`Unexpected type '${N.type}'`)}return R(),Object.assign(Object.assign({},V),{},{value:v,length:g,queue:oe});function D(N){v+="	".repeat(N),g+=x.tabWidth*N}function f(N){v+=" ".repeat(N),g+=N}function m(){x.useTabs?q():R()}function q(){T>0&&D(T),k()}function R(){M>0&&f(M),k()}function k(){T=0,M=0}}function pe(V){if(V.length===0)return 0;let Z=0;for(;V.length>0&&typeof z(V)=="string"&&/^[\t ]*$/.test(z(V));)Z+=V.pop().length;if(V.length>0&&typeof z(V)=="string"){const x=z(V).replace(/[\t ]*$/,"");Z+=z(V).length-x.length,V[V.length-1]=x}return Z}function fe(V,Z,x,oe,v){let g=Z.length;const T=[V],M=[];for(;x>=0;){if(T.length===0){if(g===0)return!0;T.push(Z[--g]);continue}const{mode:D,doc:f}=T.pop();if(typeof f=="string")M.push(f),x-=U(f);else if(E(f)||f.type==="fill"){const m=P(f);for(let q=m.length-1;q>=0;q--)T.push({mode:D,doc:m[q]})}else switch(f.type){case"indent":case"align":case"indent-if-break":case"label":T.push({mode:D,doc:f.contents});break;case"trim":x+=pe(M);break;case"group":{if(v&&f.break)return!1;const m=f.break?p:D,q=f.expandedStates&&m===p?z(f.expandedStates):f.contents;T.push({mode:m,doc:q});break}case"if-break":{const q=(f.groupId?b[f.groupId]||Y:D)===p?f.breakContents:f.flatContents;q&&T.push({mode:D,doc:q});break}case"line":if(D===p||f.hard)return!0;f.soft||(M.push(" "),x--);break;case"line-suffix":oe=!0;break;case"line-suffix-boundary":if(oe)return!1;break}}return!1}function Ze(V,Z){b={};const x=Z.printWidth,oe=W(Z.endOfLine);let v=0;const g=[{ind:re(),mode:p,doc:V}],T=[];let M=!1;const D=[];for(;g.length>0;){const{ind:m,mode:q,doc:R}=g.pop();if(typeof R=="string"){const k=oe!==`
`?R.replace(/\n/g,oe):R;T.push(k),v+=U(k)}else if(E(R)){const k=P(R);for(let N=k.length-1;N>=0;N--)g.push({ind:m,mode:q,doc:k[N]})}else switch(R.type){case"cursor":T.push(w.placeholder);break;case"indent":g.push({ind:G(m,Z),mode:q,doc:R.contents});break;case"align":g.push({ind:ge(m,R.n,Z),mode:q,doc:R.contents});break;case"trim":v-=pe(T);break;case"group":switch(q){case Y:if(!M){g.push({ind:m,mode:R.break?p:Y,doc:R.contents});break}case p:{M=!1;const k={ind:m,mode:Y,doc:R.contents},N=x-v,se=D.length>0;if(!R.break&&fe(k,g,N,se))g.push(k);else if(R.expandedStates){const Te=z(R.expandedStates);if(R.break){g.push({ind:m,mode:p,doc:Te});break}else for(let he=1;he<R.expandedStates.length+1;he++)if(he>=R.expandedStates.length){g.push({ind:m,mode:p,doc:Te});break}else{const nt=R.expandedStates[he],Xe={ind:m,mode:Y,doc:nt};if(fe(Xe,g,N,se)){g.push(Xe);break}}}else g.push({ind:m,mode:p,doc:R.contents});break}}R.id&&(b[R.id]=z(g).mode);break;case"fill":{const k=x-v,{parts:N}=R;if(N.length===0)break;const[se,Te]=N,he={ind:m,mode:Y,doc:se},nt={ind:m,mode:p,doc:se},Xe=fe(he,[],k,D.length>0,!0);if(N.length===1){Xe?g.push(he):g.push(nt);break}const lt={ind:m,mode:Y,doc:Te},ht={ind:m,mode:p,doc:Te};if(N.length===2){Xe?g.push(lt,he):g.push(ht,nt);break}N.splice(0,2);const ct={ind:m,mode:q,doc:ee(N)},Gt=N[0];fe({ind:m,mode:Y,doc:[se,Te,Gt]},[],k,D.length>0,!0)?g.push(ct,lt,he):Xe?g.push(ct,ht,he):g.push(ct,ht,nt);break}case"if-break":case"indent-if-break":{const k=R.groupId?b[R.groupId]:q;if(k===p){const N=R.type==="if-break"?R.breakContents:R.negate?R.contents:h(R.contents);N&&g.push({ind:m,mode:q,doc:N})}if(k===Y){const N=R.type==="if-break"?R.flatContents:R.negate?h(R.contents):R.contents;N&&g.push({ind:m,mode:q,doc:N})}break}case"line-suffix":D.push({ind:m,mode:q,doc:R.contents});break;case"line-suffix-boundary":D.length>0&&g.push({ind:m,mode:q,doc:{type:"line",hard:!0}});break;case"line":switch(q){case Y:if(R.hard)M=!0;else{R.soft||(T.push(" "),v+=1);break}case p:if(D.length>0){g.push({ind:m,mode:q,doc:R},...D.reverse()),D.length=0;break}R.literal?m.root?(T.push(oe,m.root.value),v=m.root.length):(T.push(oe),v=0):(v-=pe(T),T.push(oe+m.value),v=m.length);break}break;case"label":g.push({ind:m,mode:q,doc:R.contents});break}g.length===0&&D.length>0&&(g.push(...D.reverse()),D.length=0)}const f=T.indexOf(w.placeholder);if(f!==-1){const m=T.indexOf(w.placeholder,f+1),q=T.slice(0,f).join(""),R=T.slice(f+1,m).join(""),k=T.slice(m+1).join("");return{formatted:q+R+k,cursorNodeStart:q.length,cursorNodeText:R}}return{formatted:T.join("")}}I.exports={printDocToString:Ze}}}),Dt=j({"src/document/doc-debug.js"(F,I){K();var{isConcat:W,getDocParts:z}=Je();function U(w){if(!w)return"";if(W(w)){const h=[];for(const E of z(w))if(W(E))h.push(...U(E).parts);else{const P=U(E);P!==""&&h.push(P)}return{type:"concat",parts:h}}return w.type==="if-break"?Object.assign(Object.assign({},w),{},{breakContents:U(w.breakContents),flatContents:U(w.flatContents)}):w.type==="group"?Object.assign(Object.assign({},w),{},{contents:U(w.contents),expandedStates:w.expandedStates&&w.expandedStates.map(U)}):w.type==="fill"?{type:"fill",parts:w.parts.map(U)}:w.contents?Object.assign(Object.assign({},w),{},{contents:U(w.contents)}):w}function ee(w){const h=Object.create(null),E=new Set;return P(U(w));function P(p,Y,re){if(typeof p=="string")return JSON.stringify(p);if(W(p)){const G=z(p).map(P).filter(Boolean);return G.length===1?G[0]:`[${G.join(", ")}]`}if(p.type==="line"){const G=Array.isArray(re)&&re[Y+1]&&re[Y+1].type==="break-parent";return p.literal?G?"literalline":"literallineWithoutBreakParent":p.hard?G?"hardline":"hardlineWithoutBreakParent":p.soft?"softline":"line"}if(p.type==="break-parent")return Array.isArray(re)&&re[Y-1]&&re[Y-1].type==="line"&&re[Y-1].hard?void 0:"breakParent";if(p.type==="trim")return"trim";if(p.type==="indent")return"indent("+P(p.contents)+")";if(p.type==="align")return p.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+P(p.contents)+")":p.n<0?"dedent("+P(p.contents)+")":p.n.type==="root"?"markAsRoot("+P(p.contents)+")":"align("+JSON.stringify(p.n)+", "+P(p.contents)+")";if(p.type==="if-break")return"ifBreak("+P(p.breakContents)+(p.flatContents?", "+P(p.flatContents):"")+(p.groupId?(p.flatContents?"":', ""')+`, { groupId: ${b(p.groupId)} }`:"")+")";if(p.type==="indent-if-break"){const G=[];p.negate&&G.push("negate: true"),p.groupId&&G.push(`groupId: ${b(p.groupId)}`);const ge=G.length>0?`, { ${G.join(", ")} }`:"";return`indentIfBreak(${P(p.contents)}${ge})`}if(p.type==="group"){const G=[];p.break&&p.break!=="propagated"&&G.push("shouldBreak: true"),p.id&&G.push(`id: ${b(p.id)}`);const ge=G.length>0?`, { ${G.join(", ")} }`:"";return p.expandedStates?`conditionalGroup([${p.expandedStates.map(_e=>P(_e)).join(",")}]${ge})`:`group(${P(p.contents)}${ge})`}if(p.type==="fill")return`fill([${p.parts.map(G=>P(G)).join(", ")}])`;if(p.type==="line-suffix")return"lineSuffix("+P(p.contents)+")";if(p.type==="line-suffix-boundary")return"lineSuffixBoundary";if(p.type==="label")return`label(${JSON.stringify(p.label)}, ${P(p.contents)})`;throw new Error("Unknown doc type "+p.type)}function b(p){if(typeof p!="symbol")return JSON.stringify(String(p));if(p in h)return h[p];const Y=String(p).slice(7,-1)||"symbol";for(let re=0;;re++){const G=Y+(re>0?` #${re}`:"");if(!E.has(G))return E.add(G),h[p]=`Symbol.for(${JSON.stringify(G)})`}}}I.exports={printDocToDebug:ee}}});K(),o.exports={builders:ye(),printer:it(),utils:Je(),debug:Dt()}}});return u()})})(No);const Nu=4,si={printWidth:30,tabWidth:4,useTabs:!1};function ai(e){return Ie.printer.printDocToString(e,si).formatted}function ju(e,t="^",n=!1){const r=(n?Ke.red:Ke.green).bold,u=e.src.split(`
`),i=Math.min(u.length-1,e.getLineNumber()),o=Math.max(i-Nu,0),a=Math.min(i+Nu+1,u.length),c=u.slice(o,a);if(t){const C=" ".repeat(e.getColumnNumber())+r(t);c.splice(i-o+1,0,C)}return c.map((C,S)=>{const B=o+S+1;let y=r.reset.black(String(B));return C=B===i+1?r(C):C,`      ${y}| ${C}`}).join(`
`)}const ot=(e,t={})=>Ie.builders.group(e,{...si,...t}),Nt=e=>Ke.gray(e),Rt=new Map;function Di(e){if(Rt.has(e.id))return Rt.get(e.id);const t=(u,i)=>{if(Rt.has(u.id))return Rt.get(u.id);const{name:o,args:a,parser:c}=u.context,l=c!=null?t(c,i):Ke.red.bold("unknown");let C=(()=>{switch(o){case"string":return Ke.yellow(`"${a[0]}"`);case"regex":case"regexConcat":case"regexWrap":return Ke.redBright(`${a[0]}`);case"wrap":case"trim":{const[ie,X]=a;return ot([t(ie,i),Ie.builders.indent([Ie.builders.softline,l]),Ie.builders.softline,t(X,i)])}case"trimWhitespace":return ot([l,Nt("?w")]);case"not":return ot(["!",l]);case"opt":return ot([l,Nt("?")]);case"next":const[S]=a;return ot([l,Nt(" >> "),t(S,i)]);case"skip":const[B]=a;return ot([l,Nt(" << "),t(B,i)]);case"map":return l;case"all":case"then":{const ie=Nt(", ");return ot(["[",Ie.builders.indent([Ie.builders.softline,Ie.builders.join([ie,Ie.builders.softline],a.map(X=>t(X,i)))]),Ie.builders.softline,"]"])}case"any":case"or":{const ie=Nt("| ");return ot([[Ie.builders.join([Ie.builders.softline,Ie.builders.ifBreak(ie," "+ie)],a.map(X=>t(X,i)))]])}case"many":const[y,j]=a;let ue=j===1/0?`${y},`:`${y},${j}`;return ue=Ke.bold.gray(` {${ue}}`),ot([l,ue]);case"sepBy":return ot([l,Ie.builders.indent([" sepBy ",t(a[0],i)])]);case"lazy":{const[ie]=a,X=Yr(ie);if(i)return Ke.bold.blue(o);{const le=t(X,X.id);return Rt.set(X.id,le),le}}case"debug":return l}})();return C??(C=Ke.red.bold(o)),i&&Rt.set(u.id,C),C},n=t(e),r=ai(n);return Rt.set(e.id,r),r}function ci(e,t="",n=""){const r=e.isError?Ke.bgRed:Ke.bgGreen,u=e.isError?Ke.red:Ke.green,i=e.offset>=e.src.length,o=e.isError?"ï½˜":i?"ðŸŽ‰":"âœ“",c=" "+(e.isError?"Err":i?"Done":"Ok")+" "+o+" ",l=ot([r.bold(c),u(`	${t}	${e.offset}`),Ie.builders.softline,"	"+Ke.yellow(n)]),C=(()=>e.offset>=e.src.length?Ke.bold.greenBright(ju(e,"",e.isError)):ju(e,"^",e.isError))(),S=ot([l,Ie.builders.hardline,Ie.builders.indent([C])]);return ai(S)}function jo(e,t="",n=!1,r=console.log){const u=i=>{const o=e.parser(i),a=n?Di(e):e.context.name,c=ci(o,t,a);return r(c),o};return new Ae(u,ke("debug",e,r))}class Tn{constructor(t,n=void 0,r=0,u=!1,i=0){this.src=t,this.value=n,this.offset=r,this.isError=u,this.furthest=i}ok(t,n=0){return n+=this.offset,new Tn(this.src,t,n,!1)}err(t,n=0){const r=this.ok(t,n);return r.isError=!0,r}from(t,n=0){return n+=this.offset,new Tn(this.src,t,n,this.isError)}getColumnNumber(){const t=this.offset,n=this.src.lastIndexOf(`
`,t),r=n===-1?t:t-(n+1);return Math.max(0,r)}getLineNumber(){const t=this.src.lastIndexOf(`
`,this.offset);return t>=0?this.src.slice(0,t).split(`
`).length:0}toString(){return ci(this)}}function ke(e,t,...n){return{name:e,parser:t,args:n}}let Mo=0;const wt=new Map,vn=new Map;let $t;function Ye(e){return(!$t||$t&&e.offset>$t.offset)&&($t=e),$t}function Yr(e){return e.parser?e.parser:e.parser=e()}class Ae{constructor(t,n={}){Ou(this,"id",Mo++),Ou(this,"state"),this.parser=t,this.context=n}reset(){$t=void 0,wt.clear(),vn.clear()}parse(t){this.reset();const n=this.parser(new Tn(t));return this.state=Ye(n),this.state.isError=n.isError,this.state.isError&&console.log(this.state.toString()),n.value}getCijKey(t){return`${this.id}${t.offset}`}atLeftRecursionLimit(t){return(vn.get(this.getCijKey(t))??0)>t.src.length-t.offset}memoize(){const t=n=>{const r=this.getCijKey(n),u=vn.get(r)??0;let i=wt.get(this.id);if(i&&i.offset>=n.offset)return i;if(this.atLeftRecursionLimit(n))return n.err(void 0);vn.set(r,u+1);const o=this.parser(n);return i=wt.get(this.id),i&&i.offset>o.offset?o.offset=i.offset:i||wt.set(this.id,o),o};return new Ae(t,ke("memoize",this))}mergeMemos(){const t=n=>{let r=wt.get(this.id);if(r)return r;if(this.atLeftRecursionLimit(n))return n.err(void 0);const u=this.parser(n);return r=wt.get(this.id),r||wt.set(this.id,u),u};return new Ae(t,ke("mergeMemo",this))}then(t){if(Kt(this,t))return xt([this,t],"",r=>[r==null?void 0:r[0],r==null?void 0:r[1]]);const n=r=>{const u=this.parser(r);if(!u.isError){const i=t.parser(u);if(!i.isError)return i.ok([u.value,i.value])}return Ye(r),r.err(void 0)};return new Ae(n,ke("then",this,this,t))}or(t){if(Kt(this,t))return xt([this,t],"|");const n=r=>{const u=this.parser(r);return u.isError?t.parser(r):u};return new Ae(n,ke("or",this,this,t))}chain(t,n=!1){const r=u=>{const i=this.parser(u);return i.isError?i:i.value||n?t(i.value).parser(i):u};return new Ae(r,ke("chain",this,t))}map(t,n=!1){const r=u=>{const i=this.parser(u);return!i.isError||n?i.ok(t(i.value)):i};return new Ae(r,ke("map",this))}mapState(t){const n=r=>{const u=this.parser(r);return t(u)};return new Ae(n,ke("mapState",this))}skip(t){const n=r=>{const u=this.parser(r);if(!u.isError){const i=t.parser(u);if(!i.isError)return i.ok(u.value)}return Ye(r),r.err(void 0)};return new Ae(n,ke("skip",this,t))}next(t){const n=this.then(t).map(([,r])=>r);return n.context=ke("next",this,t),n}opt(){const t=n=>{const r=this.parser(n);return r.isError?(Ye(n),n.ok(void 0)):r};return new Ae(t,ke("opt",this))}not(t){const n=u=>this.parser(u).isError?(Ye(u),u.ok(u.value)):u.err(void 0),r=u=>{const i=this.parser(u);return i.isError?(Ye(u),i):t.parser(u).isError?i:(Ye(u),u.err(void 0))};return new Ae(t?r:n,ke("not",this,t))}wrap(t,n,r=!0){if(!r)return Lt(t,this,n);if(Kt(t,this,n))return Lo(t,this,n);const u=t.next(this).skip(n);return u.context=ke("wrap",this,t,n),u}trim(t=li,n=!0){var r;if(!n)return Lt(t,this,t);if(((r=t.context)==null?void 0:r.name)==="whitespace"){if(Kt(this,t))return xt([t,this,t],"",i=>i==null?void 0:i[2]);const u=i=>{const o=$u(i),a=this.parser(o);return a.isError?(Ye(i),i.err(void 0)):$u(a)};return new Ae(u,ke("trimWhitespace",this))}return this.wrap(t,t)}many(t=0,n=1/0){const r=u=>{const i=[];let o=u;for(let a=0;a<n;a+=1){const c=this.parser(o);if(c.isError)break;i.push(c.value),o=c}return i.length>=t?o.ok(i):(Ye(u),u.err([]))};return new Ae(r,ke("many",this,t,n))}sepBy(t,n=0,r=1/0){const u=i=>{const o=[];let a=i;for(let c=0;c<r;c+=1){const l=this.parser(a);if(l.isError)break;a=l,o.push(a.value);const C=t.parser(a);if(C.isError)break;a=C}return o.length>n?a.ok(o):(Ye(i),i.err([]))};return new Ae(u,ke("sepBy",this,t))}eof(){const t=this.skip(Io());return t.context=ke("eof",this),t}debug(t="",n=!1,r=console.log){return jo(this,t,n,r)}toString(){return Di(this)}static lazy(t){const n=r=>Yr(t).parser(r);return new Ae(n,ke("lazy",void 0,t))}}function Kt(...e){return e.every(t=>{var n,r,u,i;return(((n=t.context)==null?void 0:n.name)==="string"||((r=t.context)==null?void 0:r.name)==="regex"||((u=t.context)==null?void 0:u.name)==="whitespace")&&((i=t.context)==null?void 0:i.args)})}function $o(e){var t,n,r,u,i;if(((t=e.context)==null?void 0:t.name)==="string")return(n=e.context)==null?void 0:n.args[0].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if(((r=e.context)==null?void 0:r.name)==="regex"||((u=e.context)==null?void 0:u.name)==="whitespace")return(i=e.context)==null?void 0:i.args[0].source}function xt(e,t="",n){const r=e.map(o=>`(${$o(o)})`).join(t),u=new RegExp(r),i=pt(u,n);return t!=="|"&&(i.context=ke("regexConcat",this,u)),i}function Lo(e,t,n){const r=xt([e,t,n],"",u=>u==null?void 0:u[2]);return r.context.name="regexWrap",r}function Io(){const e=t=>t.offset>=t.src.length?t.ok(void 0):(Ye(t),t.err());return new Ae(e,ke("eof",void 0))}function et(e,t,n){const r=n.value.bind(e);n.value=function(){const u=i=>Yr(r).parser(i);return new Ae(u,ke("lazy",void 0,r))}}function jt(...e){if(Kt(...e))return xt(e,"|");const t=n=>{for(const r of e){const u=r.parser(n);if(!u.isError)return u}return Ye(n),n.err(void 0)};return new Ae(e.length===1?e[0].parser:t,ke("any",void 0,...e))}function Lt(...e){const t=n=>{const r=[];for(const u of e){const i=u.parser(n);if(i.isError)return i;i.value!==void 0&&r.push(i.value),n=i}return Ye(n),n.ok(r)};return new Ae(e.length===1?e[0].parser:t,ke("all",void 0,...e))}function be(e){const t=n=>{if(n.offset>=n.src.length)return n.err(void 0);const r=n.src.slice(n.offset,n.offset+e.length);return r===e?n.ok(r,r.length):(Ye(n),n.err(void 0))};return new Ae(t,ke("string",void 0,e))}function pt(e,t=n=>n==null?void 0:n[0]){const n=e.flags.replace(/y/g,""),r=new RegExp(e,n+"y"),u=i=>{if(i.offset>=i.src.length)return i.err(void 0);r.lastIndex=i.offset;const o=t(i.src.match(r));return o?i.ok(o,r.lastIndex-i.offset):o===""?i.ok(void 0):(Ye(i),i.err(void 0))};return new Ae(u,ke("regex",void 0,e))}const Mu=/\s*/y,$u=e=>{var t;if(e.offset>=e.src.length)return e;Mu.lastIndex=e.offset;const n=((t=e.src.match(Mu))==null?void 0:t[0])??"";return e.ok(e.value,n.length)},li=pt(/\s*/);li.context.name="whitespace";var Wo=Object.defineProperty,Ho=(e,t,n)=>t in e?Wo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zo=(e,t,n)=>(Ho(e,typeof t!="symbol"?t+"":t,n),n),Uo=Object.defineProperty,Vo=Object.getOwnPropertyDescriptor,tt=(e,t,n,r)=>{for(var u=r>1?void 0:r?Vo(t,n):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(u=(r?o(t,n,u):o(u))||u);return r&&u&&Uo(t,n,u),u};const fi={"|":"alternation",",":"concatenation","-":"minus","<<":"skip",">>":"next","*":"many","+":"many1","?":"optional","?w":"optionalWhitespace"},Jo=([e,t])=>t.length===0?e:t.reduce((n,[r,u])=>({type:fi[r],value:[n,u]}),e),Go=([e,t])=>t===void 0?e:{type:fi[t],value:e};function Zo(e){return e.mapState(t=>(t.value&&(t.value.column=t.getColumnNumber(),t.value.line=t.getLineNumber(),t.value.offset=t.offset),t))}const Xo={debug:!1,comments:!0};class Ge{constructor(t){zo(this,"options"),this.options={...Xo,...t??{}}}identifier(){return pt(/[_a-zA-Z][_a-zA-Z0-9]*/).trim()}literal(){return this.trimBigComment(jt(pt(/[^"]+/).wrap(be('"'),be('"')),pt(/[^']+/).wrap(be("'"),be("'"))).map(t=>({type:"literal",value:t})))}epsilon(){return jt(be("epsilon"),be("Îµ")).trim().map(()=>({type:"epsilon",value:void 0}))}nonterminal(){return this.identifier().map(t=>({type:"nonterminal",value:t}))}bigComment(){return pt(/\/\*[^\*]*\*\//).trim()}comment(){return pt(/\/\/.*/).or(this.bigComment()).trim()}trimBigComment(t){return t.trim(this.bigComment().many(),!1).map(([n,r,u])=>(r.comment={left:n,right:u},r))}group(){return this.rhs().trim().wrap(be("("),be(")")).map(t=>({type:"group",value:t}))}regex(){return pt(/[^\/]*/).wrap(be("/"),be("/")).then(pt(/[gimuy]*/).opt()).map(([t,n])=>({type:"regex",value:new RegExp(t,n)}))}optionalGroup(){return this.rhs().trim().wrap(be("["),be("]")).map(t=>({type:"optional",value:{type:"group",value:t}}))}manyGroup(){return this.rhs().trim().wrap(be("{"),be("}")).map(t=>({type:"many",value:{type:"group",value:t}}))}lhs(){return this.identifier()}term(){return Zo(jt(this.epsilon(),this.group(),this.optionalGroup(),this.manyGroup(),this.nonterminal(),this.literal(),this.regex()))}factor(){return this.trimBigComment(Lt(this.term(),jt(be("?w").trim(),be("?").trim(),be("*").trim(),be("+").trim()).opt()).map(Go))}binaryFactor(){return Lt(this.factor(),Lt(jt(be("<<").trim(),be(">>").trim(),be("-").trim()),this.factor()).many()).map(Jo)}concatenation(){return this.binaryFactor().sepBy(be(",").trim()).map(t=>t.length===1?t[0]:{type:"concatenation",value:t})}alternation(){return this.concatenation().sepBy(be("|").trim()).map(t=>t.length===1?t[0]:{type:"alternation",value:t})}rhs(){return this.alternation()}productionRule(){return Lt(this.lhs(),be("=").trim(),this.rhs(),jt(be(";"),be(".")).trim()).map(([t,,n])=>({name:t,expression:n}))}grammar(){return this.productionRule().trim(this.comment().many(),!1).map(([t,n,r])=>(n.comment={above:t,below:r},n)).many(1)}}tt([et],Ge.prototype,"bigComment",1);tt([et],Ge.prototype,"comment",1);tt([et],Ge.prototype,"group",1);tt([et],Ge.prototype,"regex",1);tt([et],Ge.prototype,"optionalGroup",1);tt([et],Ge.prototype,"manyGroup",1);tt([et],Ge.prototype,"lhs",1);tt([et],Ge.prototype,"term",1);tt([et],Ge.prototype,"factor",1);tt([et],Ge.prototype,"binaryFactor",1);tt([et],Ge.prototype,"concatenation",1);tt([et],Ge.prototype,"alternation",1);tt([et],Ge.prototype,"rhs",1);tt([et],Ge.prototype,"productionRule",1);tt([et],Ge.prototype,"grammar",1);function Qo(e){const t=new Set,n=[];function r(i,o){if(o.has(i)||t.has(i))return;o.add(i);const a=e.get(i);if(!a)return;const c=a.expression;if(c.type==="nonterminal")r(c.value,o);else if(c.value instanceof Array)for(const l of c.value)l.type==="nonterminal"&&r(l.value,o);t.add(i),o.delete(i),n.unshift(e.get(i))}for(const[i]of e)r(i,new Set);const u=new Map;for(const i of n)u.set(i.name,i);return u}function di(e){const t=new Ge().grammar().eof(),n=t.parse(e);if(!n)return[t];const r=n.reduce((u,i,o)=>u.set(i.name,i),new Map);return[t,r]}var $e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ce(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function te(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var u=[null];u.push.apply(u,arguments);var i=Function.bind.apply(t,u);return new i}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var u=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,u.get?u:{enumerable:!0,get:function(){return e[r]}})}),n}var ae={},Yo={get exports(){return ae},set exports(e){ae=e}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Object.getOwnPropertyNames,r=(i,o)=>function(){return o||(0,i[n(i)[0]])((o={exports:{}}).exports,o),o.exports},u=r({"dist/_doc.js.umd.js"(i,o){var a=Object.create,c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyNames,S=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,y=(F,I)=>function(){return F&&(I=(0,F[C(F)[0]])(F=0)),I},j=(F,I)=>function(){return I||(0,F[C(F)[0]])((I={exports:{}}).exports,I),I.exports},ue=(F,I)=>{for(var W in I)c(F,W,{get:I[W],enumerable:!0})},ie=(F,I,W,z)=>{if(I&&typeof I=="object"||typeof I=="function")for(let U of C(I))!B.call(F,U)&&U!==W&&c(F,U,{get:()=>I[U],enumerable:!(z=l(I,U))||z.enumerable});return F},X=(F,I,W)=>(W=F!=null?a(S(F)):{},ie(I||!F||!F.__esModule?c(W,"default",{value:F,enumerable:!0}):W,F)),le=F=>ie(c({},"__esModule",{value:!0}),F),K=y({"<define:process>"(){}}),ye=j({"src/document/doc-builders.js"(F,I){K();function W(M){return{type:"concat",parts:M}}function z(M){return{type:"indent",contents:M}}function U(M,D){return{type:"align",contents:D,n:M}}function ee(M){let D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:D.id,contents:M,break:Boolean(D.shouldBreak),expandedStates:D.expandedStates}}function w(M){return U(Number.NEGATIVE_INFINITY,M)}function h(M){return U({type:"root"},M)}function E(M){return U(-1,M)}function P(M,D){return ee(M[0],Object.assign(Object.assign({},D),{},{expandedStates:M}))}function b(M){return{type:"fill",parts:M}}function p(M,D){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:M,flatContents:D,groupId:f.groupId}}function Y(M,D){return{type:"indent-if-break",contents:M,groupId:D.groupId,negate:D.negate}}function re(M){return{type:"line-suffix",contents:M}}var G={type:"line-suffix-boundary"},ge={type:"break-parent"},_e={type:"trim"},pe={type:"line",hard:!0},fe={type:"line",hard:!0,literal:!0},Ze={type:"line"},V={type:"line",soft:!0},Z=W([pe,ge]),x=W([fe,ge]),oe={type:"cursor",placeholder:Symbol("cursor")};function v(M,D){const f=[];for(let m=0;m<D.length;m++)m!==0&&f.push(M),f.push(D[m]);return W(f)}function g(M,D,f){let m=M;if(D>0){for(let q=0;q<Math.floor(D/f);++q)m=z(m);m=U(D%f,m),m=U(Number.NEGATIVE_INFINITY,m)}return m}function T(M,D){return{type:"label",label:M,contents:D}}I.exports={concat:W,join:v,line:Ze,softline:V,hardline:Z,literalline:x,group:ee,conditionalGroup:P,fill:b,lineSuffix:re,lineSuffixBoundary:G,cursor:oe,breakParent:ge,ifBreak:p,trim:_e,indent:z,indentIfBreak:Y,align:U,addAlignmentToDoc:g,markAsRoot:h,dedentToRoot:w,dedent:E,hardlineWithoutBreakParent:pe,literallineWithoutBreakParent:fe,label:T}}}),He=j({"src/common/end-of-line.js"(F,I){K();function W(w){const h=w.indexOf("\r");return h>=0?w.charAt(h+1)===`
`?"crlf":"cr":"lf"}function z(w){switch(w){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function U(w,h){let E;switch(h){case`
`:E=/\n/g;break;case"\r":E=/\r/g;break;case`\r
`:E=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(h)}.`)}const P=w.match(E);return P?P.length:0}function ee(w){return w.replace(/\r\n?/g,`
`)}I.exports={guessEndOfLine:W,convertEndOfLineToChars:z,countEndOfLineChars:U,normalizeEndOfLine:ee}}}),Me=j({"src/utils/get-last.js"(F,I){K();var W=z=>z[z.length-1];I.exports=W}});function Re(){let{onlyFirst:F=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(I,F?void 0:"g")}var Ve=y({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){K()}});function we(F){if(typeof F!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof F}\``);return F.replace(Re(),"")}var ut=y({"node_modules/strip-ansi/index.js"(){K(),Ve()}});function $(F){return Number.isInteger(F)?F>=4352&&(F<=4447||F===9001||F===9002||11904<=F&&F<=12871&&F!==12351||12880<=F&&F<=19903||19968<=F&&F<=42182||43360<=F&&F<=43388||44032<=F&&F<=55203||63744<=F&&F<=64255||65040<=F&&F<=65049||65072<=F&&F<=65131||65281<=F&&F<=65376||65504<=F&&F<=65510||110592<=F&&F<=110593||127488<=F&&F<=127569||131072<=F&&F<=262141):!1}var s=y({"node_modules/is-fullwidth-code-point/index.js"(){K()}}),A=j({"node_modules/emoji-regex/index.js"(F,I){K(),I.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),L={};ue(L,{default:()=>J});function J(F){if(typeof F!="string"||F.length===0||(F=we(F),F.length===0))return 0;F=F.replace((0,ce.default)(),"  ");let I=0;for(let W=0;W<F.length;W++){const z=F.codePointAt(W);z<=31||z>=127&&z<=159||z>=768&&z<=879||(z>65535&&W++,I+=$(z)?2:1)}return I}var ce,Be=y({"node_modules/string-width/index.js"(){K(),ut(),s(),ce=X(A())}}),Et=j({"src/utils/get-string-width.js"(F,I){K();var W=(Be(),le(L)).default,z=/[^\x20-\x7F]/;function U(ee){return ee?z.test(ee)?W(ee):ee.length:0}I.exports=U}}),Je=j({"src/document/doc-utils.js"(F,I){K();var W=Me(),{literalline:z,join:U}=ye(),ee=D=>Array.isArray(D)||D&&D.type==="concat",w=D=>{if(Array.isArray(D))return D;if(D.type!=="concat"&&D.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return D.parts},h={};function E(D,f,m,q){const R=[D];for(;R.length>0;){const k=R.pop();if(k===h){m(R.pop());continue}if(m&&R.push(k,h),!f||f(k)!==!1)if(ee(k)||k.type==="fill"){const N=w(k);for(let se=N.length,Te=se-1;Te>=0;--Te)R.push(N[Te])}else if(k.type==="if-break")k.flatContents&&R.push(k.flatContents),k.breakContents&&R.push(k.breakContents);else if(k.type==="group"&&k.expandedStates)if(q)for(let N=k.expandedStates.length,se=N-1;se>=0;--se)R.push(k.expandedStates[se]);else R.push(k.contents);else k.contents&&R.push(k.contents)}}function P(D,f){const m=new Map;return q(D);function q(k){if(m.has(k))return m.get(k);const N=R(k);return m.set(k,N),N}function R(k){if(Array.isArray(k))return f(k.map(q));if(k.type==="concat"||k.type==="fill"){const N=k.parts.map(q);return f(Object.assign(Object.assign({},k),{},{parts:N}))}if(k.type==="if-break"){const N=k.breakContents&&q(k.breakContents),se=k.flatContents&&q(k.flatContents);return f(Object.assign(Object.assign({},k),{},{breakContents:N,flatContents:se}))}if(k.type==="group"&&k.expandedStates){const N=k.expandedStates.map(q),se=N[0];return f(Object.assign(Object.assign({},k),{},{contents:se,expandedStates:N}))}if(k.contents){const N=q(k.contents);return f(Object.assign(Object.assign({},k),{},{contents:N}))}return f(k)}}function b(D,f,m){let q=m,R=!1;function k(N){const se=f(N);if(se!==void 0&&(R=!0,q=se),R)return!1}return E(D,k),q}function p(D){if(D.type==="group"&&D.break||D.type==="line"&&D.hard||D.type==="break-parent")return!0}function Y(D){return b(D,p,!1)}function re(D){if(D.length>0){const f=W(D);!f.expandedStates&&!f.break&&(f.break="propagated")}return null}function G(D){const f=new Set,m=[];function q(k){if(k.type==="break-parent"&&re(m),k.type==="group"){if(m.push(k),f.has(k))return!1;f.add(k)}}function R(k){k.type==="group"&&m.pop().break&&re(m)}E(D,q,R,!0)}function ge(D){return D.type==="line"&&!D.hard?D.soft?"":" ":D.type==="if-break"?D.flatContents||"":D}function _e(D){return P(D,ge)}var pe=(D,f)=>D&&D.type==="line"&&D.hard&&f&&f.type==="break-parent";function fe(D){if(!D)return D;if(ee(D)||D.type==="fill"){const f=w(D);for(;f.length>1&&pe(...f.slice(-2));)f.length-=2;if(f.length>0){const m=fe(W(f));f[f.length-1]=m}return Array.isArray(D)?f:Object.assign(Object.assign({},D),{},{parts:f})}switch(D.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const f=fe(D.contents);return Object.assign(Object.assign({},D),{},{contents:f})}case"if-break":{const f=fe(D.breakContents),m=fe(D.flatContents);return Object.assign(Object.assign({},D),{},{breakContents:f,flatContents:m})}}return D}function Ze(D){return fe(Z(D))}function V(D){switch(D.type){case"fill":if(D.parts.every(m=>m===""))return"";break;case"group":if(!D.contents&&!D.id&&!D.break&&!D.expandedStates)return"";if(D.contents.type==="group"&&D.contents.id===D.id&&D.contents.break===D.break&&D.contents.expandedStates===D.expandedStates)return D.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!D.contents)return"";break;case"if-break":if(!D.flatContents&&!D.breakContents)return"";break}if(!ee(D))return D;const f=[];for(const m of w(D)){if(!m)continue;const[q,...R]=ee(m)?w(m):[m];typeof q=="string"&&typeof W(f)=="string"?f[f.length-1]+=q:f.push(q),f.push(...R)}return f.length===0?"":f.length===1?f[0]:Array.isArray(D)?f:Object.assign(Object.assign({},D),{},{parts:f})}function Z(D){return P(D,f=>V(f))}function x(D){const f=[],m=D.filter(Boolean);for(;m.length>0;){const q=m.shift();if(q){if(ee(q)){m.unshift(...w(q));continue}if(f.length>0&&typeof W(f)=="string"&&typeof q=="string"){f[f.length-1]+=q;continue}f.push(q)}}return f}function oe(D){return P(D,f=>Array.isArray(f)?x(f):f.parts?Object.assign(Object.assign({},f),{},{parts:x(f.parts)}):f)}function v(D){return P(D,f=>typeof f=="string"&&f.includes(`
`)?g(f):f)}function g(D){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;return U(f,D.split(`
`)).parts}function T(D){if(D.type==="line")return!0}function M(D){return b(D,T,!1)}I.exports={isConcat:ee,getDocParts:w,willBreak:Y,traverseDoc:E,findInDoc:b,mapDoc:P,propagateBreaks:G,removeLines:_e,stripTrailingHardline:Ze,normalizeParts:x,normalizeDoc:oe,cleanDoc:Z,replaceTextEndOfLine:g,replaceEndOfLine:v,canBreak:M}}}),it=j({"src/document/doc-printer.js"(F,I){K();var{convertEndOfLineToChars:W}=He(),z=Me(),U=Et(),{fill:ee,cursor:w,indent:h}=ye(),{isConcat:E,getDocParts:P}=Je(),b,p=1,Y=2;function re(){return{value:"",length:0,queue:[]}}function G(V,Z){return _e(V,{type:"indent"},Z)}function ge(V,Z,x){return Z===Number.NEGATIVE_INFINITY?V.root||re():Z<0?_e(V,{type:"dedent"},x):Z?Z.type==="root"?Object.assign(Object.assign({},V),{},{root:V}):_e(V,{type:typeof Z=="string"?"stringAlign":"numberAlign",n:Z},x):V}function _e(V,Z,x){const oe=Z.type==="dedent"?V.queue.slice(0,-1):[...V.queue,Z];let v="",g=0,T=0,M=0;for(const N of oe)switch(N.type){case"indent":m(),x.useTabs?D(1):f(x.tabWidth);break;case"stringAlign":m(),v+=N.n,g+=N.n.length;break;case"numberAlign":T+=1,M+=N.n;break;default:throw new Error(`Unexpected type '${N.type}'`)}return R(),Object.assign(Object.assign({},V),{},{value:v,length:g,queue:oe});function D(N){v+="	".repeat(N),g+=x.tabWidth*N}function f(N){v+=" ".repeat(N),g+=N}function m(){x.useTabs?q():R()}function q(){T>0&&D(T),k()}function R(){M>0&&f(M),k()}function k(){T=0,M=0}}function pe(V){if(V.length===0)return 0;let Z=0;for(;V.length>0&&typeof z(V)=="string"&&/^[\t ]*$/.test(z(V));)Z+=V.pop().length;if(V.length>0&&typeof z(V)=="string"){const x=z(V).replace(/[\t ]*$/,"");Z+=z(V).length-x.length,V[V.length-1]=x}return Z}function fe(V,Z,x,oe,v){let g=Z.length;const T=[V],M=[];for(;x>=0;){if(T.length===0){if(g===0)return!0;T.push(Z[--g]);continue}const{mode:D,doc:f}=T.pop();if(typeof f=="string")M.push(f),x-=U(f);else if(E(f)||f.type==="fill"){const m=P(f);for(let q=m.length-1;q>=0;q--)T.push({mode:D,doc:m[q]})}else switch(f.type){case"indent":case"align":case"indent-if-break":case"label":T.push({mode:D,doc:f.contents});break;case"trim":x+=pe(M);break;case"group":{if(v&&f.break)return!1;const m=f.break?p:D,q=f.expandedStates&&m===p?z(f.expandedStates):f.contents;T.push({mode:m,doc:q});break}case"if-break":{const q=(f.groupId?b[f.groupId]||Y:D)===p?f.breakContents:f.flatContents;q&&T.push({mode:D,doc:q});break}case"line":if(D===p||f.hard)return!0;f.soft||(M.push(" "),x--);break;case"line-suffix":oe=!0;break;case"line-suffix-boundary":if(oe)return!1;break}}return!1}function Ze(V,Z){b={};const x=Z.printWidth,oe=W(Z.endOfLine);let v=0;const g=[{ind:re(),mode:p,doc:V}],T=[];let M=!1;const D=[];for(;g.length>0;){const{ind:m,mode:q,doc:R}=g.pop();if(typeof R=="string"){const k=oe!==`
`?R.replace(/\n/g,oe):R;T.push(k),v+=U(k)}else if(E(R)){const k=P(R);for(let N=k.length-1;N>=0;N--)g.push({ind:m,mode:q,doc:k[N]})}else switch(R.type){case"cursor":T.push(w.placeholder);break;case"indent":g.push({ind:G(m,Z),mode:q,doc:R.contents});break;case"align":g.push({ind:ge(m,R.n,Z),mode:q,doc:R.contents});break;case"trim":v-=pe(T);break;case"group":switch(q){case Y:if(!M){g.push({ind:m,mode:R.break?p:Y,doc:R.contents});break}case p:{M=!1;const k={ind:m,mode:Y,doc:R.contents},N=x-v,se=D.length>0;if(!R.break&&fe(k,g,N,se))g.push(k);else if(R.expandedStates){const Te=z(R.expandedStates);if(R.break){g.push({ind:m,mode:p,doc:Te});break}else for(let he=1;he<R.expandedStates.length+1;he++)if(he>=R.expandedStates.length){g.push({ind:m,mode:p,doc:Te});break}else{const nt=R.expandedStates[he],Xe={ind:m,mode:Y,doc:nt};if(fe(Xe,g,N,se)){g.push(Xe);break}}}else g.push({ind:m,mode:p,doc:R.contents});break}}R.id&&(b[R.id]=z(g).mode);break;case"fill":{const k=x-v,{parts:N}=R;if(N.length===0)break;const[se,Te]=N,he={ind:m,mode:Y,doc:se},nt={ind:m,mode:p,doc:se},Xe=fe(he,[],k,D.length>0,!0);if(N.length===1){Xe?g.push(he):g.push(nt);break}const lt={ind:m,mode:Y,doc:Te},ht={ind:m,mode:p,doc:Te};if(N.length===2){Xe?g.push(lt,he):g.push(ht,nt);break}N.splice(0,2);const ct={ind:m,mode:q,doc:ee(N)},Gt=N[0];fe({ind:m,mode:Y,doc:[se,Te,Gt]},[],k,D.length>0,!0)?g.push(ct,lt,he):Xe?g.push(ct,ht,he):g.push(ct,ht,nt);break}case"if-break":case"indent-if-break":{const k=R.groupId?b[R.groupId]:q;if(k===p){const N=R.type==="if-break"?R.breakContents:R.negate?R.contents:h(R.contents);N&&g.push({ind:m,mode:q,doc:N})}if(k===Y){const N=R.type==="if-break"?R.flatContents:R.negate?h(R.contents):R.contents;N&&g.push({ind:m,mode:q,doc:N})}break}case"line-suffix":D.push({ind:m,mode:q,doc:R.contents});break;case"line-suffix-boundary":D.length>0&&g.push({ind:m,mode:q,doc:{type:"line",hard:!0}});break;case"line":switch(q){case Y:if(R.hard)M=!0;else{R.soft||(T.push(" "),v+=1);break}case p:if(D.length>0){g.push({ind:m,mode:q,doc:R},...D.reverse()),D.length=0;break}R.literal?m.root?(T.push(oe,m.root.value),v=m.root.length):(T.push(oe),v=0):(v-=pe(T),T.push(oe+m.value),v=m.length);break}break;case"label":g.push({ind:m,mode:q,doc:R.contents});break}g.length===0&&D.length>0&&(g.push(...D.reverse()),D.length=0)}const f=T.indexOf(w.placeholder);if(f!==-1){const m=T.indexOf(w.placeholder,f+1),q=T.slice(0,f).join(""),R=T.slice(f+1,m).join(""),k=T.slice(m+1).join("");return{formatted:q+R+k,cursorNodeStart:q.length,cursorNodeText:R}}return{formatted:T.join("")}}I.exports={printDocToString:Ze}}}),Dt=j({"src/document/doc-debug.js"(F,I){K();var{isConcat:W,getDocParts:z}=Je();function U(w){if(!w)return"";if(W(w)){const h=[];for(const E of z(w))if(W(E))h.push(...U(E).parts);else{const P=U(E);P!==""&&h.push(P)}return{type:"concat",parts:h}}return w.type==="if-break"?Object.assign(Object.assign({},w),{},{breakContents:U(w.breakContents),flatContents:U(w.flatContents)}):w.type==="group"?Object.assign(Object.assign({},w),{},{contents:U(w.contents),expandedStates:w.expandedStates&&w.expandedStates.map(U)}):w.type==="fill"?{type:"fill",parts:w.parts.map(U)}:w.contents?Object.assign(Object.assign({},w),{},{contents:U(w.contents)}):w}function ee(w){const h=Object.create(null),E=new Set;return P(U(w));function P(p,Y,re){if(typeof p=="string")return JSON.stringify(p);if(W(p)){const G=z(p).map(P).filter(Boolean);return G.length===1?G[0]:`[${G.join(", ")}]`}if(p.type==="line"){const G=Array.isArray(re)&&re[Y+1]&&re[Y+1].type==="break-parent";return p.literal?G?"literalline":"literallineWithoutBreakParent":p.hard?G?"hardline":"hardlineWithoutBreakParent":p.soft?"softline":"line"}if(p.type==="break-parent")return Array.isArray(re)&&re[Y-1]&&re[Y-1].type==="line"&&re[Y-1].hard?void 0:"breakParent";if(p.type==="trim")return"trim";if(p.type==="indent")return"indent("+P(p.contents)+")";if(p.type==="align")return p.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+P(p.contents)+")":p.n<0?"dedent("+P(p.contents)+")":p.n.type==="root"?"markAsRoot("+P(p.contents)+")":"align("+JSON.stringify(p.n)+", "+P(p.contents)+")";if(p.type==="if-break")return"ifBreak("+P(p.breakContents)+(p.flatContents?", "+P(p.flatContents):"")+(p.groupId?(p.flatContents?"":', ""')+`, { groupId: ${b(p.groupId)} }`:"")+")";if(p.type==="indent-if-break"){const G=[];p.negate&&G.push("negate: true"),p.groupId&&G.push(`groupId: ${b(p.groupId)}`);const ge=G.length>0?`, { ${G.join(", ")} }`:"";return`indentIfBreak(${P(p.contents)}${ge})`}if(p.type==="group"){const G=[];p.break&&p.break!=="propagated"&&G.push("shouldBreak: true"),p.id&&G.push(`id: ${b(p.id)}`);const ge=G.length>0?`, { ${G.join(", ")} }`:"";return p.expandedStates?`conditionalGroup([${p.expandedStates.map(_e=>P(_e)).join(",")}]${ge})`:`group(${P(p.contents)}${ge})`}if(p.type==="fill")return`fill([${p.parts.map(G=>P(G)).join(", ")}])`;if(p.type==="line-suffix")return"lineSuffix("+P(p.contents)+")";if(p.type==="line-suffix-boundary")return"lineSuffixBoundary";if(p.type==="label")return`label(${JSON.stringify(p.label)}, ${P(p.contents)})`;throw new Error("Unknown doc type "+p.type)}function b(p){if(typeof p!="symbol")return JSON.stringify(String(p));if(p in h)return h[p];const Y=String(p).slice(7,-1)||"symbol";for(let re=0;;re++){const G=Y+(re>0?` #${re}`:"");if(!E.has(G))return E.add(G),h[p]=`Symbol.for(${JSON.stringify(G)})`}}}I.exports={printDocToDebug:ee}}});K(),o.exports={builders:ye(),printer:it(),utils:Je(),debug:Dt()}}});return u()})})(Yo);function gi(e,t){function n(r){if(!r)return"";const i=(()=>{switch(r.type){case"literal":if(r.value==='"')return ae.builders.group(["'",r.value,"'"]);const o=r.value;return ae.builders.group(['"',o,'"']);case"nonterminal":return r.value;case"epsilon":return"Îµ";case"group":return ae.builders.group(["( ",ae.builders.indent(n(r.value)),ae.builders.softline," )"]);case"regex":return ae.builders.group(["/",r.value.source,"/",r.value.flags]);case"optional":return ae.builders.group([n(r.value),"?"]);case"optionalWhitespace":return ae.builders.group([n(r.value),"?w"]);case"minus":return ae.builders.group([n(r.value[0])," - ",n(r.value[1])]);case"many":return ae.builders.group([n(r.value),"*"]);case"many1":return ae.builders.group([n(r.value),"+"]);case"skip":return ae.builders.group([n(r.value[0])," << ",n(r.value[1])]);case"next":return ae.builders.group([n(r.value[0])," >> ",n(r.value[1])]);case"concatenation":{const a=" , ";return ae.builders.group([ae.builders.indent([ae.builders.softline,ae.builders.join([ae.builders.conditionalGroup([ae.builders.softline]),a],r.value.map(c=>n(c)))])])}case"alternation":{const a=" | ";return ae.builders.group([ae.builders.indent([ae.builders.softline,ae.builders.join([ae.builders.conditionalGroup([ae.builders.softline]),a],r.value.map(c=>n(c)))])])}}})();if(r.comment){const o=r.comment.left.length?r.comment.left+" ":"",a=r.comment.right.length?" "+r.comment.right:"";return ae.builders.group([o,i,a])}return i}return n(e)}function Ko(e,t){const n=e.getValue();return n?(t.printWidth=66,ae.builders.join(ae.builders.hardline,[...n.entries()].map(([u,i])=>{var B,y;const{expression:o,comment:a}=i,c=[u," = ",gi(o)," ;"],l=(B=a==null?void 0:a.above)!=null&&B.length?[ae.builders.join(ae.builders.hardline,a.above),ae.builders.hardline]:[],C=(y=a==null?void 0:a.below)!=null&&y.length?[ae.builders.join(ae.builders.hardline,a.below)]:[],S=ae.builders.group([l,c," ",ae.builders.lineSuffix(C)]);return o.type==="concatenation"||o.type==="alternation"?ae.builders.group([S,ae.builders.hardline]):S}))):""}function xo(e){return e?typeof e=="string"?e:ae.printer.printDocToString(gi(e),{printWidth:66,tabWidth:2,useTabs:!1}).formatted:""}function es(e){return 0}function ts(e){return 0}function ns(e,t){return e}function hi(e,t){const n=[...e.values()].map(r=>r.expression).reverse();for(;n.length>0;){const r=n.pop();if(r!=null&&r.type)if(t(r),r.value instanceof Array)for(let u=r.value.length-1;u>=0;u--)n.push(r.value[u]);else n.push(r.value)}}function rs(e){const t=new Map;return hi(e,n=>{n.type==="nonterminal"&&!e.has(n.value)&&!t.has(n.value)&&t.set(n.value,n)}),[...t.values()]}function us(e){const t=new Set;hi(e,r=>{r.type==="nonterminal"&&t.add(r.value)});const n=[];for(const[r,u]of e.entries())t.has(r)||n.push(u);return n}function is(e,t,n){let[r,u]=di(e);if(r.state.isError)throw new Error(`Error parsing EBNF: ${r.state}`,{cause:r});let i;return n.sort?i=[...Qo(u).entries()].reverse():i=[...u.entries()],i.filter(([o])=>o).reduce((o,[a,c])=>o.set(a,c),new Map)}var Wt={},Kr={},Ct={},xr={},Sn={},os={get exports(){return Sn},set exports(e){Sn=e}},eu={},tu={},Hn={},zn={},ze={},Lu;function En(){if(Lu)return ze;Lu=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.stringArray=ze.array=ze.func=ze.error=ze.number=ze.string=ze.boolean=void 0;function e(a){return a===!0||a===!1}ze.boolean=e;function t(a){return typeof a=="string"||a instanceof String}ze.string=t;function n(a){return typeof a=="number"||a instanceof Number}ze.number=n;function r(a){return a instanceof Error}ze.error=r;function u(a){return typeof a=="function"}ze.func=u;function i(a){return Array.isArray(a)}ze.array=i;function o(a){return i(a)&&a.every(c=>t(c))}return ze.stringArray=o,ze}var Iu;function pi(){return Iu||(Iu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=En();var n;(function(s){s.ParseError=-32700,s.InvalidRequest=-32600,s.MethodNotFound=-32601,s.InvalidParams=-32602,s.InternalError=-32603,s.jsonrpcReservedErrorRangeStart=-32099,s.serverErrorStart=-32099,s.MessageWriteError=-32099,s.MessageReadError=-32098,s.PendingResponseRejected=-32097,s.ConnectionInactive=-32096,s.ServerNotInitialized=-32002,s.UnknownErrorCode=-32001,s.jsonrpcReservedErrorRangeEnd=-32e3,s.serverErrorEnd=-32e3})(n=e.ErrorCodes||(e.ErrorCodes={}));class r extends Error{constructor(A,L,J){super(L),this.code=t.number(A)?A:n.UnknownErrorCode,this.data=J,Object.setPrototypeOf(this,r.prototype)}toJson(){const A={code:this.code,message:this.message};return this.data!==void 0&&(A.data=this.data),A}}e.ResponseError=r;class u{constructor(A){this.kind=A}static is(A){return A===u.auto||A===u.byName||A===u.byPosition}toString(){return this.kind}}e.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class i{constructor(A,L){this.method=A,this.numberOfParams=L}get parameterStructures(){return u.auto}}e.AbstractMessageSignature=i;class o extends i{constructor(A){super(A,0)}}e.RequestType0=o;class a extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.RequestType=a;class c extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.RequestType1=c;class l extends i{constructor(A){super(A,2)}}e.RequestType2=l;class C extends i{constructor(A){super(A,3)}}e.RequestType3=C;class S extends i{constructor(A){super(A,4)}}e.RequestType4=S;class B extends i{constructor(A){super(A,5)}}e.RequestType5=B;class y extends i{constructor(A){super(A,6)}}e.RequestType6=y;class j extends i{constructor(A){super(A,7)}}e.RequestType7=j;class ue extends i{constructor(A){super(A,8)}}e.RequestType8=ue;class ie extends i{constructor(A){super(A,9)}}e.RequestType9=ie;class X extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.NotificationType=X;class le extends i{constructor(A){super(A,0)}}e.NotificationType0=le;class K extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.NotificationType1=K;class ye extends i{constructor(A){super(A,2)}}e.NotificationType2=ye;class He extends i{constructor(A){super(A,3)}}e.NotificationType3=He;class Me extends i{constructor(A){super(A,4)}}e.NotificationType4=Me;class Re extends i{constructor(A){super(A,5)}}e.NotificationType5=Re;class Ve extends i{constructor(A){super(A,6)}}e.NotificationType6=Ve;class we extends i{constructor(A){super(A,7)}}e.NotificationType7=we;class ut extends i{constructor(A){super(A,8)}}e.NotificationType8=ut;class $ extends i{constructor(A){super(A,9)}}e.NotificationType9=$,function(s){function A(ce){const Be=ce;return Be&&t.string(Be.method)&&(t.string(Be.id)||t.number(Be.id))}s.isRequest=A;function L(ce){const Be=ce;return Be&&t.string(Be.method)&&ce.id===void 0}s.isNotification=L;function J(ce){const Be=ce;return Be&&(Be.result!==void 0||!!Be.error)&&(t.string(Be.id)||t.number(Be.id)||Be.id===null)}s.isResponse=J}(e.Message||(e.Message={}))}(zn)),zn}var Un={},Wu;function Fi(){return Wu||(Wu=1,function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var n;(function(i){i.None=0,i.First=1,i.AsOld=i.First,i.Last=2,i.AsNew=i.Last})(n=e.Touch||(e.Touch={}));class r{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var o;return(o=this._head)==null?void 0:o.value}get last(){var o;return(o=this._tail)==null?void 0:o.value}has(o){return this._map.has(o)}get(o,a=n.None){const c=this._map.get(o);if(c)return a!==n.None&&this.touch(c,a),c.value}set(o,a,c=n.None){let l=this._map.get(o);if(l)l.value=a,c!==n.None&&this.touch(l,c);else{switch(l={key:o,value:a,next:void 0,previous:void 0},c){case n.None:this.addItemLast(l);break;case n.First:this.addItemFirst(l);break;case n.Last:this.addItemLast(l);break;default:this.addItemLast(l);break}this._map.set(o,l),this._size++}return this}delete(o){return!!this.remove(o)}remove(o){const a=this._map.get(o);if(a)return this._map.delete(o),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const o=this._head;return this._map.delete(o.key),this.removeItem(o),this._size--,o.value}forEach(o,a){const c=this._state;let l=this._head;for(;l;){if(a?o.bind(a)(l.value,l.key,this):o(l.value,l.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");l=l.next}}keys(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const l={value:a.key,done:!1};return a=a.next,l}else return{value:void 0,done:!0}}};return c}values(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const l={value:a.value,done:!1};return a=a.next,l}else return{value:void 0,done:!0}}};return c}entries(){const o=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(a){const l={value:[a.key,a.value],done:!1};return a=a.next,l}else return{value:void 0,done:!0}}};return c}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(o){if(o>=this.size)return;if(o===0){this.clear();return}let a=this._head,c=this.size;for(;a&&c>o;)this._map.delete(a.key),a=a.next,c--;this._head=a,this._size=c,a&&(a.previous=void 0),this._state++}addItemFirst(o){if(!this._head&&!this._tail)this._tail=o;else if(this._head)o.next=this._head,this._head.previous=o;else throw new Error("Invalid list");this._head=o,this._state++}addItemLast(o){if(!this._head&&!this._tail)this._head=o;else if(this._tail)o.previous=this._tail,this._tail.next=o;else throw new Error("Invalid list");this._tail=o,this._state++}removeItem(o){if(o===this._head&&o===this._tail)this._head=void 0,this._tail=void 0;else if(o===this._head){if(!o.next)throw new Error("Invalid list");o.next.previous=void 0,this._head=o.next}else if(o===this._tail){if(!o.previous)throw new Error("Invalid list");o.previous.next=void 0,this._tail=o.previous}else{const a=o.next,c=o.previous;if(!a||!c)throw new Error("Invalid list");a.previous=c,c.next=a}o.next=void 0,o.previous=void 0,this._state++}touch(o,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==n.First&&a!==n.Last)){if(a===n.First){if(o===this._head)return;const c=o.next,l=o.previous;o===this._tail?(l.next=void 0,this._tail=l):(c.previous=l,l.next=c),o.previous=void 0,o.next=this._head,this._head.previous=o,this._head=o,this._state++}else if(a===n.Last){if(o===this._tail)return;const c=o.next,l=o.previous;o===this._head?(c.previous=void 0,this._head=c):(c.previous=l,l.next=c),o.next=void 0,o.previous=this._tail,this._tail.next=o,this._tail=o,this._state++}}}toJSON(){const o=[];return this.forEach((a,c)=>{o.push([c,a])}),o}fromJSON(o){this.clear();for(const[a,c]of o)this.set(a,c)}}e.LinkedMap=r;class u extends r{constructor(o,a=1){super(),this._limit=o,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(o){this._limit=o,this.checkTrim()}get ratio(){return this._ratio}set ratio(o){this._ratio=Math.min(Math.max(0,o),1),this.checkTrim()}get(o,a=n.AsNew){return super.get(o,a)}peek(o){return super.get(o,n.None)}set(o,a){return super.set(o,a,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=u}(Un)),Un}var Vn={},Hu;function ss(){return Hu||(Hu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,function(t){function n(r){return{dispose:r}}t.create=n}(e.Disposable||(e.Disposable={}))}(Vn)),Vn}var Jn={},kn={},zu;function qt(){if(zu)return kn;zu=1,Object.defineProperty(kn,"__esModule",{value:!0});let e;function t(){if(e===void 0)throw new Error("No runtime abstraction layer installed");return e}return function(n){function r(u){if(u===void 0)throw new Error("No runtime abstraction layer provided");e=u}n.install=r}(t||(t={})),kn.default=t,kn}var Uu;function bn(){return Uu||(Uu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=qt();(function(u){const i={dispose(){}};u.None=function(){return i}})(e.Event||(e.Event={}));class n{add(i,o=null,a){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(i),this._contexts.push(o),Array.isArray(a)&&a.push({dispose:()=>this.remove(i,o)})}remove(i,o=null){if(!this._callbacks)return;let a=!1;for(let c=0,l=this._callbacks.length;c<l;c++)if(this._callbacks[c]===i)if(this._contexts[c]===o){this._callbacks.splice(c,1),this._contexts.splice(c,1);return}else a=!0;if(a)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...i){if(!this._callbacks)return[];const o=[],a=this._callbacks.slice(0),c=this._contexts.slice(0);for(let l=0,C=a.length;l<C;l++)try{o.push(a[l].apply(c[l],i))}catch(S){(0,t.default)().console.error(S)}return o}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(i){this._options=i}get event(){return this._event||(this._event=(i,o,a)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(i,o);const c={dispose:()=>{this._callbacks&&(this._callbacks.remove(i,o),c.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(a)&&a.push(c),c}),this._event}fire(i){this._callbacks&&this._callbacks.invoke.call(this._callbacks,i)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=r,r._noop=function(){}}(Jn)),Jn}var Gn={},Vu;function nu(){return Vu||(Vu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=qt(),n=En(),r=bn();var u;(function(c){c.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function l(C){const S=C;return S&&(S===c.None||S===c.Cancelled||n.boolean(S.isCancellationRequested)&&!!S.onCancellationRequested)}c.is=l})(u=e.CancellationToken||(e.CancellationToken={}));const i=Object.freeze(function(c,l){const C=(0,t.default)().timer.setTimeout(c.bind(l),0);return{dispose(){C.dispose()}}});class o{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=u.None}}e.CancellationTokenSource=a}(Gn)),Gn}var Bt={},Ju;function as(){if(Ju)return Bt;Ju=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.SharedArrayReceiverStrategy=Bt.SharedArraySenderStrategy=void 0;const e=nu();var t;(function(o){o.Continue=0,o.Cancelled=1})(t||(t={}));class n{constructor(){this.buffers=new Map}enableCancellation(a){if(a.id===null)return;const c=new SharedArrayBuffer(4),l=new Int32Array(c,0,1);l[0]=t.Continue,this.buffers.set(a.id,c),a.$cancellationData=c}async sendCancellation(a,c){const l=this.buffers.get(c);if(l===void 0)return;const C=new Int32Array(l,0,1);Atomics.store(C,0,t.Cancelled)}cleanup(a){this.buffers.delete(a)}dispose(){this.buffers.clear()}}Bt.SharedArraySenderStrategy=n;class r{constructor(a){this.data=new Int32Array(a,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===t.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class u{constructor(a){this.token=new r(a)}cancel(){}dispose(){}}class i{constructor(){this.kind="request"}createCancellationTokenSource(a){const c=a.$cancellationData;return c===void 0?new e.CancellationTokenSource:new u(c)}}return Bt.SharedArrayReceiverStrategy=i,Bt}var Zn={},Xt={},Gu;function Ci(){if(Gu)return Xt;Gu=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.Semaphore=void 0;const e=qt();class t{constructor(r=1){if(r<=0)throw new Error("Capacity must be greater than 0");this._capacity=r,this._active=0,this._waiting=[]}lock(r){return new Promise((u,i)=>{this._waiting.push({thunk:r,resolve:u,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,e.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const r=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const u=r.thunk();u instanceof Promise?u.then(i=>{this._active--,r.resolve(i),this.runNext()},i=>{this._active--,r.reject(i),this.runNext()}):(this._active--,r.resolve(u),this.runNext())}catch(u){this._active--,r.reject(u),this.runNext()}}}return Xt.Semaphore=t,Xt}var Zu;function Ds(){return Zu||(Zu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=qt(),n=En(),r=bn(),u=Ci();(function(c){function l(C){let S=C;return S&&n.func(S.listen)&&n.func(S.dispose)&&n.func(S.onError)&&n.func(S.onClose)&&n.func(S.onPartialMessage)}c.is=l})(e.MessageReader||(e.MessageReader={}));class i{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(l){this.errorEmitter.fire(this.asError(l))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(l){this.partialMessageEmitter.fire(l)}asError(l){return l instanceof Error?l:new Error(`Reader received error. Reason: ${n.string(l.message)?l.message:"unknown"}`)}}e.AbstractMessageReader=i;var o;(function(c){function l(C){let S,B;const y=new Map;let j;const ue=new Map;if(C===void 0||typeof C=="string")S=C??"utf-8";else{if(S=C.charset??"utf-8",C.contentDecoder!==void 0&&(B=C.contentDecoder,y.set(B.name,B)),C.contentDecoders!==void 0)for(const ie of C.contentDecoders)y.set(ie.name,ie);if(C.contentTypeDecoder!==void 0&&(j=C.contentTypeDecoder,ue.set(j.name,j)),C.contentTypeDecoders!==void 0)for(const ie of C.contentTypeDecoders)ue.set(ie.name,ie)}return j===void 0&&(j=(0,t.default)().applicationJson.decoder,ue.set(j.name,j)),{charset:S,contentDecoder:B,contentDecoders:y,contentTypeDecoder:j,contentTypeDecoders:ue}}c.fromOptions=l})(o||(o={}));class a extends i{constructor(l,C){super(),this.readable=l,this.options=o.fromOptions(C),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new u.Semaphore(1)}set partialMessageTimeout(l){this._partialMessageTimeout=l}get partialMessageTimeout(){return this._partialMessageTimeout}listen(l){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=l;const C=this.readable.onData(S=>{this.onData(S)});return this.readable.onError(S=>this.fireError(S)),this.readable.onClose(()=>this.fireClose()),C}onData(l){for(this.buffer.append(l);;){if(this.nextMessageLength===-1){const S=this.buffer.tryReadHeaders(!0);if(!S)return;const B=S.get("content-length");if(!B){this.fireError(new Error("Header must provide a Content-Length property."));return}const y=parseInt(B);if(isNaN(y)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=y}const C=this.buffer.tryReadBody(this.nextMessageLength);if(C===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const S=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(C):C,B=await this.options.contentTypeDecoder.decode(S,this.options);this.callback(B)}).catch(S=>{this.fireError(S)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((l,C)=>{this.partialMessageTimer=void 0,l===this.messageToken&&(this.firePartialMessage({messageToken:l,waitingTime:C}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}e.ReadableStreamMessageReader=a}(Zn)),Zn}var Xn={},Xu;function cs(){return Xu||(Xu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=qt(),n=En(),r=Ci(),u=bn(),i="Content-Length: ",o=`\r
`;(function(C){function S(B){let y=B;return y&&n.func(y.dispose)&&n.func(y.onClose)&&n.func(y.onError)&&n.func(y.write)}C.is=S})(e.MessageWriter||(e.MessageWriter={}));class a{constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(S,B,y){this.errorEmitter.fire([this.asError(S),B,y])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(S){return S instanceof Error?S:new Error(`Writer received error. Reason: ${n.string(S.message)?S.message:"unknown"}`)}}e.AbstractMessageWriter=a;var c;(function(C){function S(B){return B===void 0||typeof B=="string"?{charset:B??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:B.charset??"utf-8",contentEncoder:B.contentEncoder,contentTypeEncoder:B.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}C.fromOptions=S})(c||(c={}));class l extends a{constructor(S,B){super(),this.writable=S,this.options=c.fromOptions(B),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(y=>this.fireError(y)),this.writable.onClose(()=>this.fireClose())}async write(S){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(S,this.options).then(y=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(y):y).then(y=>{const j=[];return j.push(i,y.byteLength.toString(),o),j.push(o),this.doWrite(S,j,y)},y=>{throw this.fireError(y),y}))}async doWrite(S,B,y){try{return await this.writable.write(B.join(""),"ascii"),this.writable.write(y)}catch(j){return this.handleError(j,S),Promise.reject(j)}}handleError(S,B){this.errorCount++,this.fireError(S,B,this.errorCount)}end(){this.writable.end()}}e.WriteableStreamMessageWriter=l}(Xn)),Xn}var Qt={},Qu;function ls(){if(Qu)return Qt;Qu=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.AbstractMessageBuffer=void 0;const e=13,t=10,n=`\r
`;class r{constructor(i="utf-8"){this._encoding=i,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(i){const o=typeof i=="string"?this.fromString(i,this._encoding):i;this._chunks.push(o),this._totalLength+=o.byteLength}tryReadHeaders(i=!1){if(this._chunks.length===0)return;let o=0,a=0,c=0,l=0;e:for(;a<this._chunks.length;){const y=this._chunks[a];for(c=0;c<y.length;){switch(y[c]){case e:switch(o){case 0:o=1;break;case 2:o=3;break;default:o=0}break;case t:switch(o){case 1:o=2;break;case 3:o=4,c++;break e;default:o=0}break;default:o=0}c++}l+=y.byteLength,a++}if(o!==4)return;const C=this._read(l+c),S=new Map,B=this.toString(C,"ascii").split(n);if(B.length<2)return S;for(let y=0;y<B.length-2;y++){const j=B[y],ue=j.indexOf(":");if(ue===-1)throw new Error("Message header must separate key and value using :");const ie=j.substr(0,ue),X=j.substr(ue+1).trim();S.set(i?ie.toLowerCase():ie,X)}return S}tryReadBody(i){if(!(this._totalLength<i))return this._read(i)}get numberOfBytes(){return this._totalLength}_read(i){if(i===0)return this.emptyBuffer();if(i>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===i){const l=this._chunks[0];return this._chunks.shift(),this._totalLength-=i,this.asNative(l)}if(this._chunks[0].byteLength>i){const l=this._chunks[0],C=this.asNative(l,i);return this._chunks[0]=l.slice(i),this._totalLength-=i,C}const o=this.allocNative(i);let a=0,c=0;for(;i>0;){const l=this._chunks[c];if(l.byteLength>i){const C=l.slice(0,i);o.set(C,a),a+=i,this._chunks[c]=l.slice(i),this._totalLength-=i,i-=i}else o.set(l,a),a+=l.byteLength,this._chunks.shift(),this._totalLength-=l.byteLength,i-=l.byteLength}return o}}return Qt.AbstractMessageBuffer=r,Qt}var Qn={},Yu;function fs(){return Yu||(Yu=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=qt(),n=En(),r=pi(),u=Fi(),i=bn(),o=nu();var a;(function($){$.type=new r.NotificationType("$/cancelRequest")})(a||(a={}));var c;(function($){function s(A){return typeof A=="string"||typeof A=="number"}$.is=s})(c=e.ProgressToken||(e.ProgressToken={}));var l;(function($){$.type=new r.NotificationType("$/progress")})(l||(l={}));class C{constructor(){}}e.ProgressType=C;var S;(function($){function s(A){return n.func(A)}$.is=s})(S||(S={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var B;(function($){$[$.Off=0]="Off",$[$.Messages=1]="Messages",$[$.Compact=2]="Compact",$[$.Verbose=3]="Verbose"})(B=e.Trace||(e.Trace={})),function($){$.Off="off",$.Messages="messages",$.Compact="compact",$.Verbose="verbose"}(e.TraceValues||(e.TraceValues={})),function($){function s(L){if(!n.string(L))return $.Off;switch(L=L.toLowerCase(),L){case"off":return $.Off;case"messages":return $.Messages;case"compact":return $.Compact;case"verbose":return $.Verbose;default:return $.Off}}$.fromString=s;function A(L){switch(L){case $.Off:return"off";case $.Messages:return"messages";case $.Compact:return"compact";case $.Verbose:return"verbose";default:return"off"}}$.toString=A}(B=e.Trace||(e.Trace={}));var y;(function($){$.Text="text",$.JSON="json"})(y=e.TraceFormat||(e.TraceFormat={})),function($){function s(A){return n.string(A)?(A=A.toLowerCase(),A==="json"?$.JSON:$.Text):$.Text}$.fromString=s}(y=e.TraceFormat||(e.TraceFormat={}));var j;(function($){$.type=new r.NotificationType("$/setTrace")})(j=e.SetTraceNotification||(e.SetTraceNotification={}));var ue;(function($){$.type=new r.NotificationType("$/logTrace")})(ue=e.LogTraceNotification||(e.LogTraceNotification={}));var ie;(function($){$[$.Closed=1]="Closed",$[$.Disposed=2]="Disposed",$[$.AlreadyListening=3]="AlreadyListening"})(ie=e.ConnectionErrors||(e.ConnectionErrors={}));class X extends Error{constructor(s,A){super(A),this.code=s,Object.setPrototypeOf(this,X.prototype)}}e.ConnectionError=X;var le;(function($){function s(A){const L=A;return L&&n.func(L.cancelUndispatched)}$.is=s})(le=e.ConnectionStrategy||(e.ConnectionStrategy={}));var K;(function($){function s(A){const L=A;return L&&(L.kind===void 0||L.kind==="id")&&n.func(L.createCancellationTokenSource)&&(L.dispose===void 0||n.func(L.dispose))}$.is=s})(K=e.IdCancellationReceiverStrategy||(e.IdCancellationReceiverStrategy={}));var ye;(function($){function s(A){const L=A;return L&&L.kind==="request"&&n.func(L.createCancellationTokenSource)&&(L.dispose===void 0||n.func(L.dispose))}$.is=s})(ye=e.RequestCancellationReceiverStrategy||(e.RequestCancellationReceiverStrategy={}));var He;(function($){$.Message=Object.freeze({createCancellationTokenSource(A){return new o.CancellationTokenSource}});function s(A){return K.is(A)||ye.is(A)}$.is=s})(He=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={}));var Me;(function($){$.Message=Object.freeze({sendCancellation(A,L){return A.sendNotification(a.type,{id:L})},cleanup(A){}});function s(A){const L=A;return L&&n.func(L.sendCancellation)&&n.func(L.cleanup)}$.is=s})(Me=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={}));var Re;(function($){$.Message=Object.freeze({receiver:He.Message,sender:Me.Message});function s(A){const L=A;return L&&He.is(L.receiver)&&Me.is(L.sender)}$.is=s})(Re=e.CancellationStrategy||(e.CancellationStrategy={}));var Ve;(function($){function s(A){const L=A;return L&&n.func(L.handleMessage)}$.is=s})(Ve=e.MessageStrategy||(e.MessageStrategy={})),function($){function s(A){const L=A;return L&&(Re.is(L.cancellationStrategy)||le.is(L.connectionStrategy)||Ve.is(L.messageStrategy))}$.is=s}(e.ConnectionOptions||(e.ConnectionOptions={}));var we;(function($){$[$.New=1]="New",$[$.Listening=2]="Listening",$[$.Closed=3]="Closed",$[$.Disposed=4]="Disposed"})(we||(we={}));function ut($,s,A,L){const J=A!==void 0?A:e.NullLogger;let ce=0,Be=0,Et=0;const Je="2.0";let it;const Dt=new Map;let F;const I=new Map,W=new Map;let z,U=new u.LinkedMap,ee=new Map,w=new Set,h=new Map,E=B.Off,P=y.Text,b,p=we.New;const Y=new i.Emitter,re=new i.Emitter,G=new i.Emitter,ge=new i.Emitter,_e=new i.Emitter,pe=L&&L.cancellationStrategy?L.cancellationStrategy:Re.Message;function fe(d){if(d===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+d.toString()}function Ze(d){return d===null?"res-unknown-"+(++Et).toString():"res-"+d.toString()}function V(){return"not-"+(++Be).toString()}function Z(d,O){r.Message.isRequest(O)?d.set(fe(O.id),O):r.Message.isResponse(O)?d.set(Ze(O.id),O):d.set(V(),O)}function x(d){}function oe(){return p===we.Listening}function v(){return p===we.Closed}function g(){return p===we.Disposed}function T(){(p===we.New||p===we.Listening)&&(p=we.Closed,re.fire(void 0))}function M(d){Y.fire([d,void 0,void 0])}function D(d){Y.fire(d)}$.onClose(T),$.onError(M),s.onClose(T),s.onError(D);function f(){z||U.size===0||(z=(0,t.default)().timer.setImmediate(()=>{z=void 0,q()}))}function m(d){r.Message.isRequest(d)?k(d):r.Message.isNotification(d)?se(d):r.Message.isResponse(d)?N(d):Te(d)}function q(){if(U.size===0)return;const d=U.shift();try{const O=L==null?void 0:L.messageStrategy;Ve.is(O)?O.handleMessage(d,m):m(d)}finally{f()}}const R=d=>{try{if(r.Message.isNotification(d)&&d.method===a.type.method){const O=d.params.id,H=fe(O),Q=U.get(H);if(r.Message.isRequest(Q)){const me=L==null?void 0:L.connectionStrategy,Ee=me&&me.cancelUndispatched?me.cancelUndispatched(Q,x):void 0;if(Ee&&(Ee.error!==void 0||Ee.result!==void 0)){U.delete(H),h.delete(O),Ee.id=Q.id,lt(Ee,d.method,Date.now()),s.write(Ee).catch(()=>J.error("Sending response for canceled message failed."));return}}const ve=h.get(O);if(ve!==void 0){ve.cancel(),ct(d);return}else w.add(O)}Z(U,d)}finally{f()}};function k(d){if(g())return;function O(de,Se,Fe){const Le={jsonrpc:Je,id:d.id};de instanceof r.ResponseError?Le.error=de.toJson():Le.result=de===void 0?null:de,lt(Le,Se,Fe),s.write(Le).catch(()=>J.error("Sending response failed."))}function H(de,Se,Fe){const Le={jsonrpc:Je,id:d.id,error:de.toJson()};lt(Le,Se,Fe),s.write(Le).catch(()=>J.error("Sending response failed."))}function Q(de,Se,Fe){de===void 0&&(de=null);const Le={jsonrpc:Je,id:d.id,result:de};lt(Le,Se,Fe),s.write(Le).catch(()=>J.error("Sending response failed."))}ht(d);const ve=Dt.get(d.method);let me,Ee;ve&&(me=ve.type,Ee=ve.handler);const Oe=Date.now();if(Ee||it){const de=d.id??String(Date.now()),Se=K.is(pe.receiver)?pe.receiver.createCancellationTokenSource(de):pe.receiver.createCancellationTokenSource(d);d.id!==null&&w.has(d.id)&&Se.cancel(),d.id!==null&&h.set(de,Se);try{let Fe;if(Ee)if(d.params===void 0){if(me!==void 0&&me.numberOfParams!==0){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${d.method} defines ${me.numberOfParams} params but received none.`),d.method,Oe);return}Fe=Ee(Se.token)}else if(Array.isArray(d.params)){if(me!==void 0&&me.parameterStructures===r.ParameterStructures.byName){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by name but received parameters by position`),d.method,Oe);return}Fe=Ee(...d.params,Se.token)}else{if(me!==void 0&&me.parameterStructures===r.ParameterStructures.byPosition){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${d.method} defines parameters by position but received parameters by name`),d.method,Oe);return}Fe=Ee(d.params,Se.token)}else it&&(Fe=it(d.method,d.params,Se.token));const Le=Fe;Fe?Le.then?Le.then(Qe=>{h.delete(de),O(Qe,d.method,Oe)},Qe=>{h.delete(de),Qe instanceof r.ResponseError?H(Qe,d.method,Oe):Qe&&n.string(Qe.message)?H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Qe.message}`),d.method,Oe):H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,Oe)}):(h.delete(de),O(Fe,d.method,Oe)):(h.delete(de),Q(Fe,d.method,Oe))}catch(Fe){h.delete(de),Fe instanceof r.ResponseError?O(Fe,d.method,Oe):Fe&&n.string(Fe.message)?H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${d.method} failed with message: ${Fe.message}`),d.method,Oe):H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${d.method} failed unexpectedly without providing any details.`),d.method,Oe)}}else H(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${d.method}`),d.method,Oe)}function N(d){if(!g())if(d.id===null)d.error?J.error(`Received response message without id: Error is: 
${JSON.stringify(d.error,void 0,4)}`):J.error("Received response message without id. No further error information provided.");else{const O=d.id,H=ee.get(O);if(Gt(d,H),H!==void 0){ee.delete(O);try{if(d.error){const Q=d.error;H.reject(new r.ResponseError(Q.code,Q.message,Q.data))}else if(d.result!==void 0)H.resolve(d.result);else throw new Error("Should never happen.")}catch(Q){Q.message?J.error(`Response handler '${H.method}' failed with message: ${Q.message}`):J.error(`Response handler '${H.method}' failed unexpectedly.`)}}}}function se(d){if(g())return;let O,H;if(d.method===a.type.method){const Q=d.params.id;w.delete(Q),ct(d);return}else{const Q=I.get(d.method);Q&&(H=Q.handler,O=Q.type)}if(H||F)try{if(ct(d),H)if(d.params===void 0)O!==void 0&&O.numberOfParams!==0&&O.parameterStructures!==r.ParameterStructures.byName&&J.error(`Notification ${d.method} defines ${O.numberOfParams} params but received none.`),H();else if(Array.isArray(d.params)){const Q=d.params;d.method===l.type.method&&Q.length===2&&c.is(Q[0])?H({token:Q[0],value:Q[1]}):(O!==void 0&&(O.parameterStructures===r.ParameterStructures.byName&&J.error(`Notification ${d.method} defines parameters by name but received parameters by position`),O.numberOfParams!==d.params.length&&J.error(`Notification ${d.method} defines ${O.numberOfParams} params but received ${Q.length} arguments`)),H(...Q))}else O!==void 0&&O.parameterStructures===r.ParameterStructures.byPosition&&J.error(`Notification ${d.method} defines parameters by position but received parameters by name`),H(d.params);else F&&F(d.method,d.params)}catch(Q){Q.message?J.error(`Notification handler '${d.method}' failed with message: ${Q.message}`):J.error(`Notification handler '${d.method}' failed unexpectedly.`)}else G.fire(d)}function Te(d){if(!d){J.error("Received empty message.");return}J.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(d,null,4)}`);const O=d;if(n.string(O.id)||n.number(O.id)){const H=O.id,Q=ee.get(H);Q&&Q.reject(new Error("The received response has neither a result nor an error property."))}}function he(d){if(d!=null)switch(E){case B.Verbose:return JSON.stringify(d,null,4);case B.Compact:return JSON.stringify(d);default:return}}function nt(d){if(!(E===B.Off||!b))if(P===y.Text){let O;(E===B.Verbose||E===B.Compact)&&d.params&&(O=`Params: ${he(d.params)}

`),b.log(`Sending request '${d.method} - (${d.id})'.`,O)}else bt("send-request",d)}function Xe(d){if(!(E===B.Off||!b))if(P===y.Text){let O;(E===B.Verbose||E===B.Compact)&&(d.params?O=`Params: ${he(d.params)}

`:O=`No parameters provided.

`),b.log(`Sending notification '${d.method}'.`,O)}else bt("send-notification",d)}function lt(d,O,H){if(!(E===B.Off||!b))if(P===y.Text){let Q;(E===B.Verbose||E===B.Compact)&&(d.error&&d.error.data?Q=`Error data: ${he(d.error.data)}

`:d.result?Q=`Result: ${he(d.result)}

`:d.error===void 0&&(Q=`No result returned.

`)),b.log(`Sending response '${O} - (${d.id})'. Processing request took ${Date.now()-H}ms`,Q)}else bt("send-response",d)}function ht(d){if(!(E===B.Off||!b))if(P===y.Text){let O;(E===B.Verbose||E===B.Compact)&&d.params&&(O=`Params: ${he(d.params)}

`),b.log(`Received request '${d.method} - (${d.id})'.`,O)}else bt("receive-request",d)}function ct(d){if(!(E===B.Off||!b||d.method===ue.type.method))if(P===y.Text){let O;(E===B.Verbose||E===B.Compact)&&(d.params?O=`Params: ${he(d.params)}

`:O=`No parameters provided.

`),b.log(`Received notification '${d.method}'.`,O)}else bt("receive-notification",d)}function Gt(d,O){if(!(E===B.Off||!b))if(P===y.Text){let H;if((E===B.Verbose||E===B.Compact)&&(d.error&&d.error.data?H=`Error data: ${he(d.error.data)}

`:d.result?H=`Result: ${he(d.result)}

`:d.error===void 0&&(H=`No result returned.

`)),O){const Q=d.error?` Request failed: ${d.error.message} (${d.error.code}).`:"";b.log(`Received response '${O.method} - (${d.id})' in ${Date.now()-O.timerStart}ms.${Q}`,H)}else b.log(`Received response ${d.id} without active response promise.`,H)}else bt("receive-response",d)}function bt(d,O){if(!b||E===B.Off)return;const H={isLSPMessage:!0,type:d,message:O,timestamp:Date.now()};b.log(H)}function kt(){if(v())throw new X(ie.Closed,"Connection is closed.");if(g())throw new X(ie.Disposed,"Connection is disposed.")}function Bo(){if(oe())throw new X(ie.AlreadyListening,"Connection is already listening")}function To(){if(!oe())throw new Error("Call listen() first.")}function Zt(d){return d===void 0?null:d}function Au(d){if(d!==null)return d}function Pu(d){return d!=null&&!Array.isArray(d)&&typeof d=="object"}function Wn(d,O){switch(d){case r.ParameterStructures.auto:return Pu(O)?Au(O):[Zt(O)];case r.ParameterStructures.byName:if(!Pu(O))throw new Error("Received parameters by name but param is not an object literal.");return Au(O);case r.ParameterStructures.byPosition:return[Zt(O)];default:throw new Error(`Unknown parameter structure ${d.toString()}`)}}function qu(d,O){let H;const Q=d.numberOfParams;switch(Q){case 0:H=void 0;break;case 1:H=Wn(d.parameterStructures,O[0]);break;default:H=[];for(let ve=0;ve<O.length&&ve<Q;ve++)H.push(Zt(O[ve]));if(O.length<Q)for(let ve=O.length;ve<Q;ve++)H.push(null);break}return H}const Ot={sendNotification:(d,...O)=>{kt();let H,Q;if(n.string(d)){H=d;const me=O[0];let Ee=0,Oe=r.ParameterStructures.auto;r.ParameterStructures.is(me)&&(Ee=1,Oe=me);let de=O.length;const Se=de-Ee;switch(Se){case 0:Q=void 0;break;case 1:Q=Wn(Oe,O[Ee]);break;default:if(Oe===r.ParameterStructures.byName)throw new Error(`Received ${Se} parameters for 'by Name' notification parameter structure.`);Q=O.slice(Ee,de).map(Fe=>Zt(Fe));break}}else{const me=O;H=d.method,Q=qu(d,me)}const ve={jsonrpc:Je,method:H,params:Q};return Xe(ve),s.write(ve).catch(me=>{throw J.error("Sending notification failed."),me})},onNotification:(d,O)=>{kt();let H;return n.func(d)?F=d:O&&(n.string(d)?(H=d,I.set(d,{type:void 0,handler:O})):(H=d.method,I.set(d.method,{type:d,handler:O}))),{dispose:()=>{H!==void 0?I.delete(H):F=void 0}}},onProgress:(d,O,H)=>{if(W.has(O))throw new Error(`Progress handler for token ${O} already registered`);return W.set(O,H),{dispose:()=>{W.delete(O)}}},sendProgress:(d,O,H)=>Ot.sendNotification(l.type,{token:O,value:H}),onUnhandledProgress:ge.event,sendRequest:(d,...O)=>{kt(),To();let H,Q,ve;if(n.string(d)){H=d;const de=O[0],Se=O[O.length-1];let Fe=0,Le=r.ParameterStructures.auto;r.ParameterStructures.is(de)&&(Fe=1,Le=de);let Qe=O.length;o.CancellationToken.is(Se)&&(Qe=Qe-1,ve=Se);const ft=Qe-Fe;switch(ft){case 0:Q=void 0;break;case 1:Q=Wn(Le,O[Fe]);break;default:if(Le===r.ParameterStructures.byName)throw new Error(`Received ${ft} parameters for 'by Name' request parameter structure.`);Q=O.slice(Fe,Qe).map(So=>Zt(So));break}}else{const de=O;H=d.method,Q=qu(d,de);const Se=d.numberOfParams;ve=o.CancellationToken.is(de[Se])?de[Se]:void 0}const me=ce++;let Ee;ve&&(Ee=ve.onCancellationRequested(()=>{const de=pe.sender.sendCancellation(Ot,me);return de===void 0?(J.log(`Received no promise from cancellation strategy when cancelling id ${me}`),Promise.resolve()):de.catch(()=>{J.log(`Sending cancellation messages for id ${me} failed`)})}));const Oe={jsonrpc:Je,id:me,method:H,params:Q};return nt(Oe),typeof pe.sender.enableCancellation=="function"&&pe.sender.enableCancellation(Oe),new Promise(async(de,Se)=>{const Fe=ft=>{de(ft),pe.sender.cleanup(me),Ee==null||Ee.dispose()},Le=ft=>{Se(ft),pe.sender.cleanup(me),Ee==null||Ee.dispose()},Qe={method:H,timerStart:Date.now(),resolve:Fe,reject:Le};try{await s.write(Oe),ee.set(me,Qe)}catch(ft){throw J.error("Sending request failed."),Qe.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,ft.message?ft.message:"Unknown reason")),ft}})},onRequest:(d,O)=>{kt();let H=null;return S.is(d)?(H=void 0,it=d):n.string(d)?(H=null,O!==void 0&&(H=d,Dt.set(d,{handler:O,type:void 0}))):O!==void 0&&(H=d.method,Dt.set(d.method,{type:d,handler:O})),{dispose:()=>{H!==null&&(H!==void 0?Dt.delete(H):it=void 0)}}},hasPendingResponse:()=>ee.size>0,trace:async(d,O,H)=>{let Q=!1,ve=y.Text;H!==void 0&&(n.boolean(H)?Q=H:(Q=H.sendNotification||!1,ve=H.traceFormat||y.Text)),E=d,P=ve,E===B.Off?b=void 0:b=O,Q&&!v()&&!g()&&await Ot.sendNotification(j.type,{value:B.toString(d)})},onError:Y.event,onClose:re.event,onUnhandledNotification:G.event,onDispose:_e.event,end:()=>{s.end()},dispose:()=>{if(g())return;p=we.Disposed,_e.fire(void 0);const d=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const O of ee.values())O.reject(d);ee=new Map,h=new Map,w=new Set,U=new u.LinkedMap,n.func(s.dispose)&&s.dispose(),n.func($.dispose)&&$.dispose()},listen:()=>{kt(),Bo(),p=we.Listening,$.listen(R)},inspect:()=>{(0,t.default)().console.log("inspect")}};return Ot.onNotification(ue.type,d=>{if(E===B.Off||!b)return;const O=E===B.Verbose||E===B.Compact;b.log(d.message,O?d.verbose:void 0)}),Ot.onNotification(l.type,d=>{const O=W.get(d.token);O?O(d.value):ge.fire(d)}),Ot}e.createMessageConnection=ut}(Qn)),Qn}var Ku;function er(){return Ku||(Ku=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=pi();Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=Fi();Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const r=ss();Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const u=bn();Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return u.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return u.Emitter}});const i=nu();Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const o=as();Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});const a=Ds();Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=cs();Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const l=ls();Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return l.AbstractMessageBuffer}});const C=fs();Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return C.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return C.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return C.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return C.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return C.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return C.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return C.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return C.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return C.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return C.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return C.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return C.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return C.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return C.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return C.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return C.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return C.MessageStrategy}});const S=qt();e.RAL=S.default}(Hn)),Hn}Object.defineProperty(tu,"__esModule",{value:!0});const dt=er();class In extends dt.AbstractMessageBuffer{constructor(t="utf-8"){super(t),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return In.emptyBuffer}fromString(t,n){return new TextEncoder().encode(t)}toString(t,n){return n==="ascii"?this.asciiDecoder.decode(t):new TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t:t.slice(0,n)}allocNative(t){return new Uint8Array(t)}}In.emptyBuffer=new Uint8Array(0);class ds{constructor(t){this.socket=t,this._onData=new dt.Emitter,this._messageListener=n=>{n.data.arrayBuffer().then(u=>{this._onData.fire(new Uint8Array(u))},()=>{(0,dt.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(t){return this.socket.addEventListener("close",t),dt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),dt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),dt.Disposable.create(()=>this.socket.removeEventListener("end",t))}onData(t){return this._onData.event(t)}}class gs{constructor(t){this.socket=t}onClose(t){return this.socket.addEventListener("close",t),dt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),dt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),dt.Disposable.create(()=>this.socket.removeEventListener("end",t))}write(t,n){if(typeof t=="string"){if(n!==void 0&&n!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${n}`);this.socket.send(t)}else this.socket.send(t);return Promise.resolve()}end(){this.socket.close()}}const hs=new TextEncoder,mi=Object.freeze({messageBuffer:Object.freeze({create:e=>new In(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if(t.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(hs.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new ds(e),asWritableStream:e=>new gs(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function tr(){return mi}(function(e){function t(){dt.RAL.install(mi)}e.install=t})(tr||(tr={}));var ps=tu.default=tr;const Fs=ne({__proto__:null,default:ps},[tu]),Cs=te(Fs);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(c,l,C,S){S===void 0&&(S=C);var B=Object.getOwnPropertyDescriptor(l,C);(!B||("get"in B?!l.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return l[C]}}),Object.defineProperty(c,S,B)}:function(c,l,C,S){S===void 0&&(S=C),c[S]=l[C]}),n=$e&&$e.__exportStar||function(c,l){for(var C in c)C!=="default"&&!Object.prototype.hasOwnProperty.call(l,C)&&t(l,c,C)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,Cs.default.install();const u=er();n(er(),e);class i extends u.AbstractMessageReader{constructor(l){super(),this._onData=new u.Emitter,this._messageListener=C=>{this._onData.fire(C.data)},l.addEventListener("error",C=>this.fireError(C)),l.onmessage=this._messageListener}listen(l){return this._onData.event(l)}}e.BrowserMessageReader=i;class o extends u.AbstractMessageWriter{constructor(l){super(),this.port=l,this.errorCount=0,l.addEventListener("error",C=>this.fireError(C))}write(l){try{return this.port.postMessage(l),Promise.resolve()}catch(C){return this.handleError(C,l),Promise.reject(C)}}handleError(l,C){this.errorCount++,this.fireError(l,C,this.errorCount)}end(){}}e.BrowserMessageWriter=o;function a(c,l,C,S){return C===void 0&&(C=u.NullLogger),u.ConnectionStrategy.is(S)&&(S={connectionStrategy:S}),(0,u.createMessageConnection)(c,l,C,S)}e.createMessageConnection=a})(eu);const ms=Ce(eu),ys=ne({__proto__:null,default:ms},[eu]),Jt=te(ys);(function(e){e.exports=Jt})(os);const Es=Ce(Sn),bs=ne({__proto__:null,default:Es},[Sn]),xu=te(bs);var ru={},nr;(function(e){function t(n){return typeof n=="string"}e.is=t})(nr||(nr={}));var An;(function(e){function t(n){return typeof n=="string"}e.is=t})(An||(An={}));var rr;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(rr||(rr={}));var en;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(en||(en={}));var st;(function(e){function t(r,u){return r===Number.MAX_VALUE&&(r=en.MAX_VALUE),u===Number.MAX_VALUE&&(u=en.MAX_VALUE),{line:r,character:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.uinteger(u.line)&&_.uinteger(u.character)}e.is=n})(st||(st={}));var Pe;(function(e){function t(r,u,i,o){if(_.uinteger(r)&&_.uinteger(u)&&_.uinteger(i)&&_.uinteger(o))return{start:st.create(r,u),end:st.create(i,o)};if(st.is(r)&&st.is(u))return{start:r,end:u};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(u,", ").concat(i,", ").concat(o,"]"))}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&st.is(u.start)&&st.is(u.end)}e.is=n})(Pe||(Pe={}));var tn;(function(e){function t(r,u){return{uri:r,range:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&(_.string(u.uri)||_.undefined(u.uri))}e.is=n})(tn||(tn={}));var ur;(function(e){function t(r,u,i,o){return{targetUri:r,targetRange:u,targetSelectionRange:i,originSelectionRange:o}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.targetRange)&&_.string(u.targetUri)&&Pe.is(u.targetSelectionRange)&&(Pe.is(u.originSelectionRange)||_.undefined(u.originSelectionRange))}e.is=n})(ur||(ur={}));var Pn;(function(e){function t(r,u,i,o){return{red:r,green:u,blue:i,alpha:o}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.numberRange(u.red,0,1)&&_.numberRange(u.green,0,1)&&_.numberRange(u.blue,0,1)&&_.numberRange(u.alpha,0,1)}e.is=n})(Pn||(Pn={}));var ir;(function(e){function t(r,u){return{range:r,color:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&Pn.is(u.color)}e.is=n})(ir||(ir={}));var or;(function(e){function t(r,u,i){return{label:r,textEdit:u,additionalTextEdits:i}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.string(u.label)&&(_.undefined(u.textEdit)||gt.is(u))&&(_.undefined(u.additionalTextEdits)||_.typedArray(u.additionalTextEdits,gt.is))}e.is=n})(or||(or={}));var sr;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(sr||(sr={}));var ar;(function(e){function t(r,u,i,o,a,c){var l={startLine:r,endLine:u};return _.defined(i)&&(l.startCharacter=i),_.defined(o)&&(l.endCharacter=o),_.defined(a)&&(l.kind=a),_.defined(c)&&(l.collapsedText=c),l}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.uinteger(u.startLine)&&_.uinteger(u.startLine)&&(_.undefined(u.startCharacter)||_.uinteger(u.startCharacter))&&(_.undefined(u.endCharacter)||_.uinteger(u.endCharacter))&&(_.undefined(u.kind)||_.string(u.kind))}e.is=n})(ar||(ar={}));var qn;(function(e){function t(r,u){return{location:r,message:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&tn.is(u.location)&&_.string(u.message)}e.is=n})(qn||(qn={}));var Dr;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(Dr||(Dr={}));var cr;(function(e){e.Unnecessary=1,e.Deprecated=2})(cr||(cr={}));var lr;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&_.string(r.href)}e.is=t})(lr||(lr={}));var nn;(function(e){function t(r,u,i,o,a,c){var l={range:r,message:u};return _.defined(i)&&(l.severity=i),_.defined(o)&&(l.code=o),_.defined(a)&&(l.source=a),_.defined(c)&&(l.relatedInformation=c),l}e.create=t;function n(r){var u,i=r;return _.defined(i)&&Pe.is(i.range)&&_.string(i.message)&&(_.number(i.severity)||_.undefined(i.severity))&&(_.integer(i.code)||_.string(i.code)||_.undefined(i.code))&&(_.undefined(i.codeDescription)||_.string((u=i.codeDescription)===null||u===void 0?void 0:u.href))&&(_.string(i.source)||_.undefined(i.source))&&(_.undefined(i.relatedInformation)||_.typedArray(i.relatedInformation,qn.is))}e.is=n})(nn||(nn={}));var At;(function(e){function t(r,u){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a={title:r,command:u};return _.defined(i)&&i.length>0&&(a.arguments=i),a}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.title)&&_.string(u.command)}e.is=n})(At||(At={}));var gt;(function(e){function t(i,o){return{range:i,newText:o}}e.replace=t;function n(i,o){return{range:{start:i,end:i},newText:o}}e.insert=n;function r(i){return{range:i,newText:""}}e.del=r;function u(i){var o=i;return _.objectLiteral(o)&&_.string(o.newText)&&Pe.is(o.range)}e.is=u})(gt||(gt={}));var St;(function(e){function t(r,u,i){var o={label:r};return u!==void 0&&(o.needsConfirmation=u),i!==void 0&&(o.description=i),o}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.string(u.label)&&(_.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(_.string(u.description)||u.description===void 0)}e.is=n})(St||(St={}));var Ue;(function(e){function t(n){var r=n;return _.string(r)}e.is=t})(Ue||(Ue={}));var Ft;(function(e){function t(i,o,a){return{range:i,newText:o,annotationId:a}}e.replace=t;function n(i,o,a){return{range:{start:i,end:i},newText:o,annotationId:a}}e.insert=n;function r(i,o){return{range:i,newText:"",annotationId:o}}e.del=r;function u(i){var o=i;return gt.is(o)&&(St.is(o.annotationId)||Ue.is(o.annotationId))}e.is=u})(Ft||(Ft={}));var rn;(function(e){function t(r,u){return{textDocument:r,edits:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&un.is(u.textDocument)&&Array.isArray(u.edits)}e.is=n})(rn||(rn={}));var Ht;(function(e){function t(r,u,i){var o={kind:"create",uri:r};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(o.options=u),i!==void 0&&(o.annotationId=i),o}e.create=t;function n(r){var u=r;return u&&u.kind==="create"&&_.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||_.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||_.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(Ht||(Ht={}));var zt;(function(e){function t(r,u,i,o){var a={kind:"rename",oldUri:r,newUri:u};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}e.create=t;function n(r){var u=r;return u&&u.kind==="rename"&&_.string(u.oldUri)&&_.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||_.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||_.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(zt||(zt={}));var Ut;(function(e){function t(r,u,i){var o={kind:"delete",uri:r};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(o.options=u),i!==void 0&&(o.annotationId=i),o}e.create=t;function n(r){var u=r;return u&&u.kind==="delete"&&_.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||_.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||_.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(Ut||(Ut={}));var On;(function(e){function t(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(u){return _.string(u.kind)?Ht.is(u)||zt.is(u)||Ut.is(u):rn.is(u)}))}e.is=t})(On||(On={}));var Rn=function(){function e(t,n){this.edits=t,this.changeAnnotations=n}return e.prototype.insert=function(t,n,r){var u,i;if(r===void 0?u=gt.insert(t,n):Ue.is(r)?(i=r,u=Ft.insert(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),u=Ft.insert(t,n,i)),this.edits.push(u),i!==void 0)return i},e.prototype.replace=function(t,n,r){var u,i;if(r===void 0?u=gt.replace(t,n):Ue.is(r)?(i=r,u=Ft.replace(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),u=Ft.replace(t,n,i)),this.edits.push(u),i!==void 0)return i},e.prototype.delete=function(t,n){var r,u;if(n===void 0?r=gt.del(t):Ue.is(n)?(u=n,r=Ft.del(t,n)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(n),r=Ft.del(t,u)),this.edits.push(r),u!==void 0)return u},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),ei=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,n){var r;if(Ue.is(t)?r=t:(r=this.nextId(),n=t),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),_s=function(){function e(t){var n=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new ei(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(r){if(rn.is(r)){var u=new Rn(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=u}})):t.changes&&Object.keys(t.changes).forEach(function(r){var u=new Rn(t.changes[r]);n._textEditChanges[r]=u})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(un.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:t.uri,version:t.version},r=this._textEditChanges[n.uri];if(!r){var u=[],i={textDocument:n,edits:u};this._workspaceEdit.documentChanges.push(i),r=new Rn(u,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[t];if(!r){var u=[];this._workspaceEdit.changes[t]=u,r=new Rn(u),this._textEditChanges[t]=r}return r}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new ei,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;St.is(n)||Ue.is(n)?u=n:r=n;var i,o;if(u===void 0?i=Ht.create(t,r):(o=Ue.is(u)?u:this._changeAnnotations.manage(u),i=Ht.create(t,r,o)),this._workspaceEdit.documentChanges.push(i),o!==void 0)return o},e.prototype.renameFile=function(t,n,r,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;St.is(r)||Ue.is(r)?i=r:u=r;var o,a;if(i===void 0?o=zt.create(t,n,u):(a=Ue.is(i)?i:this._changeAnnotations.manage(i),o=zt.create(t,n,u,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},e.prototype.deleteFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;St.is(n)||Ue.is(n)?u=n:r=n;var i,o;if(u===void 0?i=Ut.create(t,r):(o=Ue.is(u)?u:this._changeAnnotations.manage(u),i=Ut.create(t,r,o)),this._workspaceEdit.documentChanges.push(i),o!==void 0)return o},e}(),fr;(function(e){function t(r){return{uri:r}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)}e.is=n})(fr||(fr={}));var dr;(function(e){function t(r,u){return{uri:r,version:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&_.integer(u.version)}e.is=n})(dr||(dr={}));var un;(function(e){function t(r,u){return{uri:r,version:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&(u.version===null||_.integer(u.version))}e.is=n})(un||(un={}));var gr;(function(e){function t(r,u,i,o){return{uri:r,languageId:u,version:i,text:o}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&_.string(u.languageId)&&_.integer(u.version)&&_.string(u.text)}e.is=n})(gr||(gr={}));var Nn;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(n){var r=n;return r===e.PlainText||r===e.Markdown}e.is=t})(Nn||(Nn={}));var Vt;(function(e){function t(n){var r=n;return _.objectLiteral(n)&&Nn.is(r.kind)&&_.string(r.value)}e.is=t})(Vt||(Vt={}));var hr;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(hr||(hr={}));var pr;(function(e){e.PlainText=1,e.Snippet=2})(pr||(pr={}));var Fr;(function(e){e.Deprecated=1})(Fr||(Fr={}));var Cr;(function(e){function t(r,u,i){return{newText:r,insert:u,replace:i}}e.create=t;function n(r){var u=r;return u&&_.string(u.newText)&&Pe.is(u.insert)&&Pe.is(u.replace)}e.is=n})(Cr||(Cr={}));var mr;(function(e){e.asIs=1,e.adjustIndentation=2})(mr||(mr={}));var yr;(function(e){function t(n){var r=n;return r&&(_.string(r.detail)||r.detail===void 0)&&(_.string(r.description)||r.description===void 0)}e.is=t})(yr||(yr={}));var Er;(function(e){function t(n){return{label:n}}e.create=t})(Er||(Er={}));var br;(function(e){function t(n,r){return{items:n||[],isIncomplete:!!r}}e.create=t})(br||(br={}));var on;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function n(r){var u=r;return _.string(u)||_.objectLiteral(u)&&_.string(u.language)&&_.string(u.value)}e.is=n})(on||(on={}));var _r;(function(e){function t(n){var r=n;return!!r&&_.objectLiteral(r)&&(Vt.is(r.contents)||on.is(r.contents)||_.typedArray(r.contents,on.is))&&(n.range===void 0||Pe.is(n.range))}e.is=t})(_r||(_r={}));var vr;(function(e){function t(n,r){return r?{label:n,documentation:r}:{label:n}}e.create=t})(vr||(vr={}));var kr;(function(e){function t(n,r){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];var o={label:n};return _.defined(r)&&(o.documentation=r),_.defined(u)?o.parameters=u:o.parameters=[],o}e.create=t})(kr||(kr={}));var Rr;(function(e){e.Text=1,e.Read=2,e.Write=3})(Rr||(Rr={}));var wr;(function(e){function t(n,r){var u={range:n};return _.number(r)&&(u.kind=r),u}e.create=t})(wr||(wr={}));var Br;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Br||(Br={}));var Tr;(function(e){e.Deprecated=1})(Tr||(Tr={}));var Sr;(function(e){function t(n,r,u,i,o){var a={name:n,kind:r,location:{uri:i,range:u}};return o&&(a.containerName=o),a}e.create=t})(Sr||(Sr={}));var Ar;(function(e){function t(n,r,u,i){return i!==void 0?{name:n,kind:r,location:{uri:u,range:i}}:{name:n,kind:r,location:{uri:u}}}e.create=t})(Ar||(Ar={}));var Pr;(function(e){function t(r,u,i,o,a,c){var l={name:r,detail:u,kind:i,range:o,selectionRange:a};return c!==void 0&&(l.children=c),l}e.create=t;function n(r){var u=r;return u&&_.string(u.name)&&_.number(u.kind)&&Pe.is(u.range)&&Pe.is(u.selectionRange)&&(u.detail===void 0||_.string(u.detail))&&(u.deprecated===void 0||_.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}e.is=n})(Pr||(Pr={}));var qr;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(qr||(qr={}));var sn;(function(e){e.Invoked=1,e.Automatic=2})(sn||(sn={}));var Or;(function(e){function t(r,u,i){var o={diagnostics:r};return u!=null&&(o.only=u),i!=null&&(o.triggerKind=i),o}e.create=t;function n(r){var u=r;return _.defined(u)&&_.typedArray(u.diagnostics,nn.is)&&(u.only===void 0||_.typedArray(u.only,_.string))&&(u.triggerKind===void 0||u.triggerKind===sn.Invoked||u.triggerKind===sn.Automatic)}e.is=n})(Or||(Or={}));var Nr;(function(e){function t(r,u,i){var o={title:r},a=!0;return typeof u=="string"?(a=!1,o.kind=u):At.is(u)?o.command=u:o.edit=u,a&&i!==void 0&&(o.kind=i),o}e.create=t;function n(r){var u=r;return u&&_.string(u.title)&&(u.diagnostics===void 0||_.typedArray(u.diagnostics,nn.is))&&(u.kind===void 0||_.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||At.is(u.command))&&(u.isPreferred===void 0||_.boolean(u.isPreferred))&&(u.edit===void 0||On.is(u.edit))}e.is=n})(Nr||(Nr={}));var jr;(function(e){function t(r,u){var i={range:r};return _.defined(u)&&(i.data=u),i}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(u.range)&&(_.undefined(u.command)||At.is(u.command))}e.is=n})(jr||(jr={}));var Mr;(function(e){function t(r,u){return{tabSize:r,insertSpaces:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.uinteger(u.tabSize)&&_.boolean(u.insertSpaces)}e.is=n})(Mr||(Mr={}));var $r;(function(e){function t(r,u,i){return{range:r,target:u,data:i}}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(u.range)&&(_.undefined(u.target)||_.string(u.target))}e.is=n})($r||($r={}));var Lr;(function(e){function t(r,u){return{range:r,parent:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&(u.parent===void 0||e.is(u.parent))}e.is=n})(Lr||(Lr={}));var Ir;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(Ir||(Ir={}));var Wr;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(Wr||(Wr={}));var Hr;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(Hr||(Hr={}));var zr;(function(e){function t(r,u){return{range:r,text:u}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&_.string(u.text)}e.is=n})(zr||(zr={}));var Ur;(function(e){function t(r,u,i){return{range:r,variableName:u,caseSensitiveLookup:i}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&_.boolean(u.caseSensitiveLookup)&&(_.string(u.variableName)||u.variableName===void 0)}e.is=n})(Ur||(Ur={}));var Vr;(function(e){function t(r,u){return{range:r,expression:u}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&(_.string(u.expression)||u.expression===void 0)}e.is=n})(Vr||(Vr={}));var Jr;(function(e){function t(r,u){return{frameId:r,stoppedLocation:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(r.stoppedLocation)}e.is=n})(Jr||(Jr={}));var jn;(function(e){e.Type=1,e.Parameter=2;function t(n){return n===1||n===2}e.is=t})(jn||(jn={}));var Mn;(function(e){function t(r){return{value:r}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&(u.tooltip===void 0||_.string(u.tooltip)||Vt.is(u.tooltip))&&(u.location===void 0||tn.is(u.location))&&(u.command===void 0||At.is(u.command))}e.is=n})(Mn||(Mn={}));var Gr;(function(e){function t(r,u,i){var o={position:r,label:u};return i!==void 0&&(o.kind=i),o}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&st.is(u.position)&&(_.string(u.label)||_.typedArray(u.label,Mn.is))&&(u.kind===void 0||jn.is(u.kind))&&u.textEdits===void 0||_.typedArray(u.textEdits,gt.is)&&(u.tooltip===void 0||_.string(u.tooltip)||Vt.is(u.tooltip))&&(u.paddingLeft===void 0||_.boolean(u.paddingLeft))&&(u.paddingRight===void 0||_.boolean(u.paddingRight))}e.is=n})(Gr||(Gr={}));var Zr;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&An.is(r.uri)&&_.string(r.name)}e.is=t})(Zr||(Zr={}));var vs=[`
`,`\r
`,"\r"],Xr;(function(e){function t(i,o,a,c){return new ks(i,o,a,c)}e.create=t;function n(i){var o=i;return!!(_.defined(o)&&_.string(o.uri)&&(_.undefined(o.languageId)||_.string(o.languageId))&&_.uinteger(o.lineCount)&&_.func(o.getText)&&_.func(o.positionAt)&&_.func(o.offsetAt))}e.is=n;function r(i,o){for(var a=i.getText(),c=u(o,function(j,ue){var ie=j.range.start.line-ue.range.start.line;return ie===0?j.range.start.character-ue.range.start.character:ie}),l=a.length,C=c.length-1;C>=0;C--){var S=c[C],B=i.offsetAt(S.range.start),y=i.offsetAt(S.range.end);if(y<=l)a=a.substring(0,B)+S.newText+a.substring(y,a.length);else throw new Error("Overlapping edit");l=B}return a}e.applyEdits=r;function u(i,o){if(i.length<=1)return i;var a=i.length/2|0,c=i.slice(0,a),l=i.slice(a);u(c,o),u(l,o);for(var C=0,S=0,B=0;C<c.length&&S<l.length;){var y=o(c[C],l[S]);y<=0?i[B++]=c[C++]:i[B++]=l[S++]}for(;C<c.length;)i[B++]=c[C++];for(;S<l.length;)i[B++]=l[S++];return i}})(Xr||(Xr={}));var ks=function(){function e(t,n,r,u){this._uri=t,this._languageId=n,this._version=r,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content},e.prototype.update=function(t,n){this._content=t.text,this._version=n,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],n=this._content,r=!0,u=0;u<n.length;u++){r&&(t.push(u),r=!1);var i=n.charAt(u);r=i==="\r"||i===`
`,i==="\r"&&u+1<n.length&&n.charAt(u+1)===`
`&&u++}r&&n.length>0&&t.push(n.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var n=this.getLineOffsets(),r=0,u=n.length;if(u===0)return st.create(0,t);for(;r<u;){var i=Math.floor((r+u)/2);n[i]>t?u=i:r=i+1}var o=r-1;return st.create(o,t-n[o])},e.prototype.offsetAt=function(t){var n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;var r=n[t.line],u=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,u),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),_;(function(e){var t=Object.prototype.toString;function n(y){return typeof y<"u"}e.defined=n;function r(y){return typeof y>"u"}e.undefined=r;function u(y){return y===!0||y===!1}e.boolean=u;function i(y){return t.call(y)==="[object String]"}e.string=i;function o(y){return t.call(y)==="[object Number]"}e.number=o;function a(y,j,ue){return t.call(y)==="[object Number]"&&j<=y&&y<=ue}e.numberRange=a;function c(y){return t.call(y)==="[object Number]"&&-2147483648<=y&&y<=2147483647}e.integer=c;function l(y){return t.call(y)==="[object Number]"&&0<=y&&y<=2147483647}e.uinteger=l;function C(y){return t.call(y)==="[object Function]"}e.func=C;function S(y){return y!==null&&typeof y=="object"}e.objectLiteral=S;function B(y,j){return Array.isArray(y)&&y.every(j)}e.typedArray=B})(_||(_={}));const Rs=Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Ft},get ChangeAnnotation(){return St},get ChangeAnnotationIdentifier(){return Ue},get CodeAction(){return Nr},get CodeActionContext(){return Or},get CodeActionKind(){return qr},get CodeActionTriggerKind(){return sn},get CodeDescription(){return lr},get CodeLens(){return jr},get Color(){return Pn},get ColorInformation(){return ir},get ColorPresentation(){return or},get Command(){return At},get CompletionItem(){return Er},get CompletionItemKind(){return hr},get CompletionItemLabelDetails(){return yr},get CompletionItemTag(){return Fr},get CompletionList(){return br},get CreateFile(){return Ht},get DeleteFile(){return Ut},get Diagnostic(){return nn},get DiagnosticRelatedInformation(){return qn},get DiagnosticSeverity(){return Dr},get DiagnosticTag(){return cr},get DocumentHighlight(){return wr},get DocumentHighlightKind(){return Rr},get DocumentLink(){return $r},get DocumentSymbol(){return Pr},get DocumentUri(){return nr},EOL:vs,get FoldingRange(){return ar},get FoldingRangeKind(){return sr},get FormattingOptions(){return Mr},get Hover(){return _r},get InlayHint(){return Gr},get InlayHintKind(){return jn},get InlayHintLabelPart(){return Mn},get InlineValueContext(){return Jr},get InlineValueEvaluatableExpression(){return Vr},get InlineValueText(){return zr},get InlineValueVariableLookup(){return Ur},get InsertReplaceEdit(){return Cr},get InsertTextFormat(){return pr},get InsertTextMode(){return mr},get Location(){return tn},get LocationLink(){return ur},get MarkedString(){return on},get MarkupContent(){return Vt},get MarkupKind(){return Nn},get OptionalVersionedTextDocumentIdentifier(){return un},get ParameterInformation(){return vr},get Position(){return st},get Range(){return Pe},get RenameFile(){return zt},get SelectionRange(){return Lr},get SemanticTokenModifiers(){return Wr},get SemanticTokenTypes(){return Ir},get SemanticTokens(){return Hr},get SignatureInformation(){return kr},get SymbolInformation(){return Sr},get SymbolKind(){return Br},get SymbolTag(){return Tr},get TextDocument(){return Xr},get TextDocumentEdit(){return rn},get TextDocumentIdentifier(){return fr},get TextDocumentItem(){return gr},get TextEdit(){return gt},get URI(){return An},get VersionedTextDocumentIdentifier(){return dr},WorkspaceChange:_s,get WorkspaceEdit(){return On},get WorkspaceFolder(){return Zr},get WorkspaceSymbol(){return Ar},get integer(){return rr},get uinteger(){return en}},Symbol.toStringTag,{value:"Module"})),uu=te(Rs);var iu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=Jt;(function(a){a.clientToServer="clientToServer",a.serverToClient="serverToClient",a.both="both"})(e.MessageDirection||(e.MessageDirection={}));class n{constructor(c){this.method=c}}e.RegistrationType=n;class r extends t.RequestType0{constructor(c){super(c)}}e.ProtocolRequestType0=r;class u extends t.RequestType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolRequestType=u;class i extends t.NotificationType0{constructor(c){super(c)}}e.ProtocolNotificationType0=i;class o extends t.NotificationType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolNotificationType=o})(iu);const ws=Ce(iu),Bs=ne({__proto__:null,default:ws},[iu]),qe=te(Bs);var ou={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var yi=Ne.objectLiteral=Si=Ne.typedArray=Ti=Ne.stringArray=Bi=Ne.array=Ri=Ne.func=ki=Ne.error=vi=Ne.number=_i=Ne.string=Ei=Ne.boolean=void 0;function Ts(e){return e===!0||e===!1}var Ei=Ne.boolean=Ts;function bi(e){return typeof e=="string"||e instanceof String}var _i=Ne.string=bi;function Ss(e){return typeof e=="number"||e instanceof Number}var vi=Ne.number=Ss;function As(e){return e instanceof Error}var ki=Ne.error=As;function Ps(e){return typeof e=="function"}var Ri=Ne.func=Ps;function wi(e){return Array.isArray(e)}var Bi=Ne.array=wi;function qs(e){return wi(e)&&e.every(t=>bi(t))}var Ti=Ne.stringArray=qs;function Os(e,t){return Array.isArray(e)&&e.every(t)}var Si=Ne.typedArray=Os;function Ns(e){return e!==null&&typeof e=="object"}yi=Ne.objectLiteral=Ns;const js=ne({__proto__:null,get array(){return Bi},get boolean(){return Ei},default:Ne,get error(){return ki},get func(){return Ri},get number(){return vi},get objectLiteral(){return yi},get string(){return _i},get stringArray(){return Ti},get typedArray(){return Si}},[Ne]),su=te(js);var au={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=qe;(function(n){n.method="textDocument/implementation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.ImplementationRequest||(e.ImplementationRequest={}))})(au);const Ms=Ce(au),$s=ne({__proto__:null,default:Ms},[au]),Ls=te($s);var Du={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=qe;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeDefinitionRequest||(e.TypeDefinitionRequest={}))})(Du);const Is=Ce(Du),Ws=ne({__proto__:null,default:Is},[Du]),Hs=te(Ws);var cu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=qe;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})),function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={}))})(cu);const zs=Ce(cu),Us=ne({__proto__:null,default:zs},[cu]),Vs=te(Us);var lu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=qe;(function(n){n.method="workspace/configuration",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ConfigurationRequest||(e.ConfigurationRequest={}))})(lu);const Js=Ce(lu),Gs=ne({__proto__:null,default:Js},[lu]),Zs=te(Gs);var fu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=qe;(function(n){n.method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DocumentColorRequest||(e.DocumentColorRequest={})),function(n){n.method="textDocument/colorPresentation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.ColorPresentationRequest||(e.ColorPresentationRequest={}))})(fu);const Xs=Ce(fu),Qs=ne({__proto__:null,default:Xs},[fu]),Ys=te(Qs);var du={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=void 0;const t=qe;(function(n){n.method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.FoldingRangeRequest||(e.FoldingRangeRequest={}))})(du);const Ks=Ce(du),xs=ne({__proto__:null,default:Ks},[du]),ea=te(xs);var gu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=qe;(function(n){n.method="textDocument/declaration",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DeclarationRequest||(e.DeclarationRequest={}))})(gu);const ta=Ce(gu),na=ne({__proto__:null,default:ta},[gu]),ra=te(na);var hu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=qe;(function(n){n.method="textDocument/selectionRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.SelectionRangeRequest||(e.SelectionRangeRequest={}))})(hu);const ua=Ce(hu),ia=ne({__proto__:null,default:ua},[hu]),oa=te(ia);var pu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=Jt,n=qe;(function(r){r.type=new t.ProgressType;function u(i){return i===r.type}r.is=u})(e.WorkDoneProgress||(e.WorkDoneProgress={})),function(r){r.method="window/workDoneProgress/create",r.messageDirection=n.MessageDirection.serverToClient,r.type=new n.ProtocolRequestType(r.method)}(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})),function(r){r.method="window/workDoneProgress/cancel",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolNotificationType(r.method)}(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={}))})(pu);const sa=Ce(pu),aa=ne({__proto__:null,default:sa},[pu]),Da=te(aa);var Fu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=qe;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={}))})(Fu);const ca=Ce(Fu),la=ne({__proto__:null,default:ca},[Fu]),fa=te(la);var Cu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=qe;(function(r){r.Relative="relative"})(e.TokenFormat||(e.TokenFormat={}));var n;(function(r){r.method="textDocument/semanticTokens",r.type=new t.RegistrationType(r.method)})(n=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})),function(r){r.method="textDocument/semanticTokens/full",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(r){r.method="textDocument/semanticTokens/full/delta",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})),function(r){r.method="textDocument/semanticTokens/range",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})),function(r){r.method="workspace/semanticTokens/refresh",r.messageDirection=t.MessageDirection.serverToClient,r.type=new t.ProtocolRequestType0(r.method)}(e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={}))})(Cu);const da=Ce(Cu),ga=ne({__proto__:null,default:da},[Cu]),ha=te(ga);var mu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=qe;(function(n){n.method="window/showDocument",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ShowDocumentRequest||(e.ShowDocumentRequest={}))})(mu);const pa=Ce(mu),Fa=ne({__proto__:null,default:pa},[mu]),Ca=te(Fa);var yu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=qe;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={}))})(yu);const ma=Ce(yu),ya=ne({__proto__:null,default:ma},[yu]),Ea=te(ya);var Eu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=qe;(function(n){n.file="file",n.folder="folder"})(e.FileOperationPatternKind||(e.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={}))})(Eu);const ba=Ce(Eu),_a=ne({__proto__:null,default:ba},[Eu]),va=te(_a);var bu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=qe;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(e.UniquenessLevel||(e.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(e.MonikerKind||(e.MonikerKind={})),function(n){n.method="textDocument/moniker",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.MonikerRequest||(e.MonikerRequest={}))})(bu);const ka=Ce(bu),Ra=ne({__proto__:null,default:ka},[bu]),wa=te(Ra);var _u={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=qe;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeHierarchyPrepareRequest||(e.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySupertypesRequest||(e.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySubtypesRequest||(e.TypeHierarchySubtypesRequest={}))})(_u);const Ba=Ce(_u),Ta=ne({__proto__:null,default:Ba},[_u]),Sa=te(Ta);var vu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=qe;(function(n){n.method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlineValueRequest||(e.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlineValueRefreshRequest||(e.InlineValueRefreshRequest={}))})(vu);const Aa=Ce(vu),Pa=ne({__proto__:null,default:Aa},[vu]),qa=te(Pa);var ku={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=qe;(function(n){n.method="textDocument/inlayHint",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlayHintRequest||(e.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.InlayHintResolveRequest||(e.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlayHintRefreshRequest||(e.InlayHintRefreshRequest={}))})(ku);const Oa=Ce(ku),Na=ne({__proto__:null,default:Oa},[ku]),ja=te(Na);var Ru={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=Jt,n=su,r=qe;(function(u){function i(o){const a=o;return a&&n.boolean(a.retriggerRequest)}u.is=i})(e.DiagnosticServerCancellationData||(e.DiagnosticServerCancellationData={})),function(u){u.Full="full",u.Unchanged="unchanged"}(e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={})),function(u){u.method="textDocument/diagnostic",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType}(e.DocumentDiagnosticRequest||(e.DocumentDiagnosticRequest={})),function(u){u.method="workspace/diagnostic",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType}(e.WorkspaceDiagnosticRequest||(e.WorkspaceDiagnosticRequest={})),function(u){u.method="workspace/diagnostic/refresh",u.messageDirection=r.MessageDirection.serverToClient,u.type=new r.ProtocolRequestType0(u.method)}(e.DiagnosticRefreshRequest||(e.DiagnosticRefreshRequest={}))})(Ru);const Ma=Ce(Ru),$a=ne({__proto__:null,default:Ma},[Ru]),La=te($a);var wu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=uu,n=su,r=qe;var u;(function(c){c.Markup=1,c.Code=2;function l(C){return C===1||C===2}c.is=l})(u=e.NotebookCellKind||(e.NotebookCellKind={}));var i;(function(c){function l(B,y){const j={executionOrder:B};return(y===!0||y===!1)&&(j.success=y),j}c.create=l;function C(B){const y=B;return n.objectLiteral(y)&&t.uinteger.is(y.executionOrder)&&(y.success===void 0||n.boolean(y.success))}c.is=C;function S(B,y){return B===y?!0:B==null||y===null||y===void 0?!1:B.executionOrder===y.executionOrder&&B.success===y.success}c.equals=S})(i=e.ExecutionSummary||(e.ExecutionSummary={}));var o;(function(c){function l(y,j){return{kind:y,document:j}}c.create=l;function C(y){const j=y;return n.objectLiteral(j)&&u.is(j.kind)&&t.DocumentUri.is(j.document)&&(j.metadata===void 0||n.objectLiteral(j.metadata))}c.is=C;function S(y,j){const ue=new Set;return y.document!==j.document&&ue.add("document"),y.kind!==j.kind&&ue.add("kind"),y.executionSummary!==j.executionSummary&&ue.add("executionSummary"),(y.metadata!==void 0||j.metadata!==void 0)&&!B(y.metadata,j.metadata)&&ue.add("metadata"),(y.executionSummary!==void 0||j.executionSummary!==void 0)&&!i.equals(y.executionSummary,j.executionSummary)&&ue.add("executionSummary"),ue}c.diff=S;function B(y,j){if(y===j)return!0;if(y==null||j===null||j===void 0||typeof y!=typeof j||typeof y!="object")return!1;const ue=Array.isArray(y),ie=Array.isArray(j);if(ue!==ie)return!1;if(ue&&ie){if(y.length!==j.length)return!1;for(let X=0;X<y.length;X++)if(!B(y[X],j[X]))return!1}if(n.objectLiteral(y)&&n.objectLiteral(j)){const X=Object.keys(y),le=Object.keys(j);if(X.length!==le.length||(X.sort(),le.sort(),!B(X,le)))return!1;for(let K=0;K<X.length;K++){const ye=X[K];if(!B(y[ye],j[ye]))return!1}}return!0}})(o=e.NotebookCell||(e.NotebookCell={})),function(c){function l(S,B,y,j){return{uri:S,notebookType:B,version:y,cells:j}}c.create=l;function C(S){const B=S;return n.objectLiteral(B)&&n.string(B.uri)&&t.integer.is(B.version)&&n.typedArray(B.cells,o.is)}c.is=C}(e.NotebookDocument||(e.NotebookDocument={}));var a;(function(c){c.method="notebookDocument/sync",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.RegistrationType(c.method)})(a=e.NotebookDocumentSyncRegistrationType||(e.NotebookDocumentSyncRegistrationType={})),function(c){c.method="notebookDocument/didOpen",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidOpenNotebookDocumentNotification||(e.DidOpenNotebookDocumentNotification={})),function(c){function l(S){const B=S;return n.objectLiteral(B)&&t.uinteger.is(B.start)&&t.uinteger.is(B.deleteCount)&&(B.cells===void 0||n.typedArray(B.cells,o.is))}c.is=l;function C(S,B,y){const j={start:S,deleteCount:B};return y!==void 0&&(j.cells=y),j}c.create=C}(e.NotebookCellArrayChange||(e.NotebookCellArrayChange={})),function(c){c.method="notebookDocument/didChange",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidChangeNotebookDocumentNotification||(e.DidChangeNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didSave",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidSaveNotebookDocumentNotification||(e.DidSaveNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didClose",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidCloseNotebookDocumentNotification||(e.DidCloseNotebookDocumentNotification={}))})(wu);const Ia=Ce(wu),Wa=ne({__proto__:null,default:Ia},[wu]),Ha=te(Wa);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=void 0;const t=qe,n=uu,r=su,u=Ls;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return u.ImplementationRequest}});const i=Hs;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const o=Vs;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const a=Zs;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=Ys;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const l=ea;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return l.FoldingRangeRequest}});const C=ra;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return C.DeclarationRequest}});const S=oa;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return S.SelectionRangeRequest}});const B=Da;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return B.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return B.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return B.WorkDoneProgressCancelNotification}});const y=fa;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return y.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return y.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return y.CallHierarchyPrepareRequest}});const j=ha;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return j.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return j.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return j.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return j.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return j.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return j.SemanticTokensRegistrationType}});const ue=Ca;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return ue.ShowDocumentRequest}});const ie=Ea;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return ie.LinkedEditingRangeRequest}});const X=va;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return X.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return X.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return X.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return X.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return X.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return X.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return X.WillDeleteFilesRequest}});const le=wa;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return le.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return le.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return le.MonikerRequest}});const K=Sa;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return K.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return K.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return K.TypeHierarchySupertypesRequest}});const ye=qa;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return ye.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ye.InlineValueRefreshRequest}});const He=ja;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return He.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return He.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return He.InlayHintRefreshRequest}});const Me=La;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Me.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Me.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Me.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Me.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Me.DiagnosticRefreshRequest}});const Re=Ha;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return Re.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return Re.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return Re.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return Re.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Re.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Re.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidCloseNotebookDocumentNotification}});var Ve;(function(s){function A(L){const J=L;return r.string(J.language)||r.string(J.scheme)||r.string(J.pattern)}s.is=A})(Ve=e.TextDocumentFilter||(e.TextDocumentFilter={}));var we;(function(s){function A(L){const J=L;return r.objectLiteral(J)&&(r.string(J.notebookType)||r.string(J.scheme)||r.string(J.pattern))}s.is=A})(we=e.NotebookDocumentFilter||(e.NotebookDocumentFilter={}));var ut;(function(s){function A(L){const J=L;return r.objectLiteral(J)&&(r.string(J.notebook)||we.is(J.notebook))&&(J.language===void 0||r.string(J.language))}s.is=A})(ut=e.NotebookCellTextDocumentFilter||(e.NotebookCellTextDocumentFilter={}));var $;(function(s){function A(L){if(!Array.isArray(L))return!1;for(let J of L)if(!r.string(J)&&!Ve.is(J)&&!ut.is(J))return!1;return!0}s.is=A})($=e.DocumentSelector||(e.DocumentSelector={})),function(s){s.method="client/registerCapability",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.RegistrationRequest||(e.RegistrationRequest={})),function(s){s.method="client/unregisterCapability",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.UnregistrationRequest||(e.UnregistrationRequest={})),function(s){s.Create="create",s.Rename="rename",s.Delete="delete"}(e.ResourceOperationKind||(e.ResourceOperationKind={})),function(s){s.Abort="abort",s.Transactional="transactional",s.TextOnlyTransactional="textOnlyTransactional",s.Undo="undo"}(e.FailureHandlingKind||(e.FailureHandlingKind={})),function(s){s.UTF8="utf-8",s.UTF16="utf-16",s.UTF32="utf-32"}(e.PositionEncodingKind||(e.PositionEncodingKind={})),function(s){function A(L){const J=L;return J&&r.string(J.id)&&J.id.length>0}s.hasId=A}(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})),function(s){function A(L){const J=L;return J&&(J.documentSelector===null||$.is(J.documentSelector))}s.is=A}(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})),function(s){function A(J){const ce=J;return r.objectLiteral(ce)&&(ce.workDoneProgress===void 0||r.boolean(ce.workDoneProgress))}s.is=A;function L(J){const ce=J;return ce&&r.boolean(ce.workDoneProgress)}s.hasWorkDoneProgress=L}(e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})),function(s){s.method="initialize",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.InitializeRequest||(e.InitializeRequest={})),function(s){s.unknownProtocolVersion=1}(e.InitializeErrorCodes||(e.InitializeErrorCodes={})),function(s){s.method="initialized",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.InitializedNotification||(e.InitializedNotification={})),function(s){s.method="shutdown",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType0(s.method)}(e.ShutdownRequest||(e.ShutdownRequest={})),function(s){s.method="exit",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType0(s.method)}(e.ExitNotification||(e.ExitNotification={})),function(s){s.method="workspace/didChangeConfiguration",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})),function(s){s.Error=1,s.Warning=2,s.Info=3,s.Log=4}(e.MessageType||(e.MessageType={})),function(s){s.method="window/showMessage",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.ShowMessageNotification||(e.ShowMessageNotification={})),function(s){s.method="window/showMessageRequest",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.ShowMessageRequest||(e.ShowMessageRequest={})),function(s){s.method="window/logMessage",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.LogMessageNotification||(e.LogMessageNotification={})),function(s){s.method="telemetry/event",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.TelemetryEventNotification||(e.TelemetryEventNotification={})),function(s){s.None=0,s.Full=1,s.Incremental=2}(e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})),function(s){s.method="textDocument/didOpen",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})),function(s){function A(J){let ce=J;return ce!=null&&typeof ce.text=="string"&&ce.range!==void 0&&(ce.rangeLength===void 0||typeof ce.rangeLength=="number")}s.isIncremental=A;function L(J){let ce=J;return ce!=null&&typeof ce.text=="string"&&ce.range===void 0&&ce.rangeLength===void 0}s.isFull=L}(e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})),function(s){s.method="textDocument/didChange",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})),function(s){s.method="textDocument/didClose",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})),function(s){s.method="textDocument/didSave",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})),function(s){s.Manual=1,s.AfterDelay=2,s.FocusOut=3}(e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})),function(s){s.method="textDocument/willSave",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})),function(s){s.method="textDocument/willSaveWaitUntil",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})),function(s){s.method="workspace/didChangeWatchedFiles",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})),function(s){s.Created=1,s.Changed=2,s.Deleted=3}(e.FileChangeType||(e.FileChangeType={})),function(s){function A(L){const J=L;return r.objectLiteral(J)&&(n.URI.is(J.baseUri)||n.WorkspaceFolder.is(J.baseUri))&&r.string(J.pattern)}s.is=A}(e.RelativePattern||(e.RelativePattern={})),function(s){s.Create=1,s.Change=2,s.Delete=4}(e.WatchKind||(e.WatchKind={})),function(s){s.method="textDocument/publishDiagnostics",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})),function(s){s.Invoked=1,s.TriggerCharacter=2,s.TriggerForIncompleteCompletions=3}(e.CompletionTriggerKind||(e.CompletionTriggerKind={})),function(s){s.method="textDocument/completion",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CompletionRequest||(e.CompletionRequest={})),function(s){s.method="completionItem/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CompletionResolveRequest||(e.CompletionResolveRequest={})),function(s){s.method="textDocument/hover",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.HoverRequest||(e.HoverRequest={})),function(s){s.Invoked=1,s.TriggerCharacter=2,s.ContentChange=3}(e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})),function(s){s.method="textDocument/signatureHelp",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.SignatureHelpRequest||(e.SignatureHelpRequest={})),function(s){s.method="textDocument/definition",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DefinitionRequest||(e.DefinitionRequest={})),function(s){s.method="textDocument/references",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.ReferencesRequest||(e.ReferencesRequest={})),function(s){s.method="textDocument/documentHighlight",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})),function(s){s.method="textDocument/documentSymbol",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})),function(s){s.method="textDocument/codeAction",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeActionRequest||(e.CodeActionRequest={})),function(s){s.method="codeAction/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})),function(s){s.method="workspace/symbol",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})),function(s){s.method="workspaceSymbol/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WorkspaceSymbolResolveRequest||(e.WorkspaceSymbolResolveRequest={})),function(s){s.method="textDocument/codeLens",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeLensRequest||(e.CodeLensRequest={})),function(s){s.method="codeLens/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})),function(s){s.method="workspace/codeLens/refresh",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType0(s.method)}(e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})),function(s){s.method="textDocument/documentLink",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentLinkRequest||(e.DocumentLinkRequest={})),function(s){s.method="documentLink/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})),function(s){s.method="textDocument/formatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})),function(s){s.method="textDocument/rangeFormatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})),function(s){s.method="textDocument/onTypeFormatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})),function(s){s.Identifier=1}(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})),function(s){s.method="textDocument/rename",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.RenameRequest||(e.RenameRequest={})),function(s){s.method="textDocument/prepareRename",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.PrepareRenameRequest||(e.PrepareRenameRequest={})),function(s){s.method="workspace/executeCommand",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})),function(s){s.method="workspace/applyEdit",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType("workspace/applyEdit")}(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={}))})(ou);const za=Ce(ou),Ua=ne({__proto__:null,default:za},[ou]),Va=te(Ua);var an={};Object.defineProperty(an,"__esModule",{value:!0});var Ai=an.createProtocolConnection=void 0;const ti=Jt;function Ja(e,t,n,r){return ti.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,ti.createMessageConnection)(e,t,n,r)}Ai=an.createProtocolConnection=Ja;const Ga=ne({__proto__:null,get createProtocolConnection(){return Ai},default:an},[an]),Za=te(Ga);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(u,i,o,a){a===void 0&&(a=o);var c=Object.getOwnPropertyDescriptor(i,o);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(u,a,c)}:function(u,i,o,a){a===void 0&&(a=o),u[a]=i[o]}),n=$e&&$e.__exportStar||function(u,i){for(var o in u)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,u,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(Jt,e),n(uu,e),n(qe,e),n(Va,e);var r=Za;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}}),function(u){u.lspReservedErrorRangeStart=-32899,u.RequestFailed=-32803,u.ServerCancelled=-32802,u.ContentModified=-32801,u.RequestCancelled=-32800,u.lspReservedErrorRangeEnd=-32800}(e.LSPErrorCodes||(e.LSPErrorCodes={}))})(ru);const Xa=Ce(ru),Qa=ne({__proto__:null,default:Xa},[ru]),Ya=te(Qa);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(i,o,a,c){c===void 0&&(c=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(i,c,l)}:function(i,o,a,c){c===void 0&&(c=a),i[c]=o[a]}),n=$e&&$e.__exportStar||function(i,o){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const r=xu;n(xu,e),n(Ya,e);function u(i,o,a,c){return(0,r.createMessageConnection)(i,o,a,c)}e.createProtocolConnection=u})(xr);const Ka=Ce(xr),xa=ne({__proto__:null,default:Ka},[xr]),We=te(xa);Object.defineProperty(Ct,"__esModule",{value:!0});var Pi=Ct.SemanticTokensBuilder=Ni=Ct.SemanticTokensDiff=qi=Ct.SemanticTokensFeature=void 0;const wn=We,eD=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(wn.SemanticTokensRefreshRequest.type),on:t=>{const n=wn.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{const n=wn.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{const n=wn.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};var qi=Ct.SemanticTokensFeature=eD;class Oi{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){const t=this.originalSequence.length,n=this.modifiedSequence.length;let r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let u=t-1,i=n-1;for(;u>=r&&i>=r&&this.originalSequence[u]===this.modifiedSequence[i];)u--,i--;(u<r||i<r)&&(u++,i++);const o=u-r+1,a=this.modifiedSequence.slice(r,i+1);return a.length===1&&a[0]===this.originalSequence[u]?[{start:r,deleteCount:o-1}]:[{start:r,deleteCount:o,data:a}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}}var Ni=Ct.SemanticTokensDiff=Oi;class tD{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,u,i){let o=t,a=n;this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=r,this._data[this._dataLen++]=u,this._data[this._dataLen++]=i,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new Oi(this._prevData,this._data).computeDiff()}:this.build()}}Pi=Ct.SemanticTokensBuilder=tD;const nD=ne({__proto__:null,get SemanticTokensBuilder(){return Pi},get SemanticTokensDiff(){return Ni},get SemanticTokensFeature(){return qi},default:Ct},[Ct]),ji=te(nD);var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var Mi=Dn.TextDocuments=void 0;const Tt=We;class rD{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new Tt.Emitter,this._onDidOpen=new Tt.Emitter,this._onDidClose=new Tt.Emitter,this._onDidSave=new Tt.Emitter,this._onWillSave=new Tt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=Tt.TextDocumentSyncKind.Incremental;const n=[];return n.push(t.onDidOpenTextDocument(r=>{const u=r.textDocument,i=this._configuration.create(u.uri,u.languageId,u.version,u.text);this._syncedDocuments.set(u.uri,i);const o=Object.freeze({document:i});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)})),n.push(t.onDidChangeTextDocument(r=>{const u=r.textDocument,i=r.contentChanges;if(i.length===0)return;const{version:o}=u;if(o==null)throw new Error(`Received document change event for ${u.uri} without valid version identifier`);let a=this._syncedDocuments.get(u.uri);a!==void 0&&(a=this._configuration.update(a,i,o),this._syncedDocuments.set(u.uri,a),this._onDidChangeContent.fire(Object.freeze({document:a})))})),n.push(t.onDidCloseTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:u})))})),n.push(t.onWillSaveTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&this._onWillSave.fire(Object.freeze({document:u,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,u)=>{let i=this._syncedDocuments.get(r.textDocument.uri);return i!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:r.reason}),u):[]})),n.push(t.onDidSaveTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&this._onDidSave.fire(Object.freeze({document:u}))})),Tt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}}Mi=Dn.TextDocuments=rD;const uD=ne({__proto__:null,get TextDocuments(){return Mi},default:Dn},[Dn]),$i=te(uD);var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var Li=Pt.NotebookDocuments=Ii=Pt.NotebookSyncFeature=void 0;const at=We,ni=$i,iD=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(at.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(at.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(at.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(at.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};var Ii=Pt.NotebookSyncFeature=iD;class It{onDidOpenTextDocument(t){return this.openHandler=t,at.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,at.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,at.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return It.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return It.NULL_DISPOSE}onDidSaveTextDocument(){return It.NULL_DISPOSE}}It.NULL_DISPOSE=Object.freeze({dispose:()=>{}});class oD{constructor(t){t instanceof ni.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new ni.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new at.Emitter,this._onDidChange=new at.Emitter,this._onDidSave=new at.Emitter,this._onDidClose=new at.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){const n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){const n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){const n=new It,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(u=>{this.notebookDocuments.set(u.notebookDocument.uri,u.notebookDocument);for(const i of u.cellTextDocuments)n.openTextDocument({textDocument:i});this.updateCellMap(u.notebookDocument),this._onDidOpen.fire(u.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);if(i===void 0)return;i.version=u.notebookDocument.version;const o=i.metadata;let a=!1;const c=u.change;c.metadata!==void 0&&(a=!0,i.metadata=c.metadata);const l=[],C=[],S=[],B=[];if(c.cells!==void 0){const X=c.cells;if(X.structure!==void 0){const le=X.structure.array;if(i.cells.splice(le.start,le.deleteCount,...le.cells!==void 0?le.cells:[]),X.structure.didOpen!==void 0)for(const K of X.structure.didOpen)n.openTextDocument({textDocument:K}),l.push(K.uri);if(X.structure.didClose)for(const K of X.structure.didClose)n.closeTextDocument({textDocument:K}),C.push(K.uri)}if(X.data!==void 0){const le=new Map(X.data.map(K=>[K.document,K]));for(let K=0;K<=i.cells.length;K++){const ye=le.get(i.cells[K].document);if(ye!==void 0){const He=i.cells.splice(K,1,ye);if(S.push({old:He[0],new:ye}),le.delete(ye.document),le.size===0)break}}}if(X.textContent!==void 0)for(const le of X.textContent)n.changeTextDocument({textDocument:le.document,contentChanges:le.changes}),B.push(le.document.uri)}this.updateCellMap(i);const y={notebookDocument:i};a&&(y.metadata={old:o,new:i.metadata});const j=[];for(const X of l)j.push(this.getNotebookCell(X));const ue=[];for(const X of C)ue.push(this.getNotebookCell(X));const ie=[];for(const X of B)ie.push(this.getNotebookCell(X));(j.length>0||ue.length>0||S.length>0||ie.length>0)&&(y.cells={added:j,removed:ue,changed:{data:S,textContent:ie}}),(y.metadata!==void 0||y.cells!==void 0)&&this._onDidChange.fire(y)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);i!==void 0&&this._onDidSave.fire(i)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);if(i!==void 0){this._onDidClose.fire(i);for(const o of u.cellTextDocuments)n.closeTextDocument({textDocument:o});this.notebookDocuments.delete(u.notebookDocument.uri);for(const o of i.cells)this.notebookCellMap.delete(o.document)}})),at.Disposable.create(()=>{r.forEach(u=>u.dispose())})}updateCellMap(t){for(const n of t.cells)this.notebookCellMap.set(n.document,[n,t])}}Li=Pt.NotebookDocuments=oD;const sD=ne({__proto__:null,get NotebookDocuments(){return Li},get NotebookSyncFeature(){return Ii},default:Pt},[Pt]),Wi=te(sD);var Bu={},je={};Object.defineProperty(je,"__esModule",{value:!0});var Hi=je.thenable=xi=je.typedArray=Ki=je.stringArray=Yi=je.array=Xi=je.func=Gi=je.error=Ji=je.number=Vi=je.string=zi=je.boolean=void 0;function aD(e){return e===!0||e===!1}var zi=je.boolean=aD;function Ui(e){return typeof e=="string"||e instanceof String}var Vi=je.string=Ui;function DD(e){return typeof e=="number"||e instanceof Number}var Ji=je.number=DD;function cD(e){return e instanceof Error}var Gi=je.error=cD;function Zi(e){return typeof e=="function"}var Xi=je.func=Zi;function Qi(e){return Array.isArray(e)}var Yi=je.array=Qi;function lD(e){return Qi(e)&&e.every(t=>Ui(t))}var Ki=je.stringArray=lD;function fD(e,t){return Array.isArray(e)&&e.every(t)}var xi=je.typedArray=fD;function dD(e){return e&&Zi(e.then)}Hi=je.thenable=dD;const gD=ne({__proto__:null,get array(){return Yi},get boolean(){return zi},default:je,get error(){return Gi},get func(){return Xi},get number(){return Ji},get string(){return Vi},get stringArray(){return Ki},get thenable(){return Hi},get typedArray(){return xi}},[je]),eo=te(gD);var rt={};Object.defineProperty(rt,"__esModule",{value:!0});var to=rt.generateUuid=so=rt.parse=oo=rt.isUUID=uo=rt.v4=no=rt.empty=void 0;class Tu{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}}class De extends Tu{constructor(){super([De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),"-",De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),"-","4",De._randomHex(),De._randomHex(),De._randomHex(),"-",De._oneOf(De._timeHighBits),De._randomHex(),De._randomHex(),De._randomHex(),"-",De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return De._oneOf(De._chars)}}De._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];De._timeHighBits=["8","9","a","b"];var no=rt.empty=new Tu("00000000-0000-0000-0000-000000000000");function ro(){return new De}var uo=rt.v4=ro;const hD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function io(e){return hD.test(e)}var oo=rt.isUUID=io;function pD(e){if(!io(e))throw new Error("invalid uuid");return new Tu(e)}var so=rt.parse=pD;function FD(){return ro().asHex()}to=rt.generateUuid=FD;const CD=ne({__proto__:null,default:rt,get empty(){return no},get generateUuid(){return to},get isUUID(){return oo},get parse(){return so},get v4(){return uo}},[rt]),ao=te(CD);var mt={};Object.defineProperty(mt,"__esModule",{value:!0});var Do=mt.attachPartialResult=lo=mt.ProgressFeature=co=mt.attachWorkDone=void 0;const _t=We,mD=ao;class vt{constructor(t,n){this._connection=t,this._token=n,vt.Instances.set(this._token,this)}begin(t,n,r,u){let i={kind:"begin",title:t,percentage:n,message:r,cancellable:u};this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,i)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,r)}done(){vt.Instances.delete(this._token),this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,{kind:"end"})}}vt.Instances=new Map;class ri extends vt{constructor(t,n){super(t,n),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class Su{constructor(){}begin(){}report(){}done(){}}class ui extends Su{constructor(){super(),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}function yD(e,t){if(t===void 0||t.workDoneToken===void 0)return new Su;const n=t.workDoneToken;return delete t.workDoneToken,new vt(e,n)}var co=mt.attachWorkDone=yD;const ED=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){var n;super.initialize(t),((n=t==null?void 0:t.window)==null?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(_t.WorkDoneProgressCancelNotification.type,r=>{let u=vt.Instances.get(r.token);(u instanceof ri||u instanceof ui)&&u.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Su:new vt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){const t=(0,mD.generateUuid)();return this.connection.sendRequest(_t.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new ri(this.connection,t))}else return Promise.resolve(new ui)}};var lo=mt.ProgressFeature=ED,Qr;(function(e){e.type=new _t.ProgressType})(Qr||(Qr={}));class bD{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(Qr.type,this._token,t)}}function _D(e,t){if(t===void 0||t.partialResultToken===void 0)return;const n=t.partialResultToken;return delete t.partialResultToken,new bD(e,n)}Do=mt.attachPartialResult=_D;const vD=ne({__proto__:null,get ProgressFeature(){return lo},get attachPartialResult(){return Do},get attachWorkDone(){return co},default:mt},[mt]),kD=te(vD);var cn={};Object.defineProperty(cn,"__esModule",{value:!0});var fo=cn.ConfigurationFeature=void 0;const RD=We,wD=eo,BD=e=>class extends e{getConfiguration(t){return t?wD.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(RD.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};fo=cn.ConfigurationFeature=BD;const TD=ne({__proto__:null,get ConfigurationFeature(){return fo},default:cn},[cn]),SD=te(TD);var ln={};Object.defineProperty(ln,"__esModule",{value:!0});var go=ln.WorkspaceFoldersFeature=void 0;const Bn=We,AD=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Bn.Emitter,this.connection.onNotification(Bn.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){var r,u;super.fillServerCapabilities(t);const n=(u=(r=t.workspace)==null?void 0:r.workspaceFolders)==null?void 0:u.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Bn.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Bn.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};go=ln.WorkspaceFoldersFeature=AD;const PD=ne({__proto__:null,get WorkspaceFoldersFeature(){return go},default:ln},[ln]),qD=te(PD);var fn={};Object.defineProperty(fn,"__esModule",{value:!0});var ho=fn.CallHierarchyFeature=void 0;const Yn=We,OD=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Yn.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{const n=Yn.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{const n=Yn.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ho=fn.CallHierarchyFeature=OD;const ND=ne({__proto__:null,get CallHierarchyFeature(){return ho},default:fn},[fn]),jD=te(ND);var dn={};Object.defineProperty(dn,"__esModule",{value:!0});var po=dn.ShowDocumentFeature=void 0;const MD=We,$D=e=>class extends e{showDocument(t){return this.connection.sendRequest(MD.ShowDocumentRequest.type,t)}};po=dn.ShowDocumentFeature=$D;const LD=ne({__proto__:null,get ShowDocumentFeature(){return po},default:dn},[dn]),ID=te(LD);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});var Fo=gn.FileOperationsFeature=void 0;const Mt=We,WD=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification(Mt.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification(Mt.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification(Mt.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest(Mt.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest(Mt.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest(Mt.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};Fo=gn.FileOperationsFeature=WD;const HD=ne({__proto__:null,get FileOperationsFeature(){return Fo},default:gn},[gn]),zD=te(HD);var hn={};Object.defineProperty(hn,"__esModule",{value:!0});var Co=hn.LinkedEditingRangeFeature=void 0;const UD=We,VD=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(UD.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};Co=hn.LinkedEditingRangeFeature=VD;const JD=ne({__proto__:null,get LinkedEditingRangeFeature(){return Co},default:hn},[hn]),GD=te(JD);var pn={};Object.defineProperty(pn,"__esModule",{value:!0});var mo=pn.TypeHierarchyFeature=void 0;const Kn=We,ZD=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(Kn.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{const n=Kn.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{const n=Kn.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};mo=pn.TypeHierarchyFeature=ZD;const XD=ne({__proto__:null,get TypeHierarchyFeature(){return mo},default:pn},[pn]),QD=te(XD);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});var yo=Fn.InlineValueFeature=void 0;const ii=We,YD=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(ii.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(ii.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};yo=Fn.InlineValueFeature=YD;const KD=ne({__proto__:null,get InlineValueFeature(){return yo},default:Fn},[Fn]),xD=te(KD);var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});var Eo=Cn.InlayHintFeature=void 0;const xn=We,ec=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(xn.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(xn.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(xn.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};Eo=Cn.InlayHintFeature=ec;const tc=ne({__proto__:null,get InlayHintFeature(){return Eo},default:Cn},[Cn]),nc=te(tc);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});var bo=mn.DiagnosticFeature=void 0;const Yt=We,rc=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Yt.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(Yt.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Yt.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(Yt.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Yt.WorkspaceDiagnosticRequest.partialResult,n)))}}};bo=mn.DiagnosticFeature=rc;const uc=ne({__proto__:null,get DiagnosticFeature(){return bo},default:mn},[mn]),ic=te(uc);var yn={};Object.defineProperty(yn,"__esModule",{value:!0});var _o=yn.MonikerFeature=void 0;const oc=We,sc=e=>class extends e{get moniker(){return{on:t=>{const n=oc.MonikerRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};_o=yn.MonikerFeature=sc;const ac=ne({__proto__:null,get MonikerFeature(){return _o},default:yn},[yn]),Dc=te(ac);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineNotebooksFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._NotebooksImpl=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=void 0;const t=We,n=eo,r=ao,u=kD,i=SD,o=qD,a=jD,c=ji,l=ID,C=zD,S=GD,B=QD,y=xD,j=nc,ue=ic,ie=Wi,X=Dc;function le(w){if(w!==null)return w}class K{constructor(){this._messages=Object.create(null)}add(h){let E=this._messages[h];E||(E=0),E++,this._messages[h]=E}sendErrors(h){Object.keys(this._messages).forEach(E=>{h.window.showErrorMessage(E)})}}e.ErrorMessageTracker=K;class ye{constructor(){}rawAttach(h){this._rawConnection=h}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(h){}initialize(h){}error(h){this.send(t.MessageType.Error,h)}warn(h){this.send(t.MessageType.Warning,h)}info(h){this.send(t.MessageType.Info,h)}log(h){this.send(t.MessageType.Log,h)}send(h,E){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:h,message:E}).catch(()=>{(0,t.RAL)().console.error("Sending log message failed")})}}class He{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}showErrorMessage(h,...E){let P={type:t.MessageType.Error,message:h,actions:E};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(le)}showWarningMessage(h,...E){let P={type:t.MessageType.Warning,message:h,actions:E};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(le)}showInformationMessage(h,...E){let P={type:t.MessageType.Info,message:h,actions:E};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(le)}}const Me=(0,l.ShowDocumentFeature)((0,u.ProgressFeature)(He));(function(w){function h(){return new Re}w.create=h})(e.BulkRegistration||(e.BulkRegistration={}));class Re{constructor(){this._registrations=[],this._registered=new Set}add(h,E){const P=n.string(h)?h:h.method;if(this._registered.has(P))throw new Error(`${P} is already added to this registration`);const b=r.generateUuid();this._registrations.push({id:b,method:P,registerOptions:E||{}}),this._registered.add(P)}asRegistrationParams(){return{registrations:this._registrations}}}(function(w){function h(){return new Ve(void 0,[])}w.create=h})(e.BulkUnregistration||(e.BulkUnregistration={}));class Ve{constructor(h,E){this._connection=h,this._unregistrations=new Map,E.forEach(P=>{this._unregistrations.set(P.method,P)})}get isAttached(){return!!this._connection}attach(h){this._connection=h}add(h){this._unregistrations.set(h.method,h)}dispose(){let h=[];for(let P of this._unregistrations.values())h.push(P);let E={unregisterations:h};this._connection.sendRequest(t.UnregistrationRequest.type,E).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(h){const E=n.string(h)?h:h.method,P=this._unregistrations.get(E);if(!P)return!1;let b={unregisterations:[P]};return this._connection.sendRequest(t.UnregistrationRequest.type,b).then(()=>{this._unregistrations.delete(E)},p=>{this._connection.console.info(`Un-registering request handler for ${P.id} failed.`)}),!0}}class we{attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}register(h,E,P){return h instanceof Re?this.registerMany(h):h instanceof Ve?this.registerSingle1(h,E,P):this.registerSingle2(h,E)}registerSingle1(h,E,P){const b=n.string(E)?E:E.method,p=r.generateUuid();let Y={registrations:[{id:p,method:b,registerOptions:P||{}}]};return h.isAttached||h.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,Y).then(re=>(h.add({id:p,method:b}),h),re=>(this.connection.console.info(`Registering request handler for ${b} failed.`),Promise.reject(re)))}registerSingle2(h,E){const P=n.string(h)?h:h.method,b=r.generateUuid();let p={registrations:[{id:b,method:P,registerOptions:E||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,p).then(Y=>t.Disposable.create(()=>{this.unregisterSingle(b,P).catch(()=>{this.connection.console.info(`Un-registering capability with id ${b} failed.`)})}),Y=>(this.connection.console.info(`Registering request handler for ${P} failed.`),Promise.reject(Y)))}unregisterSingle(h,E){let P={unregisterations:[{id:h,method:E}]};return this.connection.sendRequest(t.UnregistrationRequest.type,P).catch(()=>{this.connection.console.info(`Un-registering request handler for ${h} failed.`)})}registerMany(h){let E=h.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,E).then(()=>new Ve(this._connection,E.registrations.map(P=>({id:P.id,method:P.method}))),P=>(this.connection.console.info("Bulk registration failed."),Promise.reject(P)))}}class ut{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}applyEdit(h){function E(b){return b&&!!b.edit}let P=E(h)?h:{edit:h};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,P)}}const $=(0,C.FileOperationsFeature)((0,o.WorkspaceFoldersFeature)((0,i.ConfigurationFeature)(ut)));class s{constructor(){this._trace=t.Trace.Off}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}set trace(h){this._trace=h}log(h,E){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:h,verbose:this._trace===t.Trace.Verbose?E:void 0}).catch(()=>{})}}class A{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}logEvent(h){this.connection.sendNotification(t.TelemetryEventNotification.type,h).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class L{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}attachWorkDoneProgress(h){return(0,u.attachWorkDone)(this.connection,h)}attachPartialResultProgress(h,E){return(0,u.attachPartialResult)(this.connection,E)}}e._LanguagesImpl=L;const J=(0,X.MonikerFeature)((0,ue.DiagnosticFeature)((0,j.InlayHintFeature)((0,y.InlineValueFeature)((0,B.TypeHierarchyFeature)((0,S.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,a.CallHierarchyFeature)(L))))))));class ce{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}attachWorkDoneProgress(h){return(0,u.attachWorkDone)(this.connection,h)}attachPartialResultProgress(h,E){return(0,u.attachPartialResult)(this.connection,E)}}e._NotebooksImpl=ce;const Be=(0,ie.NotebookSyncFeature)(ce);function Et(w,h){return function(E){return h(w(E))}}e.combineConsoleFeatures=Et;function Je(w,h){return function(E){return h(w(E))}}e.combineTelemetryFeatures=Je;function it(w,h){return function(E){return h(w(E))}}e.combineTracerFeatures=it;function Dt(w,h){return function(E){return h(w(E))}}e.combineClientFeatures=Dt;function F(w,h){return function(E){return h(w(E))}}e.combineWindowFeatures=F;function I(w,h){return function(E){return h(w(E))}}e.combineWorkspaceFeatures=I;function W(w,h){return function(E){return h(w(E))}}e.combineLanguagesFeatures=W;function z(w,h){return function(E){return h(w(E))}}e.combineNotebooksFeatures=z;function U(w,h){function E(b,p,Y){return b&&p?Y(b,p):b||p}return{__brand:"features",console:E(w.console,h.console,Et),tracer:E(w.tracer,h.tracer,it),telemetry:E(w.telemetry,h.telemetry,Je),client:E(w.client,h.client,Dt),window:E(w.window,h.window,F),workspace:E(w.workspace,h.workspace,I),languages:E(w.languages,h.languages,W),notebooks:E(w.notebooks,h.notebooks,z)}}e.combineFeatures=U;function ee(w,h,E){const P=E&&E.console?new(E.console(ye)):new ye,b=w(P);P.rawAttach(b);const p=E&&E.tracer?new(E.tracer(s)):new s,Y=E&&E.telemetry?new(E.telemetry(A)):new A,re=E&&E.client?new(E.client(we)):new we,G=E&&E.window?new(E.window(Me)):new Me,ge=E&&E.workspace?new(E.workspace($)):new $,_e=E&&E.languages?new(E.languages(J)):new J,pe=E&&E.notebooks?new(E.notebooks(Be)):new Be,fe=[P,p,Y,re,G,ge,_e,pe];function Ze(v){return v instanceof Promise?v:n.thenable(v)?new Promise((g,T)=>{v.then(M=>g(M),M=>T(M))}):Promise.resolve(v)}let V,Z,x,oe={listen:()=>b.listen(),sendRequest:(v,...g)=>b.sendRequest(n.string(v)?v:v.method,...g),onRequest:(v,g)=>b.onRequest(v,g),sendNotification:(v,g)=>{const T=n.string(v)?v:v.method;return arguments.length===1?b.sendNotification(T):b.sendNotification(T,g)},onNotification:(v,g)=>b.onNotification(v,g),onProgress:b.onProgress,sendProgress:b.sendProgress,onInitialize:v=>(Z=v,{dispose:()=>{Z=void 0}}),onInitialized:v=>b.onNotification(t.InitializedNotification.type,v),onShutdown:v=>(V=v,{dispose:()=>{V=void 0}}),onExit:v=>(x=v,{dispose:()=>{x=void 0}}),get console(){return P},get telemetry(){return Y},get tracer(){return p},get client(){return re},get window(){return G},get workspace(){return ge},get languages(){return _e},get notebooks(){return pe},onDidChangeConfiguration:v=>b.onNotification(t.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>b.onNotification(t.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>b.onNotification(t.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>b.onNotification(t.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>b.onNotification(t.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>b.onNotification(t.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>b.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>b.onNotification(t.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>b.sendNotification(t.PublishDiagnosticsNotification.type,v),onHover:v=>b.onRequest(t.HoverRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),onCompletion:v=>b.onRequest(t.CompletionRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onCompletionResolve:v=>b.onRequest(t.CompletionResolveRequest.type,v),onSignatureHelp:v=>b.onRequest(t.SignatureHelpRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),onDeclaration:v=>b.onRequest(t.DeclarationRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onDefinition:v=>b.onRequest(t.DefinitionRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onTypeDefinition:v=>b.onRequest(t.TypeDefinitionRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onImplementation:v=>b.onRequest(t.ImplementationRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onReferences:v=>b.onRequest(t.ReferencesRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onDocumentHighlight:v=>b.onRequest(t.DocumentHighlightRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onDocumentSymbol:v=>b.onRequest(t.DocumentSymbolRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onWorkspaceSymbol:v=>b.onRequest(t.WorkspaceSymbolRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onWorkspaceSymbolResolve:v=>b.onRequest(t.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>b.onRequest(t.CodeActionRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onCodeActionResolve:v=>b.onRequest(t.CodeActionResolveRequest.type,(g,T)=>v(g,T)),onCodeLens:v=>b.onRequest(t.CodeLensRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onCodeLensResolve:v=>b.onRequest(t.CodeLensResolveRequest.type,(g,T)=>v(g,T)),onDocumentFormatting:v=>b.onRequest(t.DocumentFormattingRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),onDocumentRangeFormatting:v=>b.onRequest(t.DocumentRangeFormattingRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),onDocumentOnTypeFormatting:v=>b.onRequest(t.DocumentOnTypeFormattingRequest.type,(g,T)=>v(g,T)),onRenameRequest:v=>b.onRequest(t.RenameRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),onPrepareRename:v=>b.onRequest(t.PrepareRenameRequest.type,(g,T)=>v(g,T)),onDocumentLinks:v=>b.onRequest(t.DocumentLinkRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onDocumentLinkResolve:v=>b.onRequest(t.DocumentLinkResolveRequest.type,(g,T)=>v(g,T)),onDocumentColor:v=>b.onRequest(t.DocumentColorRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onColorPresentation:v=>b.onRequest(t.ColorPresentationRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onFoldingRanges:v=>b.onRequest(t.FoldingRangeRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onSelectionRanges:v=>b.onRequest(t.SelectionRangeRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),(0,u.attachPartialResult)(b,g))),onExecuteCommand:v=>b.onRequest(t.ExecuteCommandRequest.type,(g,T)=>v(g,T,(0,u.attachWorkDone)(b,g),void 0)),dispose:()=>b.dispose()};for(let v of fe)v.attach(oe);return b.onRequest(t.InitializeRequest.type,v=>{h.initialize(v),n.string(v.trace)&&(p.trace=t.Trace.fromString(v.trace));for(let g of fe)g.initialize(v.capabilities);if(Z){let g=Z(v,new t.CancellationTokenSource().token,(0,u.attachWorkDone)(b,v),void 0);return Ze(g).then(T=>{if(T instanceof t.ResponseError)return T;let M=T;M||(M={capabilities:{}});let D=M.capabilities;D||(D={},M.capabilities=D),D.textDocumentSync===void 0||D.textDocumentSync===null?D.textDocumentSync=n.number(oe.__textDocumentSync)?oe.__textDocumentSync:t.TextDocumentSyncKind.None:!n.number(D.textDocumentSync)&&!n.number(D.textDocumentSync.change)&&(D.textDocumentSync.change=n.number(oe.__textDocumentSync)?oe.__textDocumentSync:t.TextDocumentSyncKind.None);for(let f of fe)f.fillServerCapabilities(D);return M})}else{let g={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let T of fe)T.fillServerCapabilities(g.capabilities);return g}}),b.onRequest(t.ShutdownRequest.type,()=>{if(h.shutdownReceived=!0,V)return V(new t.CancellationTokenSource().token)}),b.onNotification(t.ExitNotification.type,()=>{try{x&&x()}finally{h.shutdownReceived?h.exit(0):h.exit(1)}}),b.onNotification(t.SetTraceNotification.type,v=>{p.trace=t.Trace.fromString(v.value)}),oe}e.createConnection=ee})(Bu);const cc=Ce(Bu),lc=ne({__proto__:null,default:cc},[Bu]),fc=te(lc);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(o,a,c,l){l===void 0&&(l=c);var C=Object.getOwnPropertyDescriptor(a,c);(!C||("get"in C?!a.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,l,C)}:function(o,a,c,l){l===void 0&&(l=c),o[l]=a[c]}),n=$e&&$e.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&t(a,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;const r=ji;Object.defineProperty(e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return r.SemanticTokensBuilder}}),n(We,e);const u=$i;Object.defineProperty(e,"TextDocuments",{enumerable:!0,get:function(){return u.TextDocuments}});const i=Wi;Object.defineProperty(e,"NotebookDocuments",{enumerable:!0,get:function(){return i.NotebookDocuments}}),n(fc,e),function(o){o.all={__brand:"features"}}(e.ProposedFeatures||(e.ProposedFeatures={}))})(Kr);const dc=Ce(Kr),gc=ne({__proto__:null,default:dc},[Kr]),oi=te(gc);var $n={},hc={get exports(){return $n},set exports(e){$n=e}};(function(e){e.exports=We})(hc);const pc=Ce($n),Fc=ne({__proto__:null,default:pc},[$n]),Cc=te(Fc);(function(e){var t=$e&&$e.__createBinding||(Object.create?function(a,c,l,C){C===void 0&&(C=l);var S=Object.getOwnPropertyDescriptor(c,l);(!S||("get"in S?!c.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return c[l]}}),Object.defineProperty(a,C,S)}:function(a,c,l,C){C===void 0&&(C=l),a[C]=c[l]}),n=$e&&$e.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&t(c,a,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=void 0;const r=oi;n(Cc,e),n(oi,e);let u=!1;const i={initialize:a=>{},get shutdownReceived(){return u},set shutdownReceived(a){u=a},exit:a=>{}};function o(a,c,l,C){let S,B,y,j;a!==void 0&&a.__brand==="features"&&(S=a,a=c,c=l,l=C),r.ConnectionStrategy.is(a)||r.ConnectionOptions.is(a)?j=a:(B=a,y=c,j=l);const ue=ie=>(0,r.createProtocolConnection)(B,y,ie,j);return(0,r.createConnection)(ue,i,S)}e.createConnection=o})(Wt);const mc=e=>{const t=e.state,n=(t==null?void 0:t.getLineNumber())??0,r=(t==null?void 0:t.getColumnNumber())??0;return{range:{start:{line:n,character:r},end:{line:n,character:r+1}},message:"Error parsing BBNF, last value was: "+xo(t==null?void 0:t.value),severity:Wt.DiagnosticSeverity.Error}},yc=(e,t)=>{const n=rs(e),r=[];for(const u of n){let{value:i,offset:o}=u;o??(o=0);const a={range:{start:t.positionAt(o-i.length-1),end:t.positionAt(o-1)},code:"undefined-variable",message:`Undefined variable: "${i}"`,severity:Wt.DiagnosticSeverity.Warning};exports.hasDiagnosticRelatedInformationCapability&&(a.relatedInformation=[{location:{uri:t.uri,range:Object.assign({},a.range)},message:"Undefined variable"}]),r.push(a)}return r},Ec=(e,t)=>{const n=us(e),r=[];for(const u of n){let{name:i}=u;const o={message:`Unused variable: "${i}"`,code:"unused-variable",severity:Wt.DiagnosticSeverity.Information,range:Wt.Range.create(0,0,0,0)};exports.hasDiagnosticRelatedInformationCapability&&(o.relatedInformation=[{location:{uri:t.uri,range:Object.assign({},o.range)},message:"Unused variable"}]),r.push(o)}return r},bc=(e,t)=>{var n;try{let[r,u]=di(e);return(n=r.state)!=null&&n.isError||!u?[mc(r)]:[...yc(u,t),...Ec(u,t)].filter(i=>i!==void 0)}catch(r){return console.log(r),[{range:{start:{line:0,character:0},end:{line:0,character:0}},message:"Error diagnosing BBNF",severity:Wt.DiagnosticSeverity.Error}]}},_c=[{name:"BBNF",since:"0.1",parsers:["bbnf"],extensions:[".bbnf"],tmScope:"bbnf.bbnf",aceMode:"text",linguistLanguageId:666,vscodeLanguageIds:["bbnf"]}],vc={bbnf:{print:Ko}},kc={bbnf:{parse:is,astFormat:"bbnf",locStart:es,locEnd:ts,preprocess:ns}},vo={bbnf:{printWidth:66,tabWidth:4,useTabs:!1}},Rc={languages:_c,printers:vc,parsers:kc,defaultOptions:vo},wc=(e,t)=>Po.format(e,{parser:"bbnf",plugins:[Rc],...vo,...t??{}}),xe=yt.createConnection(yt.ProposedFeatures.all),_n=new yt.TextDocuments(Ao.TextDocument);exports.hasConfigurationCapability=!1;exports.hasWorkspaceFolderCapability=!1;exports.hasDiagnosticRelatedInformationCapability=!1;xe.onInitialize(e=>{const t=e.capabilities;exports.hasConfigurationCapability=!!(t.workspace&&t.workspace.configuration),exports.hasWorkspaceFolderCapability=!!(t.workspace&&t.workspace.workspaceFolders),exports.hasDiagnosticRelatedInformationCapability=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);const n={capabilities:{textDocumentSync:yt.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0},documentFormattingProvider:!0,semanticTokensProvider:{legend:{tokenModifiers:["declaration","documentation","readonly","static","abstract","deprecated","modification","async"],tokenTypes:["comment","keyword","string","regexp","number","operator"]}}}};return exports.hasWorkspaceFolderCapability&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),n});xe.onInitialized(()=>{exports.hasConfigurationCapability&&xe.client.register(yt.DidChangeConfigurationNotification.type,void 0),exports.hasWorkspaceFolderCapability&&xe.workspace.onDidChangeWorkspaceFolders(e=>{xe.console.log("Workspace folder change event received.")})});const ko={maxNumberOfProblems:1e3};let Ro=ko;const Ln=new Map;xe.onDidChangeConfiguration(e=>{exports.hasConfigurationCapability?Ln.clear():Ro=e.settings.BBNF||ko,_n.all().forEach(wo)});function Bc(e){if(!exports.hasConfigurationCapability)return Promise.resolve(Ro);let t=Ln.get(e);return t||(t=xe.workspace.getConfiguration({scopeUri:e,section:"BBNF"}),Ln.set(e,t)),t}_n.onDidClose(e=>{Ln.delete(e.document.uri)});_n.onDidChangeContent(e=>{wo(e.document)});xe.onDocumentFormatting(e=>{const t=_n.get(e.textDocument.uri);if(!t)return[];const n=t.getText();if(n.length===0)return[];const r=wc(n);return r?[yt.TextEdit.replace(yt.Range.create(t.positionAt(0),t.positionAt(t.getText().length)),r)]:[]});async function wo(e){const t=await Bc(e.uri),n=e.getText(),r=bc(n,e).slice(0,t.maxNumberOfProblems);xe.sendDiagnostics({uri:e.uri,diagnostics:r})}xe.onDidChangeWatchedFiles(e=>{xe.console.log("We received an file change event")});xe.onCompletion(e=>[{label:"TypeScript",kind:yt.CompletionItemKind.Text,data:1},{label:"JavaScript",kind:yt.CompletionItemKind.Text,data:2}]);xe.onCompletionResolve(e=>(e.data===1?(e.detail="TypeScript details",e.documentation="TypeScript documentation"):e.data===2&&(e.detail="JavaScript details",e.documentation="JavaScript documentation"),e));_n.listen(xe);xe.listen();
//# sourceMappingURL=server.js.map
