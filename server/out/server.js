"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const yt=require("vscode-languageserver/node"),Oo=require("vscode-languageserver-textdocument"),Ke=require("chalk"),qo=require("prettier");function Q(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in e)){const i=Object.getOwnPropertyDescriptor(r,u);i&&Object.defineProperty(e,u,i.get?i:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var No=Object.defineProperty,jo=(e,t,n)=>t in e?No(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$u=(e,t,n)=>(jo(e,typeof t!="symbol"?t+"":t,n),n),Ie={},$o={get exports(){return Ie},set exports(e){Ie=e}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Object.getOwnPropertyNames,r=(i,o)=>function(){return o||(0,i[n(i)[0]])((o={exports:{}}).exports,o),o.exports},u=r({"dist/_doc.js.umd.js"(i,o){var D=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,T=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,b=(F,I)=>function(){return F&&(I=(0,F[m(F)[0]])(F=0)),I},$=(F,I)=>function(){return I||(0,F[m(F)[0]])((I={exports:{}}).exports,I),I.exports},ue=(F,I)=>{for(var W in I)c(F,W,{get:I[W],enumerable:!0})},ie=(F,I,W,z)=>{if(I&&typeof I=="object"||typeof I=="function")for(let U of m(I))!B.call(F,U)&&U!==W&&c(F,U,{get:()=>I[U],enumerable:!(z=d(I,U))||z.enumerable});return F},Y=(F,I,W)=>(W=F!=null?D(T(F)):{},ie(I||!F||!F.__esModule?c(W,"default",{value:F,enumerable:!0}):W,F)),fe=F=>ie(c({},"__esModule",{value:!0}),F),ee=b({"<define:process>"(){}}),ye=$({"src/document/doc-builders.js"(F,I){ee();function W(j){return{type:"concat",parts:j}}function z(j){return{type:"indent",contents:j}}function U(j,a){return{type:"align",contents:a,n:j}}function ne(j){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:a.id,contents:j,break:Boolean(a.shouldBreak),expandedStates:a.expandedStates}}function w(j){return U(Number.NEGATIVE_INFINITY,j)}function h(j){return U({type:"root"},j)}function y(j){return U(-1,j)}function P(j,a){return ne(j[0],Object.assign(Object.assign({},a),{},{expandedStates:j}))}function E(j){return{type:"fill",parts:j}}function p(j,a){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:j,flatContents:a,groupId:l.groupId}}function x(j,a){return{type:"indent-if-break",contents:j,groupId:a.groupId,negate:a.negate}}function re(j){return{type:"line-suffix",contents:j}}var G={type:"line-suffix-boundary"},he={type:"break-parent"},_e={type:"trim"},Fe={type:"line",hard:!0},de={type:"line",hard:!0,literal:!0},Ze={type:"line"},V={type:"line",soft:!0},Z=W([Fe,he]),te=W([de,he]),oe={type:"cursor",placeholder:Symbol("cursor")};function v(j,a){const l=[];for(let C=0;C<a.length;C++)C!==0&&l.push(j),l.push(a[C]);return W(l)}function g(j,a,l){let C=j;if(a>0){for(let O=0;O<Math.floor(a/l);++O)C=z(C);C=U(a%l,C),C=U(Number.NEGATIVE_INFINITY,C)}return C}function S(j,a){return{type:"label",label:j,contents:a}}I.exports={concat:W,join:v,line:Ze,softline:V,hardline:Z,literalline:te,group:ne,conditionalGroup:P,fill:E,lineSuffix:re,lineSuffixBoundary:G,cursor:oe,breakParent:he,ifBreak:p,trim:_e,indent:z,indentIfBreak:x,align:U,addAlignmentToDoc:g,markAsRoot:h,dedentToRoot:w,dedent:y,hardlineWithoutBreakParent:Fe,literallineWithoutBreakParent:de,label:S}}}),He=$({"src/common/end-of-line.js"(F,I){ee();function W(w){const h=w.indexOf("\r");return h>=0?w.charAt(h+1)===`
`?"crlf":"cr":"lf"}function z(w){switch(w){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function U(w,h){let y;switch(h){case`
`:y=/\n/g;break;case"\r":y=/\r/g;break;case`\r
`:y=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(h)}.`)}const P=w.match(y);return P?P.length:0}function ne(w){return w.replace(/\r\n?/g,`
`)}I.exports={guessEndOfLine:W,convertEndOfLineToChars:z,countEndOfLineChars:U,normalizeEndOfLine:ne}}}),$e=$({"src/utils/get-last.js"(F,I){ee();var W=z=>z[z.length-1];I.exports=W}});function Re(){let{onlyFirst:F=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(I,F?void 0:"g")}var Ve=b({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){ee()}});function we(F){if(typeof F!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof F}\``);return F.replace(Re(),"")}var ut=b({"node_modules/strip-ansi/index.js"(){ee(),Ve()}});function M(F){return Number.isInteger(F)?F>=4352&&(F<=4447||F===9001||F===9002||11904<=F&&F<=12871&&F!==12351||12880<=F&&F<=19903||19968<=F&&F<=42182||43360<=F&&F<=43388||44032<=F&&F<=55203||63744<=F&&F<=64255||65040<=F&&F<=65049||65072<=F&&F<=65131||65281<=F&&F<=65376||65504<=F&&F<=65510||110592<=F&&F<=110593||127488<=F&&F<=127569||131072<=F&&F<=262141):!1}var s=b({"node_modules/is-fullwidth-code-point/index.js"(){ee()}}),A=$({"node_modules/emoji-regex/index.js"(F,I){ee(),I.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),L={};ue(L,{default:()=>J});function J(F){if(typeof F!="string"||F.length===0||(F=we(F),F.length===0))return 0;F=F.replace((0,le.default)(),"  ");let I=0;for(let W=0;W<F.length;W++){const z=F.codePointAt(W);z<=31||z>=127&&z<=159||z>=768&&z<=879||(z>65535&&W++,I+=M(z)?2:1)}return I}var le,Be=b({"node_modules/string-width/index.js"(){ee(),ut(),s(),le=Y(A())}}),Et=$({"src/utils/get-string-width.js"(F,I){ee();var W=(Be(),fe(L)).default,z=/[^\x20-\x7F]/;function U(ne){return ne?z.test(ne)?W(ne):ne.length:0}I.exports=U}}),Je=$({"src/document/doc-utils.js"(F,I){ee();var W=$e(),{literalline:z,join:U}=ye(),ne=a=>Array.isArray(a)||a&&a.type==="concat",w=a=>{if(Array.isArray(a))return a;if(a.type!=="concat"&&a.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return a.parts},h={};function y(a,l,C,O){const R=[a];for(;R.length>0;){const k=R.pop();if(k===h){C(R.pop());continue}if(C&&R.push(k,h),!l||l(k)!==!1)if(ne(k)||k.type==="fill"){const N=w(k);for(let se=N.length,Se=se-1;Se>=0;--Se)R.push(N[Se])}else if(k.type==="if-break")k.flatContents&&R.push(k.flatContents),k.breakContents&&R.push(k.breakContents);else if(k.type==="group"&&k.expandedStates)if(O)for(let N=k.expandedStates.length,se=N-1;se>=0;--se)R.push(k.expandedStates[se]);else R.push(k.contents);else k.contents&&R.push(k.contents)}}function P(a,l){const C=new Map;return O(a);function O(k){if(C.has(k))return C.get(k);const N=R(k);return C.set(k,N),N}function R(k){if(Array.isArray(k))return l(k.map(O));if(k.type==="concat"||k.type==="fill"){const N=k.parts.map(O);return l(Object.assign(Object.assign({},k),{},{parts:N}))}if(k.type==="if-break"){const N=k.breakContents&&O(k.breakContents),se=k.flatContents&&O(k.flatContents);return l(Object.assign(Object.assign({},k),{},{breakContents:N,flatContents:se}))}if(k.type==="group"&&k.expandedStates){const N=k.expandedStates.map(O),se=N[0];return l(Object.assign(Object.assign({},k),{},{contents:se,expandedStates:N}))}if(k.contents){const N=O(k.contents);return l(Object.assign(Object.assign({},k),{},{contents:N}))}return l(k)}}function E(a,l,C){let O=C,R=!1;function k(N){const se=l(N);if(se!==void 0&&(R=!0,O=se),R)return!1}return y(a,k),O}function p(a){if(a.type==="group"&&a.break||a.type==="line"&&a.hard||a.type==="break-parent")return!0}function x(a){return E(a,p,!1)}function re(a){if(a.length>0){const l=W(a);!l.expandedStates&&!l.break&&(l.break="propagated")}return null}function G(a){const l=new Set,C=[];function O(k){if(k.type==="break-parent"&&re(C),k.type==="group"){if(C.push(k),l.has(k))return!1;l.add(k)}}function R(k){k.type==="group"&&C.pop().break&&re(C)}y(a,O,R,!0)}function he(a){return a.type==="line"&&!a.hard?a.soft?"":" ":a.type==="if-break"?a.flatContents||"":a}function _e(a){return P(a,he)}var Fe=(a,l)=>a&&a.type==="line"&&a.hard&&l&&l.type==="break-parent";function de(a){if(!a)return a;if(ne(a)||a.type==="fill"){const l=w(a);for(;l.length>1&&Fe(...l.slice(-2));)l.length-=2;if(l.length>0){const C=de(W(l));l[l.length-1]=C}return Array.isArray(a)?l:Object.assign(Object.assign({},a),{},{parts:l})}switch(a.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const l=de(a.contents);return Object.assign(Object.assign({},a),{},{contents:l})}case"if-break":{const l=de(a.breakContents),C=de(a.flatContents);return Object.assign(Object.assign({},a),{},{breakContents:l,flatContents:C})}}return a}function Ze(a){return de(Z(a))}function V(a){switch(a.type){case"fill":if(a.parts.every(C=>C===""))return"";break;case"group":if(!a.contents&&!a.id&&!a.break&&!a.expandedStates)return"";if(a.contents.type==="group"&&a.contents.id===a.id&&a.contents.break===a.break&&a.contents.expandedStates===a.expandedStates)return a.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!a.contents)return"";break;case"if-break":if(!a.flatContents&&!a.breakContents)return"";break}if(!ne(a))return a;const l=[];for(const C of w(a)){if(!C)continue;const[O,...R]=ne(C)?w(C):[C];typeof O=="string"&&typeof W(l)=="string"?l[l.length-1]+=O:l.push(O),l.push(...R)}return l.length===0?"":l.length===1?l[0]:Array.isArray(a)?l:Object.assign(Object.assign({},a),{},{parts:l})}function Z(a){return P(a,l=>V(l))}function te(a){const l=[],C=a.filter(Boolean);for(;C.length>0;){const O=C.shift();if(O){if(ne(O)){C.unshift(...w(O));continue}if(l.length>0&&typeof W(l)=="string"&&typeof O=="string"){l[l.length-1]+=O;continue}l.push(O)}}return l}function oe(a){return P(a,l=>Array.isArray(l)?te(l):l.parts?Object.assign(Object.assign({},l),{},{parts:te(l.parts)}):l)}function v(a){return P(a,l=>typeof l=="string"&&l.includes(`
`)?g(l):l)}function g(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;return U(l,a.split(`
`)).parts}function S(a){if(a.type==="line")return!0}function j(a){return E(a,S,!1)}I.exports={isConcat:ne,getDocParts:w,willBreak:x,traverseDoc:y,findInDoc:E,mapDoc:P,propagateBreaks:G,removeLines:_e,stripTrailingHardline:Ze,normalizeParts:te,normalizeDoc:oe,cleanDoc:Z,replaceTextEndOfLine:g,replaceEndOfLine:v,canBreak:j}}}),it=$({"src/document/doc-printer.js"(F,I){ee();var{convertEndOfLineToChars:W}=He(),z=$e(),U=Et(),{fill:ne,cursor:w,indent:h}=ye(),{isConcat:y,getDocParts:P}=Je(),E,p=1,x=2;function re(){return{value:"",length:0,queue:[]}}function G(V,Z){return _e(V,{type:"indent"},Z)}function he(V,Z,te){return Z===Number.NEGATIVE_INFINITY?V.root||re():Z<0?_e(V,{type:"dedent"},te):Z?Z.type==="root"?Object.assign(Object.assign({},V),{},{root:V}):_e(V,{type:typeof Z=="string"?"stringAlign":"numberAlign",n:Z},te):V}function _e(V,Z,te){const oe=Z.type==="dedent"?V.queue.slice(0,-1):[...V.queue,Z];let v="",g=0,S=0,j=0;for(const N of oe)switch(N.type){case"indent":C(),te.useTabs?a(1):l(te.tabWidth);break;case"stringAlign":C(),v+=N.n,g+=N.n.length;break;case"numberAlign":S+=1,j+=N.n;break;default:throw new Error(`Unexpected type '${N.type}'`)}return R(),Object.assign(Object.assign({},V),{},{value:v,length:g,queue:oe});function a(N){v+="	".repeat(N),g+=te.tabWidth*N}function l(N){v+=" ".repeat(N),g+=N}function C(){te.useTabs?O():R()}function O(){S>0&&a(S),k()}function R(){j>0&&l(j),k()}function k(){S=0,j=0}}function Fe(V){if(V.length===0)return 0;let Z=0;for(;V.length>0&&typeof z(V)=="string"&&/^[\t ]*$/.test(z(V));)Z+=V.pop().length;if(V.length>0&&typeof z(V)=="string"){const te=z(V).replace(/[\t ]*$/,"");Z+=z(V).length-te.length,V[V.length-1]=te}return Z}function de(V,Z,te,oe,v){let g=Z.length;const S=[V],j=[];for(;te>=0;){if(S.length===0){if(g===0)return!0;S.push(Z[--g]);continue}const{mode:a,doc:l}=S.pop();if(typeof l=="string")j.push(l),te-=U(l);else if(y(l)||l.type==="fill"){const C=P(l);for(let O=C.length-1;O>=0;O--)S.push({mode:a,doc:C[O]})}else switch(l.type){case"indent":case"align":case"indent-if-break":case"label":S.push({mode:a,doc:l.contents});break;case"trim":te+=Fe(j);break;case"group":{if(v&&l.break)return!1;const C=l.break?p:a,O=l.expandedStates&&C===p?z(l.expandedStates):l.contents;S.push({mode:C,doc:O});break}case"if-break":{const O=(l.groupId?E[l.groupId]||x:a)===p?l.breakContents:l.flatContents;O&&S.push({mode:a,doc:O});break}case"line":if(a===p||l.hard)return!0;l.soft||(j.push(" "),te--);break;case"line-suffix":oe=!0;break;case"line-suffix-boundary":if(oe)return!1;break}}return!1}function Ze(V,Z){E={};const te=Z.printWidth,oe=W(Z.endOfLine);let v=0;const g=[{ind:re(),mode:p,doc:V}],S=[];let j=!1;const a=[];for(;g.length>0;){const{ind:C,mode:O,doc:R}=g.pop();if(typeof R=="string"){const k=oe!==`
`?R.replace(/\n/g,oe):R;S.push(k),v+=U(k)}else if(y(R)){const k=P(R);for(let N=k.length-1;N>=0;N--)g.push({ind:C,mode:O,doc:k[N]})}else switch(R.type){case"cursor":S.push(w.placeholder);break;case"indent":g.push({ind:G(C,Z),mode:O,doc:R.contents});break;case"align":g.push({ind:he(C,R.n,Z),mode:O,doc:R.contents});break;case"trim":v-=Fe(S);break;case"group":switch(O){case x:if(!j){g.push({ind:C,mode:R.break?p:x,doc:R.contents});break}case p:{j=!1;const k={ind:C,mode:x,doc:R.contents},N=te-v,se=a.length>0;if(!R.break&&de(k,g,N,se))g.push(k);else if(R.expandedStates){const Se=z(R.expandedStates);if(R.break){g.push({ind:C,mode:p,doc:Se});break}else for(let pe=1;pe<R.expandedStates.length+1;pe++)if(pe>=R.expandedStates.length){g.push({ind:C,mode:p,doc:Se});break}else{const nt=R.expandedStates[pe],Xe={ind:C,mode:x,doc:nt};if(de(Xe,g,N,se)){g.push(Xe);break}}}else g.push({ind:C,mode:p,doc:R.contents});break}}R.id&&(E[R.id]=z(g).mode);break;case"fill":{const k=te-v,{parts:N}=R;if(N.length===0)break;const[se,Se]=N,pe={ind:C,mode:x,doc:se},nt={ind:C,mode:p,doc:se},Xe=de(pe,[],k,a.length>0,!0);if(N.length===1){Xe?g.push(pe):g.push(nt);break}const lt={ind:C,mode:x,doc:Se},ht={ind:C,mode:p,doc:Se};if(N.length===2){Xe?g.push(lt,pe):g.push(ht,nt);break}N.splice(0,2);const ct={ind:C,mode:O,doc:ne(N)},Gt=N[0];de({ind:C,mode:x,doc:[se,Se,Gt]},[],k,a.length>0,!0)?g.push(ct,lt,pe):Xe?g.push(ct,ht,pe):g.push(ct,ht,nt);break}case"if-break":case"indent-if-break":{const k=R.groupId?E[R.groupId]:O;if(k===p){const N=R.type==="if-break"?R.breakContents:R.negate?R.contents:h(R.contents);N&&g.push({ind:C,mode:O,doc:N})}if(k===x){const N=R.type==="if-break"?R.flatContents:R.negate?h(R.contents):R.contents;N&&g.push({ind:C,mode:O,doc:N})}break}case"line-suffix":a.push({ind:C,mode:O,doc:R.contents});break;case"line-suffix-boundary":a.length>0&&g.push({ind:C,mode:O,doc:{type:"line",hard:!0}});break;case"line":switch(O){case x:if(R.hard)j=!0;else{R.soft||(S.push(" "),v+=1);break}case p:if(a.length>0){g.push({ind:C,mode:O,doc:R},...a.reverse()),a.length=0;break}R.literal?C.root?(S.push(oe,C.root.value),v=C.root.length):(S.push(oe),v=0):(v-=Fe(S),S.push(oe+C.value),v=C.length);break}break;case"label":g.push({ind:C,mode:O,doc:R.contents});break}g.length===0&&a.length>0&&(g.push(...a.reverse()),a.length=0)}const l=S.indexOf(w.placeholder);if(l!==-1){const C=S.indexOf(w.placeholder,l+1),O=S.slice(0,l).join(""),R=S.slice(l+1,C).join(""),k=S.slice(C+1).join("");return{formatted:O+R+k,cursorNodeStart:O.length,cursorNodeText:R}}return{formatted:S.join("")}}I.exports={printDocToString:Ze}}}),Dt=$({"src/document/doc-debug.js"(F,I){ee();var{isConcat:W,getDocParts:z}=Je();function U(w){if(!w)return"";if(W(w)){const h=[];for(const y of z(w))if(W(y))h.push(...U(y).parts);else{const P=U(y);P!==""&&h.push(P)}return{type:"concat",parts:h}}return w.type==="if-break"?Object.assign(Object.assign({},w),{},{breakContents:U(w.breakContents),flatContents:U(w.flatContents)}):w.type==="group"?Object.assign(Object.assign({},w),{},{contents:U(w.contents),expandedStates:w.expandedStates&&w.expandedStates.map(U)}):w.type==="fill"?{type:"fill",parts:w.parts.map(U)}:w.contents?Object.assign(Object.assign({},w),{},{contents:U(w.contents)}):w}function ne(w){const h=Object.create(null),y=new Set;return P(U(w));function P(p,x,re){if(typeof p=="string")return JSON.stringify(p);if(W(p)){const G=z(p).map(P).filter(Boolean);return G.length===1?G[0]:`[${G.join(", ")}]`}if(p.type==="line"){const G=Array.isArray(re)&&re[x+1]&&re[x+1].type==="break-parent";return p.literal?G?"literalline":"literallineWithoutBreakParent":p.hard?G?"hardline":"hardlineWithoutBreakParent":p.soft?"softline":"line"}if(p.type==="break-parent")return Array.isArray(re)&&re[x-1]&&re[x-1].type==="line"&&re[x-1].hard?void 0:"breakParent";if(p.type==="trim")return"trim";if(p.type==="indent")return"indent("+P(p.contents)+")";if(p.type==="align")return p.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+P(p.contents)+")":p.n<0?"dedent("+P(p.contents)+")":p.n.type==="root"?"markAsRoot("+P(p.contents)+")":"align("+JSON.stringify(p.n)+", "+P(p.contents)+")";if(p.type==="if-break")return"ifBreak("+P(p.breakContents)+(p.flatContents?", "+P(p.flatContents):"")+(p.groupId?(p.flatContents?"":', ""')+`, { groupId: ${E(p.groupId)} }`:"")+")";if(p.type==="indent-if-break"){const G=[];p.negate&&G.push("negate: true"),p.groupId&&G.push(`groupId: ${E(p.groupId)}`);const he=G.length>0?`, { ${G.join(", ")} }`:"";return`indentIfBreak(${P(p.contents)}${he})`}if(p.type==="group"){const G=[];p.break&&p.break!=="propagated"&&G.push("shouldBreak: true"),p.id&&G.push(`id: ${E(p.id)}`);const he=G.length>0?`, { ${G.join(", ")} }`:"";return p.expandedStates?`conditionalGroup([${p.expandedStates.map(_e=>P(_e)).join(",")}]${he})`:`group(${P(p.contents)}${he})`}if(p.type==="fill")return`fill([${p.parts.map(G=>P(G)).join(", ")}])`;if(p.type==="line-suffix")return"lineSuffix("+P(p.contents)+")";if(p.type==="line-suffix-boundary")return"lineSuffixBoundary";if(p.type==="label")return`label(${JSON.stringify(p.label)}, ${P(p.contents)})`;throw new Error("Unknown doc type "+p.type)}function E(p){if(typeof p!="symbol")return JSON.stringify(String(p));if(p in h)return h[p];const x=String(p).slice(7,-1)||"symbol";for(let re=0;;re++){const G=x+(re>0?` #${re}`:"");if(!y.has(G))return y.add(G),h[p]=`Symbol.for(${JSON.stringify(G)})`}}}I.exports={printDocToDebug:ne}}});ee(),o.exports={builders:ye(),printer:it(),utils:Je(),debug:Dt()}}});return u()})})($o);const Mu=4,Qu={printWidth:30,tabWidth:4,useTabs:!1};function Yu(e){return Ie.printer.printDocToString(e,Qu).formatted}function Lu(e,t="^",n=!1){const r=(n?Ke.red:Ke.green).bold,u=e.src.split(`
`),i=Math.min(u.length-1,e.getLineNumber()),o=Math.max(i-Mu,0),D=Math.min(i+Mu+1,u.length),c=u.slice(o,D);if(t){const m=" ".repeat(e.getColumnNumber())+r(t);c.splice(i-o+1,0,m)}return c.map((m,T)=>{const B=o+T+1;let b=r.reset.black(String(B));return m=B===i+1?r(m):m,`      ${b}| ${m}`}).join(`
`)}const ot=(e,t={})=>Ie.builders.group(e,{...Qu,...t}),Nt=e=>Ke.gray(e),Rt=new Map;function Ku(e){if(Rt.has(e.id))return Rt.get(e.id);const t=(u,i)=>{if(Rt.has(u.id))return Rt.get(u.id);const{name:o,args:D,parser:c}=u.context,d=c!=null?t(c,i):Ke.red.bold("unknown");let m=(()=>{switch(o){case"string":return Ke.yellow(`"${D[0]}"`);case"regex":case"regexConcat":case"regexWrap":return Ke.redBright(`${D[0]}`);case"wrap":case"trim":{const[ie,Y]=D;return ot([t(ie,i),Ie.builders.indent([Ie.builders.softline,d]),Ie.builders.softline,t(Y,i)])}case"trimWhitespace":return ot([d,Nt("?w")]);case"not":return ot(["!",d]);case"opt":return ot([d,Nt("?")]);case"next":const[T]=D;return ot([d,Nt(" >> "),t(T,i)]);case"skip":const[B]=D;return ot([d,Nt(" << "),t(B,i)]);case"map":return d;case"all":case"then":{const ie=Nt(", ");return ot(["[",Ie.builders.indent([Ie.builders.softline,Ie.builders.join([ie,Ie.builders.softline],D.map(Y=>t(Y,i)))]),Ie.builders.softline,"]"])}case"any":case"or":{const ie=Nt("| ");return ot([[Ie.builders.join([Ie.builders.softline,Ie.builders.ifBreak(ie," "+ie)],D.map(Y=>t(Y,i)))]])}case"many":const[b,$]=D;let ue=$===1/0?`${b},`:`${b},${$}`;return ue=Ke.bold.gray(` {${ue}}`),ot([d,ue]);case"sepBy":return ot([d,Ie.builders.indent([" sepBy ",t(D[0],i)])]);case"lazy":{const[ie]=D,Y=Ur(ie);if(i)return Ke.bold.blue(o);{const fe=t(Y,Y.id);return Rt.set(Y.id,fe),fe}}case"debug":return d}})();return m??(m=Ke.red.bold(o)),i&&Rt.set(u.id,m),m},n=t(e),r=Yu(n);return Rt.set(e.id,r),r}function xu(e,t="",n=""){const r=e.isError?Ke.bgRed:Ke.bgGreen,u=e.isError?Ke.red:Ke.green,i=e.offset>=e.src.length,o=e.isError?"ｘ":i?"🎉":"✓",c=" "+(e.isError?"Err":i?"Done":"Ok")+" "+o+" ",d=ot([r.bold(c),u(`	${t}	${e.offset}`),Ie.builders.softline,"	"+Ke.yellow(n)]),m=(()=>e.offset>=e.src.length?Ke.bold.greenBright(Lu(e,"",e.isError)):Lu(e,"^",e.isError))(),T=ot([d,Ie.builders.hardline,Ie.builders.indent([m])]);return Yu(T)}function Mo(e,t="",n=!1,r=console.log){const u=i=>{const o=e.parser(i),D=n?Ku(e):e.context.name,c=xu(o,t,D);return r(c),o};return new Ae(u,ke("debug",e,r))}class Sn{constructor(t,n=void 0,r=0,u=!1,i=0){this.src=t,this.value=n,this.offset=r,this.isError=u,this.furthest=i}ok(t,n=0){return n+=this.offset,new Sn(this.src,t,n,!1)}err(t,n=0){const r=this.ok(t,n);return r.isError=!0,r}from(t,n=0){return n+=this.offset,new Sn(this.src,t,n,this.isError)}getColumnNumber(){const t=this.offset,n=this.src.lastIndexOf(`
`,t),r=n===-1?t:t-(n+1);return Math.max(0,r)}getLineNumber(){const t=this.src.lastIndexOf(`
`,this.offset);return t>=0?this.src.slice(0,t).split(`
`).length:0}toString(){return xu(this)}}function ke(e,t,...n){return{name:e,parser:t,args:n}}let Lo=0;const wt=new Map,kn=new Map;let Mt;function Ye(e){return(!Mt||Mt&&e.offset>Mt.offset)&&(Mt=e),Mt}function Ur(e){return e.parser?e.parser:e.parser=e()}class Ae{constructor(t,n={}){$u(this,"id",Lo++),$u(this,"state"),this.parser=t,this.context=n}reset(){Mt=void 0,wt.clear(),kn.clear()}parse(t){this.reset();const n=this.parser(new Sn(t));return this.state=Ye(n),this.state.isError=n.isError,this.state.isError&&console.log(this.state.toString()),n.value}getCijKey(t){return`${this.id}${t.offset}`}atLeftRecursionLimit(t){return(kn.get(this.getCijKey(t))??0)>t.src.length-t.offset}memoize(){const t=n=>{const r=this.getCijKey(n),u=kn.get(r)??0;let i=wt.get(this.id);if(i&&i.offset>=n.offset)return i;if(this.atLeftRecursionLimit(n))return n.err(void 0);kn.set(r,u+1);const o=this.parser(n);return i=wt.get(this.id),i&&i.offset>o.offset?o.offset=i.offset:i||wt.set(this.id,o),o};return new Ae(t,ke("memoize",this))}mergeMemos(){const t=n=>{let r=wt.get(this.id);if(r)return r;if(this.atLeftRecursionLimit(n))return n.err(void 0);const u=this.parser(n);return r=wt.get(this.id),r||wt.set(this.id,u),u};return new Ae(t,ke("mergeMemo",this))}then(t){if(Qt(this,t))return Yt([this,t],"",r=>[r==null?void 0:r[0],r==null?void 0:r[1]]);const n=r=>{const u=this.parser(r);if(!u.isError){const i=t.parser(u);if(!i.isError)return i.ok([u.value,i.value])}return Ye(r),r.err(void 0)};return new Ae(n,ke("then",this,this,t))}or(t){if(Qt(this,t))return Yt([this,t],"|");const n=r=>{const u=this.parser(r);return u.isError?t.parser(r):u};return new Ae(n,ke("or",this,this,t))}chain(t,n=!1){const r=u=>{const i=this.parser(u);return i.isError?i:i.value||n?t(i.value).parser(i):u};return new Ae(r,ke("chain",this,t))}map(t,n=!1){const r=u=>{const i=this.parser(u);return!i.isError||n?i.ok(t(i.value)):i};return new Ae(r,ke("map",this))}mapState(t){const n=r=>{const u=this.parser(r);return t(u)};return new Ae(n,ke("mapState",this))}skip(t){const n=r=>{const u=this.parser(r);if(!u.isError){const i=t.parser(u);if(!i.isError)return i.ok(u.value)}return Ye(r),r.err(void 0)};return new Ae(n,ke("skip",this,t))}next(t){const n=this.then(t).map(([,r])=>r);return n.context=ke("next",this,t),n}opt(){const t=n=>{const r=this.parser(n);return r.isError?(Ye(n),n.ok(void 0)):r};return new Ae(t,ke("opt",this))}not(t){const n=u=>this.parser(u).isError?(Ye(u),u.ok(u.value)):u.err(void 0),r=u=>{const i=this.parser(u);return i.isError?(Ye(u),i):t.parser(u).isError?i:(Ye(u),u.err(void 0))};return new Ae(t?r:n,ke("not",this,t))}wrap(t,n,r=!0){if(!r)return Lt(t,this,n);if(Qt(t,this,n))return Wo(t,this,n);const u=t.next(this).skip(n);return u.context=ke("wrap",this,t,n),u}trim(t=ei,n=!0){var r;if(!n)return Lt(t,this,t);if(((r=t.context)==null?void 0:r.name)==="whitespace"){if(Qt(this,t))return Yt([t,this,t],"",i=>i==null?void 0:i[2]);const u=i=>{const o=Wu(i),D=this.parser(o);return D.isError?(Ye(i),i.err(void 0)):Wu(D)};return new Ae(u,ke("trimWhitespace",this))}return this.wrap(t,t)}many(t=0,n=1/0){const r=u=>{const i=[];let o=u;for(let D=0;D<n;D+=1){const c=this.parser(o);if(c.isError)break;i.push(c.value),o=c}return i.length>=t?o.ok(i):(Ye(u),u.err([]))};return new Ae(r,ke("many",this,t,n))}sepBy(t,n=0,r=1/0){const u=i=>{const o=[];let D=i;for(let c=0;c<r;c+=1){const d=this.parser(D);if(d.isError)break;D=d,o.push(D.value);const m=t.parser(D);if(m.isError)break;D=m}return o.length>n?D.ok(o):(Ye(i),i.err([]))};return new Ae(u,ke("sepBy",this,t))}eof(){const t=this.skip(Ho());return t.context=ke("eof",this),t}debug(t="",n=!1,r=console.log){return Mo(this,t,n,r)}toString(){return Ku(this)}static lazy(t){const n=r=>Ur(t).parser(r);return new Ae(n,ke("lazy",void 0,t))}}function Qt(...e){return e.every(t=>{var n,r,u,i;return(((n=t.context)==null?void 0:n.name)==="string"||((r=t.context)==null?void 0:r.name)==="regex"||((u=t.context)==null?void 0:u.name)==="whitespace")&&((i=t.context)==null?void 0:i.args)})}function Io(e){var t,n,r,u,i;if(((t=e.context)==null?void 0:t.name)==="string")return(n=e.context)==null?void 0:n.args[0].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if(((r=e.context)==null?void 0:r.name)==="regex"||((u=e.context)==null?void 0:u.name)==="whitespace")return(i=e.context)==null?void 0:i.args[0].source}function Yt(e,t="",n){const r=e.map(o=>`(${Io(o)})`).join(t),u=new RegExp(r),i=pt(u,n);return t!=="|"&&(i.context=ke("regexConcat",this,u)),i}function Wo(e,t,n){const r=Yt([e,t,n],"",u=>u==null?void 0:u[2]);return r.context.name="regexWrap",r}function Ho(){const e=t=>t.offset>=t.src.length?t.ok(void 0):(Ye(t),t.err());return new Ae(e,ke("eof",void 0))}function et(e,t,n){const r=n.value.bind(e);n.value=function(){const u=i=>Ur(r).parser(i);return new Ae(u,ke("lazy",void 0,r))}}function jt(...e){if(Qt(...e))return Yt(e,"|");const t=n=>{for(const r of e){const u=r.parser(n);if(!u.isError)return u}return Ye(n),n.err(void 0)};return new Ae(e.length===1?e[0].parser:t,ke("any",void 0,...e))}function Lt(...e){const t=n=>{const r=[];for(const u of e){const i=u.parser(n);if(i.isError)return i;i.value!==void 0&&r.push(i.value),n=i}return Ye(n),n.ok(r)};return new Ae(e.length===1?e[0].parser:t,ke("all",void 0,...e))}function be(e){const t=n=>{if(n.offset>=n.src.length)return n.err(void 0);const r=n.src.slice(n.offset,n.offset+e.length);return r===e?n.ok(r,r.length):(Ye(n),n.err(void 0))};return new Ae(t,ke("string",void 0,e))}function pt(e,t=n=>n==null?void 0:n[0]){const n=e.flags.replace(/y/g,""),r=new RegExp(e,n+"y"),u=i=>{if(i.offset>=i.src.length)return i.err(void 0);r.lastIndex=i.offset;const o=t(i.src.match(r));return o?i.ok(o,r.lastIndex-i.offset):o===""?i.ok(void 0):(Ye(i),i.err(void 0))};return new Ae(u,ke("regex",void 0,e))}const Iu=/\s*/y,Wu=e=>{var t;if(e.offset>=e.src.length)return e;Iu.lastIndex=e.offset;const n=((t=e.src.match(Iu))==null?void 0:t[0])??"";return e.ok(e.value,n.length)},ei=pt(/\s*/);ei.context.name="whitespace";var zo=Object.defineProperty,Uo=(e,t,n)=>t in e?zo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Vo=(e,t,n)=>(Uo(e,typeof t!="symbol"?t+"":t,n),n),Jo=Object.defineProperty,Go=Object.getOwnPropertyDescriptor,tt=(e,t,n,r)=>{for(var u=r>1?void 0:r?Go(t,n):t,i=e.length-1,o;i>=0;i--)(o=e[i])&&(u=(r?o(t,n,u):o(u))||u);return r&&u&&Jo(t,n,u),u};const ti={"|":"alternation",",":"concatenation","-":"minus","<<":"skip",">>":"next","*":"many","+":"many1","?":"optional","?w":"optionalWhitespace"},Zo=([e,t])=>t.length===0?e:t.reduce((n,[r,u])=>({type:ti[r],value:[n,u]}),e),Xo=([e,t])=>t===void 0?e:{type:ti[t],value:e};function Qo(e){return e.mapState(t=>(t.value&&(t.value.column=t.getColumnNumber(),t.value.line=t.getLineNumber(),t.value.offset=t.offset),t))}const Yo={debug:!1,comments:!0};class Ge{constructor(t){Vo(this,"options"),this.options={...Yo,...t??{}}}identifier(){return pt(/[_a-zA-Z][_a-zA-Z0-9]*/).trim()}literal(){return this.trimBigComment(jt(pt(/[^"]+/).wrap(be('"'),be('"')),pt(/[^']+/).wrap(be("'"),be("'"))).map(t=>({type:"literal",value:t})))}epsilon(){return jt(be("epsilon"),be("ε")).trim().map(()=>({type:"epsilon",value:void 0}))}nonterminal(){return this.identifier().map(t=>({type:"nonterminal",value:t}))}bigComment(){return pt(/\/\*[^\*]*\*\//).trim()}comment(){return pt(/\/\/.*/).or(this.bigComment()).trim()}trimBigComment(t){return t.trim(this.bigComment().many(),!1).map(([n,r,u])=>(r.comment={left:n,right:u},r))}group(){return this.rhs().trim().wrap(be("("),be(")")).map(t=>({type:"group",value:t}))}regex(){return pt(/[^\/]*/).wrap(be("/"),be("/")).then(pt(/[gimuy]*/).opt()).map(([t,n])=>({type:"regex",value:new RegExp(t,n)}))}optionalGroup(){return this.rhs().trim().wrap(be("["),be("]")).map(t=>({type:"optional",value:{type:"group",value:t}}))}manyGroup(){return this.rhs().trim().wrap(be("{"),be("}")).map(t=>({type:"many",value:{type:"group",value:t}}))}lhs(){return this.identifier()}term(){return Qo(jt(this.epsilon(),this.group(),this.optionalGroup(),this.manyGroup(),this.nonterminal(),this.literal(),this.regex()))}factor(){return this.trimBigComment(Lt(this.term(),jt(be("?w").trim(),be("?").trim(),be("*").trim(),be("+").trim()).opt()).map(Xo))}binaryFactor(){return Lt(this.factor(),Lt(jt(be("<<").trim(),be(">>").trim(),be("-").trim()),this.factor()).many()).map(Zo)}concatenation(){return this.binaryFactor().sepBy(be(",").trim()).map(t=>t.length===1?t[0]:{type:"concatenation",value:t})}alternation(){return this.concatenation().sepBy(be("|").trim()).map(t=>t.length===1?t[0]:{type:"alternation",value:t})}rhs(){return this.alternation()}productionRule(){return Lt(this.lhs(),be("=").trim(),this.rhs(),jt(be(";"),be(".")).trim()).map(([t,,n])=>({name:t,expression:n}))}grammar(){return this.productionRule().trim(this.comment().many(),!1).map(([t,n,r])=>(n.comment={above:t,below:r},n)).many(1)}}tt([et],Ge.prototype,"bigComment",1);tt([et],Ge.prototype,"comment",1);tt([et],Ge.prototype,"group",1);tt([et],Ge.prototype,"regex",1);tt([et],Ge.prototype,"optionalGroup",1);tt([et],Ge.prototype,"manyGroup",1);tt([et],Ge.prototype,"lhs",1);tt([et],Ge.prototype,"term",1);tt([et],Ge.prototype,"factor",1);tt([et],Ge.prototype,"binaryFactor",1);tt([et],Ge.prototype,"concatenation",1);tt([et],Ge.prototype,"alternation",1);tt([et],Ge.prototype,"rhs",1);tt([et],Ge.prototype,"productionRule",1);tt([et],Ge.prototype,"grammar",1);function Ko(e){const t=new Set,n=[];function r(i,o){if(o.has(i)||t.has(i))return;o.add(i);const D=e.get(i);if(!D)return;const c=D.expression;if(c.type==="nonterminal")r(c.value,o);else if(c.value instanceof Array)for(const d of c.value)d.type==="nonterminal"&&r(d.value,o);t.add(i),o.delete(i),n.unshift(e.get(i))}for(const[i]of e)r(i,new Set);const u=new Map;for(const i of n)u.set(i.name,i);return u}function ni(e){const t=new Ge().grammar().eof(),n=t.parse(e);if(!n)return[t];const r=n.reduce((u,i,o)=>u.set(i.name,i),new Map);return[t,r]}var Me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ce(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function X(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){if(this instanceof r){var u=[null];u.push.apply(u,arguments);var i=Function.bind.apply(t,u);return new i}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var u=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,u.get?u:{enumerable:!0,get:function(){return e[r]}})}),n}var ae={},xo={get exports(){return ae},set exports(e){ae=e}};(function(e,t){(function(n){e.exports=n()})(function(){var n=Object.getOwnPropertyNames,r=(i,o)=>function(){return o||(0,i[n(i)[0]])((o={exports:{}}).exports,o),o.exports},u=r({"dist/_doc.js.umd.js"(i,o){var D=Object.create,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,T=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,b=(F,I)=>function(){return F&&(I=(0,F[m(F)[0]])(F=0)),I},$=(F,I)=>function(){return I||(0,F[m(F)[0]])((I={exports:{}}).exports,I),I.exports},ue=(F,I)=>{for(var W in I)c(F,W,{get:I[W],enumerable:!0})},ie=(F,I,W,z)=>{if(I&&typeof I=="object"||typeof I=="function")for(let U of m(I))!B.call(F,U)&&U!==W&&c(F,U,{get:()=>I[U],enumerable:!(z=d(I,U))||z.enumerable});return F},Y=(F,I,W)=>(W=F!=null?D(T(F)):{},ie(I||!F||!F.__esModule?c(W,"default",{value:F,enumerable:!0}):W,F)),fe=F=>ie(c({},"__esModule",{value:!0}),F),ee=b({"<define:process>"(){}}),ye=$({"src/document/doc-builders.js"(F,I){ee();function W(j){return{type:"concat",parts:j}}function z(j){return{type:"indent",contents:j}}function U(j,a){return{type:"align",contents:a,n:j}}function ne(j){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:a.id,contents:j,break:Boolean(a.shouldBreak),expandedStates:a.expandedStates}}function w(j){return U(Number.NEGATIVE_INFINITY,j)}function h(j){return U({type:"root"},j)}function y(j){return U(-1,j)}function P(j,a){return ne(j[0],Object.assign(Object.assign({},a),{},{expandedStates:j}))}function E(j){return{type:"fill",parts:j}}function p(j,a){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:j,flatContents:a,groupId:l.groupId}}function x(j,a){return{type:"indent-if-break",contents:j,groupId:a.groupId,negate:a.negate}}function re(j){return{type:"line-suffix",contents:j}}var G={type:"line-suffix-boundary"},he={type:"break-parent"},_e={type:"trim"},Fe={type:"line",hard:!0},de={type:"line",hard:!0,literal:!0},Ze={type:"line"},V={type:"line",soft:!0},Z=W([Fe,he]),te=W([de,he]),oe={type:"cursor",placeholder:Symbol("cursor")};function v(j,a){const l=[];for(let C=0;C<a.length;C++)C!==0&&l.push(j),l.push(a[C]);return W(l)}function g(j,a,l){let C=j;if(a>0){for(let O=0;O<Math.floor(a/l);++O)C=z(C);C=U(a%l,C),C=U(Number.NEGATIVE_INFINITY,C)}return C}function S(j,a){return{type:"label",label:j,contents:a}}I.exports={concat:W,join:v,line:Ze,softline:V,hardline:Z,literalline:te,group:ne,conditionalGroup:P,fill:E,lineSuffix:re,lineSuffixBoundary:G,cursor:oe,breakParent:he,ifBreak:p,trim:_e,indent:z,indentIfBreak:x,align:U,addAlignmentToDoc:g,markAsRoot:h,dedentToRoot:w,dedent:y,hardlineWithoutBreakParent:Fe,literallineWithoutBreakParent:de,label:S}}}),He=$({"src/common/end-of-line.js"(F,I){ee();function W(w){const h=w.indexOf("\r");return h>=0?w.charAt(h+1)===`
`?"crlf":"cr":"lf"}function z(w){switch(w){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function U(w,h){let y;switch(h){case`
`:y=/\n/g;break;case"\r":y=/\r/g;break;case`\r
`:y=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(h)}.`)}const P=w.match(y);return P?P.length:0}function ne(w){return w.replace(/\r\n?/g,`
`)}I.exports={guessEndOfLine:W,convertEndOfLineToChars:z,countEndOfLineChars:U,normalizeEndOfLine:ne}}}),$e=$({"src/utils/get-last.js"(F,I){ee();var W=z=>z[z.length-1];I.exports=W}});function Re(){let{onlyFirst:F=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const I=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(I,F?void 0:"g")}var Ve=b({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){ee()}});function we(F){if(typeof F!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof F}\``);return F.replace(Re(),"")}var ut=b({"node_modules/strip-ansi/index.js"(){ee(),Ve()}});function M(F){return Number.isInteger(F)?F>=4352&&(F<=4447||F===9001||F===9002||11904<=F&&F<=12871&&F!==12351||12880<=F&&F<=19903||19968<=F&&F<=42182||43360<=F&&F<=43388||44032<=F&&F<=55203||63744<=F&&F<=64255||65040<=F&&F<=65049||65072<=F&&F<=65131||65281<=F&&F<=65376||65504<=F&&F<=65510||110592<=F&&F<=110593||127488<=F&&F<=127569||131072<=F&&F<=262141):!1}var s=b({"node_modules/is-fullwidth-code-point/index.js"(){ee()}}),A=$({"node_modules/emoji-regex/index.js"(F,I){ee(),I.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),L={};ue(L,{default:()=>J});function J(F){if(typeof F!="string"||F.length===0||(F=we(F),F.length===0))return 0;F=F.replace((0,le.default)(),"  ");let I=0;for(let W=0;W<F.length;W++){const z=F.codePointAt(W);z<=31||z>=127&&z<=159||z>=768&&z<=879||(z>65535&&W++,I+=M(z)?2:1)}return I}var le,Be=b({"node_modules/string-width/index.js"(){ee(),ut(),s(),le=Y(A())}}),Et=$({"src/utils/get-string-width.js"(F,I){ee();var W=(Be(),fe(L)).default,z=/[^\x20-\x7F]/;function U(ne){return ne?z.test(ne)?W(ne):ne.length:0}I.exports=U}}),Je=$({"src/document/doc-utils.js"(F,I){ee();var W=$e(),{literalline:z,join:U}=ye(),ne=a=>Array.isArray(a)||a&&a.type==="concat",w=a=>{if(Array.isArray(a))return a;if(a.type!=="concat"&&a.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return a.parts},h={};function y(a,l,C,O){const R=[a];for(;R.length>0;){const k=R.pop();if(k===h){C(R.pop());continue}if(C&&R.push(k,h),!l||l(k)!==!1)if(ne(k)||k.type==="fill"){const N=w(k);for(let se=N.length,Se=se-1;Se>=0;--Se)R.push(N[Se])}else if(k.type==="if-break")k.flatContents&&R.push(k.flatContents),k.breakContents&&R.push(k.breakContents);else if(k.type==="group"&&k.expandedStates)if(O)for(let N=k.expandedStates.length,se=N-1;se>=0;--se)R.push(k.expandedStates[se]);else R.push(k.contents);else k.contents&&R.push(k.contents)}}function P(a,l){const C=new Map;return O(a);function O(k){if(C.has(k))return C.get(k);const N=R(k);return C.set(k,N),N}function R(k){if(Array.isArray(k))return l(k.map(O));if(k.type==="concat"||k.type==="fill"){const N=k.parts.map(O);return l(Object.assign(Object.assign({},k),{},{parts:N}))}if(k.type==="if-break"){const N=k.breakContents&&O(k.breakContents),se=k.flatContents&&O(k.flatContents);return l(Object.assign(Object.assign({},k),{},{breakContents:N,flatContents:se}))}if(k.type==="group"&&k.expandedStates){const N=k.expandedStates.map(O),se=N[0];return l(Object.assign(Object.assign({},k),{},{contents:se,expandedStates:N}))}if(k.contents){const N=O(k.contents);return l(Object.assign(Object.assign({},k),{},{contents:N}))}return l(k)}}function E(a,l,C){let O=C,R=!1;function k(N){const se=l(N);if(se!==void 0&&(R=!0,O=se),R)return!1}return y(a,k),O}function p(a){if(a.type==="group"&&a.break||a.type==="line"&&a.hard||a.type==="break-parent")return!0}function x(a){return E(a,p,!1)}function re(a){if(a.length>0){const l=W(a);!l.expandedStates&&!l.break&&(l.break="propagated")}return null}function G(a){const l=new Set,C=[];function O(k){if(k.type==="break-parent"&&re(C),k.type==="group"){if(C.push(k),l.has(k))return!1;l.add(k)}}function R(k){k.type==="group"&&C.pop().break&&re(C)}y(a,O,R,!0)}function he(a){return a.type==="line"&&!a.hard?a.soft?"":" ":a.type==="if-break"?a.flatContents||"":a}function _e(a){return P(a,he)}var Fe=(a,l)=>a&&a.type==="line"&&a.hard&&l&&l.type==="break-parent";function de(a){if(!a)return a;if(ne(a)||a.type==="fill"){const l=w(a);for(;l.length>1&&Fe(...l.slice(-2));)l.length-=2;if(l.length>0){const C=de(W(l));l[l.length-1]=C}return Array.isArray(a)?l:Object.assign(Object.assign({},a),{},{parts:l})}switch(a.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const l=de(a.contents);return Object.assign(Object.assign({},a),{},{contents:l})}case"if-break":{const l=de(a.breakContents),C=de(a.flatContents);return Object.assign(Object.assign({},a),{},{breakContents:l,flatContents:C})}}return a}function Ze(a){return de(Z(a))}function V(a){switch(a.type){case"fill":if(a.parts.every(C=>C===""))return"";break;case"group":if(!a.contents&&!a.id&&!a.break&&!a.expandedStates)return"";if(a.contents.type==="group"&&a.contents.id===a.id&&a.contents.break===a.break&&a.contents.expandedStates===a.expandedStates)return a.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!a.contents)return"";break;case"if-break":if(!a.flatContents&&!a.breakContents)return"";break}if(!ne(a))return a;const l=[];for(const C of w(a)){if(!C)continue;const[O,...R]=ne(C)?w(C):[C];typeof O=="string"&&typeof W(l)=="string"?l[l.length-1]+=O:l.push(O),l.push(...R)}return l.length===0?"":l.length===1?l[0]:Array.isArray(a)?l:Object.assign(Object.assign({},a),{},{parts:l})}function Z(a){return P(a,l=>V(l))}function te(a){const l=[],C=a.filter(Boolean);for(;C.length>0;){const O=C.shift();if(O){if(ne(O)){C.unshift(...w(O));continue}if(l.length>0&&typeof W(l)=="string"&&typeof O=="string"){l[l.length-1]+=O;continue}l.push(O)}}return l}function oe(a){return P(a,l=>Array.isArray(l)?te(l):l.parts?Object.assign(Object.assign({},l),{},{parts:te(l.parts)}):l)}function v(a){return P(a,l=>typeof l=="string"&&l.includes(`
`)?g(l):l)}function g(a){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:z;return U(l,a.split(`
`)).parts}function S(a){if(a.type==="line")return!0}function j(a){return E(a,S,!1)}I.exports={isConcat:ne,getDocParts:w,willBreak:x,traverseDoc:y,findInDoc:E,mapDoc:P,propagateBreaks:G,removeLines:_e,stripTrailingHardline:Ze,normalizeParts:te,normalizeDoc:oe,cleanDoc:Z,replaceTextEndOfLine:g,replaceEndOfLine:v,canBreak:j}}}),it=$({"src/document/doc-printer.js"(F,I){ee();var{convertEndOfLineToChars:W}=He(),z=$e(),U=Et(),{fill:ne,cursor:w,indent:h}=ye(),{isConcat:y,getDocParts:P}=Je(),E,p=1,x=2;function re(){return{value:"",length:0,queue:[]}}function G(V,Z){return _e(V,{type:"indent"},Z)}function he(V,Z,te){return Z===Number.NEGATIVE_INFINITY?V.root||re():Z<0?_e(V,{type:"dedent"},te):Z?Z.type==="root"?Object.assign(Object.assign({},V),{},{root:V}):_e(V,{type:typeof Z=="string"?"stringAlign":"numberAlign",n:Z},te):V}function _e(V,Z,te){const oe=Z.type==="dedent"?V.queue.slice(0,-1):[...V.queue,Z];let v="",g=0,S=0,j=0;for(const N of oe)switch(N.type){case"indent":C(),te.useTabs?a(1):l(te.tabWidth);break;case"stringAlign":C(),v+=N.n,g+=N.n.length;break;case"numberAlign":S+=1,j+=N.n;break;default:throw new Error(`Unexpected type '${N.type}'`)}return R(),Object.assign(Object.assign({},V),{},{value:v,length:g,queue:oe});function a(N){v+="	".repeat(N),g+=te.tabWidth*N}function l(N){v+=" ".repeat(N),g+=N}function C(){te.useTabs?O():R()}function O(){S>0&&a(S),k()}function R(){j>0&&l(j),k()}function k(){S=0,j=0}}function Fe(V){if(V.length===0)return 0;let Z=0;for(;V.length>0&&typeof z(V)=="string"&&/^[\t ]*$/.test(z(V));)Z+=V.pop().length;if(V.length>0&&typeof z(V)=="string"){const te=z(V).replace(/[\t ]*$/,"");Z+=z(V).length-te.length,V[V.length-1]=te}return Z}function de(V,Z,te,oe,v){let g=Z.length;const S=[V],j=[];for(;te>=0;){if(S.length===0){if(g===0)return!0;S.push(Z[--g]);continue}const{mode:a,doc:l}=S.pop();if(typeof l=="string")j.push(l),te-=U(l);else if(y(l)||l.type==="fill"){const C=P(l);for(let O=C.length-1;O>=0;O--)S.push({mode:a,doc:C[O]})}else switch(l.type){case"indent":case"align":case"indent-if-break":case"label":S.push({mode:a,doc:l.contents});break;case"trim":te+=Fe(j);break;case"group":{if(v&&l.break)return!1;const C=l.break?p:a,O=l.expandedStates&&C===p?z(l.expandedStates):l.contents;S.push({mode:C,doc:O});break}case"if-break":{const O=(l.groupId?E[l.groupId]||x:a)===p?l.breakContents:l.flatContents;O&&S.push({mode:a,doc:O});break}case"line":if(a===p||l.hard)return!0;l.soft||(j.push(" "),te--);break;case"line-suffix":oe=!0;break;case"line-suffix-boundary":if(oe)return!1;break}}return!1}function Ze(V,Z){E={};const te=Z.printWidth,oe=W(Z.endOfLine);let v=0;const g=[{ind:re(),mode:p,doc:V}],S=[];let j=!1;const a=[];for(;g.length>0;){const{ind:C,mode:O,doc:R}=g.pop();if(typeof R=="string"){const k=oe!==`
`?R.replace(/\n/g,oe):R;S.push(k),v+=U(k)}else if(y(R)){const k=P(R);for(let N=k.length-1;N>=0;N--)g.push({ind:C,mode:O,doc:k[N]})}else switch(R.type){case"cursor":S.push(w.placeholder);break;case"indent":g.push({ind:G(C,Z),mode:O,doc:R.contents});break;case"align":g.push({ind:he(C,R.n,Z),mode:O,doc:R.contents});break;case"trim":v-=Fe(S);break;case"group":switch(O){case x:if(!j){g.push({ind:C,mode:R.break?p:x,doc:R.contents});break}case p:{j=!1;const k={ind:C,mode:x,doc:R.contents},N=te-v,se=a.length>0;if(!R.break&&de(k,g,N,se))g.push(k);else if(R.expandedStates){const Se=z(R.expandedStates);if(R.break){g.push({ind:C,mode:p,doc:Se});break}else for(let pe=1;pe<R.expandedStates.length+1;pe++)if(pe>=R.expandedStates.length){g.push({ind:C,mode:p,doc:Se});break}else{const nt=R.expandedStates[pe],Xe={ind:C,mode:x,doc:nt};if(de(Xe,g,N,se)){g.push(Xe);break}}}else g.push({ind:C,mode:p,doc:R.contents});break}}R.id&&(E[R.id]=z(g).mode);break;case"fill":{const k=te-v,{parts:N}=R;if(N.length===0)break;const[se,Se]=N,pe={ind:C,mode:x,doc:se},nt={ind:C,mode:p,doc:se},Xe=de(pe,[],k,a.length>0,!0);if(N.length===1){Xe?g.push(pe):g.push(nt);break}const lt={ind:C,mode:x,doc:Se},ht={ind:C,mode:p,doc:Se};if(N.length===2){Xe?g.push(lt,pe):g.push(ht,nt);break}N.splice(0,2);const ct={ind:C,mode:O,doc:ne(N)},Gt=N[0];de({ind:C,mode:x,doc:[se,Se,Gt]},[],k,a.length>0,!0)?g.push(ct,lt,pe):Xe?g.push(ct,ht,pe):g.push(ct,ht,nt);break}case"if-break":case"indent-if-break":{const k=R.groupId?E[R.groupId]:O;if(k===p){const N=R.type==="if-break"?R.breakContents:R.negate?R.contents:h(R.contents);N&&g.push({ind:C,mode:O,doc:N})}if(k===x){const N=R.type==="if-break"?R.flatContents:R.negate?h(R.contents):R.contents;N&&g.push({ind:C,mode:O,doc:N})}break}case"line-suffix":a.push({ind:C,mode:O,doc:R.contents});break;case"line-suffix-boundary":a.length>0&&g.push({ind:C,mode:O,doc:{type:"line",hard:!0}});break;case"line":switch(O){case x:if(R.hard)j=!0;else{R.soft||(S.push(" "),v+=1);break}case p:if(a.length>0){g.push({ind:C,mode:O,doc:R},...a.reverse()),a.length=0;break}R.literal?C.root?(S.push(oe,C.root.value),v=C.root.length):(S.push(oe),v=0):(v-=Fe(S),S.push(oe+C.value),v=C.length);break}break;case"label":g.push({ind:C,mode:O,doc:R.contents});break}g.length===0&&a.length>0&&(g.push(...a.reverse()),a.length=0)}const l=S.indexOf(w.placeholder);if(l!==-1){const C=S.indexOf(w.placeholder,l+1),O=S.slice(0,l).join(""),R=S.slice(l+1,C).join(""),k=S.slice(C+1).join("");return{formatted:O+R+k,cursorNodeStart:O.length,cursorNodeText:R}}return{formatted:S.join("")}}I.exports={printDocToString:Ze}}}),Dt=$({"src/document/doc-debug.js"(F,I){ee();var{isConcat:W,getDocParts:z}=Je();function U(w){if(!w)return"";if(W(w)){const h=[];for(const y of z(w))if(W(y))h.push(...U(y).parts);else{const P=U(y);P!==""&&h.push(P)}return{type:"concat",parts:h}}return w.type==="if-break"?Object.assign(Object.assign({},w),{},{breakContents:U(w.breakContents),flatContents:U(w.flatContents)}):w.type==="group"?Object.assign(Object.assign({},w),{},{contents:U(w.contents),expandedStates:w.expandedStates&&w.expandedStates.map(U)}):w.type==="fill"?{type:"fill",parts:w.parts.map(U)}:w.contents?Object.assign(Object.assign({},w),{},{contents:U(w.contents)}):w}function ne(w){const h=Object.create(null),y=new Set;return P(U(w));function P(p,x,re){if(typeof p=="string")return JSON.stringify(p);if(W(p)){const G=z(p).map(P).filter(Boolean);return G.length===1?G[0]:`[${G.join(", ")}]`}if(p.type==="line"){const G=Array.isArray(re)&&re[x+1]&&re[x+1].type==="break-parent";return p.literal?G?"literalline":"literallineWithoutBreakParent":p.hard?G?"hardline":"hardlineWithoutBreakParent":p.soft?"softline":"line"}if(p.type==="break-parent")return Array.isArray(re)&&re[x-1]&&re[x-1].type==="line"&&re[x-1].hard?void 0:"breakParent";if(p.type==="trim")return"trim";if(p.type==="indent")return"indent("+P(p.contents)+")";if(p.type==="align")return p.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+P(p.contents)+")":p.n<0?"dedent("+P(p.contents)+")":p.n.type==="root"?"markAsRoot("+P(p.contents)+")":"align("+JSON.stringify(p.n)+", "+P(p.contents)+")";if(p.type==="if-break")return"ifBreak("+P(p.breakContents)+(p.flatContents?", "+P(p.flatContents):"")+(p.groupId?(p.flatContents?"":', ""')+`, { groupId: ${E(p.groupId)} }`:"")+")";if(p.type==="indent-if-break"){const G=[];p.negate&&G.push("negate: true"),p.groupId&&G.push(`groupId: ${E(p.groupId)}`);const he=G.length>0?`, { ${G.join(", ")} }`:"";return`indentIfBreak(${P(p.contents)}${he})`}if(p.type==="group"){const G=[];p.break&&p.break!=="propagated"&&G.push("shouldBreak: true"),p.id&&G.push(`id: ${E(p.id)}`);const he=G.length>0?`, { ${G.join(", ")} }`:"";return p.expandedStates?`conditionalGroup([${p.expandedStates.map(_e=>P(_e)).join(",")}]${he})`:`group(${P(p.contents)}${he})`}if(p.type==="fill")return`fill([${p.parts.map(G=>P(G)).join(", ")}])`;if(p.type==="line-suffix")return"lineSuffix("+P(p.contents)+")";if(p.type==="line-suffix-boundary")return"lineSuffixBoundary";if(p.type==="label")return`label(${JSON.stringify(p.label)}, ${P(p.contents)})`;throw new Error("Unknown doc type "+p.type)}function E(p){if(typeof p!="symbol")return JSON.stringify(String(p));if(p in h)return h[p];const x=String(p).slice(7,-1)||"symbol";for(let re=0;;re++){const G=x+(re>0?` #${re}`:"");if(!y.has(G))return y.add(G),h[p]=`Symbol.for(${JSON.stringify(G)})`}}}I.exports={printDocToDebug:ne}}});ee(),o.exports={builders:ye(),printer:it(),utils:Je(),debug:Dt()}}});return u()})})(xo);function ri(e,t){function n(r){if(!r)return"";const i=(()=>{switch(r.type){case"literal":if(r.value==='"')return ae.builders.group(["'",r.value,"'"]);const o=r.value;return ae.builders.group(['"',o,'"']);case"nonterminal":return r.value;case"epsilon":return"ε";case"group":return ae.builders.group(["( ",ae.builders.indent(n(r.value)),ae.builders.softline," )"]);case"regex":return ae.builders.group(["/",r.value.source,"/",r.value.flags]);case"optional":return ae.builders.group([n(r.value),"?"]);case"optionalWhitespace":return ae.builders.group([n(r.value),"?w"]);case"minus":return ae.builders.group([n(r.value[0])," - ",n(r.value[1])]);case"many":return ae.builders.group([n(r.value),"*"]);case"many1":return ae.builders.group([n(r.value),"+"]);case"skip":return ae.builders.group([n(r.value[0])," << ",n(r.value[1])]);case"next":return ae.builders.group([n(r.value[0])," >> ",n(r.value[1])]);case"concatenation":{const D=" , ";return ae.builders.group([ae.builders.indent([ae.builders.softline,ae.builders.join([ae.builders.conditionalGroup([ae.builders.softline]),D],r.value.map(c=>n(c)))])])}case"alternation":{const D=" | ";return ae.builders.group([ae.builders.indent([ae.builders.softline,ae.builders.join([ae.builders.conditionalGroup([ae.builders.softline]),D],r.value.map(c=>n(c)))])])}}})();if(r.comment){const o=r.comment.left.length?r.comment.left+" ":"",D=r.comment.right.length?" "+r.comment.right:"";return ae.builders.group([o,i,D])}return i}return n(e)}function es(e,t){const n=e.getValue();return n?(t.printWidth=66,ae.builders.join(ae.builders.hardline,[...n.entries()].map(([u,i])=>{var B,b;const{expression:o,comment:D}=i,c=[u," = ",ri(o)," ;"],d=(B=D==null?void 0:D.above)!=null&&B.length?[ae.builders.join(ae.builders.hardline,D.above),ae.builders.hardline]:[],m=(b=D==null?void 0:D.below)!=null&&b.length?[ae.builders.join(ae.builders.hardline,D.below)]:[],T=ae.builders.group([d,c," ",ae.builders.lineSuffix(m)]);return o.type==="concatenation"||o.type==="alternation"?ae.builders.group([T,ae.builders.hardline]):T}))):""}function ts(e){return e?typeof e=="string"?e:ae.printer.printDocToString(ri(e),{printWidth:66,tabWidth:2,useTabs:!1}).formatted:""}function ns(e){return 0}function rs(e){return 0}function us(e,t){return e}function ui(e,t){const n=[...e.values()].map(r=>r.expression).reverse();for(;n.length>0;){const r=n.pop();if(r!=null&&r.type)if(t(r),r.value instanceof Array)for(let u=r.value.length-1;u>=0;u--)n.push(r.value[u]);else n.push(r.value)}}function is(e){const t=new Map;return ui(e,n=>{n.type==="nonterminal"&&!e.has(n.value)&&!t.has(n.value)&&t.set(n.value,n)}),[...t.values()]}function os(e){const t=new Set;ui(e,r=>{r.type==="nonterminal"&&t.add(r.value)});const n=[];for(const[r,u]of e.entries())t.has(r)||n.push(u);return n}function ss(e,t,n){let[r,u]=ni(e);if(r.state.isError)throw new Error(`Error parsing EBNF: ${r.state}`,{cause:r});let i;return n.sort?i=[...Ko(u).entries()].reverse():i=[...u.entries()],i.filter(([o])=>o).reduce((o,[D,c])=>o.set(D,c),new Map)}var Wt={},Vr={},Ct={},Jr={},Tn={},as={get exports(){return Tn},set exports(e){Tn=e}},Gr={},Zr={},Xr={},Qr={},ze={};Object.defineProperty(ze,"__esModule",{value:!0});var ii=ze.stringArray=di=ze.array=li=ze.func=ci=ze.error=Di=ze.number=ai=ze.string=oi=ze.boolean=void 0;function Ds(e){return e===!0||e===!1}var oi=ze.boolean=Ds;function si(e){return typeof e=="string"||e instanceof String}var ai=ze.string=si;function cs(e){return typeof e=="number"||e instanceof Number}var Di=ze.number=cs;function ls(e){return e instanceof Error}var ci=ze.error=ls;function fs(e){return typeof e=="function"}var li=ze.func=fs;function fi(e){return Array.isArray(e)}var di=ze.array=fi;function ds(e){return fi(e)&&e.every(t=>si(t))}ii=ze.stringArray=ds;const gs=Q({__proto__:null,get array(){return di},get boolean(){return oi},default:ze,get error(){return ci},get func(){return li},get number(){return Di},get string(){return ai},get stringArray(){return ii}},[ze]),bn=X(gs);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=bn;var n;(function(s){s.ParseError=-32700,s.InvalidRequest=-32600,s.MethodNotFound=-32601,s.InvalidParams=-32602,s.InternalError=-32603,s.jsonrpcReservedErrorRangeStart=-32099,s.serverErrorStart=-32099,s.MessageWriteError=-32099,s.MessageReadError=-32098,s.PendingResponseRejected=-32097,s.ConnectionInactive=-32096,s.ServerNotInitialized=-32002,s.UnknownErrorCode=-32001,s.jsonrpcReservedErrorRangeEnd=-32e3,s.serverErrorEnd=-32e3})(n=e.ErrorCodes||(e.ErrorCodes={}));class r extends Error{constructor(A,L,J){super(L),this.code=t.number(A)?A:n.UnknownErrorCode,this.data=J,Object.setPrototypeOf(this,r.prototype)}toJson(){const A={code:this.code,message:this.message};return this.data!==void 0&&(A.data=this.data),A}}e.ResponseError=r;class u{constructor(A){this.kind=A}static is(A){return A===u.auto||A===u.byName||A===u.byPosition}toString(){return this.kind}}e.ParameterStructures=u,u.auto=new u("auto"),u.byPosition=new u("byPosition"),u.byName=new u("byName");class i{constructor(A,L){this.method=A,this.numberOfParams=L}get parameterStructures(){return u.auto}}e.AbstractMessageSignature=i;class o extends i{constructor(A){super(A,0)}}e.RequestType0=o;class D extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.RequestType=D;class c extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.RequestType1=c;class d extends i{constructor(A){super(A,2)}}e.RequestType2=d;class m extends i{constructor(A){super(A,3)}}e.RequestType3=m;class T extends i{constructor(A){super(A,4)}}e.RequestType4=T;class B extends i{constructor(A){super(A,5)}}e.RequestType5=B;class b extends i{constructor(A){super(A,6)}}e.RequestType6=b;class $ extends i{constructor(A){super(A,7)}}e.RequestType7=$;class ue extends i{constructor(A){super(A,8)}}e.RequestType8=ue;class ie extends i{constructor(A){super(A,9)}}e.RequestType9=ie;class Y extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.NotificationType=Y;class fe extends i{constructor(A){super(A,0)}}e.NotificationType0=fe;class ee extends i{constructor(A,L=u.auto){super(A,1),this._parameterStructures=L}get parameterStructures(){return this._parameterStructures}}e.NotificationType1=ee;class ye extends i{constructor(A){super(A,2)}}e.NotificationType2=ye;class He extends i{constructor(A){super(A,3)}}e.NotificationType3=He;class $e extends i{constructor(A){super(A,4)}}e.NotificationType4=$e;class Re extends i{constructor(A){super(A,5)}}e.NotificationType5=Re;class Ve extends i{constructor(A){super(A,6)}}e.NotificationType6=Ve;class we extends i{constructor(A){super(A,7)}}e.NotificationType7=we;class ut extends i{constructor(A){super(A,8)}}e.NotificationType8=ut;class M extends i{constructor(A){super(A,9)}}e.NotificationType9=M,function(s){function A(le){const Be=le;return Be&&t.string(Be.method)&&(t.string(Be.id)||t.number(Be.id))}s.isRequest=A;function L(le){const Be=le;return Be&&t.string(Be.method)&&le.id===void 0}s.isNotification=L;function J(le){const Be=le;return Be&&(Be.result!==void 0||!!Be.error)&&(t.string(Be.id)||t.number(Be.id)||Be.id===null)}s.isResponse=J}(e.Message||(e.Message={}))})(Qr);const hs=ce(Qr),ps=Q({__proto__:null,default:hs},[Qr]),gi=X(ps);var Yr={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var n;(function(i){i.None=0,i.First=1,i.AsOld=i.First,i.Last=2,i.AsNew=i.Last})(n=e.Touch||(e.Touch={}));class r{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var o;return(o=this._head)==null?void 0:o.value}get last(){var o;return(o=this._tail)==null?void 0:o.value}has(o){return this._map.has(o)}get(o,D=n.None){const c=this._map.get(o);if(c)return D!==n.None&&this.touch(c,D),c.value}set(o,D,c=n.None){let d=this._map.get(o);if(d)d.value=D,c!==n.None&&this.touch(d,c);else{switch(d={key:o,value:D,next:void 0,previous:void 0},c){case n.None:this.addItemLast(d);break;case n.First:this.addItemFirst(d);break;case n.Last:this.addItemLast(d);break;default:this.addItemLast(d);break}this._map.set(o,d),this._size++}return this}delete(o){return!!this.remove(o)}remove(o){const D=this._map.get(o);if(D)return this._map.delete(o),this.removeItem(D),this._size--,D.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const o=this._head;return this._map.delete(o.key),this.removeItem(o),this._size--,o.value}forEach(o,D){const c=this._state;let d=this._head;for(;d;){if(D?o.bind(D)(d.value,d.key,this):o(d.value,d.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");d=d.next}}keys(){const o=this._state;let D=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(D){const d={value:D.key,done:!1};return D=D.next,d}else return{value:void 0,done:!0}}};return c}values(){const o=this._state;let D=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(D){const d={value:D.value,done:!1};return D=D.next,d}else return{value:void 0,done:!0}}};return c}entries(){const o=this._state;let D=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==o)throw new Error("LinkedMap got modified during iteration.");if(D){const d={value:[D.key,D.value],done:!1};return D=D.next,d}else return{value:void 0,done:!0}}};return c}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(o){if(o>=this.size)return;if(o===0){this.clear();return}let D=this._head,c=this.size;for(;D&&c>o;)this._map.delete(D.key),D=D.next,c--;this._head=D,this._size=c,D&&(D.previous=void 0),this._state++}addItemFirst(o){if(!this._head&&!this._tail)this._tail=o;else if(this._head)o.next=this._head,this._head.previous=o;else throw new Error("Invalid list");this._head=o,this._state++}addItemLast(o){if(!this._head&&!this._tail)this._head=o;else if(this._tail)o.previous=this._tail,this._tail.next=o;else throw new Error("Invalid list");this._tail=o,this._state++}removeItem(o){if(o===this._head&&o===this._tail)this._head=void 0,this._tail=void 0;else if(o===this._head){if(!o.next)throw new Error("Invalid list");o.next.previous=void 0,this._head=o.next}else if(o===this._tail){if(!o.previous)throw new Error("Invalid list");o.previous.next=void 0,this._tail=o.previous}else{const D=o.next,c=o.previous;if(!D||!c)throw new Error("Invalid list");D.previous=c,c.next=D}o.next=void 0,o.previous=void 0,this._state++}touch(o,D){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(D!==n.First&&D!==n.Last)){if(D===n.First){if(o===this._head)return;const c=o.next,d=o.previous;o===this._tail?(d.next=void 0,this._tail=d):(c.previous=d,d.next=c),o.previous=void 0,o.next=this._head,this._head.previous=o,this._head=o,this._state++}else if(D===n.Last){if(o===this._tail)return;const c=o.next,d=o.previous;o===this._head?(c.previous=void 0,this._head=c):(c.previous=d,d.next=c),o.next=void 0,o.previous=this._tail,this._tail.next=o,this._tail=o,this._state++}}}toJSON(){const o=[];return this.forEach((D,c)=>{o.push([c,D])}),o}fromJSON(o){this.clear();for(const[D,c]of o)this.set(D,c)}}e.LinkedMap=r;class u extends r{constructor(o,D=1){super(),this._limit=o,this._ratio=Math.min(Math.max(0,D),1)}get limit(){return this._limit}set limit(o){this._limit=o,this.checkTrim()}get ratio(){return this._ratio}set ratio(o){this._ratio=Math.min(Math.max(0,o),1),this.checkTrim()}get(o,D=n.AsNew){return super.get(o,D)}peek(o){return super.get(o,n.None)}set(o,D){return super.set(o,D,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=u})(Yr);const Fs=ce(Yr),Cs=Q({__proto__:null,default:Fs},[Yr]),hi=X(Cs);var Kr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,function(t){function n(r){return{dispose:r}}t.create=n}(e.Disposable||(e.Disposable={}))})(Kr);const ms=ce(Kr),ys=Q({__proto__:null,default:ms},[Kr]),Es=X(ys);var xr={},eu={};Object.defineProperty(eu,"__esModule",{value:!0});let Vn;function Jn(){if(Vn===void 0)throw new Error("No runtime abstraction layer installed");return Vn}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");Vn=n}e.install=t})(Jn||(Jn={}));var bs=eu.default=Jn;const _s=Q({__proto__:null,default:bs},[eu]),Ot=X(_s);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=Ot;(function(u){const i={dispose(){}};u.None=function(){return i}})(e.Event||(e.Event={}));class n{add(i,o=null,D){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(i),this._contexts.push(o),Array.isArray(D)&&D.push({dispose:()=>this.remove(i,o)})}remove(i,o=null){if(!this._callbacks)return;let D=!1;for(let c=0,d=this._callbacks.length;c<d;c++)if(this._callbacks[c]===i)if(this._contexts[c]===o){this._callbacks.splice(c,1),this._contexts.splice(c,1);return}else D=!0;if(D)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...i){if(!this._callbacks)return[];const o=[],D=this._callbacks.slice(0),c=this._contexts.slice(0);for(let d=0,m=D.length;d<m;d++)try{o.push(D[d].apply(c[d],i))}catch(T){(0,t.default)().console.error(T)}return o}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class r{constructor(i){this._options=i}get event(){return this._event||(this._event=(i,o,D)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(i,o);const c={dispose:()=>{this._callbacks&&(this._callbacks.remove(i,o),c.dispose=r._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(D)&&D.push(c),c}),this._event}fire(i){this._callbacks&&this._callbacks.invoke.call(this._callbacks,i)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=r,r._noop=function(){}})(xr);const vs=ce(xr),ks=Q({__proto__:null,default:vs},[xr]),_n=X(ks);var tu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=Ot,n=bn,r=_n;var u;(function(c){c.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:r.Event.None}),c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:r.Event.None});function d(m){const T=m;return T&&(T===c.None||T===c.Cancelled||n.boolean(T.isCancellationRequested)&&!!T.onCancellationRequested)}c.is=d})(u=e.CancellationToken||(e.CancellationToken={}));const i=Object.freeze(function(c,d){const m=(0,t.default)().timer.setTimeout(c.bind(d),0);return{dispose(){m.dispose()}}});class o{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?i:(this._emitter||(this._emitter=new r.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class D{get token(){return this._token||(this._token=new o),this._token}cancel(){this._token?this._token.cancel():this._token=u.Cancelled}dispose(){this._token?this._token instanceof o&&this._token.dispose():this._token=u.None}}e.CancellationTokenSource=D})(tu);const Rs=ce(tu),ws=Q({__proto__:null,default:Rs},[tu]),nu=X(ws);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});var pi=Tt.SharedArrayReceiverStrategy=Fi=Tt.SharedArraySenderStrategy=void 0;const Bs=nu;var Kt;(function(e){e.Continue=0,e.Cancelled=1})(Kt||(Kt={}));class Ss{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;const n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=Kt.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){const r=this.buffers.get(n);if(r===void 0)return;const u=new Int32Array(r,0,1);Atomics.store(u,0,Kt.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}}var Fi=Tt.SharedArraySenderStrategy=Ss;class Ts{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Kt.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class As{constructor(t){this.token=new Ts(t)}cancel(){}dispose(){}}class Ps{constructor(){this.kind="request"}createCancellationTokenSource(t){const n=t.$cancellationData;return n===void 0?new Bs.CancellationTokenSource:new As(n)}}pi=Tt.SharedArrayReceiverStrategy=Ps;const Os=Q({__proto__:null,get SharedArrayReceiverStrategy(){return pi},get SharedArraySenderStrategy(){return Fi},default:Tt},[Tt]),qs=X(Os);var ru={},xt={};Object.defineProperty(xt,"__esModule",{value:!0});var Ci=xt.Semaphore=void 0;const Ns=Ot;class js{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,r)=>{this._waiting.push({thunk:t,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Ns.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=t.thunk();n instanceof Promise?n.then(r=>{this._active--,t.resolve(r),this.runNext()},r=>{this._active--,t.reject(r),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}}Ci=xt.Semaphore=js;const $s=Q({__proto__:null,get Semaphore(){return Ci},default:xt},[xt]),mi=X($s);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=Ot,n=bn,r=_n,u=mi;(function(c){function d(m){let T=m;return T&&n.func(T.listen)&&n.func(T.dispose)&&n.func(T.onError)&&n.func(T.onClose)&&n.func(T.onPartialMessage)}c.is=d})(e.MessageReader||(e.MessageReader={}));class i{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter,this.partialMessageEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(d){this.errorEmitter.fire(this.asError(d))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(d){this.partialMessageEmitter.fire(d)}asError(d){return d instanceof Error?d:new Error(`Reader received error. Reason: ${n.string(d.message)?d.message:"unknown"}`)}}e.AbstractMessageReader=i;var o;(function(c){function d(m){let T,B;const b=new Map;let $;const ue=new Map;if(m===void 0||typeof m=="string")T=m??"utf-8";else{if(T=m.charset??"utf-8",m.contentDecoder!==void 0&&(B=m.contentDecoder,b.set(B.name,B)),m.contentDecoders!==void 0)for(const ie of m.contentDecoders)b.set(ie.name,ie);if(m.contentTypeDecoder!==void 0&&($=m.contentTypeDecoder,ue.set($.name,$)),m.contentTypeDecoders!==void 0)for(const ie of m.contentTypeDecoders)ue.set(ie.name,ie)}return $===void 0&&($=(0,t.default)().applicationJson.decoder,ue.set($.name,$)),{charset:T,contentDecoder:B,contentDecoders:b,contentTypeDecoder:$,contentTypeDecoders:ue}}c.fromOptions=d})(o||(o={}));class D extends i{constructor(d,m){super(),this.readable=d,this.options=o.fromOptions(m),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new u.Semaphore(1)}set partialMessageTimeout(d){this._partialMessageTimeout=d}get partialMessageTimeout(){return this._partialMessageTimeout}listen(d){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=d;const m=this.readable.onData(T=>{this.onData(T)});return this.readable.onError(T=>this.fireError(T)),this.readable.onClose(()=>this.fireClose()),m}onData(d){for(this.buffer.append(d);;){if(this.nextMessageLength===-1){const T=this.buffer.tryReadHeaders(!0);if(!T)return;const B=T.get("content-length");if(!B){this.fireError(new Error("Header must provide a Content-Length property."));return}const b=parseInt(B);if(isNaN(b)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=b}const m=this.buffer.tryReadBody(this.nextMessageLength);if(m===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const T=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(m):m,B=await this.options.contentTypeDecoder.decode(T,this.options);this.callback(B)}).catch(T=>{this.fireError(T)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((d,m)=>{this.partialMessageTimer=void 0,d===this.messageToken&&(this.firePartialMessage({messageToken:d,waitingTime:m}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}e.ReadableStreamMessageReader=D})(ru);const Ms=ce(ru),Ls=Q({__proto__:null,default:Ms},[ru]),Is=X(Ls);var uu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=Ot,n=bn,r=mi,u=_n,i="Content-Length: ",o=`\r
`;(function(m){function T(B){let b=B;return b&&n.func(b.dispose)&&n.func(b.onClose)&&n.func(b.onError)&&n.func(b.write)}m.is=T})(e.MessageWriter||(e.MessageWriter={}));class D{constructor(){this.errorEmitter=new u.Emitter,this.closeEmitter=new u.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(T,B,b){this.errorEmitter.fire([this.asError(T),B,b])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(T){return T instanceof Error?T:new Error(`Writer received error. Reason: ${n.string(T.message)?T.message:"unknown"}`)}}e.AbstractMessageWriter=D;var c;(function(m){function T(B){return B===void 0||typeof B=="string"?{charset:B??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:B.charset??"utf-8",contentEncoder:B.contentEncoder,contentTypeEncoder:B.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}m.fromOptions=T})(c||(c={}));class d extends D{constructor(T,B){super(),this.writable=T,this.options=c.fromOptions(B),this.errorCount=0,this.writeSemaphore=new r.Semaphore(1),this.writable.onError(b=>this.fireError(b)),this.writable.onClose(()=>this.fireClose())}async write(T){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(T,this.options).then(b=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(b):b).then(b=>{const $=[];return $.push(i,b.byteLength.toString(),o),$.push(o),this.doWrite(T,$,b)},b=>{throw this.fireError(b),b}))}async doWrite(T,B,b){try{return await this.writable.write(B.join(""),"ascii"),this.writable.write(b)}catch($){return this.handleError($,T),Promise.reject($)}}handleError(T,B){this.errorCount++,this.fireError(T,B,this.errorCount)}end(){this.writable.end()}}e.WriteableStreamMessageWriter=d})(uu);const Ws=ce(uu),Hs=Q({__proto__:null,default:Ws},[uu]),zs=X(Hs);var en={};Object.defineProperty(en,"__esModule",{value:!0});var yi=en.AbstractMessageBuffer=void 0;const Us=13,Vs=10,Js=`\r
`;class Gs{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){const n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,r=0,u=0,i=0;e:for(;r<this._chunks.length;){const d=this._chunks[r];for(u=0;u<d.length;){switch(d[u]){case Us:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case Vs:switch(n){case 1:n=2;break;case 3:n=4,u++;break e;default:n=0}break;default:n=0}u++}i+=d.byteLength,r++}if(n!==4)return;const o=this._read(i+u),D=new Map,c=this.toString(o,"ascii").split(Js);if(c.length<2)return D;for(let d=0;d<c.length-2;d++){const m=c[d],T=m.indexOf(":");if(T===-1)throw new Error("Message header must separate key and value using :");const B=m.substr(0,T),b=m.substr(T+1).trim();D.set(t?B.toLowerCase():B,b)}return D}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){const i=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(i)}if(this._chunks[0].byteLength>t){const i=this._chunks[0],o=this.asNative(i,t);return this._chunks[0]=i.slice(t),this._totalLength-=t,o}const n=this.allocNative(t);let r=0,u=0;for(;t>0;){const i=this._chunks[u];if(i.byteLength>t){const o=i.slice(0,t);n.set(o,r),r+=t,this._chunks[u]=i.slice(t),this._totalLength-=t,t-=t}else n.set(i,r),r+=i.byteLength,this._chunks.shift(),this._totalLength-=i.byteLength,t-=i.byteLength}return n}}yi=en.AbstractMessageBuffer=Gs;const Zs=Q({__proto__:null,get AbstractMessageBuffer(){return yi},default:en},[en]),Xs=X(Zs);var iu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=Ot,n=bn,r=gi,u=hi,i=_n,o=nu;var D;(function(M){M.type=new r.NotificationType("$/cancelRequest")})(D||(D={}));var c;(function(M){function s(A){return typeof A=="string"||typeof A=="number"}M.is=s})(c=e.ProgressToken||(e.ProgressToken={}));var d;(function(M){M.type=new r.NotificationType("$/progress")})(d||(d={}));class m{constructor(){}}e.ProgressType=m;var T;(function(M){function s(A){return n.func(A)}M.is=s})(T||(T={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var B;(function(M){M[M.Off=0]="Off",M[M.Messages=1]="Messages",M[M.Compact=2]="Compact",M[M.Verbose=3]="Verbose"})(B=e.Trace||(e.Trace={})),function(M){M.Off="off",M.Messages="messages",M.Compact="compact",M.Verbose="verbose"}(e.TraceValues||(e.TraceValues={})),function(M){function s(L){if(!n.string(L))return M.Off;switch(L=L.toLowerCase(),L){case"off":return M.Off;case"messages":return M.Messages;case"compact":return M.Compact;case"verbose":return M.Verbose;default:return M.Off}}M.fromString=s;function A(L){switch(L){case M.Off:return"off";case M.Messages:return"messages";case M.Compact:return"compact";case M.Verbose:return"verbose";default:return"off"}}M.toString=A}(B=e.Trace||(e.Trace={}));var b;(function(M){M.Text="text",M.JSON="json"})(b=e.TraceFormat||(e.TraceFormat={})),function(M){function s(A){return n.string(A)?(A=A.toLowerCase(),A==="json"?M.JSON:M.Text):M.Text}M.fromString=s}(b=e.TraceFormat||(e.TraceFormat={}));var $;(function(M){M.type=new r.NotificationType("$/setTrace")})($=e.SetTraceNotification||(e.SetTraceNotification={}));var ue;(function(M){M.type=new r.NotificationType("$/logTrace")})(ue=e.LogTraceNotification||(e.LogTraceNotification={}));var ie;(function(M){M[M.Closed=1]="Closed",M[M.Disposed=2]="Disposed",M[M.AlreadyListening=3]="AlreadyListening"})(ie=e.ConnectionErrors||(e.ConnectionErrors={}));class Y extends Error{constructor(s,A){super(A),this.code=s,Object.setPrototypeOf(this,Y.prototype)}}e.ConnectionError=Y;var fe;(function(M){function s(A){const L=A;return L&&n.func(L.cancelUndispatched)}M.is=s})(fe=e.ConnectionStrategy||(e.ConnectionStrategy={}));var ee;(function(M){function s(A){const L=A;return L&&(L.kind===void 0||L.kind==="id")&&n.func(L.createCancellationTokenSource)&&(L.dispose===void 0||n.func(L.dispose))}M.is=s})(ee=e.IdCancellationReceiverStrategy||(e.IdCancellationReceiverStrategy={}));var ye;(function(M){function s(A){const L=A;return L&&L.kind==="request"&&n.func(L.createCancellationTokenSource)&&(L.dispose===void 0||n.func(L.dispose))}M.is=s})(ye=e.RequestCancellationReceiverStrategy||(e.RequestCancellationReceiverStrategy={}));var He;(function(M){M.Message=Object.freeze({createCancellationTokenSource(A){return new o.CancellationTokenSource}});function s(A){return ee.is(A)||ye.is(A)}M.is=s})(He=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={}));var $e;(function(M){M.Message=Object.freeze({sendCancellation(A,L){return A.sendNotification(D.type,{id:L})},cleanup(A){}});function s(A){const L=A;return L&&n.func(L.sendCancellation)&&n.func(L.cleanup)}M.is=s})($e=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={}));var Re;(function(M){M.Message=Object.freeze({receiver:He.Message,sender:$e.Message});function s(A){const L=A;return L&&He.is(L.receiver)&&$e.is(L.sender)}M.is=s})(Re=e.CancellationStrategy||(e.CancellationStrategy={}));var Ve;(function(M){function s(A){const L=A;return L&&n.func(L.handleMessage)}M.is=s})(Ve=e.MessageStrategy||(e.MessageStrategy={})),function(M){function s(A){const L=A;return L&&(Re.is(L.cancellationStrategy)||fe.is(L.connectionStrategy)||Ve.is(L.messageStrategy))}M.is=s}(e.ConnectionOptions||(e.ConnectionOptions={}));var we;(function(M){M[M.New=1]="New",M[M.Listening=2]="Listening",M[M.Closed=3]="Closed",M[M.Disposed=4]="Disposed"})(we||(we={}));function ut(M,s,A,L){const J=A!==void 0?A:e.NullLogger;let le=0,Be=0,Et=0;const Je="2.0";let it;const Dt=new Map;let F;const I=new Map,W=new Map;let z,U=new u.LinkedMap,ne=new Map,w=new Set,h=new Map,y=B.Off,P=b.Text,E,p=we.New;const x=new i.Emitter,re=new i.Emitter,G=new i.Emitter,he=new i.Emitter,_e=new i.Emitter,Fe=L&&L.cancellationStrategy?L.cancellationStrategy:Re.Message;function de(f){if(f===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+f.toString()}function Ze(f){return f===null?"res-unknown-"+(++Et).toString():"res-"+f.toString()}function V(){return"not-"+(++Be).toString()}function Z(f,q){r.Message.isRequest(q)?f.set(de(q.id),q):r.Message.isResponse(q)?f.set(Ze(q.id),q):f.set(V(),q)}function te(f){}function oe(){return p===we.Listening}function v(){return p===we.Closed}function g(){return p===we.Disposed}function S(){(p===we.New||p===we.Listening)&&(p=we.Closed,re.fire(void 0))}function j(f){x.fire([f,void 0,void 0])}function a(f){x.fire(f)}M.onClose(S),M.onError(j),s.onClose(S),s.onError(a);function l(){z||U.size===0||(z=(0,t.default)().timer.setImmediate(()=>{z=void 0,O()}))}function C(f){r.Message.isRequest(f)?k(f):r.Message.isNotification(f)?se(f):r.Message.isResponse(f)?N(f):Se(f)}function O(){if(U.size===0)return;const f=U.shift();try{const q=L==null?void 0:L.messageStrategy;Ve.is(q)?q.handleMessage(f,C):C(f)}finally{l()}}const R=f=>{try{if(r.Message.isNotification(f)&&f.method===D.type.method){const q=f.params.id,H=de(q),K=U.get(H);if(r.Message.isRequest(K)){const me=L==null?void 0:L.connectionStrategy,Ee=me&&me.cancelUndispatched?me.cancelUndispatched(K,te):void 0;if(Ee&&(Ee.error!==void 0||Ee.result!==void 0)){U.delete(H),h.delete(q),Ee.id=K.id,lt(Ee,f.method,Date.now()),s.write(Ee).catch(()=>J.error("Sending response for canceled message failed."));return}}const ve=h.get(q);if(ve!==void 0){ve.cancel(),ct(f);return}else w.add(q)}Z(U,f)}finally{l()}};function k(f){if(g())return;function q(ge,Te,Ce){const Le={jsonrpc:Je,id:f.id};ge instanceof r.ResponseError?Le.error=ge.toJson():Le.result=ge===void 0?null:ge,lt(Le,Te,Ce),s.write(Le).catch(()=>J.error("Sending response failed."))}function H(ge,Te,Ce){const Le={jsonrpc:Je,id:f.id,error:ge.toJson()};lt(Le,Te,Ce),s.write(Le).catch(()=>J.error("Sending response failed."))}function K(ge,Te,Ce){ge===void 0&&(ge=null);const Le={jsonrpc:Je,id:f.id,result:ge};lt(Le,Te,Ce),s.write(Le).catch(()=>J.error("Sending response failed."))}ht(f);const ve=Dt.get(f.method);let me,Ee;ve&&(me=ve.type,Ee=ve.handler);const qe=Date.now();if(Ee||it){const ge=f.id??String(Date.now()),Te=ee.is(Fe.receiver)?Fe.receiver.createCancellationTokenSource(ge):Fe.receiver.createCancellationTokenSource(f);f.id!==null&&w.has(f.id)&&Te.cancel(),f.id!==null&&h.set(ge,Te);try{let Ce;if(Ee)if(f.params===void 0){if(me!==void 0&&me.numberOfParams!==0){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${f.method} defines ${me.numberOfParams} params but received none.`),f.method,qe);return}Ce=Ee(Te.token)}else if(Array.isArray(f.params)){if(me!==void 0&&me.parameterStructures===r.ParameterStructures.byName){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by name but received parameters by position`),f.method,qe);return}Ce=Ee(...f.params,Te.token)}else{if(me!==void 0&&me.parameterStructures===r.ParameterStructures.byPosition){H(new r.ResponseError(r.ErrorCodes.InvalidParams,`Request ${f.method} defines parameters by position but received parameters by name`),f.method,qe);return}Ce=Ee(f.params,Te.token)}else it&&(Ce=it(f.method,f.params,Te.token));const Le=Ce;Ce?Le.then?Le.then(Qe=>{h.delete(ge),q(Qe,f.method,qe)},Qe=>{h.delete(ge),Qe instanceof r.ResponseError?H(Qe,f.method,qe):Qe&&n.string(Qe.message)?H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Qe.message}`),f.method,qe):H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,qe)}):(h.delete(ge),q(Ce,f.method,qe)):(h.delete(ge),K(Ce,f.method,qe))}catch(Ce){h.delete(ge),Ce instanceof r.ResponseError?q(Ce,f.method,qe):Ce&&n.string(Ce.message)?H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${f.method} failed with message: ${Ce.message}`),f.method,qe):H(new r.ResponseError(r.ErrorCodes.InternalError,`Request ${f.method} failed unexpectedly without providing any details.`),f.method,qe)}}else H(new r.ResponseError(r.ErrorCodes.MethodNotFound,`Unhandled method ${f.method}`),f.method,qe)}function N(f){if(!g())if(f.id===null)f.error?J.error(`Received response message without id: Error is: 
${JSON.stringify(f.error,void 0,4)}`):J.error("Received response message without id. No further error information provided.");else{const q=f.id,H=ne.get(q);if(Gt(f,H),H!==void 0){ne.delete(q);try{if(f.error){const K=f.error;H.reject(new r.ResponseError(K.code,K.message,K.data))}else if(f.result!==void 0)H.resolve(f.result);else throw new Error("Should never happen.")}catch(K){K.message?J.error(`Response handler '${H.method}' failed with message: ${K.message}`):J.error(`Response handler '${H.method}' failed unexpectedly.`)}}}}function se(f){if(g())return;let q,H;if(f.method===D.type.method){const K=f.params.id;w.delete(K),ct(f);return}else{const K=I.get(f.method);K&&(H=K.handler,q=K.type)}if(H||F)try{if(ct(f),H)if(f.params===void 0)q!==void 0&&q.numberOfParams!==0&&q.parameterStructures!==r.ParameterStructures.byName&&J.error(`Notification ${f.method} defines ${q.numberOfParams} params but received none.`),H();else if(Array.isArray(f.params)){const K=f.params;f.method===d.type.method&&K.length===2&&c.is(K[0])?H({token:K[0],value:K[1]}):(q!==void 0&&(q.parameterStructures===r.ParameterStructures.byName&&J.error(`Notification ${f.method} defines parameters by name but received parameters by position`),q.numberOfParams!==f.params.length&&J.error(`Notification ${f.method} defines ${q.numberOfParams} params but received ${K.length} arguments`)),H(...K))}else q!==void 0&&q.parameterStructures===r.ParameterStructures.byPosition&&J.error(`Notification ${f.method} defines parameters by position but received parameters by name`),H(f.params);else F&&F(f.method,f.params)}catch(K){K.message?J.error(`Notification handler '${f.method}' failed with message: ${K.message}`):J.error(`Notification handler '${f.method}' failed unexpectedly.`)}else G.fire(f)}function Se(f){if(!f){J.error("Received empty message.");return}J.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(f,null,4)}`);const q=f;if(n.string(q.id)||n.number(q.id)){const H=q.id,K=ne.get(H);K&&K.reject(new Error("The received response has neither a result nor an error property."))}}function pe(f){if(f!=null)switch(y){case B.Verbose:return JSON.stringify(f,null,4);case B.Compact:return JSON.stringify(f);default:return}}function nt(f){if(!(y===B.Off||!E))if(P===b.Text){let q;(y===B.Verbose||y===B.Compact)&&f.params&&(q=`Params: ${pe(f.params)}

`),E.log(`Sending request '${f.method} - (${f.id})'.`,q)}else bt("send-request",f)}function Xe(f){if(!(y===B.Off||!E))if(P===b.Text){let q;(y===B.Verbose||y===B.Compact)&&(f.params?q=`Params: ${pe(f.params)}

`:q=`No parameters provided.

`),E.log(`Sending notification '${f.method}'.`,q)}else bt("send-notification",f)}function lt(f,q,H){if(!(y===B.Off||!E))if(P===b.Text){let K;(y===B.Verbose||y===B.Compact)&&(f.error&&f.error.data?K=`Error data: ${pe(f.error.data)}

`:f.result?K=`Result: ${pe(f.result)}

`:f.error===void 0&&(K=`No result returned.

`)),E.log(`Sending response '${q} - (${f.id})'. Processing request took ${Date.now()-H}ms`,K)}else bt("send-response",f)}function ht(f){if(!(y===B.Off||!E))if(P===b.Text){let q;(y===B.Verbose||y===B.Compact)&&f.params&&(q=`Params: ${pe(f.params)}

`),E.log(`Received request '${f.method} - (${f.id})'.`,q)}else bt("receive-request",f)}function ct(f){if(!(y===B.Off||!E||f.method===ue.type.method))if(P===b.Text){let q;(y===B.Verbose||y===B.Compact)&&(f.params?q=`Params: ${pe(f.params)}

`:q=`No parameters provided.

`),E.log(`Received notification '${f.method}'.`,q)}else bt("receive-notification",f)}function Gt(f,q){if(!(y===B.Off||!E))if(P===b.Text){let H;if((y===B.Verbose||y===B.Compact)&&(f.error&&f.error.data?H=`Error data: ${pe(f.error.data)}

`:f.result?H=`Result: ${pe(f.result)}

`:f.error===void 0&&(H=`No result returned.

`)),q){const K=f.error?` Request failed: ${f.error.message} (${f.error.code}).`:"";E.log(`Received response '${q.method} - (${f.id})' in ${Date.now()-q.timerStart}ms.${K}`,H)}else E.log(`Received response ${f.id} without active response promise.`,H)}else bt("receive-response",f)}function bt(f,q){if(!E||y===B.Off)return;const H={isLSPMessage:!0,type:f,message:q,timestamp:Date.now()};E.log(H)}function kt(){if(v())throw new Y(ie.Closed,"Connection is closed.");if(g())throw new Y(ie.Disposed,"Connection is disposed.")}function To(){if(oe())throw new Y(ie.AlreadyListening,"Connection is already listening")}function Ao(){if(!oe())throw new Error("Call listen() first.")}function Zt(f){return f===void 0?null:f}function qu(f){if(f!==null)return f}function Nu(f){return f!=null&&!Array.isArray(f)&&typeof f=="object"}function Wn(f,q){switch(f){case r.ParameterStructures.auto:return Nu(q)?qu(q):[Zt(q)];case r.ParameterStructures.byName:if(!Nu(q))throw new Error("Received parameters by name but param is not an object literal.");return qu(q);case r.ParameterStructures.byPosition:return[Zt(q)];default:throw new Error(`Unknown parameter structure ${f.toString()}`)}}function ju(f,q){let H;const K=f.numberOfParams;switch(K){case 0:H=void 0;break;case 1:H=Wn(f.parameterStructures,q[0]);break;default:H=[];for(let ve=0;ve<q.length&&ve<K;ve++)H.push(Zt(q[ve]));if(q.length<K)for(let ve=q.length;ve<K;ve++)H.push(null);break}return H}const qt={sendNotification:(f,...q)=>{kt();let H,K;if(n.string(f)){H=f;const me=q[0];let Ee=0,qe=r.ParameterStructures.auto;r.ParameterStructures.is(me)&&(Ee=1,qe=me);let ge=q.length;const Te=ge-Ee;switch(Te){case 0:K=void 0;break;case 1:K=Wn(qe,q[Ee]);break;default:if(qe===r.ParameterStructures.byName)throw new Error(`Received ${Te} parameters for 'by Name' notification parameter structure.`);K=q.slice(Ee,ge).map(Ce=>Zt(Ce));break}}else{const me=q;H=f.method,K=ju(f,me)}const ve={jsonrpc:Je,method:H,params:K};return Xe(ve),s.write(ve).catch(me=>{throw J.error("Sending notification failed."),me})},onNotification:(f,q)=>{kt();let H;return n.func(f)?F=f:q&&(n.string(f)?(H=f,I.set(f,{type:void 0,handler:q})):(H=f.method,I.set(f.method,{type:f,handler:q}))),{dispose:()=>{H!==void 0?I.delete(H):F=void 0}}},onProgress:(f,q,H)=>{if(W.has(q))throw new Error(`Progress handler for token ${q} already registered`);return W.set(q,H),{dispose:()=>{W.delete(q)}}},sendProgress:(f,q,H)=>qt.sendNotification(d.type,{token:q,value:H}),onUnhandledProgress:he.event,sendRequest:(f,...q)=>{kt(),Ao();let H,K,ve;if(n.string(f)){H=f;const ge=q[0],Te=q[q.length-1];let Ce=0,Le=r.ParameterStructures.auto;r.ParameterStructures.is(ge)&&(Ce=1,Le=ge);let Qe=q.length;o.CancellationToken.is(Te)&&(Qe=Qe-1,ve=Te);const ft=Qe-Ce;switch(ft){case 0:K=void 0;break;case 1:K=Wn(Le,q[Ce]);break;default:if(Le===r.ParameterStructures.byName)throw new Error(`Received ${ft} parameters for 'by Name' request parameter structure.`);K=q.slice(Ce,Qe).map(Po=>Zt(Po));break}}else{const ge=q;H=f.method,K=ju(f,ge);const Te=f.numberOfParams;ve=o.CancellationToken.is(ge[Te])?ge[Te]:void 0}const me=le++;let Ee;ve&&(Ee=ve.onCancellationRequested(()=>{const ge=Fe.sender.sendCancellation(qt,me);return ge===void 0?(J.log(`Received no promise from cancellation strategy when cancelling id ${me}`),Promise.resolve()):ge.catch(()=>{J.log(`Sending cancellation messages for id ${me} failed`)})}));const qe={jsonrpc:Je,id:me,method:H,params:K};return nt(qe),typeof Fe.sender.enableCancellation=="function"&&Fe.sender.enableCancellation(qe),new Promise(async(ge,Te)=>{const Ce=ft=>{ge(ft),Fe.sender.cleanup(me),Ee==null||Ee.dispose()},Le=ft=>{Te(ft),Fe.sender.cleanup(me),Ee==null||Ee.dispose()},Qe={method:H,timerStart:Date.now(),resolve:Ce,reject:Le};try{await s.write(qe),ne.set(me,Qe)}catch(ft){throw J.error("Sending request failed."),Qe.reject(new r.ResponseError(r.ErrorCodes.MessageWriteError,ft.message?ft.message:"Unknown reason")),ft}})},onRequest:(f,q)=>{kt();let H=null;return T.is(f)?(H=void 0,it=f):n.string(f)?(H=null,q!==void 0&&(H=f,Dt.set(f,{handler:q,type:void 0}))):q!==void 0&&(H=f.method,Dt.set(f.method,{type:f,handler:q})),{dispose:()=>{H!==null&&(H!==void 0?Dt.delete(H):it=void 0)}}},hasPendingResponse:()=>ne.size>0,trace:async(f,q,H)=>{let K=!1,ve=b.Text;H!==void 0&&(n.boolean(H)?K=H:(K=H.sendNotification||!1,ve=H.traceFormat||b.Text)),y=f,P=ve,y===B.Off?E=void 0:E=q,K&&!v()&&!g()&&await qt.sendNotification($.type,{value:B.toString(f)})},onError:x.event,onClose:re.event,onUnhandledNotification:G.event,onDispose:_e.event,end:()=>{s.end()},dispose:()=>{if(g())return;p=we.Disposed,_e.fire(void 0);const f=new r.ResponseError(r.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const q of ne.values())q.reject(f);ne=new Map,h=new Map,w=new Set,U=new u.LinkedMap,n.func(s.dispose)&&s.dispose(),n.func(M.dispose)&&M.dispose()},listen:()=>{kt(),To(),p=we.Listening,M.listen(R)},inspect:()=>{(0,t.default)().console.log("inspect")}};return qt.onNotification(ue.type,f=>{if(y===B.Off||!E)return;const q=y===B.Verbose||y===B.Compact;E.log(f.message,q?f.verbose:void 0)}),qt.onNotification(d.type,f=>{const q=W.get(f.token);q?q(f.value):he.fire(f)}),qt}e.createMessageConnection=ut})(iu);const Qs=ce(iu),Ys=Q({__proto__:null,default:Qs},[iu]),Ks=X(Ys);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=gi;Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=hi;Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const r=Es;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return r.Disposable}});const u=_n;Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return u.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return u.Emitter}});const i=nu;Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return i.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return i.CancellationToken}});const o=qs;Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return o.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return o.SharedArrayReceiverStrategy}});const D=Is;Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return D.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return D.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return D.ReadableStreamMessageReader}});const c=zs;Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const d=Xs;Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return d.AbstractMessageBuffer}});const m=Ks;Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return m.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return m.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return m.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return m.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return m.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return m.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return m.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return m.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return m.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return m.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return m.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return m.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return m.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return m.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return m.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return m.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return m.MessageStrategy}});const T=Ot;e.RAL=T.default})(Xr);const xs=ce(Xr),ea=Q({__proto__:null,default:xs},[Xr]),Gn=X(ea);Object.defineProperty(Zr,"__esModule",{value:!0});const dt=Gn;class In extends dt.AbstractMessageBuffer{constructor(t="utf-8"){super(t),this.asciiDecoder=new TextDecoder("ascii")}emptyBuffer(){return In.emptyBuffer}fromString(t,n){return new TextEncoder().encode(t)}toString(t,n){return n==="ascii"?this.asciiDecoder.decode(t):new TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t:t.slice(0,n)}allocNative(t){return new Uint8Array(t)}}In.emptyBuffer=new Uint8Array(0);class ta{constructor(t){this.socket=t,this._onData=new dt.Emitter,this._messageListener=n=>{n.data.arrayBuffer().then(u=>{this._onData.fire(new Uint8Array(u))},()=>{(0,dt.RAL)().console.error("Converting blob to array buffer failed.")})},this.socket.addEventListener("message",this._messageListener)}onClose(t){return this.socket.addEventListener("close",t),dt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),dt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),dt.Disposable.create(()=>this.socket.removeEventListener("end",t))}onData(t){return this._onData.event(t)}}class na{constructor(t){this.socket=t}onClose(t){return this.socket.addEventListener("close",t),dt.Disposable.create(()=>this.socket.removeEventListener("close",t))}onError(t){return this.socket.addEventListener("error",t),dt.Disposable.create(()=>this.socket.removeEventListener("error",t))}onEnd(t){return this.socket.addEventListener("end",t),dt.Disposable.create(()=>this.socket.removeEventListener("end",t))}write(t,n){if(typeof t=="string"){if(n!==void 0&&n!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${n}`);this.socket.send(t)}else this.socket.send(t);return Promise.resolve()}end(){this.socket.close()}}const ra=new TextEncoder,Ei=Object.freeze({messageBuffer:Object.freeze({create:e=>new In(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{if(t.charset!=="utf-8")throw new Error(`In a Browser environments only utf-8 text encoding is supported. But got encoding: ${t.charset}`);return Promise.resolve(ra.encode(JSON.stringify(e,void 0,0)))}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{if(!(e instanceof Uint8Array))throw new Error("In a Browser environments only Uint8Arrays are supported.");return Promise.resolve(JSON.parse(new TextDecoder(t.charset).decode(e)))}})}),stream:Object.freeze({asReadableStream:e=>new ta(e),asWritableStream:e=>new na(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setTimeout(e,0,...t);return{dispose:()=>clearTimeout(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function Zn(){return Ei}(function(e){function t(){dt.RAL.install(Ei)}e.install=t})(Zn||(Zn={}));var ua=Zr.default=Zn;const ia=Q({__proto__:null,default:ua},[Zr]),oa=X(ia);(function(e){var t=Me&&Me.__createBinding||(Object.create?function(c,d,m,T){T===void 0&&(T=m);var B=Object.getOwnPropertyDescriptor(d,m);(!B||("get"in B?!d.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return d[m]}}),Object.defineProperty(c,T,B)}:function(c,d,m,T){T===void 0&&(T=m),c[T]=d[m]}),n=Me&&Me.__exportStar||function(c,d){for(var m in c)m!=="default"&&!Object.prototype.hasOwnProperty.call(d,m)&&t(d,c,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.BrowserMessageWriter=e.BrowserMessageReader=void 0,oa.default.install();const u=Gn;n(Gn,e);class i extends u.AbstractMessageReader{constructor(d){super(),this._onData=new u.Emitter,this._messageListener=m=>{this._onData.fire(m.data)},d.addEventListener("error",m=>this.fireError(m)),d.onmessage=this._messageListener}listen(d){return this._onData.event(d)}}e.BrowserMessageReader=i;class o extends u.AbstractMessageWriter{constructor(d){super(),this.port=d,this.errorCount=0,d.addEventListener("error",m=>this.fireError(m))}write(d){try{return this.port.postMessage(d),Promise.resolve()}catch(m){return this.handleError(m,d),Promise.reject(m)}}handleError(d,m){this.errorCount++,this.fireError(d,m,this.errorCount)}end(){}}e.BrowserMessageWriter=o;function D(c,d,m,T){return m===void 0&&(m=u.NullLogger),u.ConnectionStrategy.is(T)&&(T={connectionStrategy:T}),(0,u.createMessageConnection)(c,d,m,T)}e.createMessageConnection=D})(Gr);const sa=ce(Gr),aa=Q({__proto__:null,default:sa},[Gr]),Jt=X(aa);(function(e){e.exports=Jt})(as);const Da=ce(Tn),ca=Q({__proto__:null,default:Da},[Tn]),Hu=X(ca);var ou={},Xn;(function(e){function t(n){return typeof n=="string"}e.is=t})(Xn||(Xn={}));var An;(function(e){function t(n){return typeof n=="string"}e.is=t})(An||(An={}));var Qn;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(Qn||(Qn={}));var tn;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(tn||(tn={}));var st;(function(e){function t(r,u){return r===Number.MAX_VALUE&&(r=tn.MAX_VALUE),u===Number.MAX_VALUE&&(u=tn.MAX_VALUE),{line:r,character:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.uinteger(u.line)&&_.uinteger(u.character)}e.is=n})(st||(st={}));var Pe;(function(e){function t(r,u,i,o){if(_.uinteger(r)&&_.uinteger(u)&&_.uinteger(i)&&_.uinteger(o))return{start:st.create(r,u),end:st.create(i,o)};if(st.is(r)&&st.is(u))return{start:r,end:u};throw new Error("Range#create called with invalid arguments[".concat(r,", ").concat(u,", ").concat(i,", ").concat(o,"]"))}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&st.is(u.start)&&st.is(u.end)}e.is=n})(Pe||(Pe={}));var nn;(function(e){function t(r,u){return{uri:r,range:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&(_.string(u.uri)||_.undefined(u.uri))}e.is=n})(nn||(nn={}));var Yn;(function(e){function t(r,u,i,o){return{targetUri:r,targetRange:u,targetSelectionRange:i,originSelectionRange:o}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.targetRange)&&_.string(u.targetUri)&&Pe.is(u.targetSelectionRange)&&(Pe.is(u.originSelectionRange)||_.undefined(u.originSelectionRange))}e.is=n})(Yn||(Yn={}));var Pn;(function(e){function t(r,u,i,o){return{red:r,green:u,blue:i,alpha:o}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.numberRange(u.red,0,1)&&_.numberRange(u.green,0,1)&&_.numberRange(u.blue,0,1)&&_.numberRange(u.alpha,0,1)}e.is=n})(Pn||(Pn={}));var Kn;(function(e){function t(r,u){return{range:r,color:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&Pn.is(u.color)}e.is=n})(Kn||(Kn={}));var xn;(function(e){function t(r,u,i){return{label:r,textEdit:u,additionalTextEdits:i}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.string(u.label)&&(_.undefined(u.textEdit)||gt.is(u))&&(_.undefined(u.additionalTextEdits)||_.typedArray(u.additionalTextEdits,gt.is))}e.is=n})(xn||(xn={}));var er;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(er||(er={}));var tr;(function(e){function t(r,u,i,o,D,c){var d={startLine:r,endLine:u};return _.defined(i)&&(d.startCharacter=i),_.defined(o)&&(d.endCharacter=o),_.defined(D)&&(d.kind=D),_.defined(c)&&(d.collapsedText=c),d}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.uinteger(u.startLine)&&_.uinteger(u.startLine)&&(_.undefined(u.startCharacter)||_.uinteger(u.startCharacter))&&(_.undefined(u.endCharacter)||_.uinteger(u.endCharacter))&&(_.undefined(u.kind)||_.string(u.kind))}e.is=n})(tr||(tr={}));var On;(function(e){function t(r,u){return{location:r,message:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&nn.is(u.location)&&_.string(u.message)}e.is=n})(On||(On={}));var nr;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(nr||(nr={}));var rr;(function(e){e.Unnecessary=1,e.Deprecated=2})(rr||(rr={}));var ur;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&_.string(r.href)}e.is=t})(ur||(ur={}));var rn;(function(e){function t(r,u,i,o,D,c){var d={range:r,message:u};return _.defined(i)&&(d.severity=i),_.defined(o)&&(d.code=o),_.defined(D)&&(d.source=D),_.defined(c)&&(d.relatedInformation=c),d}e.create=t;function n(r){var u,i=r;return _.defined(i)&&Pe.is(i.range)&&_.string(i.message)&&(_.number(i.severity)||_.undefined(i.severity))&&(_.integer(i.code)||_.string(i.code)||_.undefined(i.code))&&(_.undefined(i.codeDescription)||_.string((u=i.codeDescription)===null||u===void 0?void 0:u.href))&&(_.string(i.source)||_.undefined(i.source))&&(_.undefined(i.relatedInformation)||_.typedArray(i.relatedInformation,On.is))}e.is=n})(rn||(rn={}));var At;(function(e){function t(r,u){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var D={title:r,command:u};return _.defined(i)&&i.length>0&&(D.arguments=i),D}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.title)&&_.string(u.command)}e.is=n})(At||(At={}));var gt;(function(e){function t(i,o){return{range:i,newText:o}}e.replace=t;function n(i,o){return{range:{start:i,end:i},newText:o}}e.insert=n;function r(i){return{range:i,newText:""}}e.del=r;function u(i){var o=i;return _.objectLiteral(o)&&_.string(o.newText)&&Pe.is(o.range)}e.is=u})(gt||(gt={}));var St;(function(e){function t(r,u,i){var o={label:r};return u!==void 0&&(o.needsConfirmation=u),i!==void 0&&(o.description=i),o}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&_.string(u.label)&&(_.boolean(u.needsConfirmation)||u.needsConfirmation===void 0)&&(_.string(u.description)||u.description===void 0)}e.is=n})(St||(St={}));var Ue;(function(e){function t(n){var r=n;return _.string(r)}e.is=t})(Ue||(Ue={}));var Ft;(function(e){function t(i,o,D){return{range:i,newText:o,annotationId:D}}e.replace=t;function n(i,o,D){return{range:{start:i,end:i},newText:o,annotationId:D}}e.insert=n;function r(i,o){return{range:i,newText:"",annotationId:o}}e.del=r;function u(i){var o=i;return gt.is(o)&&(St.is(o.annotationId)||Ue.is(o.annotationId))}e.is=u})(Ft||(Ft={}));var un;(function(e){function t(r,u){return{textDocument:r,edits:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&on.is(u.textDocument)&&Array.isArray(u.edits)}e.is=n})(un||(un={}));var Ht;(function(e){function t(r,u,i){var o={kind:"create",uri:r};return u!==void 0&&(u.overwrite!==void 0||u.ignoreIfExists!==void 0)&&(o.options=u),i!==void 0&&(o.annotationId=i),o}e.create=t;function n(r){var u=r;return u&&u.kind==="create"&&_.string(u.uri)&&(u.options===void 0||(u.options.overwrite===void 0||_.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||_.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(Ht||(Ht={}));var zt;(function(e){function t(r,u,i,o){var D={kind:"rename",oldUri:r,newUri:u};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(D.options=i),o!==void 0&&(D.annotationId=o),D}e.create=t;function n(r){var u=r;return u&&u.kind==="rename"&&_.string(u.oldUri)&&_.string(u.newUri)&&(u.options===void 0||(u.options.overwrite===void 0||_.boolean(u.options.overwrite))&&(u.options.ignoreIfExists===void 0||_.boolean(u.options.ignoreIfExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(zt||(zt={}));var Ut;(function(e){function t(r,u,i){var o={kind:"delete",uri:r};return u!==void 0&&(u.recursive!==void 0||u.ignoreIfNotExists!==void 0)&&(o.options=u),i!==void 0&&(o.annotationId=i),o}e.create=t;function n(r){var u=r;return u&&u.kind==="delete"&&_.string(u.uri)&&(u.options===void 0||(u.options.recursive===void 0||_.boolean(u.options.recursive))&&(u.options.ignoreIfNotExists===void 0||_.boolean(u.options.ignoreIfNotExists)))&&(u.annotationId===void 0||Ue.is(u.annotationId))}e.is=n})(Ut||(Ut={}));var qn;(function(e){function t(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(u){return _.string(u.kind)?Ht.is(u)||zt.is(u)||Ut.is(u):un.is(u)}))}e.is=t})(qn||(qn={}));var Rn=function(){function e(t,n){this.edits=t,this.changeAnnotations=n}return e.prototype.insert=function(t,n,r){var u,i;if(r===void 0?u=gt.insert(t,n):Ue.is(r)?(i=r,u=Ft.insert(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),u=Ft.insert(t,n,i)),this.edits.push(u),i!==void 0)return i},e.prototype.replace=function(t,n,r){var u,i;if(r===void 0?u=gt.replace(t,n):Ue.is(r)?(i=r,u=Ft.replace(t,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(r),u=Ft.replace(t,n,i)),this.edits.push(u),i!==void 0)return i},e.prototype.delete=function(t,n){var r,u;if(n===void 0?r=gt.del(t):Ue.is(n)?(u=n,r=Ft.del(t,n)):(this.assertChangeAnnotations(this.changeAnnotations),u=this.changeAnnotations.manage(n),r=Ft.del(t,u)),this.edits.push(r),u!==void 0)return u},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),zu=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,n){var r;if(Ue.is(t)?r=t:(r=this.nextId(),n=t),this._annotations[r]!==void 0)throw new Error("Id ".concat(r," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(r));return this._annotations[r]=n,this._size++,r},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),la=function(){function e(t){var n=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new zu(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(r){if(un.is(r)){var u=new Rn(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=u}})):t.changes&&Object.keys(t.changes).forEach(function(r){var u=new Rn(t.changes[r]);n._textEditChanges[r]=u})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(on.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:t.uri,version:t.version},r=this._textEditChanges[n.uri];if(!r){var u=[],i={textDocument:n,edits:u};this._workspaceEdit.documentChanges.push(i),r=new Rn(u,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[t];if(!r){var u=[];this._workspaceEdit.changes[t]=u,r=new Rn(u),this._textEditChanges[t]=r}return r}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new zu,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;St.is(n)||Ue.is(n)?u=n:r=n;var i,o;if(u===void 0?i=Ht.create(t,r):(o=Ue.is(u)?u:this._changeAnnotations.manage(u),i=Ht.create(t,r,o)),this._workspaceEdit.documentChanges.push(i),o!==void 0)return o},e.prototype.renameFile=function(t,n,r,u){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;St.is(r)||Ue.is(r)?i=r:u=r;var o,D;if(i===void 0?o=zt.create(t,n,u):(D=Ue.is(i)?i:this._changeAnnotations.manage(i),o=zt.create(t,n,u,D)),this._workspaceEdit.documentChanges.push(o),D!==void 0)return D},e.prototype.deleteFile=function(t,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var u;St.is(n)||Ue.is(n)?u=n:r=n;var i,o;if(u===void 0?i=Ut.create(t,r):(o=Ue.is(u)?u:this._changeAnnotations.manage(u),i=Ut.create(t,r,o)),this._workspaceEdit.documentChanges.push(i),o!==void 0)return o},e}(),ir;(function(e){function t(r){return{uri:r}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)}e.is=n})(ir||(ir={}));var or;(function(e){function t(r,u){return{uri:r,version:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&_.integer(u.version)}e.is=n})(or||(or={}));var on;(function(e){function t(r,u){return{uri:r,version:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&(u.version===null||_.integer(u.version))}e.is=n})(on||(on={}));var sr;(function(e){function t(r,u,i,o){return{uri:r,languageId:u,version:i,text:o}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.string(u.uri)&&_.string(u.languageId)&&_.integer(u.version)&&_.string(u.text)}e.is=n})(sr||(sr={}));var Nn;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(n){var r=n;return r===e.PlainText||r===e.Markdown}e.is=t})(Nn||(Nn={}));var Vt;(function(e){function t(n){var r=n;return _.objectLiteral(n)&&Nn.is(r.kind)&&_.string(r.value)}e.is=t})(Vt||(Vt={}));var ar;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(ar||(ar={}));var Dr;(function(e){e.PlainText=1,e.Snippet=2})(Dr||(Dr={}));var cr;(function(e){e.Deprecated=1})(cr||(cr={}));var lr;(function(e){function t(r,u,i){return{newText:r,insert:u,replace:i}}e.create=t;function n(r){var u=r;return u&&_.string(u.newText)&&Pe.is(u.insert)&&Pe.is(u.replace)}e.is=n})(lr||(lr={}));var fr;(function(e){e.asIs=1,e.adjustIndentation=2})(fr||(fr={}));var dr;(function(e){function t(n){var r=n;return r&&(_.string(r.detail)||r.detail===void 0)&&(_.string(r.description)||r.description===void 0)}e.is=t})(dr||(dr={}));var gr;(function(e){function t(n){return{label:n}}e.create=t})(gr||(gr={}));var hr;(function(e){function t(n,r){return{items:n||[],isIncomplete:!!r}}e.create=t})(hr||(hr={}));var sn;(function(e){function t(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function n(r){var u=r;return _.string(u)||_.objectLiteral(u)&&_.string(u.language)&&_.string(u.value)}e.is=n})(sn||(sn={}));var pr;(function(e){function t(n){var r=n;return!!r&&_.objectLiteral(r)&&(Vt.is(r.contents)||sn.is(r.contents)||_.typedArray(r.contents,sn.is))&&(n.range===void 0||Pe.is(n.range))}e.is=t})(pr||(pr={}));var Fr;(function(e){function t(n,r){return r?{label:n,documentation:r}:{label:n}}e.create=t})(Fr||(Fr={}));var Cr;(function(e){function t(n,r){for(var u=[],i=2;i<arguments.length;i++)u[i-2]=arguments[i];var o={label:n};return _.defined(r)&&(o.documentation=r),_.defined(u)?o.parameters=u:o.parameters=[],o}e.create=t})(Cr||(Cr={}));var mr;(function(e){e.Text=1,e.Read=2,e.Write=3})(mr||(mr={}));var yr;(function(e){function t(n,r){var u={range:n};return _.number(r)&&(u.kind=r),u}e.create=t})(yr||(yr={}));var Er;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Er||(Er={}));var br;(function(e){e.Deprecated=1})(br||(br={}));var _r;(function(e){function t(n,r,u,i,o){var D={name:n,kind:r,location:{uri:i,range:u}};return o&&(D.containerName=o),D}e.create=t})(_r||(_r={}));var vr;(function(e){function t(n,r,u,i){return i!==void 0?{name:n,kind:r,location:{uri:u,range:i}}:{name:n,kind:r,location:{uri:u}}}e.create=t})(vr||(vr={}));var kr;(function(e){function t(r,u,i,o,D,c){var d={name:r,detail:u,kind:i,range:o,selectionRange:D};return c!==void 0&&(d.children=c),d}e.create=t;function n(r){var u=r;return u&&_.string(u.name)&&_.number(u.kind)&&Pe.is(u.range)&&Pe.is(u.selectionRange)&&(u.detail===void 0||_.string(u.detail))&&(u.deprecated===void 0||_.boolean(u.deprecated))&&(u.children===void 0||Array.isArray(u.children))&&(u.tags===void 0||Array.isArray(u.tags))}e.is=n})(kr||(kr={}));var Rr;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(Rr||(Rr={}));var an;(function(e){e.Invoked=1,e.Automatic=2})(an||(an={}));var wr;(function(e){function t(r,u,i){var o={diagnostics:r};return u!=null&&(o.only=u),i!=null&&(o.triggerKind=i),o}e.create=t;function n(r){var u=r;return _.defined(u)&&_.typedArray(u.diagnostics,rn.is)&&(u.only===void 0||_.typedArray(u.only,_.string))&&(u.triggerKind===void 0||u.triggerKind===an.Invoked||u.triggerKind===an.Automatic)}e.is=n})(wr||(wr={}));var Br;(function(e){function t(r,u,i){var o={title:r},D=!0;return typeof u=="string"?(D=!1,o.kind=u):At.is(u)?o.command=u:o.edit=u,D&&i!==void 0&&(o.kind=i),o}e.create=t;function n(r){var u=r;return u&&_.string(u.title)&&(u.diagnostics===void 0||_.typedArray(u.diagnostics,rn.is))&&(u.kind===void 0||_.string(u.kind))&&(u.edit!==void 0||u.command!==void 0)&&(u.command===void 0||At.is(u.command))&&(u.isPreferred===void 0||_.boolean(u.isPreferred))&&(u.edit===void 0||qn.is(u.edit))}e.is=n})(Br||(Br={}));var Sr;(function(e){function t(r,u){var i={range:r};return _.defined(u)&&(i.data=u),i}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(u.range)&&(_.undefined(u.command)||At.is(u.command))}e.is=n})(Sr||(Sr={}));var Tr;(function(e){function t(r,u){return{tabSize:r,insertSpaces:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&_.uinteger(u.tabSize)&&_.boolean(u.insertSpaces)}e.is=n})(Tr||(Tr={}));var Ar;(function(e){function t(r,u,i){return{range:r,target:u,data:i}}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(u.range)&&(_.undefined(u.target)||_.string(u.target))}e.is=n})(Ar||(Ar={}));var Pr;(function(e){function t(r,u){return{range:r,parent:u}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&Pe.is(u.range)&&(u.parent===void 0||e.is(u.parent))}e.is=n})(Pr||(Pr={}));var Or;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(Or||(Or={}));var qr;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(qr||(qr={}));var Nr;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}e.is=t})(Nr||(Nr={}));var jr;(function(e){function t(r,u){return{range:r,text:u}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&_.string(u.text)}e.is=n})(jr||(jr={}));var $r;(function(e){function t(r,u,i){return{range:r,variableName:u,caseSensitiveLookup:i}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&_.boolean(u.caseSensitiveLookup)&&(_.string(u.variableName)||u.variableName===void 0)}e.is=n})($r||($r={}));var Mr;(function(e){function t(r,u){return{range:r,expression:u}}e.create=t;function n(r){var u=r;return u!=null&&Pe.is(u.range)&&(_.string(u.expression)||u.expression===void 0)}e.is=n})(Mr||(Mr={}));var Lr;(function(e){function t(r,u){return{frameId:r,stoppedLocation:u}}e.create=t;function n(r){var u=r;return _.defined(u)&&Pe.is(r.stoppedLocation)}e.is=n})(Lr||(Lr={}));var jn;(function(e){e.Type=1,e.Parameter=2;function t(n){return n===1||n===2}e.is=t})(jn||(jn={}));var $n;(function(e){function t(r){return{value:r}}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&(u.tooltip===void 0||_.string(u.tooltip)||Vt.is(u.tooltip))&&(u.location===void 0||nn.is(u.location))&&(u.command===void 0||At.is(u.command))}e.is=n})($n||($n={}));var Ir;(function(e){function t(r,u,i){var o={position:r,label:u};return i!==void 0&&(o.kind=i),o}e.create=t;function n(r){var u=r;return _.objectLiteral(u)&&st.is(u.position)&&(_.string(u.label)||_.typedArray(u.label,$n.is))&&(u.kind===void 0||jn.is(u.kind))&&u.textEdits===void 0||_.typedArray(u.textEdits,gt.is)&&(u.tooltip===void 0||_.string(u.tooltip)||Vt.is(u.tooltip))&&(u.paddingLeft===void 0||_.boolean(u.paddingLeft))&&(u.paddingRight===void 0||_.boolean(u.paddingRight))}e.is=n})(Ir||(Ir={}));var Wr;(function(e){function t(n){var r=n;return _.objectLiteral(r)&&An.is(r.uri)&&_.string(r.name)}e.is=t})(Wr||(Wr={}));var fa=[`
`,`\r
`,"\r"],Hr;(function(e){function t(i,o,D,c){return new da(i,o,D,c)}e.create=t;function n(i){var o=i;return!!(_.defined(o)&&_.string(o.uri)&&(_.undefined(o.languageId)||_.string(o.languageId))&&_.uinteger(o.lineCount)&&_.func(o.getText)&&_.func(o.positionAt)&&_.func(o.offsetAt))}e.is=n;function r(i,o){for(var D=i.getText(),c=u(o,function($,ue){var ie=$.range.start.line-ue.range.start.line;return ie===0?$.range.start.character-ue.range.start.character:ie}),d=D.length,m=c.length-1;m>=0;m--){var T=c[m],B=i.offsetAt(T.range.start),b=i.offsetAt(T.range.end);if(b<=d)D=D.substring(0,B)+T.newText+D.substring(b,D.length);else throw new Error("Overlapping edit");d=B}return D}e.applyEdits=r;function u(i,o){if(i.length<=1)return i;var D=i.length/2|0,c=i.slice(0,D),d=i.slice(D);u(c,o),u(d,o);for(var m=0,T=0,B=0;m<c.length&&T<d.length;){var b=o(c[m],d[T]);b<=0?i[B++]=c[m++]:i[B++]=d[T++]}for(;m<c.length;)i[B++]=c[m++];for(;T<d.length;)i[B++]=d[T++];return i}})(Hr||(Hr={}));var da=function(){function e(t,n,r,u){this._uri=t,this._languageId=n,this._version=r,this._content=u,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var n=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(n,r)}return this._content},e.prototype.update=function(t,n){this._content=t.text,this._version=n,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],n=this._content,r=!0,u=0;u<n.length;u++){r&&(t.push(u),r=!1);var i=n.charAt(u);r=i==="\r"||i===`
`,i==="\r"&&u+1<n.length&&n.charAt(u+1)===`
`&&u++}r&&n.length>0&&t.push(n.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var n=this.getLineOffsets(),r=0,u=n.length;if(u===0)return st.create(0,t);for(;r<u;){var i=Math.floor((r+u)/2);n[i]>t?u=i:r=i+1}var o=r-1;return st.create(o,t-n[o])},e.prototype.offsetAt=function(t){var n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;var r=n[t.line],u=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,u),r)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),_;(function(e){var t=Object.prototype.toString;function n(b){return typeof b<"u"}e.defined=n;function r(b){return typeof b>"u"}e.undefined=r;function u(b){return b===!0||b===!1}e.boolean=u;function i(b){return t.call(b)==="[object String]"}e.string=i;function o(b){return t.call(b)==="[object Number]"}e.number=o;function D(b,$,ue){return t.call(b)==="[object Number]"&&$<=b&&b<=ue}e.numberRange=D;function c(b){return t.call(b)==="[object Number]"&&-2147483648<=b&&b<=2147483647}e.integer=c;function d(b){return t.call(b)==="[object Number]"&&0<=b&&b<=2147483647}e.uinteger=d;function m(b){return t.call(b)==="[object Function]"}e.func=m;function T(b){return b!==null&&typeof b=="object"}e.objectLiteral=T;function B(b,$){return Array.isArray(b)&&b.every($)}e.typedArray=B})(_||(_={}));const ga=Object.freeze(Object.defineProperty({__proto__:null,get AnnotatedTextEdit(){return Ft},get ChangeAnnotation(){return St},get ChangeAnnotationIdentifier(){return Ue},get CodeAction(){return Br},get CodeActionContext(){return wr},get CodeActionKind(){return Rr},get CodeActionTriggerKind(){return an},get CodeDescription(){return ur},get CodeLens(){return Sr},get Color(){return Pn},get ColorInformation(){return Kn},get ColorPresentation(){return xn},get Command(){return At},get CompletionItem(){return gr},get CompletionItemKind(){return ar},get CompletionItemLabelDetails(){return dr},get CompletionItemTag(){return cr},get CompletionList(){return hr},get CreateFile(){return Ht},get DeleteFile(){return Ut},get Diagnostic(){return rn},get DiagnosticRelatedInformation(){return On},get DiagnosticSeverity(){return nr},get DiagnosticTag(){return rr},get DocumentHighlight(){return yr},get DocumentHighlightKind(){return mr},get DocumentLink(){return Ar},get DocumentSymbol(){return kr},get DocumentUri(){return Xn},EOL:fa,get FoldingRange(){return tr},get FoldingRangeKind(){return er},get FormattingOptions(){return Tr},get Hover(){return pr},get InlayHint(){return Ir},get InlayHintKind(){return jn},get InlayHintLabelPart(){return $n},get InlineValueContext(){return Lr},get InlineValueEvaluatableExpression(){return Mr},get InlineValueText(){return jr},get InlineValueVariableLookup(){return $r},get InsertReplaceEdit(){return lr},get InsertTextFormat(){return Dr},get InsertTextMode(){return fr},get Location(){return nn},get LocationLink(){return Yn},get MarkedString(){return sn},get MarkupContent(){return Vt},get MarkupKind(){return Nn},get OptionalVersionedTextDocumentIdentifier(){return on},get ParameterInformation(){return Fr},get Position(){return st},get Range(){return Pe},get RenameFile(){return zt},get SelectionRange(){return Pr},get SemanticTokenModifiers(){return qr},get SemanticTokenTypes(){return Or},get SemanticTokens(){return Nr},get SignatureInformation(){return Cr},get SymbolInformation(){return _r},get SymbolKind(){return Er},get SymbolTag(){return br},get TextDocument(){return Hr},get TextDocumentEdit(){return un},get TextDocumentIdentifier(){return ir},get TextDocumentItem(){return sr},get TextEdit(){return gt},get URI(){return An},get VersionedTextDocumentIdentifier(){return or},WorkspaceChange:la,get WorkspaceEdit(){return qn},get WorkspaceFolder(){return Wr},get WorkspaceSymbol(){return vr},get integer(){return Qn},get uinteger(){return tn}},Symbol.toStringTag,{value:"Module"})),su=X(ga);var au={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=Jt;(function(D){D.clientToServer="clientToServer",D.serverToClient="serverToClient",D.both="both"})(e.MessageDirection||(e.MessageDirection={}));class n{constructor(c){this.method=c}}e.RegistrationType=n;class r extends t.RequestType0{constructor(c){super(c)}}e.ProtocolRequestType0=r;class u extends t.RequestType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolRequestType=u;class i extends t.NotificationType0{constructor(c){super(c)}}e.ProtocolNotificationType0=i;class o extends t.NotificationType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolNotificationType=o})(au);const ha=ce(au),pa=Q({__proto__:null,default:ha},[au]),Oe=X(pa);var Du={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});var bi=Ne.objectLiteral=Pi=Ne.typedArray=Ai=Ne.stringArray=Ti=Ne.array=Bi=Ne.func=wi=Ne.error=Ri=Ne.number=ki=Ne.string=_i=Ne.boolean=void 0;function Fa(e){return e===!0||e===!1}var _i=Ne.boolean=Fa;function vi(e){return typeof e=="string"||e instanceof String}var ki=Ne.string=vi;function Ca(e){return typeof e=="number"||e instanceof Number}var Ri=Ne.number=Ca;function ma(e){return e instanceof Error}var wi=Ne.error=ma;function ya(e){return typeof e=="function"}var Bi=Ne.func=ya;function Si(e){return Array.isArray(e)}var Ti=Ne.array=Si;function Ea(e){return Si(e)&&e.every(t=>vi(t))}var Ai=Ne.stringArray=Ea;function ba(e,t){return Array.isArray(e)&&e.every(t)}var Pi=Ne.typedArray=ba;function _a(e){return e!==null&&typeof e=="object"}bi=Ne.objectLiteral=_a;const va=Q({__proto__:null,get array(){return Ti},get boolean(){return _i},default:Ne,get error(){return wi},get func(){return Bi},get number(){return Ri},get objectLiteral(){return bi},get string(){return ki},get stringArray(){return Ai},get typedArray(){return Pi}},[Ne]),cu=X(va);var lu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=Oe;(function(n){n.method="textDocument/implementation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.ImplementationRequest||(e.ImplementationRequest={}))})(lu);const ka=ce(lu),Ra=Q({__proto__:null,default:ka},[lu]),wa=X(Ra);var fu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=Oe;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeDefinitionRequest||(e.TypeDefinitionRequest={}))})(fu);const Ba=ce(fu),Sa=Q({__proto__:null,default:Ba},[fu]),Ta=X(Sa);var du={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=Oe;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})),function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={}))})(du);const Aa=ce(du),Pa=Q({__proto__:null,default:Aa},[du]),Oa=X(Pa);var gu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=Oe;(function(n){n.method="workspace/configuration",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ConfigurationRequest||(e.ConfigurationRequest={}))})(gu);const qa=ce(gu),Na=Q({__proto__:null,default:qa},[gu]),ja=X(Na);var hu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=Oe;(function(n){n.method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DocumentColorRequest||(e.DocumentColorRequest={})),function(n){n.method="textDocument/colorPresentation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.ColorPresentationRequest||(e.ColorPresentationRequest={}))})(hu);const $a=ce(hu),Ma=Q({__proto__:null,default:$a},[hu]),La=X(Ma);var pu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=void 0;const t=Oe;(function(n){n.method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.FoldingRangeRequest||(e.FoldingRangeRequest={}))})(pu);const Ia=ce(pu),Wa=Q({__proto__:null,default:Ia},[pu]),Ha=X(Wa);var Fu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=Oe;(function(n){n.method="textDocument/declaration",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DeclarationRequest||(e.DeclarationRequest={}))})(Fu);const za=ce(Fu),Ua=Q({__proto__:null,default:za},[Fu]),Va=X(Ua);var Cu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=Oe;(function(n){n.method="textDocument/selectionRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.SelectionRangeRequest||(e.SelectionRangeRequest={}))})(Cu);const Ja=ce(Cu),Ga=Q({__proto__:null,default:Ja},[Cu]),Za=X(Ga);var mu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=Jt,n=Oe;(function(r){r.type=new t.ProgressType;function u(i){return i===r.type}r.is=u})(e.WorkDoneProgress||(e.WorkDoneProgress={})),function(r){r.method="window/workDoneProgress/create",r.messageDirection=n.MessageDirection.serverToClient,r.type=new n.ProtocolRequestType(r.method)}(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})),function(r){r.method="window/workDoneProgress/cancel",r.messageDirection=n.MessageDirection.clientToServer,r.type=new n.ProtocolNotificationType(r.method)}(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={}))})(mu);const Xa=ce(mu),Qa=Q({__proto__:null,default:Xa},[mu]),Ya=X(Qa);var yu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=Oe;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={}))})(yu);const Ka=ce(yu),xa=Q({__proto__:null,default:Ka},[yu]),eD=X(xa);var Eu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=Oe;(function(r){r.Relative="relative"})(e.TokenFormat||(e.TokenFormat={}));var n;(function(r){r.method="textDocument/semanticTokens",r.type=new t.RegistrationType(r.method)})(n=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})),function(r){r.method="textDocument/semanticTokens/full",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(r){r.method="textDocument/semanticTokens/full/delta",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})),function(r){r.method="textDocument/semanticTokens/range",r.messageDirection=t.MessageDirection.clientToServer,r.type=new t.ProtocolRequestType(r.method),r.registrationMethod=n.method}(e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})),function(r){r.method="workspace/semanticTokens/refresh",r.messageDirection=t.MessageDirection.serverToClient,r.type=new t.ProtocolRequestType0(r.method)}(e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={}))})(Eu);const tD=ce(Eu),nD=Q({__proto__:null,default:tD},[Eu]),rD=X(nD);var bu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=Oe;(function(n){n.method="window/showDocument",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ShowDocumentRequest||(e.ShowDocumentRequest={}))})(bu);const uD=ce(bu),iD=Q({__proto__:null,default:uD},[bu]),oD=X(iD);var _u={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=Oe;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={}))})(_u);const sD=ce(_u),aD=Q({__proto__:null,default:sD},[_u]),DD=X(aD);var vu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=Oe;(function(n){n.file="file",n.folder="folder"})(e.FileOperationPatternKind||(e.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={}))})(vu);const cD=ce(vu),lD=Q({__proto__:null,default:cD},[vu]),fD=X(lD);var ku={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=Oe;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(e.UniquenessLevel||(e.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(e.MonikerKind||(e.MonikerKind={})),function(n){n.method="textDocument/moniker",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.MonikerRequest||(e.MonikerRequest={}))})(ku);const dD=ce(ku),gD=Q({__proto__:null,default:dD},[ku]),hD=X(gD);var Ru={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=Oe;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeHierarchyPrepareRequest||(e.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySupertypesRequest||(e.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySubtypesRequest||(e.TypeHierarchySubtypesRequest={}))})(Ru);const pD=ce(Ru),FD=Q({__proto__:null,default:pD},[Ru]),CD=X(FD);var wu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=Oe;(function(n){n.method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlineValueRequest||(e.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlineValueRefreshRequest||(e.InlineValueRefreshRequest={}))})(wu);const mD=ce(wu),yD=Q({__proto__:null,default:mD},[wu]),ED=X(yD);var Bu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=Oe;(function(n){n.method="textDocument/inlayHint",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlayHintRequest||(e.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.InlayHintResolveRequest||(e.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlayHintRefreshRequest||(e.InlayHintRefreshRequest={}))})(Bu);const bD=ce(Bu),_D=Q({__proto__:null,default:bD},[Bu]),vD=X(_D);var Su={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=Jt,n=cu,r=Oe;(function(u){function i(o){const D=o;return D&&n.boolean(D.retriggerRequest)}u.is=i})(e.DiagnosticServerCancellationData||(e.DiagnosticServerCancellationData={})),function(u){u.Full="full",u.Unchanged="unchanged"}(e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={})),function(u){u.method="textDocument/diagnostic",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType}(e.DocumentDiagnosticRequest||(e.DocumentDiagnosticRequest={})),function(u){u.method="workspace/diagnostic",u.messageDirection=r.MessageDirection.clientToServer,u.type=new r.ProtocolRequestType(u.method),u.partialResult=new t.ProgressType}(e.WorkspaceDiagnosticRequest||(e.WorkspaceDiagnosticRequest={})),function(u){u.method="workspace/diagnostic/refresh",u.messageDirection=r.MessageDirection.serverToClient,u.type=new r.ProtocolRequestType0(u.method)}(e.DiagnosticRefreshRequest||(e.DiagnosticRefreshRequest={}))})(Su);const kD=ce(Su),RD=Q({__proto__:null,default:kD},[Su]),wD=X(RD);var Tu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=su,n=cu,r=Oe;var u;(function(c){c.Markup=1,c.Code=2;function d(m){return m===1||m===2}c.is=d})(u=e.NotebookCellKind||(e.NotebookCellKind={}));var i;(function(c){function d(B,b){const $={executionOrder:B};return(b===!0||b===!1)&&($.success=b),$}c.create=d;function m(B){const b=B;return n.objectLiteral(b)&&t.uinteger.is(b.executionOrder)&&(b.success===void 0||n.boolean(b.success))}c.is=m;function T(B,b){return B===b?!0:B==null||b===null||b===void 0?!1:B.executionOrder===b.executionOrder&&B.success===b.success}c.equals=T})(i=e.ExecutionSummary||(e.ExecutionSummary={}));var o;(function(c){function d(b,$){return{kind:b,document:$}}c.create=d;function m(b){const $=b;return n.objectLiteral($)&&u.is($.kind)&&t.DocumentUri.is($.document)&&($.metadata===void 0||n.objectLiteral($.metadata))}c.is=m;function T(b,$){const ue=new Set;return b.document!==$.document&&ue.add("document"),b.kind!==$.kind&&ue.add("kind"),b.executionSummary!==$.executionSummary&&ue.add("executionSummary"),(b.metadata!==void 0||$.metadata!==void 0)&&!B(b.metadata,$.metadata)&&ue.add("metadata"),(b.executionSummary!==void 0||$.executionSummary!==void 0)&&!i.equals(b.executionSummary,$.executionSummary)&&ue.add("executionSummary"),ue}c.diff=T;function B(b,$){if(b===$)return!0;if(b==null||$===null||$===void 0||typeof b!=typeof $||typeof b!="object")return!1;const ue=Array.isArray(b),ie=Array.isArray($);if(ue!==ie)return!1;if(ue&&ie){if(b.length!==$.length)return!1;for(let Y=0;Y<b.length;Y++)if(!B(b[Y],$[Y]))return!1}if(n.objectLiteral(b)&&n.objectLiteral($)){const Y=Object.keys(b),fe=Object.keys($);if(Y.length!==fe.length||(Y.sort(),fe.sort(),!B(Y,fe)))return!1;for(let ee=0;ee<Y.length;ee++){const ye=Y[ee];if(!B(b[ye],$[ye]))return!1}}return!0}})(o=e.NotebookCell||(e.NotebookCell={})),function(c){function d(T,B,b,$){return{uri:T,notebookType:B,version:b,cells:$}}c.create=d;function m(T){const B=T;return n.objectLiteral(B)&&n.string(B.uri)&&t.integer.is(B.version)&&n.typedArray(B.cells,o.is)}c.is=m}(e.NotebookDocument||(e.NotebookDocument={}));var D;(function(c){c.method="notebookDocument/sync",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.RegistrationType(c.method)})(D=e.NotebookDocumentSyncRegistrationType||(e.NotebookDocumentSyncRegistrationType={})),function(c){c.method="notebookDocument/didOpen",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=D.method}(e.DidOpenNotebookDocumentNotification||(e.DidOpenNotebookDocumentNotification={})),function(c){function d(T){const B=T;return n.objectLiteral(B)&&t.uinteger.is(B.start)&&t.uinteger.is(B.deleteCount)&&(B.cells===void 0||n.typedArray(B.cells,o.is))}c.is=d;function m(T,B,b){const $={start:T,deleteCount:B};return b!==void 0&&($.cells=b),$}c.create=m}(e.NotebookCellArrayChange||(e.NotebookCellArrayChange={})),function(c){c.method="notebookDocument/didChange",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=D.method}(e.DidChangeNotebookDocumentNotification||(e.DidChangeNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didSave",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=D.method}(e.DidSaveNotebookDocumentNotification||(e.DidSaveNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didClose",c.messageDirection=r.MessageDirection.clientToServer,c.type=new r.ProtocolNotificationType(c.method),c.registrationMethod=D.method}(e.DidCloseNotebookDocumentNotification||(e.DidCloseNotebookDocumentNotification={}))})(Tu);const BD=ce(Tu),SD=Q({__proto__:null,default:BD},[Tu]),TD=X(SD);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=void 0;const t=Oe,n=su,r=cu,u=wa;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return u.ImplementationRequest}});const i=Ta;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return i.TypeDefinitionRequest}});const o=Oa;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return o.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return o.DidChangeWorkspaceFoldersNotification}});const D=ja;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return D.ConfigurationRequest}});const c=La;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const d=Ha;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return d.FoldingRangeRequest}});const m=Va;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return m.DeclarationRequest}});const T=Za;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return T.SelectionRangeRequest}});const B=Ya;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return B.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return B.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return B.WorkDoneProgressCancelNotification}});const b=eD;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return b.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return b.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return b.CallHierarchyPrepareRequest}});const $=rD;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return $.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return $.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return $.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return $.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return $.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return $.SemanticTokensRegistrationType}});const ue=oD;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return ue.ShowDocumentRequest}});const ie=DD;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return ie.LinkedEditingRangeRequest}});const Y=fD;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return Y.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Y.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Y.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Y.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Y.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Y.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Y.WillDeleteFilesRequest}});const fe=hD;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return fe.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return fe.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return fe.MonikerRequest}});const ee=CD;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return ee.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return ee.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return ee.TypeHierarchySupertypesRequest}});const ye=ED;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return ye.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return ye.InlineValueRefreshRequest}});const He=vD;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return He.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return He.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return He.InlayHintRefreshRequest}});const $e=wD;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return $e.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return $e.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return $e.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return $e.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return $e.DiagnosticRefreshRequest}});const Re=TD;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return Re.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return Re.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return Re.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return Re.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return Re.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return Re.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return Re.DidCloseNotebookDocumentNotification}});var Ve;(function(s){function A(L){const J=L;return r.string(J.language)||r.string(J.scheme)||r.string(J.pattern)}s.is=A})(Ve=e.TextDocumentFilter||(e.TextDocumentFilter={}));var we;(function(s){function A(L){const J=L;return r.objectLiteral(J)&&(r.string(J.notebookType)||r.string(J.scheme)||r.string(J.pattern))}s.is=A})(we=e.NotebookDocumentFilter||(e.NotebookDocumentFilter={}));var ut;(function(s){function A(L){const J=L;return r.objectLiteral(J)&&(r.string(J.notebook)||we.is(J.notebook))&&(J.language===void 0||r.string(J.language))}s.is=A})(ut=e.NotebookCellTextDocumentFilter||(e.NotebookCellTextDocumentFilter={}));var M;(function(s){function A(L){if(!Array.isArray(L))return!1;for(let J of L)if(!r.string(J)&&!Ve.is(J)&&!ut.is(J))return!1;return!0}s.is=A})(M=e.DocumentSelector||(e.DocumentSelector={})),function(s){s.method="client/registerCapability",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.RegistrationRequest||(e.RegistrationRequest={})),function(s){s.method="client/unregisterCapability",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.UnregistrationRequest||(e.UnregistrationRequest={})),function(s){s.Create="create",s.Rename="rename",s.Delete="delete"}(e.ResourceOperationKind||(e.ResourceOperationKind={})),function(s){s.Abort="abort",s.Transactional="transactional",s.TextOnlyTransactional="textOnlyTransactional",s.Undo="undo"}(e.FailureHandlingKind||(e.FailureHandlingKind={})),function(s){s.UTF8="utf-8",s.UTF16="utf-16",s.UTF32="utf-32"}(e.PositionEncodingKind||(e.PositionEncodingKind={})),function(s){function A(L){const J=L;return J&&r.string(J.id)&&J.id.length>0}s.hasId=A}(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})),function(s){function A(L){const J=L;return J&&(J.documentSelector===null||M.is(J.documentSelector))}s.is=A}(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})),function(s){function A(J){const le=J;return r.objectLiteral(le)&&(le.workDoneProgress===void 0||r.boolean(le.workDoneProgress))}s.is=A;function L(J){const le=J;return le&&r.boolean(le.workDoneProgress)}s.hasWorkDoneProgress=L}(e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})),function(s){s.method="initialize",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.InitializeRequest||(e.InitializeRequest={})),function(s){s.unknownProtocolVersion=1}(e.InitializeErrorCodes||(e.InitializeErrorCodes={})),function(s){s.method="initialized",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.InitializedNotification||(e.InitializedNotification={})),function(s){s.method="shutdown",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType0(s.method)}(e.ShutdownRequest||(e.ShutdownRequest={})),function(s){s.method="exit",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType0(s.method)}(e.ExitNotification||(e.ExitNotification={})),function(s){s.method="workspace/didChangeConfiguration",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})),function(s){s.Error=1,s.Warning=2,s.Info=3,s.Log=4}(e.MessageType||(e.MessageType={})),function(s){s.method="window/showMessage",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.ShowMessageNotification||(e.ShowMessageNotification={})),function(s){s.method="window/showMessageRequest",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType(s.method)}(e.ShowMessageRequest||(e.ShowMessageRequest={})),function(s){s.method="window/logMessage",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.LogMessageNotification||(e.LogMessageNotification={})),function(s){s.method="telemetry/event",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.TelemetryEventNotification||(e.TelemetryEventNotification={})),function(s){s.None=0,s.Full=1,s.Incremental=2}(e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})),function(s){s.method="textDocument/didOpen",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})),function(s){function A(J){let le=J;return le!=null&&typeof le.text=="string"&&le.range!==void 0&&(le.rangeLength===void 0||typeof le.rangeLength=="number")}s.isIncremental=A;function L(J){let le=J;return le!=null&&typeof le.text=="string"&&le.range===void 0&&le.rangeLength===void 0}s.isFull=L}(e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})),function(s){s.method="textDocument/didChange",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})),function(s){s.method="textDocument/didClose",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})),function(s){s.method="textDocument/didSave",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})),function(s){s.Manual=1,s.AfterDelay=2,s.FocusOut=3}(e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})),function(s){s.method="textDocument/willSave",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})),function(s){s.method="textDocument/willSaveWaitUntil",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})),function(s){s.method="workspace/didChangeWatchedFiles",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolNotificationType(s.method)}(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})),function(s){s.Created=1,s.Changed=2,s.Deleted=3}(e.FileChangeType||(e.FileChangeType={})),function(s){function A(L){const J=L;return r.objectLiteral(J)&&(n.URI.is(J.baseUri)||n.WorkspaceFolder.is(J.baseUri))&&r.string(J.pattern)}s.is=A}(e.RelativePattern||(e.RelativePattern={})),function(s){s.Create=1,s.Change=2,s.Delete=4}(e.WatchKind||(e.WatchKind={})),function(s){s.method="textDocument/publishDiagnostics",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolNotificationType(s.method)}(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})),function(s){s.Invoked=1,s.TriggerCharacter=2,s.TriggerForIncompleteCompletions=3}(e.CompletionTriggerKind||(e.CompletionTriggerKind={})),function(s){s.method="textDocument/completion",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CompletionRequest||(e.CompletionRequest={})),function(s){s.method="completionItem/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CompletionResolveRequest||(e.CompletionResolveRequest={})),function(s){s.method="textDocument/hover",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.HoverRequest||(e.HoverRequest={})),function(s){s.Invoked=1,s.TriggerCharacter=2,s.ContentChange=3}(e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})),function(s){s.method="textDocument/signatureHelp",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.SignatureHelpRequest||(e.SignatureHelpRequest={})),function(s){s.method="textDocument/definition",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DefinitionRequest||(e.DefinitionRequest={})),function(s){s.method="textDocument/references",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.ReferencesRequest||(e.ReferencesRequest={})),function(s){s.method="textDocument/documentHighlight",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})),function(s){s.method="textDocument/documentSymbol",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})),function(s){s.method="textDocument/codeAction",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeActionRequest||(e.CodeActionRequest={})),function(s){s.method="codeAction/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})),function(s){s.method="workspace/symbol",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})),function(s){s.method="workspaceSymbol/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.WorkspaceSymbolResolveRequest||(e.WorkspaceSymbolResolveRequest={})),function(s){s.method="textDocument/codeLens",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeLensRequest||(e.CodeLensRequest={})),function(s){s.method="codeLens/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})),function(s){s.method="workspace/codeLens/refresh",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType0(s.method)}(e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})),function(s){s.method="textDocument/documentLink",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentLinkRequest||(e.DocumentLinkRequest={})),function(s){s.method="documentLink/resolve",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})),function(s){s.method="textDocument/formatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})),function(s){s.method="textDocument/rangeFormatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})),function(s){s.method="textDocument/onTypeFormatting",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})),function(s){s.Identifier=1}(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})),function(s){s.method="textDocument/rename",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.RenameRequest||(e.RenameRequest={})),function(s){s.method="textDocument/prepareRename",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.PrepareRenameRequest||(e.PrepareRenameRequest={})),function(s){s.method="workspace/executeCommand",s.messageDirection=t.MessageDirection.clientToServer,s.type=new t.ProtocolRequestType(s.method)}(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})),function(s){s.method="workspace/applyEdit",s.messageDirection=t.MessageDirection.serverToClient,s.type=new t.ProtocolRequestType("workspace/applyEdit")}(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={}))})(Du);const AD=ce(Du),PD=Q({__proto__:null,default:AD},[Du]),OD=X(PD);var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var Oi=Dn.createProtocolConnection=void 0;const Uu=Jt;function qD(e,t,n,r){return Uu.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,Uu.createMessageConnection)(e,t,n,r)}Oi=Dn.createProtocolConnection=qD;const ND=Q({__proto__:null,get createProtocolConnection(){return Oi},default:Dn},[Dn]),jD=X(ND);(function(e){var t=Me&&Me.__createBinding||(Object.create?function(u,i,o,D){D===void 0&&(D=o);var c=Object.getOwnPropertyDescriptor(i,o);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(u,D,c)}:function(u,i,o,D){D===void 0&&(D=o),u[D]=i[o]}),n=Me&&Me.__exportStar||function(u,i){for(var o in u)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,u,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(Jt,e),n(su,e),n(Oe,e),n(OD,e);var r=jD;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return r.createProtocolConnection}}),function(u){u.lspReservedErrorRangeStart=-32899,u.RequestFailed=-32803,u.ServerCancelled=-32802,u.ContentModified=-32801,u.RequestCancelled=-32800,u.lspReservedErrorRangeEnd=-32800}(e.LSPErrorCodes||(e.LSPErrorCodes={}))})(ou);const $D=ce(ou),MD=Q({__proto__:null,default:$D},[ou]),LD=X(MD);(function(e){var t=Me&&Me.__createBinding||(Object.create?function(i,o,D,c){c===void 0&&(c=D);var d=Object.getOwnPropertyDescriptor(o,D);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[D]}}),Object.defineProperty(i,c,d)}:function(i,o,D,c){c===void 0&&(c=D),i[c]=o[D]}),n=Me&&Me.__exportStar||function(i,o){for(var D in i)D!=="default"&&!Object.prototype.hasOwnProperty.call(o,D)&&t(o,i,D)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const r=Hu;n(Hu,e),n(LD,e);function u(i,o,D,c){return(0,r.createMessageConnection)(i,o,D,c)}e.createProtocolConnection=u})(Jr);const ID=ce(Jr),WD=Q({__proto__:null,default:ID},[Jr]),We=X(WD);Object.defineProperty(Ct,"__esModule",{value:!0});var qi=Ct.SemanticTokensBuilder=$i=Ct.SemanticTokensDiff=Ni=Ct.SemanticTokensFeature=void 0;const wn=We,HD=e=>class extends e{get semanticTokens(){return{refresh:()=>this.connection.sendRequest(wn.SemanticTokensRefreshRequest.type),on:t=>{const n=wn.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onDelta:t=>{const n=wn.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onRange:t=>{const n=wn.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};var Ni=Ct.SemanticTokensFeature=HD;class ji{constructor(t,n){this.originalSequence=t,this.modifiedSequence=n}computeDiff(){const t=this.originalSequence.length,n=this.modifiedSequence.length;let r=0;for(;r<n&&r<t&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<t){let u=t-1,i=n-1;for(;u>=r&&i>=r&&this.originalSequence[u]===this.modifiedSequence[i];)u--,i--;(u<r||i<r)&&(u++,i++);const o=u-r+1,D=this.modifiedSequence.slice(r,i+1);return D.length===1&&D[0]===this.originalSequence[u]?[{start:r,deleteCount:o-1}]:[{start:r,deleteCount:o,data:D}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<t?[{start:r,deleteCount:t-r}]:[]}}var $i=Ct.SemanticTokensDiff=ji;class zD{constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(t,n,r,u,i){let o=t,D=n;this._dataLen>0&&(o-=this._prevLine,o===0&&(D-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=D,this._data[this._dataLen++]=r,this._data[this._dataLen++]=u,this._data[this._dataLen++]=i,this._prevLine=t,this._prevChar=n}get id(){return this._id.toString()}previousResult(t){this.id===t&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new ji(this._prevData,this._data).computeDiff()}:this.build()}}qi=Ct.SemanticTokensBuilder=zD;const UD=Q({__proto__:null,get SemanticTokensBuilder(){return qi},get SemanticTokensDiff(){return $i},get SemanticTokensFeature(){return Ni},default:Ct},[Ct]),Mi=X(UD);var cn={};Object.defineProperty(cn,"__esModule",{value:!0});var Li=cn.TextDocuments=void 0;const Bt=We;class VD{constructor(t){this._configuration=t,this._syncedDocuments=new Map,this._onDidChangeContent=new Bt.Emitter,this._onDidOpen=new Bt.Emitter,this._onDidClose=new Bt.Emitter,this._onDidSave=new Bt.Emitter,this._onWillSave=new Bt.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(t){this._willSaveWaitUntil=t}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(t){return this._syncedDocuments.get(t)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(t){t.__textDocumentSync=Bt.TextDocumentSyncKind.Incremental;const n=[];return n.push(t.onDidOpenTextDocument(r=>{const u=r.textDocument,i=this._configuration.create(u.uri,u.languageId,u.version,u.text);this._syncedDocuments.set(u.uri,i);const o=Object.freeze({document:i});this._onDidOpen.fire(o),this._onDidChangeContent.fire(o)})),n.push(t.onDidChangeTextDocument(r=>{const u=r.textDocument,i=r.contentChanges;if(i.length===0)return;const{version:o}=u;if(o==null)throw new Error(`Received document change event for ${u.uri} without valid version identifier`);let D=this._syncedDocuments.get(u.uri);D!==void 0&&(D=this._configuration.update(D,i,o),this._syncedDocuments.set(u.uri,D),this._onDidChangeContent.fire(Object.freeze({document:D})))})),n.push(t.onDidCloseTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:u})))})),n.push(t.onWillSaveTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&this._onWillSave.fire(Object.freeze({document:u,reason:r.reason}))})),n.push(t.onWillSaveTextDocumentWaitUntil((r,u)=>{let i=this._syncedDocuments.get(r.textDocument.uri);return i!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:i,reason:r.reason}),u):[]})),n.push(t.onDidSaveTextDocument(r=>{let u=this._syncedDocuments.get(r.textDocument.uri);u!==void 0&&this._onDidSave.fire(Object.freeze({document:u}))})),Bt.Disposable.create(()=>{n.forEach(r=>r.dispose())})}}Li=cn.TextDocuments=VD;const JD=Q({__proto__:null,get TextDocuments(){return Li},default:cn},[cn]),Ii=X(JD);var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var Wi=Pt.NotebookDocuments=Hi=Pt.NotebookSyncFeature=void 0;const at=We,Vu=Ii,GD=e=>class extends e{get synchronization(){return{onDidOpenNotebookDocument:t=>this.connection.onNotification(at.DidOpenNotebookDocumentNotification.type,n=>{t(n)}),onDidChangeNotebookDocument:t=>this.connection.onNotification(at.DidChangeNotebookDocumentNotification.type,n=>{t(n)}),onDidSaveNotebookDocument:t=>this.connection.onNotification(at.DidSaveNotebookDocumentNotification.type,n=>{t(n)}),onDidCloseNotebookDocument:t=>this.connection.onNotification(at.DidCloseNotebookDocumentNotification.type,n=>{t(n)})}}};var Hi=Pt.NotebookSyncFeature=GD;class It{onDidOpenTextDocument(t){return this.openHandler=t,at.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(t){this.openHandler&&this.openHandler(t)}onDidChangeTextDocument(t){return this.changeHandler=t,at.Disposable.create(()=>{this.changeHandler=t})}changeTextDocument(t){this.changeHandler&&this.changeHandler(t)}onDidCloseTextDocument(t){return this.closeHandler=t,at.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(t){this.closeHandler&&this.closeHandler(t)}onWillSaveTextDocument(){return It.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return It.NULL_DISPOSE}onDidSaveTextDocument(){return It.NULL_DISPOSE}}It.NULL_DISPOSE=Object.freeze({dispose:()=>{}});class ZD{constructor(t){t instanceof Vu.TextDocuments?this._cellTextDocuments=t:this._cellTextDocuments=new Vu.TextDocuments(t),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new at.Emitter,this._onDidChange=new at.Emitter,this._onDidSave=new at.Emitter,this._onDidClose=new at.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(t){return this._cellTextDocuments.get(t.document)}getNotebookDocument(t){return this.notebookDocuments.get(t)}getNotebookCell(t){const n=this.notebookCellMap.get(t);return n&&n[0]}findNotebookDocumentForCell(t){const n=typeof t=="string"?t:t.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(t){const n=new It,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(t.notebooks.synchronization.onDidOpenNotebookDocument(u=>{this.notebookDocuments.set(u.notebookDocument.uri,u.notebookDocument);for(const i of u.cellTextDocuments)n.openTextDocument({textDocument:i});this.updateCellMap(u.notebookDocument),this._onDidOpen.fire(u.notebookDocument)})),r.push(t.notebooks.synchronization.onDidChangeNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);if(i===void 0)return;i.version=u.notebookDocument.version;const o=i.metadata;let D=!1;const c=u.change;c.metadata!==void 0&&(D=!0,i.metadata=c.metadata);const d=[],m=[],T=[],B=[];if(c.cells!==void 0){const Y=c.cells;if(Y.structure!==void 0){const fe=Y.structure.array;if(i.cells.splice(fe.start,fe.deleteCount,...fe.cells!==void 0?fe.cells:[]),Y.structure.didOpen!==void 0)for(const ee of Y.structure.didOpen)n.openTextDocument({textDocument:ee}),d.push(ee.uri);if(Y.structure.didClose)for(const ee of Y.structure.didClose)n.closeTextDocument({textDocument:ee}),m.push(ee.uri)}if(Y.data!==void 0){const fe=new Map(Y.data.map(ee=>[ee.document,ee]));for(let ee=0;ee<=i.cells.length;ee++){const ye=fe.get(i.cells[ee].document);if(ye!==void 0){const He=i.cells.splice(ee,1,ye);if(T.push({old:He[0],new:ye}),fe.delete(ye.document),fe.size===0)break}}}if(Y.textContent!==void 0)for(const fe of Y.textContent)n.changeTextDocument({textDocument:fe.document,contentChanges:fe.changes}),B.push(fe.document.uri)}this.updateCellMap(i);const b={notebookDocument:i};D&&(b.metadata={old:o,new:i.metadata});const $=[];for(const Y of d)$.push(this.getNotebookCell(Y));const ue=[];for(const Y of m)ue.push(this.getNotebookCell(Y));const ie=[];for(const Y of B)ie.push(this.getNotebookCell(Y));($.length>0||ue.length>0||T.length>0||ie.length>0)&&(b.cells={added:$,removed:ue,changed:{data:T,textContent:ie}}),(b.metadata!==void 0||b.cells!==void 0)&&this._onDidChange.fire(b)})),r.push(t.notebooks.synchronization.onDidSaveNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);i!==void 0&&this._onDidSave.fire(i)})),r.push(t.notebooks.synchronization.onDidCloseNotebookDocument(u=>{const i=this.notebookDocuments.get(u.notebookDocument.uri);if(i!==void 0){this._onDidClose.fire(i);for(const o of u.cellTextDocuments)n.closeTextDocument({textDocument:o});this.notebookDocuments.delete(u.notebookDocument.uri);for(const o of i.cells)this.notebookCellMap.delete(o.document)}})),at.Disposable.create(()=>{r.forEach(u=>u.dispose())})}updateCellMap(t){for(const n of t.cells)this.notebookCellMap.set(n.document,[n,t])}}Wi=Pt.NotebookDocuments=ZD;const XD=Q({__proto__:null,get NotebookDocuments(){return Wi},get NotebookSyncFeature(){return Hi},default:Pt},[Pt]),zi=X(XD);var Au={},je={};Object.defineProperty(je,"__esModule",{value:!0});var Ui=je.thenable=to=je.typedArray=eo=je.stringArray=xi=je.array=Yi=je.func=Xi=je.error=Zi=je.number=Gi=je.string=Vi=je.boolean=void 0;function QD(e){return e===!0||e===!1}var Vi=je.boolean=QD;function Ji(e){return typeof e=="string"||e instanceof String}var Gi=je.string=Ji;function YD(e){return typeof e=="number"||e instanceof Number}var Zi=je.number=YD;function KD(e){return e instanceof Error}var Xi=je.error=KD;function Qi(e){return typeof e=="function"}var Yi=je.func=Qi;function Ki(e){return Array.isArray(e)}var xi=je.array=Ki;function xD(e){return Ki(e)&&e.every(t=>Ji(t))}var eo=je.stringArray=xD;function ec(e,t){return Array.isArray(e)&&e.every(t)}var to=je.typedArray=ec;function tc(e){return e&&Qi(e.then)}Ui=je.thenable=tc;const nc=Q({__proto__:null,get array(){return xi},get boolean(){return Vi},default:je,get error(){return Xi},get func(){return Yi},get number(){return Zi},get string(){return Gi},get stringArray(){return eo},get thenable(){return Ui},get typedArray(){return to}},[je]),no=X(nc);var rt={};Object.defineProperty(rt,"__esModule",{value:!0});var ro=rt.generateUuid=Do=rt.parse=ao=rt.isUUID=oo=rt.v4=uo=rt.empty=void 0;class Pu{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}}class De extends Pu{constructor(){super([De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),"-",De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),"-","4",De._randomHex(),De._randomHex(),De._randomHex(),"-",De._oneOf(De._timeHighBits),De._randomHex(),De._randomHex(),De._randomHex(),"-",De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex(),De._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return De._oneOf(De._chars)}}De._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];De._timeHighBits=["8","9","a","b"];var uo=rt.empty=new Pu("00000000-0000-0000-0000-000000000000");function io(){return new De}var oo=rt.v4=io;const rc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function so(e){return rc.test(e)}var ao=rt.isUUID=so;function uc(e){if(!so(e))throw new Error("invalid uuid");return new Pu(e)}var Do=rt.parse=uc;function ic(){return io().asHex()}ro=rt.generateUuid=ic;const oc=Q({__proto__:null,default:rt,get empty(){return uo},get generateUuid(){return ro},get isUUID(){return ao},get parse(){return Do},get v4(){return oo}},[rt]),co=X(oc);var mt={};Object.defineProperty(mt,"__esModule",{value:!0});var lo=mt.attachPartialResult=go=mt.ProgressFeature=fo=mt.attachWorkDone=void 0;const _t=We,sc=co;class vt{constructor(t,n){this._connection=t,this._token=n,vt.Instances.set(this._token,this)}begin(t,n,r,u){let i={kind:"begin",title:t,percentage:n,message:r,cancellable:u};this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,i)}report(t,n){let r={kind:"report"};typeof t=="number"?(r.percentage=t,n!==void 0&&(r.message=n)):r.message=t,this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,r)}done(){vt.Instances.delete(this._token),this._connection.sendProgress(_t.WorkDoneProgress.type,this._token,{kind:"end"})}}vt.Instances=new Map;class Ju extends vt{constructor(t,n){super(t,n),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}}class Ou{constructor(){}begin(){}report(){}done(){}}class Gu extends Ou{constructor(){super(),this._source=new _t.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}}function ac(e,t){if(t===void 0||t.workDoneToken===void 0)return new Ou;const n=t.workDoneToken;return delete t.workDoneToken,new vt(e,n)}var fo=mt.attachWorkDone=ac;const Dc=e=>class extends e{constructor(){super(),this._progressSupported=!1}initialize(t){var n;super.initialize(t),((n=t==null?void 0:t.window)==null?void 0:n.workDoneProgress)===!0&&(this._progressSupported=!0,this.connection.onNotification(_t.WorkDoneProgressCancelNotification.type,r=>{let u=vt.Instances.get(r.token);(u instanceof Ju||u instanceof Gu)&&u.cancel()}))}attachWorkDoneProgress(t){return t===void 0?new Ou:new vt(this.connection,t)}createWorkDoneProgress(){if(this._progressSupported){const t=(0,sc.generateUuid)();return this.connection.sendRequest(_t.WorkDoneProgressCreateRequest.type,{token:t}).then(()=>new Ju(this.connection,t))}else return Promise.resolve(new Gu)}};var go=mt.ProgressFeature=Dc,zr;(function(e){e.type=new _t.ProgressType})(zr||(zr={}));class cc{constructor(t,n){this._connection=t,this._token=n}report(t){this._connection.sendProgress(zr.type,this._token,t)}}function lc(e,t){if(t===void 0||t.partialResultToken===void 0)return;const n=t.partialResultToken;return delete t.partialResultToken,new cc(e,n)}lo=mt.attachPartialResult=lc;const fc=Q({__proto__:null,get ProgressFeature(){return go},get attachPartialResult(){return lo},get attachWorkDone(){return fo},default:mt},[mt]),dc=X(fc);var ln={};Object.defineProperty(ln,"__esModule",{value:!0});var ho=ln.ConfigurationFeature=void 0;const gc=We,hc=no,pc=e=>class extends e{getConfiguration(t){return t?hc.string(t)?this._getConfiguration({section:t}):this._getConfiguration(t):this._getConfiguration({})}_getConfiguration(t){let n={items:Array.isArray(t)?t:[t]};return this.connection.sendRequest(gc.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(t)?r:r[0]:Array.isArray(t)?[]:null)}};ho=ln.ConfigurationFeature=pc;const Fc=Q({__proto__:null,get ConfigurationFeature(){return ho},default:ln},[ln]),Cc=X(Fc);var fn={};Object.defineProperty(fn,"__esModule",{value:!0});var po=fn.WorkspaceFoldersFeature=void 0;const Bn=We,mc=e=>class extends e{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(t){super.initialize(t);let n=t.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new Bn.Emitter,this.connection.onNotification(Bn.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(t){var r,u;super.fillServerCapabilities(t);const n=(u=(r=t.workspace)==null?void 0:r.workspaceFolders)==null?void 0:u.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(Bn.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(Bn.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}};po=fn.WorkspaceFoldersFeature=mc;const yc=Q({__proto__:null,get WorkspaceFoldersFeature(){return po},default:fn},[fn]),Ec=X(yc);var dn={};Object.defineProperty(dn,"__esModule",{value:!0});var Fo=dn.CallHierarchyFeature=void 0;const Hn=We,bc=e=>class extends e{get callHierarchy(){return{onPrepare:t=>this.connection.onRequest(Hn.CallHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onIncomingCalls:t=>{const n=Hn.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onOutgoingCalls:t=>{const n=Hn.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Fo=dn.CallHierarchyFeature=bc;const _c=Q({__proto__:null,get CallHierarchyFeature(){return Fo},default:dn},[dn]),vc=X(_c);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});var Co=gn.ShowDocumentFeature=void 0;const kc=We,Rc=e=>class extends e{showDocument(t){return this.connection.sendRequest(kc.ShowDocumentRequest.type,t)}};Co=gn.ShowDocumentFeature=Rc;const wc=Q({__proto__:null,get ShowDocumentFeature(){return Co},default:gn},[gn]),Bc=X(wc);var hn={};Object.defineProperty(hn,"__esModule",{value:!0});var mo=hn.FileOperationsFeature=void 0;const $t=We,Sc=e=>class extends e{onDidCreateFiles(t){return this.connection.onNotification($t.DidCreateFilesNotification.type,n=>{t(n)})}onDidRenameFiles(t){return this.connection.onNotification($t.DidRenameFilesNotification.type,n=>{t(n)})}onDidDeleteFiles(t){return this.connection.onNotification($t.DidDeleteFilesNotification.type,n=>{t(n)})}onWillCreateFiles(t){return this.connection.onRequest($t.WillCreateFilesRequest.type,(n,r)=>t(n,r))}onWillRenameFiles(t){return this.connection.onRequest($t.WillRenameFilesRequest.type,(n,r)=>t(n,r))}onWillDeleteFiles(t){return this.connection.onRequest($t.WillDeleteFilesRequest.type,(n,r)=>t(n,r))}};mo=hn.FileOperationsFeature=Sc;const Tc=Q({__proto__:null,get FileOperationsFeature(){return mo},default:hn},[hn]),Ac=X(Tc);var pn={};Object.defineProperty(pn,"__esModule",{value:!0});var yo=pn.LinkedEditingRangeFeature=void 0;const Pc=We,Oc=e=>class extends e{onLinkedEditingRange(t){return this.connection.onRequest(Pc.LinkedEditingRangeRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0))}};yo=pn.LinkedEditingRangeFeature=Oc;const qc=Q({__proto__:null,get LinkedEditingRangeFeature(){return yo},default:pn},[pn]),Nc=X(qc);var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});var Eo=Fn.TypeHierarchyFeature=void 0;const zn=We,jc=e=>class extends e{get typeHierarchy(){return{onPrepare:t=>this.connection.onRequest(zn.TypeHierarchyPrepareRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),void 0)),onSupertypes:t=>{const n=zn.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},onSubtypes:t=>{const n=zn.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};Eo=Fn.TypeHierarchyFeature=jc;const $c=Q({__proto__:null,get TypeHierarchyFeature(){return Eo},default:Fn},[Fn]),Mc=X($c);var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});var bo=Cn.InlineValueFeature=void 0;const Zu=We,Lc=e=>class extends e{get inlineValue(){return{refresh:()=>this.connection.sendRequest(Zu.InlineValueRefreshRequest.type),on:t=>this.connection.onRequest(Zu.InlineValueRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n)))}}};bo=Cn.InlineValueFeature=Lc;const Ic=Q({__proto__:null,get InlineValueFeature(){return bo},default:Cn},[Cn]),Wc=X(Ic);var mn={};Object.defineProperty(mn,"__esModule",{value:!0});var _o=mn.InlayHintFeature=void 0;const Un=We,Hc=e=>class extends e{get inlayHint(){return{refresh:()=>this.connection.sendRequest(Un.InlayHintRefreshRequest.type),on:t=>this.connection.onRequest(Un.InlayHintRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n))),resolve:t=>this.connection.onRequest(Un.InlayHintResolveRequest.type,(n,r)=>t(n,r))}}};_o=mn.InlayHintFeature=Hc;const zc=Q({__proto__:null,get InlayHintFeature(){return _o},default:mn},[mn]),Uc=X(zc);var yn={};Object.defineProperty(yn,"__esModule",{value:!0});var vo=yn.DiagnosticFeature=void 0;const Xt=We,Vc=e=>class extends e{get diagnostics(){return{refresh:()=>this.connection.sendRequest(Xt.DiagnosticRefreshRequest.type),on:t=>this.connection.onRequest(Xt.DocumentDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Xt.DocumentDiagnosticRequest.partialResult,n))),onWorkspace:t=>this.connection.onRequest(Xt.WorkspaceDiagnosticRequest.type,(n,r)=>t(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(Xt.WorkspaceDiagnosticRequest.partialResult,n)))}}};vo=yn.DiagnosticFeature=Vc;const Jc=Q({__proto__:null,get DiagnosticFeature(){return vo},default:yn},[yn]),Gc=X(Jc);var En={};Object.defineProperty(En,"__esModule",{value:!0});var ko=En.MonikerFeature=void 0;const Zc=We,Xc=e=>class extends e{get moniker(){return{on:t=>{const n=Zc.MonikerRequest.type;return this.connection.onRequest(n,(r,u)=>t(r,u,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))}}}};ko=En.MonikerFeature=Xc;const Qc=Q({__proto__:null,get MonikerFeature(){return ko},default:En},[En]),Yc=X(Qc);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=e.combineFeatures=e.combineNotebooksFeatures=e.combineLanguagesFeatures=e.combineWorkspaceFeatures=e.combineWindowFeatures=e.combineClientFeatures=e.combineTracerFeatures=e.combineTelemetryFeatures=e.combineConsoleFeatures=e._NotebooksImpl=e._LanguagesImpl=e.BulkUnregistration=e.BulkRegistration=e.ErrorMessageTracker=void 0;const t=We,n=no,r=co,u=dc,i=Cc,o=Ec,D=vc,c=Mi,d=Bc,m=Ac,T=Nc,B=Mc,b=Wc,$=Uc,ue=Gc,ie=zi,Y=Yc;function fe(w){if(w!==null)return w}class ee{constructor(){this._messages=Object.create(null)}add(h){let y=this._messages[h];y||(y=0),y++,this._messages[h]=y}sendErrors(h){Object.keys(this._messages).forEach(y=>{h.window.showErrorMessage(y)})}}e.ErrorMessageTracker=ee;class ye{constructor(){}rawAttach(h){this._rawConnection=h}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(h){}initialize(h){}error(h){this.send(t.MessageType.Error,h)}warn(h){this.send(t.MessageType.Warning,h)}info(h){this.send(t.MessageType.Info,h)}log(h){this.send(t.MessageType.Log,h)}send(h,y){this._rawConnection&&this._rawConnection.sendNotification(t.LogMessageNotification.type,{type:h,message:y}).catch(()=>{(0,t.RAL)().console.error("Sending log message failed")})}}class He{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}showErrorMessage(h,...y){let P={type:t.MessageType.Error,message:h,actions:y};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(fe)}showWarningMessage(h,...y){let P={type:t.MessageType.Warning,message:h,actions:y};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(fe)}showInformationMessage(h,...y){let P={type:t.MessageType.Info,message:h,actions:y};return this.connection.sendRequest(t.ShowMessageRequest.type,P).then(fe)}}const $e=(0,d.ShowDocumentFeature)((0,u.ProgressFeature)(He));(function(w){function h(){return new Re}w.create=h})(e.BulkRegistration||(e.BulkRegistration={}));class Re{constructor(){this._registrations=[],this._registered=new Set}add(h,y){const P=n.string(h)?h:h.method;if(this._registered.has(P))throw new Error(`${P} is already added to this registration`);const E=r.generateUuid();this._registrations.push({id:E,method:P,registerOptions:y||{}}),this._registered.add(P)}asRegistrationParams(){return{registrations:this._registrations}}}(function(w){function h(){return new Ve(void 0,[])}w.create=h})(e.BulkUnregistration||(e.BulkUnregistration={}));class Ve{constructor(h,y){this._connection=h,this._unregistrations=new Map,y.forEach(P=>{this._unregistrations.set(P.method,P)})}get isAttached(){return!!this._connection}attach(h){this._connection=h}add(h){this._unregistrations.set(h.method,h)}dispose(){let h=[];for(let P of this._unregistrations.values())h.push(P);let y={unregisterations:h};this._connection.sendRequest(t.UnregistrationRequest.type,y).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(h){const y=n.string(h)?h:h.method,P=this._unregistrations.get(y);if(!P)return!1;let E={unregisterations:[P]};return this._connection.sendRequest(t.UnregistrationRequest.type,E).then(()=>{this._unregistrations.delete(y)},p=>{this._connection.console.info(`Un-registering request handler for ${P.id} failed.`)}),!0}}class we{attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}register(h,y,P){return h instanceof Re?this.registerMany(h):h instanceof Ve?this.registerSingle1(h,y,P):this.registerSingle2(h,y)}registerSingle1(h,y,P){const E=n.string(y)?y:y.method,p=r.generateUuid();let x={registrations:[{id:p,method:E,registerOptions:P||{}}]};return h.isAttached||h.attach(this.connection),this.connection.sendRequest(t.RegistrationRequest.type,x).then(re=>(h.add({id:p,method:E}),h),re=>(this.connection.console.info(`Registering request handler for ${E} failed.`),Promise.reject(re)))}registerSingle2(h,y){const P=n.string(h)?h:h.method,E=r.generateUuid();let p={registrations:[{id:E,method:P,registerOptions:y||{}}]};return this.connection.sendRequest(t.RegistrationRequest.type,p).then(x=>t.Disposable.create(()=>{this.unregisterSingle(E,P).catch(()=>{this.connection.console.info(`Un-registering capability with id ${E} failed.`)})}),x=>(this.connection.console.info(`Registering request handler for ${P} failed.`),Promise.reject(x)))}unregisterSingle(h,y){let P={unregisterations:[{id:h,method:y}]};return this.connection.sendRequest(t.UnregistrationRequest.type,P).catch(()=>{this.connection.console.info(`Un-registering request handler for ${h} failed.`)})}registerMany(h){let y=h.asRegistrationParams();return this.connection.sendRequest(t.RegistrationRequest.type,y).then(()=>new Ve(this._connection,y.registrations.map(P=>({id:P.id,method:P.method}))),P=>(this.connection.console.info("Bulk registration failed."),Promise.reject(P)))}}class ut{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}applyEdit(h){function y(E){return E&&!!E.edit}let P=y(h)?h:{edit:h};return this.connection.sendRequest(t.ApplyWorkspaceEditRequest.type,P)}}const M=(0,m.FileOperationsFeature)((0,o.WorkspaceFoldersFeature)((0,i.ConfigurationFeature)(ut)));class s{constructor(){this._trace=t.Trace.Off}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}set trace(h){this._trace=h}log(h,y){this._trace!==t.Trace.Off&&this.connection.sendNotification(t.LogTraceNotification.type,{message:h,verbose:this._trace===t.Trace.Verbose?y:void 0}).catch(()=>{})}}class A{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}logEvent(h){this.connection.sendNotification(t.TelemetryEventNotification.type,h).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}}class L{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}attachWorkDoneProgress(h){return(0,u.attachWorkDone)(this.connection,h)}attachPartialResultProgress(h,y){return(0,u.attachPartialResult)(this.connection,y)}}e._LanguagesImpl=L;const J=(0,Y.MonikerFeature)((0,ue.DiagnosticFeature)((0,$.InlayHintFeature)((0,b.InlineValueFeature)((0,B.TypeHierarchyFeature)((0,T.LinkedEditingRangeFeature)((0,c.SemanticTokensFeature)((0,D.CallHierarchyFeature)(L))))))));class le{constructor(){}attach(h){this._connection=h}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(h){}fillServerCapabilities(h){}attachWorkDoneProgress(h){return(0,u.attachWorkDone)(this.connection,h)}attachPartialResultProgress(h,y){return(0,u.attachPartialResult)(this.connection,y)}}e._NotebooksImpl=le;const Be=(0,ie.NotebookSyncFeature)(le);function Et(w,h){return function(y){return h(w(y))}}e.combineConsoleFeatures=Et;function Je(w,h){return function(y){return h(w(y))}}e.combineTelemetryFeatures=Je;function it(w,h){return function(y){return h(w(y))}}e.combineTracerFeatures=it;function Dt(w,h){return function(y){return h(w(y))}}e.combineClientFeatures=Dt;function F(w,h){return function(y){return h(w(y))}}e.combineWindowFeatures=F;function I(w,h){return function(y){return h(w(y))}}e.combineWorkspaceFeatures=I;function W(w,h){return function(y){return h(w(y))}}e.combineLanguagesFeatures=W;function z(w,h){return function(y){return h(w(y))}}e.combineNotebooksFeatures=z;function U(w,h){function y(E,p,x){return E&&p?x(E,p):E||p}return{__brand:"features",console:y(w.console,h.console,Et),tracer:y(w.tracer,h.tracer,it),telemetry:y(w.telemetry,h.telemetry,Je),client:y(w.client,h.client,Dt),window:y(w.window,h.window,F),workspace:y(w.workspace,h.workspace,I),languages:y(w.languages,h.languages,W),notebooks:y(w.notebooks,h.notebooks,z)}}e.combineFeatures=U;function ne(w,h,y){const P=y&&y.console?new(y.console(ye)):new ye,E=w(P);P.rawAttach(E);const p=y&&y.tracer?new(y.tracer(s)):new s,x=y&&y.telemetry?new(y.telemetry(A)):new A,re=y&&y.client?new(y.client(we)):new we,G=y&&y.window?new(y.window($e)):new $e,he=y&&y.workspace?new(y.workspace(M)):new M,_e=y&&y.languages?new(y.languages(J)):new J,Fe=y&&y.notebooks?new(y.notebooks(Be)):new Be,de=[P,p,x,re,G,he,_e,Fe];function Ze(v){return v instanceof Promise?v:n.thenable(v)?new Promise((g,S)=>{v.then(j=>g(j),j=>S(j))}):Promise.resolve(v)}let V,Z,te,oe={listen:()=>E.listen(),sendRequest:(v,...g)=>E.sendRequest(n.string(v)?v:v.method,...g),onRequest:(v,g)=>E.onRequest(v,g),sendNotification:(v,g)=>{const S=n.string(v)?v:v.method;return arguments.length===1?E.sendNotification(S):E.sendNotification(S,g)},onNotification:(v,g)=>E.onNotification(v,g),onProgress:E.onProgress,sendProgress:E.sendProgress,onInitialize:v=>(Z=v,{dispose:()=>{Z=void 0}}),onInitialized:v=>E.onNotification(t.InitializedNotification.type,v),onShutdown:v=>(V=v,{dispose:()=>{V=void 0}}),onExit:v=>(te=v,{dispose:()=>{te=void 0}}),get console(){return P},get telemetry(){return x},get tracer(){return p},get client(){return re},get window(){return G},get workspace(){return he},get languages(){return _e},get notebooks(){return Fe},onDidChangeConfiguration:v=>E.onNotification(t.DidChangeConfigurationNotification.type,v),onDidChangeWatchedFiles:v=>E.onNotification(t.DidChangeWatchedFilesNotification.type,v),__textDocumentSync:void 0,onDidOpenTextDocument:v=>E.onNotification(t.DidOpenTextDocumentNotification.type,v),onDidChangeTextDocument:v=>E.onNotification(t.DidChangeTextDocumentNotification.type,v),onDidCloseTextDocument:v=>E.onNotification(t.DidCloseTextDocumentNotification.type,v),onWillSaveTextDocument:v=>E.onNotification(t.WillSaveTextDocumentNotification.type,v),onWillSaveTextDocumentWaitUntil:v=>E.onRequest(t.WillSaveTextDocumentWaitUntilRequest.type,v),onDidSaveTextDocument:v=>E.onNotification(t.DidSaveTextDocumentNotification.type,v),sendDiagnostics:v=>E.sendNotification(t.PublishDiagnosticsNotification.type,v),onHover:v=>E.onRequest(t.HoverRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),onCompletion:v=>E.onRequest(t.CompletionRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onCompletionResolve:v=>E.onRequest(t.CompletionResolveRequest.type,v),onSignatureHelp:v=>E.onRequest(t.SignatureHelpRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),onDeclaration:v=>E.onRequest(t.DeclarationRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onDefinition:v=>E.onRequest(t.DefinitionRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onTypeDefinition:v=>E.onRequest(t.TypeDefinitionRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onImplementation:v=>E.onRequest(t.ImplementationRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onReferences:v=>E.onRequest(t.ReferencesRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onDocumentHighlight:v=>E.onRequest(t.DocumentHighlightRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onDocumentSymbol:v=>E.onRequest(t.DocumentSymbolRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onWorkspaceSymbol:v=>E.onRequest(t.WorkspaceSymbolRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onWorkspaceSymbolResolve:v=>E.onRequest(t.WorkspaceSymbolResolveRequest.type,v),onCodeAction:v=>E.onRequest(t.CodeActionRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onCodeActionResolve:v=>E.onRequest(t.CodeActionResolveRequest.type,(g,S)=>v(g,S)),onCodeLens:v=>E.onRequest(t.CodeLensRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onCodeLensResolve:v=>E.onRequest(t.CodeLensResolveRequest.type,(g,S)=>v(g,S)),onDocumentFormatting:v=>E.onRequest(t.DocumentFormattingRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),onDocumentRangeFormatting:v=>E.onRequest(t.DocumentRangeFormattingRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),onDocumentOnTypeFormatting:v=>E.onRequest(t.DocumentOnTypeFormattingRequest.type,(g,S)=>v(g,S)),onRenameRequest:v=>E.onRequest(t.RenameRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),onPrepareRename:v=>E.onRequest(t.PrepareRenameRequest.type,(g,S)=>v(g,S)),onDocumentLinks:v=>E.onRequest(t.DocumentLinkRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onDocumentLinkResolve:v=>E.onRequest(t.DocumentLinkResolveRequest.type,(g,S)=>v(g,S)),onDocumentColor:v=>E.onRequest(t.DocumentColorRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onColorPresentation:v=>E.onRequest(t.ColorPresentationRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onFoldingRanges:v=>E.onRequest(t.FoldingRangeRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onSelectionRanges:v=>E.onRequest(t.SelectionRangeRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),(0,u.attachPartialResult)(E,g))),onExecuteCommand:v=>E.onRequest(t.ExecuteCommandRequest.type,(g,S)=>v(g,S,(0,u.attachWorkDone)(E,g),void 0)),dispose:()=>E.dispose()};for(let v of de)v.attach(oe);return E.onRequest(t.InitializeRequest.type,v=>{h.initialize(v),n.string(v.trace)&&(p.trace=t.Trace.fromString(v.trace));for(let g of de)g.initialize(v.capabilities);if(Z){let g=Z(v,new t.CancellationTokenSource().token,(0,u.attachWorkDone)(E,v),void 0);return Ze(g).then(S=>{if(S instanceof t.ResponseError)return S;let j=S;j||(j={capabilities:{}});let a=j.capabilities;a||(a={},j.capabilities=a),a.textDocumentSync===void 0||a.textDocumentSync===null?a.textDocumentSync=n.number(oe.__textDocumentSync)?oe.__textDocumentSync:t.TextDocumentSyncKind.None:!n.number(a.textDocumentSync)&&!n.number(a.textDocumentSync.change)&&(a.textDocumentSync.change=n.number(oe.__textDocumentSync)?oe.__textDocumentSync:t.TextDocumentSyncKind.None);for(let l of de)l.fillServerCapabilities(a);return j})}else{let g={capabilities:{textDocumentSync:t.TextDocumentSyncKind.None}};for(let S of de)S.fillServerCapabilities(g.capabilities);return g}}),E.onRequest(t.ShutdownRequest.type,()=>{if(h.shutdownReceived=!0,V)return V(new t.CancellationTokenSource().token)}),E.onNotification(t.ExitNotification.type,()=>{try{te&&te()}finally{h.shutdownReceived?h.exit(0):h.exit(1)}}),E.onNotification(t.SetTraceNotification.type,v=>{p.trace=t.Trace.fromString(v.value)}),oe}e.createConnection=ne})(Au);const Kc=ce(Au),xc=Q({__proto__:null,default:Kc},[Au]),el=X(xc);(function(e){var t=Me&&Me.__createBinding||(Object.create?function(o,D,c,d){d===void 0&&(d=c);var m=Object.getOwnPropertyDescriptor(D,c);(!m||("get"in m?!D.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return D[c]}}),Object.defineProperty(o,d,m)}:function(o,D,c,d){d===void 0&&(d=c),o[d]=D[c]}),n=Me&&Me.__exportStar||function(o,D){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(D,c)&&t(D,o,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.NotebookDocuments=e.TextDocuments=e.SemanticTokensBuilder=void 0;const r=Mi;Object.defineProperty(e,"SemanticTokensBuilder",{enumerable:!0,get:function(){return r.SemanticTokensBuilder}}),n(We,e);const u=Ii;Object.defineProperty(e,"TextDocuments",{enumerable:!0,get:function(){return u.TextDocuments}});const i=zi;Object.defineProperty(e,"NotebookDocuments",{enumerable:!0,get:function(){return i.NotebookDocuments}}),n(el,e),function(o){o.all={__brand:"features"}}(e.ProposedFeatures||(e.ProposedFeatures={}))})(Vr);const tl=ce(Vr),nl=Q({__proto__:null,default:tl},[Vr]),Xu=X(nl);var Mn={},rl={get exports(){return Mn},set exports(e){Mn=e}};(function(e){e.exports=We})(rl);const ul=ce(Mn),il=Q({__proto__:null,default:ul},[Mn]),ol=X(il);(function(e){var t=Me&&Me.__createBinding||(Object.create?function(D,c,d,m){m===void 0&&(m=d);var T=Object.getOwnPropertyDescriptor(c,d);(!T||("get"in T?!c.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return c[d]}}),Object.defineProperty(D,m,T)}:function(D,c,d,m){m===void 0&&(m=d),D[m]=c[d]}),n=Me&&Me.__exportStar||function(D,c){for(var d in D)d!=="default"&&!Object.prototype.hasOwnProperty.call(c,d)&&t(c,D,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.createConnection=void 0;const r=Xu;n(ol,e),n(Xu,e);let u=!1;const i={initialize:D=>{},get shutdownReceived(){return u},set shutdownReceived(D){u=D},exit:D=>{}};function o(D,c,d,m){let T,B,b,$;D!==void 0&&D.__brand==="features"&&(T=D,D=c,c=d,d=m),r.ConnectionStrategy.is(D)||r.ConnectionOptions.is(D)?$=D:(B=D,b=c,$=d);const ue=ie=>(0,r.createProtocolConnection)(B,b,ie,$);return(0,r.createConnection)(ue,i,T)}e.createConnection=o})(Wt);const sl=e=>{const t=e.state,n=(t==null?void 0:t.getLineNumber())??0,r=(t==null?void 0:t.getColumnNumber())??0;return{range:{start:{line:n,character:r},end:{line:n,character:r+1}},message:"Error parsing BBNF, last value was: "+ts(t==null?void 0:t.value),severity:Wt.DiagnosticSeverity.Error}},al=(e,t)=>{const n=is(e),r=[];for(const u of n){let{value:i,offset:o}=u;o??(o=0);const D={range:{start:t.positionAt(o-i.length-1),end:t.positionAt(o-1)},code:"undefined-variable",message:`Undefined variable: "${i}"`,severity:Wt.DiagnosticSeverity.Warning};exports.hasDiagnosticRelatedInformationCapability&&(D.relatedInformation=[{location:{uri:t.uri,range:Object.assign({},D.range)},message:"Undefined variable"}]),r.push(D)}return r},Dl=(e,t)=>{const n=os(e),r=[];for(const u of n){let{name:i}=u;const o={message:`Unused variable: "${i}"`,code:"unused-variable",severity:Wt.DiagnosticSeverity.Information,range:Wt.Range.create(0,0,0,0)};exports.hasDiagnosticRelatedInformationCapability&&(o.relatedInformation=[{location:{uri:t.uri,range:Object.assign({},o.range)},message:"Unused variable"}]),r.push(o)}return r},cl=(e,t)=>{var n;try{let[r,u]=ni(e);return(n=r.state)!=null&&n.isError||!u?[sl(r)]:[...al(u,t),...Dl(u,t)].filter(i=>i!==void 0)}catch(r){return console.log(r),[{range:{start:{line:0,character:0},end:{line:0,character:0}},message:"Error diagnosing BBNF",severity:Wt.DiagnosticSeverity.Error}]}},ll=[{name:"BBNF",since:"0.1",parsers:["bbnf"],extensions:[".bbnf"],tmScope:"bbnf.bbnf",aceMode:"text",linguistLanguageId:666,vscodeLanguageIds:["bbnf"]}],fl={bbnf:{print:es}},dl={bbnf:{parse:ss,astFormat:"bbnf",locStart:ns,locEnd:rs,preprocess:us}},Ro={bbnf:{printWidth:66,tabWidth:4,useTabs:!1}},gl={languages:ll,printers:fl,parsers:dl,defaultOptions:Ro},hl=(e,t)=>qo.format(e,{parser:"bbnf",plugins:[gl],...Ro,...t??{}}),xe=yt.createConnection(yt.ProposedFeatures.all),vn=new yt.TextDocuments(Oo.TextDocument);exports.hasConfigurationCapability=!1;exports.hasWorkspaceFolderCapability=!1;exports.hasDiagnosticRelatedInformationCapability=!1;xe.onInitialize(e=>{const t=e.capabilities;exports.hasConfigurationCapability=!!(t.workspace&&t.workspace.configuration),exports.hasWorkspaceFolderCapability=!!(t.workspace&&t.workspace.workspaceFolders),exports.hasDiagnosticRelatedInformationCapability=!!(t.textDocument&&t.textDocument.publishDiagnostics&&t.textDocument.publishDiagnostics.relatedInformation);const n={capabilities:{textDocumentSync:yt.TextDocumentSyncKind.Incremental,completionProvider:{resolveProvider:!0},documentFormattingProvider:!0}};return exports.hasWorkspaceFolderCapability&&(n.capabilities.workspace={workspaceFolders:{supported:!0}}),n});xe.onInitialized(()=>{exports.hasConfigurationCapability&&xe.client.register(yt.DidChangeConfigurationNotification.type,void 0),exports.hasWorkspaceFolderCapability&&xe.workspace.onDidChangeWorkspaceFolders(e=>{xe.console.log("Workspace folder change event received.")})});const wo={maxNumberOfProblems:1e3};let Bo=wo;const Ln=new Map;xe.onDidChangeConfiguration(e=>{exports.hasConfigurationCapability?Ln.clear():Bo=e.settings.BBNF||wo,vn.all().forEach(So)});function pl(e){if(!exports.hasConfigurationCapability)return Promise.resolve(Bo);let t=Ln.get(e);return t||(t=xe.workspace.getConfiguration({scopeUri:e,section:"BBNF"}),Ln.set(e,t)),t}vn.onDidClose(e=>{Ln.delete(e.document.uri)});vn.onDidChangeContent(e=>{So(e.document)});xe.onDocumentFormatting(e=>{const t=vn.get(e.textDocument.uri);if(!t)return[];const n=t.getText();if(n.length===0)return[];const r=hl(n);return r?[yt.TextEdit.replace(yt.Range.create(t.positionAt(0),t.positionAt(t.getText().length)),r)]:[]});async function So(e){const t=await pl(e.uri),n=e.getText(),r=cl(n,e).slice(0,t.maxNumberOfProblems);xe.sendDiagnostics({uri:e.uri,diagnostics:r})}xe.onDidChangeWatchedFiles(e=>{xe.console.log("We received an file change event")});xe.onCompletion(e=>[{label:"TypeScript",kind:yt.CompletionItemKind.Text,data:1},{label:"JavaScript",kind:yt.CompletionItemKind.Text,data:2}]);xe.onCompletionResolve(e=>(e.data===1?(e.detail="TypeScript details",e.documentation="TypeScript documentation"):e.data===2&&(e.detail="JavaScript details",e.documentation="JavaScript documentation"),e));vn.listen(xe);xe.listen();
//# sourceMappingURL=server.js.map
