"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const fD=require("path"),au=require("vscode"),Tu=require("vscode-languageclient/node"),K=require("chalk");var pD=Object.defineProperty,ED=(t,u,D)=>u in t?pD(t,u,{enumerable:!0,configurable:!0,writable:!0,value:D}):t[u]=D,qu=(t,u,D)=>(ED(t,typeof u!="symbol"?u+"":u,D),D),z={},hD={get exports(){return z},set exports(t){z=t}};(function(t,u){(function(D){t.exports=D()})(function(){var D=Object.getOwnPropertyNames,e=(r,l)=>function(){return l||(0,r[D(r)[0]])((l={exports:{}}).exports,l),l.exports},n=e({"dist/_doc.js.umd.js"(r,l){var f=Object.create,h=Object.defineProperty,k=Object.getOwnPropertyDescriptor,j=Object.getOwnPropertyNames,Fu=Object.getPrototypeOf,Eu=Object.prototype.hasOwnProperty,nu=(a,d)=>function(){return a&&(d=(0,a[j(a)[0]])(a=0)),d},Q=(a,d)=>function(){return d||(0,a[j(a)[0]])((d={exports:{}}).exports,d),d.exports},du=(a,d)=>{for(var y in d)h(a,y,{get:d[y],enumerable:!0})},eu=(a,d,y,v)=>{if(d&&typeof d=="object"||typeof d=="function")for(let w of j(d))!Eu.call(a,w)&&w!==y&&h(a,w,{get:()=>d[w],enumerable:!(v=k(d,w))||v.enumerable});return a},tu=(a,d,y)=>(y=a!=null?f(Fu(a)):{},eu(d||!a||!a.__esModule?h(y,"default",{value:a,enumerable:!0}):y,a)),xu=a=>eu(h({},"__esModule",{value:!0}),a),Y=nu({"<define:process>"(){}}),Ou=Q({"src/document/doc-builders.js"(a,d){Y();function y(g){return{type:"concat",parts:g}}function v(g){return{type:"indent",contents:g}}function w(g,s){return{type:"align",contents:s,n:g}}function M(g){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{type:"group",id:s.id,contents:g,break:Boolean(s.shouldBreak),expandedStates:s.expandedStates}}function B(g){return w(Number.NEGATIVE_INFINITY,g)}function L(g){return w({type:"root"},g)}function R(g){return w(-1,g)}function A(g,s){return M(g[0],Object.assign(Object.assign({},s),{},{expandedStates:g}))}function Z(g){return{type:"fill",parts:g}}function F(g,s){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return{type:"if-break",breakContents:g,flatContents:s,groupId:i.groupId}}function $(g,s){return{type:"indent-if-break",contents:g,groupId:s.groupId,negate:s.negate}}function W(g){return{type:"line-suffix",contents:g}}var S={type:"line-suffix-boundary"},uu={type:"break-parent"},ou={type:"trim"},lu={type:"line",hard:!0},X={type:"line",hard:!0,literal:!0},yu={type:"line"},b={type:"line",soft:!0},_=y([lu,uu]),N=y([X,uu]),P={type:"cursor",placeholder:Symbol("cursor")};function G(g,s){const i=[];for(let o=0;o<s.length;o++)o!==0&&i.push(g),i.push(s[o]);return y(i)}function m(g,s,i){let o=g;if(s>0){for(let p=0;p<Math.floor(s/i);++p)o=v(o);o=w(s%i,o),o=w(Number.NEGATIVE_INFINITY,o)}return o}function x(g,s){return{type:"label",label:g,contents:s}}d.exports={concat:y,join:G,line:yu,softline:b,hardline:_,literalline:N,group:M,conditionalGroup:A,fill:Z,lineSuffix:W,lineSuffixBoundary:S,cursor:P,breakParent:uu,ifBreak:F,trim:ou,indent:v,indentIfBreak:$,align:w,addAlignmentToDoc:m,markAsRoot:L,dedentToRoot:B,dedent:R,hardlineWithoutBreakParent:lu,literallineWithoutBreakParent:X,label:x}}}),uD=Q({"src/common/end-of-line.js"(a,d){Y();function y(B){const L=B.indexOf("\r");return L>=0?B.charAt(L+1)===`
`?"crlf":"cr":"lf"}function v(B){switch(B){case"cr":return"\r";case"crlf":return`\r
`;default:return`
`}}function w(B,L){let R;switch(L){case`
`:R=/\n/g;break;case"\r":R=/\r/g;break;case`\r
`:R=/\r\n/g;break;default:throw new Error(`Unexpected "eol" ${JSON.stringify(L)}.`)}const A=B.match(R);return A?A.length:0}function M(B){return B.replace(/\r\n?/g,`
`)}d.exports={guessEndOfLine:y,convertEndOfLineToChars:v,countEndOfLineChars:w,normalizeEndOfLine:M}}}),Mu=Q({"src/utils/get-last.js"(a,d){Y();var y=v=>v[v.length-1];d.exports=y}});function DD(){let{onlyFirst:a=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const d=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(d,a?void 0:"g")}var eD=nu({"node_modules/strip-ansi/node_modules/ansi-regex/index.js"(){Y()}});function tD(a){if(typeof a!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof a}\``);return a.replace(DD(),"")}var nD=nu({"node_modules/strip-ansi/index.js"(){Y(),eD()}});function rD(a){return Number.isInteger(a)?a>=4352&&(a<=4447||a===9001||a===9002||11904<=a&&a<=12871&&a!==12351||12880<=a&&a<=19903||19968<=a&&a<=42182||43360<=a&&a<=43388||44032<=a&&a<=55203||63744<=a&&a<=64255||65040<=a&&a<=65049||65072<=a&&a<=65131||65281<=a&&a<=65376||65504<=a&&a<=65510||110592<=a&&a<=110593||127488<=a&&a<=127569||131072<=a&&a<=262141):!1}var sD=nu({"node_modules/is-fullwidth-code-point/index.js"(){Y()}}),iD=Q({"node_modules/emoji-regex/index.js"(a,d){Y(),d.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}}}),Ru={};du(Ru,{default:()=>oD});function oD(a){if(typeof a!="string"||a.length===0||(a=tD(a),a.length===0))return 0;a=a.replace((0,Gu.default)(),"  ");let d=0;for(let y=0;y<a.length;y++){const v=a.codePointAt(y);v<=31||v>=127&&v<=159||v>=768&&v<=879||(v>65535&&y++,d+=rD(v)?2:1)}return d}var Gu,aD=nu({"node_modules/string-width/index.js"(){Y(),nD(),sD(),Gu=tu(iD())}}),FD=Q({"src/utils/get-string-width.js"(a,d){Y();var y=(aD(),xu(Ru)).default,v=/[^\x20-\x7F]/;function w(M){return M?v.test(M)?y(M):M.length:0}d.exports=w}}),ju=Q({"src/document/doc-utils.js"(a,d){Y();var y=Mu(),{literalline:v,join:w}=Ou(),M=s=>Array.isArray(s)||s&&s.type==="concat",B=s=>{if(Array.isArray(s))return s;if(s.type!=="concat"&&s.type!=="fill")throw new Error("Expect doc type to be `concat` or `fill`.");return s.parts},L={};function R(s,i,o,p){const c=[s];for(;c.length>0;){const C=c.pop();if(C===L){o(c.pop());continue}if(o&&c.push(C,L),!i||i(C)!==!1)if(M(C)||C.type==="fill"){const E=B(C);for(let q=E.length,ru=q-1;ru>=0;--ru)c.push(E[ru])}else if(C.type==="if-break")C.flatContents&&c.push(C.flatContents),C.breakContents&&c.push(C.breakContents);else if(C.type==="group"&&C.expandedStates)if(p)for(let E=C.expandedStates.length,q=E-1;q>=0;--q)c.push(C.expandedStates[q]);else c.push(C.contents);else C.contents&&c.push(C.contents)}}function A(s,i){const o=new Map;return p(s);function p(C){if(o.has(C))return o.get(C);const E=c(C);return o.set(C,E),E}function c(C){if(Array.isArray(C))return i(C.map(p));if(C.type==="concat"||C.type==="fill"){const E=C.parts.map(p);return i(Object.assign(Object.assign({},C),{},{parts:E}))}if(C.type==="if-break"){const E=C.breakContents&&p(C.breakContents),q=C.flatContents&&p(C.flatContents);return i(Object.assign(Object.assign({},C),{},{breakContents:E,flatContents:q}))}if(C.type==="group"&&C.expandedStates){const E=C.expandedStates.map(p),q=E[0];return i(Object.assign(Object.assign({},C),{},{contents:q,expandedStates:E}))}if(C.contents){const E=p(C.contents);return i(Object.assign(Object.assign({},C),{},{contents:E}))}return i(C)}}function Z(s,i,o){let p=o,c=!1;function C(E){const q=i(E);if(q!==void 0&&(c=!0,p=q),c)return!1}return R(s,C),p}function F(s){if(s.type==="group"&&s.break||s.type==="line"&&s.hard||s.type==="break-parent")return!0}function $(s){return Z(s,F,!1)}function W(s){if(s.length>0){const i=y(s);!i.expandedStates&&!i.break&&(i.break="propagated")}return null}function S(s){const i=new Set,o=[];function p(C){if(C.type==="break-parent"&&W(o),C.type==="group"){if(o.push(C),i.has(C))return!1;i.add(C)}}function c(C){C.type==="group"&&o.pop().break&&W(o)}R(s,p,c,!0)}function uu(s){return s.type==="line"&&!s.hard?s.soft?"":" ":s.type==="if-break"?s.flatContents||"":s}function ou(s){return A(s,uu)}var lu=(s,i)=>s&&s.type==="line"&&s.hard&&i&&i.type==="break-parent";function X(s){if(!s)return s;if(M(s)||s.type==="fill"){const i=B(s);for(;i.length>1&&lu(...i.slice(-2));)i.length-=2;if(i.length>0){const o=X(y(i));i[i.length-1]=o}return Array.isArray(s)?i:Object.assign(Object.assign({},s),{},{parts:i})}switch(s.type){case"align":case"indent":case"indent-if-break":case"group":case"line-suffix":case"label":{const i=X(s.contents);return Object.assign(Object.assign({},s),{},{contents:i})}case"if-break":{const i=X(s.breakContents),o=X(s.flatContents);return Object.assign(Object.assign({},s),{},{breakContents:i,flatContents:o})}}return s}function yu(s){return X(_(s))}function b(s){switch(s.type){case"fill":if(s.parts.every(o=>o===""))return"";break;case"group":if(!s.contents&&!s.id&&!s.break&&!s.expandedStates)return"";if(s.contents.type==="group"&&s.contents.id===s.id&&s.contents.break===s.break&&s.contents.expandedStates===s.expandedStates)return s.contents;break;case"align":case"indent":case"indent-if-break":case"line-suffix":if(!s.contents)return"";break;case"if-break":if(!s.flatContents&&!s.breakContents)return"";break}if(!M(s))return s;const i=[];for(const o of B(s)){if(!o)continue;const[p,...c]=M(o)?B(o):[o];typeof p=="string"&&typeof y(i)=="string"?i[i.length-1]+=p:i.push(p),i.push(...c)}return i.length===0?"":i.length===1?i[0]:Array.isArray(s)?i:Object.assign(Object.assign({},s),{},{parts:i})}function _(s){return A(s,i=>b(i))}function N(s){const i=[],o=s.filter(Boolean);for(;o.length>0;){const p=o.shift();if(p){if(M(p)){o.unshift(...B(p));continue}if(i.length>0&&typeof y(i)=="string"&&typeof p=="string"){i[i.length-1]+=p;continue}i.push(p)}}return i}function P(s){return A(s,i=>Array.isArray(i)?N(i):i.parts?Object.assign(Object.assign({},i),{},{parts:N(i.parts)}):i)}function G(s){return A(s,i=>typeof i=="string"&&i.includes(`
`)?m(i):i)}function m(s){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;return w(i,s.split(`
`)).parts}function x(s){if(s.type==="line")return!0}function g(s){return Z(s,x,!1)}d.exports={isConcat:M,getDocParts:B,willBreak:$,traverseDoc:R,findInDoc:Z,mapDoc:A,propagateBreaks:S,removeLines:ou,stripTrailingHardline:yu,normalizeParts:N,normalizeDoc:P,cleanDoc:_,replaceTextEndOfLine:m,replaceEndOfLine:G,canBreak:g}}}),lD=Q({"src/document/doc-printer.js"(a,d){Y();var{convertEndOfLineToChars:y}=uD(),v=Mu(),w=FD(),{fill:M,cursor:B,indent:L}=Ou(),{isConcat:R,getDocParts:A}=ju(),Z,F=1,$=2;function W(){return{value:"",length:0,queue:[]}}function S(b,_){return ou(b,{type:"indent"},_)}function uu(b,_,N){return _===Number.NEGATIVE_INFINITY?b.root||W():_<0?ou(b,{type:"dedent"},N):_?_.type==="root"?Object.assign(Object.assign({},b),{},{root:b}):ou(b,{type:typeof _=="string"?"stringAlign":"numberAlign",n:_},N):b}function ou(b,_,N){const P=_.type==="dedent"?b.queue.slice(0,-1):[...b.queue,_];let G="",m=0,x=0,g=0;for(const E of P)switch(E.type){case"indent":o(),N.useTabs?s(1):i(N.tabWidth);break;case"stringAlign":o(),G+=E.n,m+=E.n.length;break;case"numberAlign":x+=1,g+=E.n;break;default:throw new Error(`Unexpected type '${E.type}'`)}return c(),Object.assign(Object.assign({},b),{},{value:G,length:m,queue:P});function s(E){G+="	".repeat(E),m+=N.tabWidth*E}function i(E){G+=" ".repeat(E),m+=E}function o(){N.useTabs?p():c()}function p(){x>0&&s(x),C()}function c(){g>0&&i(g),C()}function C(){x=0,g=0}}function lu(b){if(b.length===0)return 0;let _=0;for(;b.length>0&&typeof v(b)=="string"&&/^[\t ]*$/.test(v(b));)_+=b.pop().length;if(b.length>0&&typeof v(b)=="string"){const N=v(b).replace(/[\t ]*$/,"");_+=v(b).length-N.length,b[b.length-1]=N}return _}function X(b,_,N,P,G){let m=_.length;const x=[b],g=[];for(;N>=0;){if(x.length===0){if(m===0)return!0;x.push(_[--m]);continue}const{mode:s,doc:i}=x.pop();if(typeof i=="string")g.push(i),N-=w(i);else if(R(i)||i.type==="fill"){const o=A(i);for(let p=o.length-1;p>=0;p--)x.push({mode:s,doc:o[p]})}else switch(i.type){case"indent":case"align":case"indent-if-break":case"label":x.push({mode:s,doc:i.contents});break;case"trim":N+=lu(g);break;case"group":{if(G&&i.break)return!1;const o=i.break?F:s,p=i.expandedStates&&o===F?v(i.expandedStates):i.contents;x.push({mode:o,doc:p});break}case"if-break":{const p=(i.groupId?Z[i.groupId]||$:s)===F?i.breakContents:i.flatContents;p&&x.push({mode:s,doc:p});break}case"line":if(s===F||i.hard)return!0;i.soft||(g.push(" "),N--);break;case"line-suffix":P=!0;break;case"line-suffix-boundary":if(P)return!1;break}}return!1}function yu(b,_){Z={};const N=_.printWidth,P=y(_.endOfLine);let G=0;const m=[{ind:W(),mode:F,doc:b}],x=[];let g=!1;const s=[];for(;m.length>0;){const{ind:o,mode:p,doc:c}=m.pop();if(typeof c=="string"){const C=P!==`
`?c.replace(/\n/g,P):c;x.push(C),G+=w(C)}else if(R(c)){const C=A(c);for(let E=C.length-1;E>=0;E--)m.push({ind:o,mode:p,doc:C[E]})}else switch(c.type){case"cursor":x.push(B.placeholder);break;case"indent":m.push({ind:S(o,_),mode:p,doc:c.contents});break;case"align":m.push({ind:uu(o,c.n,_),mode:p,doc:c.contents});break;case"trim":G-=lu(x);break;case"group":switch(p){case $:if(!g){m.push({ind:o,mode:c.break?F:$,doc:c.contents});break}case F:{g=!1;const C={ind:o,mode:$,doc:c.contents},E=N-G,q=s.length>0;if(!c.break&&X(C,m,E,q))m.push(C);else if(c.expandedStates){const ru=v(c.expandedStates);if(c.break){m.push({ind:o,mode:F,doc:ru});break}else for(let su=1;su<c.expandedStates.length+1;su++)if(su>=c.expandedStates.length){m.push({ind:o,mode:F,doc:ru});break}else{const vu=c.expandedStates[su],hu={ind:o,mode:$,doc:vu};if(X(hu,m,E,q)){m.push(hu);break}}}else m.push({ind:o,mode:F,doc:c.contents});break}}c.id&&(Z[c.id]=v(m).mode);break;case"fill":{const C=N-G,{parts:E}=c;if(E.length===0)break;const[q,ru]=E,su={ind:o,mode:$,doc:q},vu={ind:o,mode:F,doc:q},hu=X(su,[],C,s.length>0,!0);if(E.length===1){hu?m.push(su):m.push(vu);break}const Wu={ind:o,mode:$,doc:ru},Iu={ind:o,mode:F,doc:ru};if(E.length===2){hu?m.push(Wu,su):m.push(Iu,vu);break}E.splice(0,2);const Nu={ind:o,mode:p,doc:M(E)},cD=E[0];X({ind:o,mode:$,doc:[q,ru,cD]},[],C,s.length>0,!0)?m.push(Nu,Wu,su):hu?m.push(Nu,Iu,su):m.push(Nu,Iu,vu);break}case"if-break":case"indent-if-break":{const C=c.groupId?Z[c.groupId]:p;if(C===F){const E=c.type==="if-break"?c.breakContents:c.negate?c.contents:L(c.contents);E&&m.push({ind:o,mode:p,doc:E})}if(C===$){const E=c.type==="if-break"?c.flatContents:c.negate?L(c.contents):c.contents;E&&m.push({ind:o,mode:p,doc:E})}break}case"line-suffix":s.push({ind:o,mode:p,doc:c.contents});break;case"line-suffix-boundary":s.length>0&&m.push({ind:o,mode:p,doc:{type:"line",hard:!0}});break;case"line":switch(p){case $:if(c.hard)g=!0;else{c.soft||(x.push(" "),G+=1);break}case F:if(s.length>0){m.push({ind:o,mode:p,doc:c},...s.reverse()),s.length=0;break}c.literal?o.root?(x.push(P,o.root.value),G=o.root.length):(x.push(P),G=0):(G-=lu(x),x.push(P+o.value),G=o.length);break}break;case"label":m.push({ind:o,mode:p,doc:c.contents});break}m.length===0&&s.length>0&&(m.push(...s.reverse()),s.length=0)}const i=x.indexOf(B.placeholder);if(i!==-1){const o=x.indexOf(B.placeholder,i+1),p=x.slice(0,i).join(""),c=x.slice(i+1,o).join(""),C=x.slice(o+1).join("");return{formatted:p+c+C,cursorNodeStart:p.length,cursorNodeText:c}}return{formatted:x.join("")}}d.exports={printDocToString:yu}}}),CD=Q({"src/document/doc-debug.js"(a,d){Y();var{isConcat:y,getDocParts:v}=ju();function w(B){if(!B)return"";if(y(B)){const L=[];for(const R of v(B))if(y(R))L.push(...w(R).parts);else{const A=w(R);A!==""&&L.push(A)}return{type:"concat",parts:L}}return B.type==="if-break"?Object.assign(Object.assign({},B),{},{breakContents:w(B.breakContents),flatContents:w(B.flatContents)}):B.type==="group"?Object.assign(Object.assign({},B),{},{contents:w(B.contents),expandedStates:B.expandedStates&&B.expandedStates.map(w)}):B.type==="fill"?{type:"fill",parts:B.parts.map(w)}:B.contents?Object.assign(Object.assign({},B),{},{contents:w(B.contents)}):B}function M(B){const L=Object.create(null),R=new Set;return A(w(B));function A(F,$,W){if(typeof F=="string")return JSON.stringify(F);if(y(F)){const S=v(F).map(A).filter(Boolean);return S.length===1?S[0]:`[${S.join(", ")}]`}if(F.type==="line"){const S=Array.isArray(W)&&W[$+1]&&W[$+1].type==="break-parent";return F.literal?S?"literalline":"literallineWithoutBreakParent":F.hard?S?"hardline":"hardlineWithoutBreakParent":F.soft?"softline":"line"}if(F.type==="break-parent")return Array.isArray(W)&&W[$-1]&&W[$-1].type==="line"&&W[$-1].hard?void 0:"breakParent";if(F.type==="trim")return"trim";if(F.type==="indent")return"indent("+A(F.contents)+")";if(F.type==="align")return F.n===Number.NEGATIVE_INFINITY?"dedentToRoot("+A(F.contents)+")":F.n<0?"dedent("+A(F.contents)+")":F.n.type==="root"?"markAsRoot("+A(F.contents)+")":"align("+JSON.stringify(F.n)+", "+A(F.contents)+")";if(F.type==="if-break")return"ifBreak("+A(F.breakContents)+(F.flatContents?", "+A(F.flatContents):"")+(F.groupId?(F.flatContents?"":', ""')+`, { groupId: ${Z(F.groupId)} }`:"")+")";if(F.type==="indent-if-break"){const S=[];F.negate&&S.push("negate: true"),F.groupId&&S.push(`groupId: ${Z(F.groupId)}`);const uu=S.length>0?`, { ${S.join(", ")} }`:"";return`indentIfBreak(${A(F.contents)}${uu})`}if(F.type==="group"){const S=[];F.break&&F.break!=="propagated"&&S.push("shouldBreak: true"),F.id&&S.push(`id: ${Z(F.id)}`);const uu=S.length>0?`, { ${S.join(", ")} }`:"";return F.expandedStates?`conditionalGroup([${F.expandedStates.map(ou=>A(ou)).join(",")}]${uu})`:`group(${A(F.contents)}${uu})`}if(F.type==="fill")return`fill([${F.parts.map(S=>A(S)).join(", ")}])`;if(F.type==="line-suffix")return"lineSuffix("+A(F.contents)+")";if(F.type==="line-suffix-boundary")return"lineSuffixBoundary";if(F.type==="label")return`label(${JSON.stringify(F.label)}, ${A(F.contents)})`;throw new Error("Unknown doc type "+F.type)}function Z(F){if(typeof F!="symbol")return JSON.stringify(String(F));if(F in L)return L[F];const $=String(F).slice(7,-1)||"symbol";for(let W=0;;W++){const S=$+(W>0?` #${W}`:"");if(!R.has(S))return R.add(S),L[F]=`Symbol.for(${JSON.stringify(S)})`}}}d.exports={printDocToDebug:M}}});Y(),l.exports={builders:Ou(),printer:lD(),utils:ju(),debug:CD()}}});return n()})})(hD);const zu=4,Ku={printWidth:30,tabWidth:4,useTabs:!1};function Uu(t){return z.printer.printDocToString(t,Ku).formatted}function Pu(t,u="^",D=!1){const e=(D?K.red:K.green).bold,n=t.src.split(`
`),r=Math.min(n.length-1,t.getLineNumber()),l=Math.max(r-zu,0),f=Math.min(r+zu+1,n.length),h=n.slice(l,f);if(u){const j=" ".repeat(t.getColumnNumber())+e(u);h.splice(r-l+1,0,j)}return h.map((j,Fu)=>{const Eu=l+Fu+1;let nu=e.reset.black(String(Eu));return j=Eu===r+1?e(j):j,`      ${nu}| ${j}`}).join(`
`)}const Du=(t,u={})=>z.builders.group(t,{...Ku,...u}),gu=t=>K.gray(t),Cu=new Map;function Vu(t){if(Cu.has(t.id))return Cu.get(t.id);const u=(n,r)=>{if(Cu.has(n.id))return Cu.get(n.id);const{name:l,args:f,parser:h}=n.context,k=h!=null?u(h,r):K.red.bold("unknown");let j=(()=>{switch(l){case"string":return K.yellow(`"${f[0]}"`);case"regex":case"regexConcat":case"regexWrap":return K.redBright(`${f[0]}`);case"wrap":case"trim":{const[eu,tu]=f;return Du([u(eu,r),z.builders.indent([z.builders.softline,k]),z.builders.softline,u(tu,r)])}case"trimWhitespace":return Du([k,gu("?w")]);case"not":return Du(["!",k]);case"opt":return Du([k,gu("?")]);case"next":const[Fu]=f;return Du([k,gu(" >> "),u(Fu,r)]);case"skip":const[Eu]=f;return Du([k,gu(" << "),u(Eu,r)]);case"map":return k;case"all":case"then":{const eu=gu(", ");return Du(["[",z.builders.indent([z.builders.softline,z.builders.join([eu,z.builders.softline],f.map(tu=>u(tu,r)))]),z.builders.softline,"]"])}case"any":case"or":{const eu=gu("| ");return Du([[z.builders.join([z.builders.softline,z.builders.ifBreak(eu," "+eu)],f.map(tu=>u(tu,r)))]])}case"many":const[nu,Q]=f;let du=Q===1/0?`${nu},`:`${nu},${Q}`;return du=K.bold.gray(` {${du}}`),Du([k,du]);case"sepBy":return Du([k,z.builders.indent([" sepBy ",u(f[0],r)])]);case"lazy":{const[eu]=f,tu=Lu(eu);if(r)return K.bold.blue(l);{const xu=u(tu,tu.id);return Cu.set(tu.id,xu),xu}}case"debug":return k}})();return j??(j=K.red.bold(l)),r&&Cu.set(n.id,j),j},D=u(t),e=Uu(D);return Cu.set(t.id,e),e}function Zu(t,u="",D=""){const e=t.isError?K.bgRed:K.bgGreen,n=t.isError?K.red:K.green,r=t.offset>=t.src.length,l=t.isError?"ï½˜":r?"ðŸŽ‰":"âœ“",h=" "+(t.isError?"Err":r?"Done":"Ok")+" "+l+" ",k=Du([e.bold(h),n(`	${u}	${t.offset}`),z.builders.softline,"	"+K.yellow(D)]),j=(()=>t.offset>=t.src.length?K.bold.greenBright(Pu(t,"",t.isError)):Pu(t,"^",t.isError))(),Fu=Du([k,z.builders.hardline,z.builders.indent([j])]);return Uu(Fu)}function gD(t,u="",D=!1,e=console.log){const n=r=>{const l=t.parser(r),f=D?Vu(t):t.context.name,h=Zu(l,u,f);return e(h),l};return new T(n,I("debug",t,e))}class Su{constructor(u,D=void 0,e=0,n=!1,r=0){this.src=u,this.value=D,this.offset=e,this.isError=n,this.furthest=r}ok(u,D=0){return D+=this.offset,new Su(this.src,u,D,!1)}err(u,D=0){const e=this.ok(u,D);return e.isError=!0,e}from(u,D=0){return D+=this.offset,new Su(this.src,u,D,this.isError)}getColumnNumber(){const u=this.offset,D=this.src.lastIndexOf(`
`,u),e=D===-1?u:u-(D+1);return Math.max(0,e)}getLineNumber(){const u=this.src.lastIndexOf(`
`,this.offset);return u>=0?this.src.slice(0,u).split(`
`).length:0}toString(){return Zu(this)}}function I(t,u,...D){return{name:t,parser:u,args:D}}let BD=0;const cu=new Map,ku=new Map;let Bu;function H(t){return(!Bu||Bu&&t.offset>Bu.offset)&&(Bu=t),Bu}function Lu(t){return t.parser?t.parser:t.parser=t()}class T{constructor(u,D={}){qu(this,"id",BD++),qu(this,"state"),this.parser=u,this.context=D}reset(){Bu=void 0,cu.clear(),ku.clear()}parse(u){this.reset();const D=this.parser(new Su(u));return this.state=H(D),this.state.isError=D.isError,this.state.isError&&console.log(this.state.toString()),D.value}getCijKey(u){return`${this.id}${u.offset}`}atLeftRecursionLimit(u){return(ku.get(this.getCijKey(u))??0)>u.src.length-u.offset}memoize(){const u=D=>{const e=this.getCijKey(D),n=ku.get(e)??0;let r=cu.get(this.id);if(r&&r.offset>=D.offset)return r;if(this.atLeftRecursionLimit(D))return D.err(void 0);ku.set(e,n+1);const l=this.parser(D);return r=cu.get(this.id),r&&r.offset>l.offset?l.offset=r.offset:r||cu.set(this.id,l),l};return new T(u,I("memoize",this))}mergeMemos(){const u=D=>{let e=cu.get(this.id);if(e)return e;if(this.atLeftRecursionLimit(D))return D.err(void 0);const n=this.parser(D);return e=cu.get(this.id),e||cu.set(this.id,n),n};return new T(u,I("mergeMemo",this))}then(u){if(Au(this,u))return wu([this,u],"",e=>[e==null?void 0:e[0],e==null?void 0:e[1]]);const D=e=>{const n=this.parser(e);if(!n.isError){const r=u.parser(n);if(!r.isError)return r.ok([n.value,r.value])}return H(e),e.err(void 0)};return new T(D,I("then",this,this,u))}or(u){if(Au(this,u))return wu([this,u],"|");const D=e=>{const n=this.parser(e);return n.isError?u.parser(e):n};return new T(D,I("or",this,this,u))}chain(u,D=!1){const e=n=>{const r=this.parser(n);return r.isError?r:r.value||D?u(r.value).parser(r):n};return new T(e,I("chain",this,u))}map(u,D=!1){const e=n=>{const r=this.parser(n);return!r.isError||D?r.ok(u(r.value)):r};return new T(e,I("map",this))}mapState(u){const D=e=>{const n=this.parser(e);return u(n)};return new T(D,I("mapState",this))}skip(u){const D=e=>{const n=this.parser(e);if(!n.isError){const r=u.parser(n);if(!r.isError)return r.ok(n.value)}return H(e),e.err(void 0)};return new T(D,I("skip",this,u))}next(u){const D=this.then(u).map(([,e])=>e);return D.context=I("next",this,u),D}opt(){const u=D=>{const e=this.parser(D);return e.isError?(H(D),D.ok(void 0)):e};return new T(u,I("opt",this))}not(u){const D=n=>this.parser(n).isError?(H(n),n.ok(n.value)):n.err(void 0),e=n=>{const r=this.parser(n);return r.isError?(H(n),r):u.parser(n).isError?r:(H(n),n.err(void 0))};return new T(u?e:D,I("not",this,u))}wrap(u,D,e=!0){if(!e)return pu(u,this,D);if(Au(u,this,D))return dD(u,this,D);const n=u.next(this).skip(D);return n.context=I("wrap",this,u,D),n}trim(u=Xu,D=!0){var e;if(!D)return pu(u,this,u);if(((e=u.context)==null?void 0:e.name)==="whitespace"){if(Au(this,u))return wu([u,this,u],"",r=>r==null?void 0:r[2]);const n=r=>{const l=Hu(r),f=this.parser(l);return f.isError?(H(r),r.err(void 0)):Hu(f)};return new T(n,I("trimWhitespace",this))}return this.wrap(u,u)}many(u=0,D=1/0){const e=n=>{const r=[];let l=n;for(let f=0;f<D;f+=1){const h=this.parser(l);if(h.isError)break;r.push(h.value),l=h}return r.length>=u?l.ok(r):(H(n),n.err([]))};return new T(e,I("many",this,u,D))}sepBy(u,D=0,e=1/0){const n=r=>{const l=[];let f=r;for(let h=0;h<e;h+=1){const k=this.parser(f);if(k.isError)break;f=k,l.push(f.value);const j=u.parser(f);if(j.isError)break;f=j}return l.length>D?f.ok(l):(H(r),r.err([]))};return new T(n,I("sepBy",this,u))}eof(){const u=this.skip(Yu());return u.context=I("eof",this),u}debug(u="",D=!1,e=console.log){return gD(this,u,D,e)}toString(){return Vu(this)}static lazy(u){const D=e=>Lu(u).parser(e);return new T(D,I("lazy",void 0,u))}}function Au(...t){return t.every(u=>{var D,e,n,r;return(((D=u.context)==null?void 0:D.name)==="string"||((e=u.context)==null?void 0:e.name)==="regex"||((n=u.context)==null?void 0:n.name)==="whitespace")&&((r=u.context)==null?void 0:r.args)})}function mD(t){var u,D,e,n,r;if(((u=t.context)==null?void 0:u.name)==="string")return(D=t.context)==null?void 0:D.args[0].replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");if(((e=t.context)==null?void 0:e.name)==="regex"||((n=t.context)==null?void 0:n.name)==="whitespace")return(r=t.context)==null?void 0:r.args[0].source}function wu(t,u="",D){const e=t.map(l=>`(${mD(l)})`).join(u),n=new RegExp(e),r=iu(n,D);return u!=="|"&&(r.context=I("regexConcat",this,n)),r}function dD(t,u,D){const e=wu([t,u,D],"",n=>n==null?void 0:n[2]);return e.context.name="regexWrap",e}function Yu(){const t=u=>u.offset>=u.src.length?u.ok(void 0):(H(u),u.err());return new T(t,I("eof",void 0))}function U(t,u,D){const e=D.value.bind(t);D.value=function(){const n=r=>Lu(e).parser(r);return new T(n,I("lazy",void 0,e))}}function fu(...t){if(Au(...t))return wu(t,"|");const u=D=>{for(const e of t){const n=e.parser(D);if(!n.isError)return n}return H(D),D.err(void 0)};return new T(t.length===1?t[0].parser:u,I("any",void 0,...t))}function pu(...t){const u=D=>{const e=[];for(const n of t){const r=n.parser(D);if(r.isError)return r;r.value!==void 0&&e.push(r.value),D=r}return H(D),D.ok(e)};return new T(t.length===1?t[0].parser:u,I("all",void 0,...t))}function O(t){const u=D=>{if(D.offset>=D.src.length)return D.err(void 0);const e=D.src.slice(D.offset,D.offset+t.length);return e===t?D.ok(e,e.length):(H(D),D.err(void 0))};return new T(u,I("string",void 0,t))}function iu(t,u=D=>D==null?void 0:D[0]){const D=t.flags.replace(/y/g,""),e=new RegExp(t,D+"y"),n=r=>{if(r.offset>=r.src.length)return r.err(void 0);e.lastIndex=r.offset;const l=u(r.src.match(e));return l?r.ok(l,e.lastIndex-r.offset):l===""?r.ok(void 0):(H(r),r.err(void 0))};return new T(n,I("regex",void 0,t))}const Ju=/\s*/y,Hu=t=>{var u;if(t.offset>=t.src.length)return t;Ju.lastIndex=t.offset;const D=((u=t.src.match(Ju))==null?void 0:u[0])??"";return t.ok(t.value,D.length)},Xu=iu(/\s*/);Xu.context.name="whitespace";var yD=Object.defineProperty,vD=(t,u,D)=>u in t?yD(t,u,{enumerable:!0,configurable:!0,writable:!0,value:D}):t[u]=D,AD=(t,u,D)=>(vD(t,typeof u!="symbol"?u+"":u,D),D),bD=Object.defineProperty,wD=Object.getOwnPropertyDescriptor,V=(t,u,D,e)=>{for(var n=e>1?void 0:e?wD(u,D):u,r=t.length-1,l;r>=0;r--)(l=t[r])&&(n=(e?l(u,D,n):l(n))||n);return e&&n&&bD(u,D,n),n};const Qu={"|":"alternation",",":"concatenation","-":"minus","<<":"skip",">>":"next","*":"many","+":"many1","?":"optional","?w":"optionalWhitespace"},xD=([t,u])=>u.length===0?t:u.reduce((D,[e,n])=>({type:Qu[e],value:[D,n]}),t),kD=([t,u])=>u===void 0?t:{type:Qu[u],value:t};function SD(t){return t.mapState(u=>(u.value&&(u.value.column=u.getColumnNumber(),u.value.line=u.getLineNumber(),u.value.offset=u.offset),u))}const _D={debug:!1,comments:!0};class J{constructor(u){AD(this,"options"),this.options={..._D,...u??{}}}identifier(){return iu(/[_a-zA-Z][_a-zA-Z0-9]*/).trim()}literal(){return this.trimBigComment(fu(iu(/[^"]+/).wrap(O('"'),O('"')),iu(/[^']+/).wrap(O("'"),O("'"))).map(u=>({type:"literal",value:u})))}epsilon(){return fu(O("epsilon"),O("Îµ")).trim().map(()=>({type:"epsilon",value:void 0}))}nonterminal(){return this.identifier().map(u=>({type:"nonterminal",value:u}))}bigComment(){return iu(/\/\*[^\*]*\*\//).trim()}comment(){return iu(/\/\/.*/).or(this.bigComment()).trim()}trimBigComment(u){return u.trim(this.bigComment().many(),!1).map(([D,e,n])=>(e.comment={left:D,right:n},e))}group(){return this.rhs().trim().wrap(O("("),O(")")).map(u=>({type:"group",value:u}))}regex(){return iu(/[^\/]*/).wrap(O("/"),O("/")).then(iu(/[gimuy]*/).opt()).map(([u,D])=>({type:"regex",value:new RegExp(u,D)}))}optionalGroup(){return this.rhs().trim().wrap(O("["),O("]")).map(u=>({type:"optional",value:{type:"group",value:u}}))}manyGroup(){return this.rhs().trim().wrap(O("{"),O("}")).map(u=>({type:"many",value:{type:"group",value:u}}))}lhs(){return this.identifier()}term(){return SD(fu(this.epsilon(),this.group(),this.optionalGroup(),this.manyGroup(),this.nonterminal(),this.literal(),this.regex()))}factor(){return this.trimBigComment(pu(this.term(),fu(O("?w").trim(),O("?").trim(),O("*").trim(),O("+").trim()).opt()).map(kD))}binaryFactor(){return pu(this.factor(),pu(fu(O("<<").trim(),O(">>").trim(),O("-").trim()),this.factor()).many()).map(xD)}concatenation(){return this.binaryFactor().sepBy(O(",").trim()).map(u=>u.length===1?u[0]:{type:"concatenation",value:u})}alternation(){return this.concatenation().sepBy(O("|").trim()).map(u=>u.length===1?u[0]:{type:"alternation",value:u})}rhs(){return this.alternation()}productionRule(){return pu(this.lhs(),O("=").trim(),this.rhs(),fu(O(";"),O(".")).trim()).map(([u,,D])=>({name:u,expression:D}))}grammar(){return this.productionRule().trim(this.comment().many(),!1).map(([u,D,e])=>(D.comment={above:u,below:e},D)).many(1)}}V([U],J.prototype,"bigComment",1);V([U],J.prototype,"comment",1);V([U],J.prototype,"group",1);V([U],J.prototype,"regex",1);V([U],J.prototype,"optionalGroup",1);V([U],J.prototype,"manyGroup",1);V([U],J.prototype,"lhs",1);V([U],J.prototype,"term",1);V([U],J.prototype,"factor",1);V([U],J.prototype,"binaryFactor",1);V([U],J.prototype,"concatenation",1);V([U],J.prototype,"alternation",1);V([U],J.prototype,"rhs",1);V([U],J.prototype,"productionRule",1);V([U],J.prototype,"grammar",1);function OD(t){const u=new Set,D=[];function e(r,l){if(l.has(r)||u.has(r))return;l.add(r);const f=t.get(r);if(!f)return;const h=f.expression;if(h.type==="nonterminal")e(h.value,l);else if(h.value instanceof Array)for(const k of h.value)k.type==="nonterminal"&&e(k.value,l);u.add(r),l.delete(r),D.unshift(t.get(r))}for(const[r]of t)e(r,new Set);const n=new Map;for(const r of D)n.set(r.name,r);return n}const bu=(t,u)=>{if(!(!(t!=null&&t.type)||!(u!=null&&u.type)||t.type!==u.type))switch(t.type){case"literal":case"nonterminal":return t.value!==u.value?void 0:[t,{type:"epsilon"},{type:"epsilon"}];case"group":case"optional":case"optionalWhitespace":case"many":case"many1":{const D=bu(t.value,u.value);return D?[{type:t.type,value:D[0]},{type:t.type,value:D[1]},{type:t.type,value:D[2]}]:void 0}case"concatenation":{const D=t.value.map((h,k)=>bu(t.value[k],u.value[k]));if(D.some(h=>h===void 0))return;const e=D.map(h=>h[0]),n=D.map(h=>h[1]),r=D.map(h=>h[2]),l=e.lastIndexOf(null);return l===e.length-1?void 0:[{type:"concatenation",value:e.slice(l+1)},{type:"concatenation",value:n},{type:"concatenation",value:r}]}case"alternation":for(const D of t.value){const e=bu(D,u);if(e)return e}for(const D of u.value){const e=bu(t,D);if(e)return e}return}},mu=(t,u)=>{if(t.type!==u.type)return!1;switch(t.type){case"literal":case"nonterminal":return t.value===u.value;case"group":case"optional":case"many":case"many1":return mu(t.value,u.value);case"minus":case"skip":case"next":return mu(t.value[0],u.value[0])&&mu(t.value[1],u.value[1]);case"concatenation":return t.value.every((D,e)=>mu(D,u.value[e]));case"alternation":return t.value.some((D,e)=>mu(D,u.value[e]));case"epsilon":return!0}};function jD(t,u){const D=new Map;let e=null;for(let n=0;n<u.value.length-1;n++){const r=u.value[n],l=u.value[n+1],f=bu(r,l);if(f){const[h,k,j]=f;e!==null&&mu(h,e)?D.get(e).push(j):(D.set(h,[k,j]),e=h),n===u.value.length-2&&u.value.shift(),u.value.shift(),n-=1}}for(const[n,r]of D){const f={type:"concatenation",value:[{type:"group",value:{type:"alternation",value:r}},{type:"group",value:n}]};u.value.push(f)}}const ID=(t,u,D)=>{const e=[],n=[],r={type:"nonterminal",value:D};for(let l=0;l<u.value.length;l++){const f=u.value[l];f.type==="concatenation"&&f.value[0].value===t?n.push({type:"concatenation",value:[...f.value.slice(1),r]}):e.push({type:"concatenation",value:[f,r]})}return n.length===0?[void 0,void 0]:(n.push({type:"epsilon"}),[{type:"alternation",value:e},{type:"alternation",value:n}])};function ND(t){const u=new Map;let D=0;for(const[e,n]of t){const{expression:r}=n;if(r.type==="alternation"){const l=`${e}_${D++}`,[f,h]=ID(e,r,l);f&&(u.set(l,{name:l,expression:h}),u.set(e,{name:e,expression:f,comment:n.comment}))}}if(u.size===0)return t;for(const[e,n]of u)t.set(e,n);for(const[e,n]of t){const{expression:r}=n;r.type==="alternation"&&jD(e,r)}}function TD(t){const u=OD(t);return ND(u),u}function $D(t){const u=new J().grammar().eof(),D=u.parse(t);if(!D)return[u];const e=D.reduce((n,r,l)=>n.set(r.name,r),new Map);return[u,e]}function LD(t){function u(e,n){var r,l;switch(n.type){case"literal":return O(n.value);case"nonterminal":const f=T.lazy(()=>D[n.value]);return f.context.name=n.value,f;case"epsilon":return Yu().opt();case"group":return u(e,n.value);case"regex":return iu(n.value);case"optionalWhitespace":return u(e,n.value).trim();case"optional":return u(e,n.value).opt();case"many":return u(e,n.value).many();case"many1":return u(e,n.value).many(1);case"skip":return u(e,n.value[0]).skip(u(e,n.value[1]));case"next":return u(e,n.value[0]).next(u(e,n.value[1]));case"minus":return u(e,n.value[0]).not(u(e,n.value[1]));case"concatenation":{const h=n.value.map(k=>u(e,k));return((l=(r=h.at(-1))==null?void 0:r.context)==null?void 0:l.name)==="eof"&&h.pop(),pu(...h)}case"alternation":return fu(...n.value.map(h=>u(e,h)))}}const D={};for(const[e,n]of t.entries())D[e]=u(e,n.expression);return D}function MD(t,u=!1){let[D,e]=$D(t);return u&&(e=TD(e)),[LD(e),e]}const RD={language:"bbnf",scheme:"file"};let _u;const $u=new Map,GD=au.commands.registerCommand("extension.testGrammar",async()=>{const t=au.window.activeTextEditor;if(!t)return;const u=t.document,D=u.getText();if(D.length===0)return;let e,n;try{[e,n]=MD(D)}catch{return}const r=u.uri.toString();$u.has(r)||$u.set(r,{nonterminal:"",testString:""});const l=$u.get(r),f=await au.window.showInputBox({prompt:"Enter a nonterminal to test",placeHolder:"Type here...",value:l.nonterminal});if(!f||!e[f]){au.window.showErrorMessage(`Nonterminal ${f} not found`);return}l.nonterminal=f;const h=await au.window.showInputBox({prompt:"Enter your test string",placeHolder:"Type here...",value:l.testString});if(!h){au.window.showErrorMessage("No test string provided");return}l.testString=h;const j=e[f].parse(h);j?au.window.showInformationMessage(`Matched âœ“: ${j}`):au.window.showInformationMessage("No match X")});function WD(t){const u=t.asAbsolutePath(fD.join("server","out","server.js")),D={run:{module:u,transport:Tu.TransportKind.ipc},debug:{module:u,transport:Tu.TransportKind.ipc}},e={documentSelector:[RD],synchronize:{fileEvents:au.workspace.createFileSystemWatcher("**/.clientrc")}};_u=new Tu.LanguageClient("languageServerExample","Language Server Example",D,e),_u.start(),t.subscriptions.push(GD)}function qD(){if(_u)return _u.stop()}exports.activate=WD;exports.deactivate=qD;
//# sourceMappingURL=extension.js.map
